"use strict";(self.webpackChunkFirebaseAuthentication1=self.webpackChunkFirebaseAuthentication1||[]).push([[179],{2011:function(St,He,U){U.d(He,{Dh:function(){return Te},GT:function(){return J},cc:function(){return Fe},hO:function(){return be},on:function(){return Ee},pX:function(){return y},xv:function(){return Q}});var ie=U(7685),pe=U(3144),A=U(5671),R=U(4902),j=U(5e3),se=U(127),P=U(5813);St=U.hmd(St);var ye=["ngOnDestroy"],y=function(Se,Qe,tt){var Je=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(Se,{get:function(Ze,oe){return tt.runOutsideAngular(function(){var $;if(Se[oe])return!(null===($=null==Je?void 0:Je.spy)||void 0===$)&&$.get&&Je.spy.get(oe,Se[oe]),Se[oe];if(ye.indexOf(oe)>-1)return function(){};var te=Qe.toPromise().then(function(ue){var we=ue&&ue[oe];return"function"==typeof we?we.bind(ue):we&&we.then?we.then(function($e){return tt.run(function(){return $e})}):tt.run(function(){return we})});return new Proxy(function(){},{get:function(we,$e){return te[$e]},apply:function(we,$e,pt){return te.then(function(It){var at,Be=It&&It.apply(void 0,(0,R.Z)(pt));return!(null===(at=null==Je?void 0:Je.spy)||void 0===at)&&at.apply&&Je.spy.apply(oe,pt,Be),Be})}})})}})},J=function(Se,Qe){Qe.forEach(function(tt){Object.getOwnPropertyNames(tt.prototype||tt).forEach(function(Je){Object.defineProperty(Se.prototype,Je,Object.getOwnPropertyDescriptor(tt.prototype||tt,Je))})})},G=(0,pe.Z)(function De(Se){return(0,A.Z)(this,De),Se}),Te=new j.OlP("angularfire2.app.options"),Q=new j.OlP("angularfire2.app.name");function Ee(De,Se,Qe){var Je="object"==typeof Qe&&Qe||{};Je.name=Je.name||"string"==typeof Qe&&Qe||"[DEFAULT]";var Ze=se.Z.apps.filter(function($){return $&&$.name===Je.name})[0]||Se.runOutsideAngular(function(){return se.Z.initializeApp(De,Je)});try{if(JSON.stringify(De)!==JSON.stringify(Ze.options)){var oe=!!St.hot;Ae("error","".concat(Ze.name," Firebase App already initialized with different options").concat(oe?", you may need to reload as Firebase is not HMR aware.":"."))}}catch($){}return new G(Ze)}var Ae=function(Se){if((0,j.X6Q)()&&"undefined"!=typeof console){for(var Qe,tt=arguments.length,Je=new Array(tt>1?tt-1:0),At=1;At<tt;At++)Je[At-1]=arguments[At];(Qe=console)[Se].apply(Qe,Je)}},Me={provide:G,useFactory:Ee,deps:[Te,j.R0b,[new j.FiY,Q]]},be=function(){var De=function(){function Se(Qe){(0,A.Z)(this,Se),se.Z.registerVersion("angularfire",P.q4.full,"core"),se.Z.registerVersion("angularfire",P.q4.full,"app-compat"),se.Z.registerVersion("angular",j.q4F.full,Qe.toString())}return(0,pe.Z)(Se,null,[{key:"initializeApp",value:function(tt,Je){return{ngModule:Se,providers:[{provide:Te,useValue:tt},{provide:Q,useValue:Je}]}}}]),Se}();return De.\u0275fac=function(Qe){return new(Qe||De)(j.LFG(j.Lbi))},De.\u0275mod=j.oAB({type:De}),De.\u0275inj=j.cJS({providers:[Me]}),De}();function Fe(De,Se,Qe,tt,Je){var At=globalThis.\u0275AngularfireInstanceCache.find(function(ue){return ue[0]===De})||[],Ze=(0,ie.Z)(At,3),oe=Ze[1],$=Ze[2];if(oe)return function Ue(De,Se){try{return De.toString()===Se.toString()}catch(Qe){return De===Se}}(Je,$)||(je("error","".concat(Se," was already initialized on the ").concat(Qe," Firebase App with different settings.").concat(Ge?" You may need to reload as Firebase is not HMR aware.":"")),je("warn",{is:Je,was:$})),oe;var te=tt();return globalThis.\u0275AngularfireInstanceCache.push([De,te,Je]),te}var Ge=!!St.hot,je=function(Se){if((0,j.X6Q)()&&"undefined"!=typeof console){for(var Qe,tt=arguments.length,Je=new Array(tt>1?tt-1:0),At=1;At<tt;At++)Je[At-1]=arguments[At];(Qe=console)[Se].apply(Qe,Je)}};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:function(St,He,U){U.d(He,{q4:function(){return Fp},iC:function(){return du},fc:function(){return ka},HU:function(){return Ec},vb:function(){return _a},JM:function(){return Qa},u3:function(){return zi}});var Me,ie=U(5671),pe=U(3144),A=U(5e3),R=U(5867),j=U(4165),se=U(7685),P=U(5861),ye=U(4942),y=U(9681),J=U(2090),G=U(4859),Te=U(1877),Q=U(7762),Ee=U(4902),Ae=U(6256),be="@firebase/installations",Fe="0.5.12",Ge="w:".concat(Fe),je="FIS_v2",Je=((0,ye.Z)(Me={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,ye.Z)(Me,"not-registered","Firebase Installation is not registered."),(0,ye.Z)(Me,"installation-not-found","Firebase Installation not found."),(0,ye.Z)(Me,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,ye.Z)(Me,"app-offline","Could not process request. Application offline."),(0,ye.Z)(Me,"delete-pending-registration","Can't delete installation while there is a pending registration request."),Me),At=new J.LL("installations","Installations",Je);function Ze(N){return N instanceof J.ZR&&N.code.includes("request-failed")}function oe(N){var Z=N.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(Z,"/installations")}function $(N){return{token:N.token,requestStatus:2,expiresIn:at(N.expiresIn),creationTime:Date.now()}}function te(N,Z){return ue.apply(this,arguments)}function ue(){return(ue=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,B.json();case 2:return fe.abrupt("return",At.create("request-failed",{requestName:Z,serverCode:(z=fe.sent.error).code,serverMessage:z.message,serverStatus:z.status}));case 5:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function we(N){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey})}function $e(N,Z){var B=Z.refreshToken,H=we(N);return H.append("Authorization",function Be(N){return"".concat(je," ").concat(N)}(B)),H}function pt(N){return It.apply(this,arguments)}function It(){return(It=(0,P.Z)((0,j.Z)().mark(function N(Z){var B;return(0,j.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Z();case 2:if(!((B=z.sent).status>=500&&B.status<600)){z.next=5;break}return z.abrupt("return",Z());case 5:return z.abrupt("return",B);case 6:case"end":return z.stop()}},N)}))).apply(this,arguments)}function at(N){return Number(N.replace("s","000"))}function mt(N,Z){return rn.apply(this,arguments)}function rn(){return(rn=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z,ee,fe,de,qe,st,Ne,Ut,kn,Wt;return(0,j.Z)().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(z=Z.heartbeatServiceProvider,ee=B.fid,fe=oe(H=Z.appConfig),de=we(H),!(qe=z.getImmediate({optional:!0}))){Jt.next=10;break}return Jt.next=8,qe.getHeartbeatsHeader();case 8:(st=Jt.sent)&&de.append("x-firebase-client",st);case 10:return Ne={method:"POST",headers:de,body:JSON.stringify({fid:ee,authVersion:je,appId:H.appId,sdkVersion:Ge})},Jt.next=14,pt(function(){return fetch(fe,Ne)});case 14:if(!(Ut=Jt.sent).ok){Jt.next=23;break}return Jt.next=18,Ut.json();case 18:return Wt={fid:(kn=Jt.sent).fid||ee,registrationStatus:2,refreshToken:kn.refreshToken,authToken:$(kn.authToken)},Jt.abrupt("return",Wt);case 23:return Jt.next=25,te("Create Installation",Ut);case 25:throw Jt.sent;case 26:case"end":return Jt.stop()}},N)}))).apply(this,arguments)}function Tn(N){return new Promise(function(Z){setTimeout(Z,N)})}var Rr=/^[cdef][\w-]{21}$/;function Hr(){try{var N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;var B=function ci(N){return function Wn(N){return btoa(String.fromCharCode.apply(String,(0,Ee.Z)(N))).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return Rr.test(B)?B:""}catch(H){return""}}function kr(N){return"".concat(N.appName,"!").concat(N.appId)}var ei=new Map;function Ia(N,Z){var B=kr(N);pa(B,Z),function xu(N,Z){var B=function un(){return!Yi&&"BroadcastChannel"in self&&((Yi=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(N){pa(N.data.key,N.data.fid)}),Yi}();B&&B.postMessage({key:N,fid:Z}),function lr(){0===ei.size&&Yi&&(Yi.close(),Yi=null)}()}(B,Z)}function pa(N,Z){var B=ei.get(N);if(B){var z,H=(0,Q.Z)(B);try{for(H.s();!(z=H.n()).done;)(0,z.value)(Z)}catch(fe){H.e(fe)}finally{H.f()}}}var Yi=null;var Wr="firebase-installations-store",Pr=null;function Ca(){return Pr||(Pr=(0,Ae.X3)("firebase-installations-database",1,{upgrade:function(Z,B){0===B&&Z.createObjectStore(Wr)}})),Pr}function Jn(N,Z){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,ee,fe,de;return(0,j.Z)().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return H=kr(Z),st.next=3,Ca();case 3:return ee=st.sent.transaction(Wr,"readwrite"),fe=ee.objectStore(Wr),st.next=8,fe.get(H);case 8:return de=st.sent,st.next=11,fe.put(B,H);case 11:return st.next=13,ee.done;case 13:return(!de||de.fid!==B.fid)&&Ia(Z,B.fid),st.abrupt("return",B);case 15:case"end":return st.stop()}},N)}))).apply(this,arguments)}function jn(N){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return B=kr(Z),fe.next=3,Ca();case 3:return z=fe.sent.transaction(Wr,"readwrite"),fe.next=7,z.objectStore(Wr).delete(B);case 7:return fe.next=9,z.done;case 9:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function fi(N,Z){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,ee,fe,de,qe;return(0,j.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return H=kr(Z),nt.next=3,Ca();case 3:return ee=nt.sent.transaction(Wr,"readwrite"),fe=ee.objectStore(Wr),nt.next=8,fe.get(H);case 8:if(void 0!==(qe=B(de=nt.sent))){nt.next=15;break}return nt.next=13,fe.delete(H);case 13:nt.next=17;break;case 15:return nt.next=17,fe.put(qe,H);case 17:return nt.next=19,ee.done;case 19:return qe&&(!de||de.fid!==qe.fid)&&Ia(Z,qe.fid),nt.abrupt("return",qe);case 21:case"end":return nt.stop()}},N)}))).apply(this,arguments)}function xt(N){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H;return(0,j.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,fi(Z.appConfig,function(fe){var de=Hn(fe),qe=Ot(Z,de);return B=qe.registrationPromise,qe.installationEntry});case 2:if(""!==(H=ee.sent).fid){ee.next=8;break}return ee.next=6,B;case 6:return ee.t0=ee.sent,ee.abrupt("return",{installationEntry:ee.t0});case 8:return ee.abrupt("return",{installationEntry:H,registrationPromise:B});case 9:case"end":return ee.stop()}},N)}))).apply(this,arguments)}function Hn(N){return zr(N||{fid:Hr(),registrationStatus:0})}function Ot(N,Z){if(0===Z.registrationStatus){if(!navigator.onLine)return{installationEntry:Z,registrationPromise:Promise.reject(At.create("app-offline"))};var H={fid:Z.fid,registrationStatus:1,registrationTime:Date.now()},z=function an(N,Z){return ti.apply(this,arguments)}(N,H);return{installationEntry:H,registrationPromise:z}}return 1===Z.registrationStatus?{installationEntry:Z,registrationPromise:pr(N)}:{installationEntry:Z}}function ti(){return(ti=(0,P.Z)((0,j.Z)().mark(function N(Z,B){return(0,j.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.prev=0,ee.next=3,mt(Z,B);case 3:return ee.abrupt("return",Jn(Z.appConfig,ee.sent));case 7:if(ee.prev=7,ee.t0=ee.catch(0),!Ze(ee.t0)||409!==ee.t0.customData.serverCode){ee.next=14;break}return ee.next=12,jn(Z.appConfig);case 12:ee.next=16;break;case 14:return ee.next=16,Jn(Z.appConfig,{fid:B.fid,registrationStatus:0});case 16:throw ee.t0;case 17:case"end":return ee.stop()}},N,null,[[0,7]])}))).apply(this,arguments)}function pr(N){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z,ee;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,xi(Z.appConfig);case 2:B=de.sent;case 3:if(1!==B.registrationStatus){de.next=11;break}return de.next=6,Tn(100);case 6:return de.next=8,xi(Z.appConfig);case 8:B=de.sent,de.next=3;break;case 11:if(0!==B.registrationStatus){de.next=22;break}return de.next=14,xt(Z);case 14:if(z=(H=de.sent).installationEntry,!(ee=H.registrationPromise)){de.next=21;break}return de.abrupt("return",ee);case 21:return de.abrupt("return",z);case 22:return de.abrupt("return",B);case 23:case"end":return de.stop()}},N)}))).apply(this,arguments)}function xi(N){return fi(N,function(Z){if(!Z)throw At.create("installation-not-found");return zr(Z)})}function zr(N){return function sr(N){return 1===N.registrationStatus&&N.registrationTime+1e4<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function Ht(N,Z){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z,ee,fe,de,qe,nt,Ne,kn;return(0,j.Z)().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:if(z=Z.heartbeatServiceProvider,ee=Rn(H=Z.appConfig,B),fe=$e(H,B),!(de=z.getImmediate({optional:!0}))){Xt.next=9;break}return Xt.next=7,de.getHeartbeatsHeader();case 7:(qe=Xt.sent)&&fe.append("x-firebase-client",qe);case 9:return nt={method:"POST",headers:fe,body:JSON.stringify({installation:{sdkVersion:Ge,appId:H.appId}})},Xt.next=13,pt(function(){return fetch(ee,nt)});case 13:if(!(Ne=Xt.sent).ok){Xt.next=22;break}return Xt.next=17,Ne.json();case 17:return kn=$(Xt.sent),Xt.abrupt("return",kn);case 22:return Xt.next=24,te("Generate Auth Token",Ne);case 24:throw Xt.sent;case 25:case"end":return Xt.stop()}},N)}))).apply(this,arguments)}function Rn(N,Z){var B=Z.fid;return"".concat(oe(N),"/").concat(B,"/authTokens:generate")}function Ke(N){return _e.apply(this,arguments)}function _e(){return _e=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z,fe=arguments;return(0,j.Z)().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return B=fe.length>1&&void 0!==fe[1]&&fe[1],qe.next=3,fi(Z.appConfig,function(st){if(!dt(st))throw At.create("not-registered");var nt=st.authToken;if(!B&&Zt(nt))return st;if(1===nt.requestStatus)return H=le(Z,B),st;if(!navigator.onLine)throw At.create("app-offline");var Ne=Gt(st);return H=Oe(Z,Ne),Ne});case 3:if(z=qe.sent,!H){qe.next=10;break}return qe.next=7,H;case 7:qe.t0=qe.sent,qe.next=11;break;case 10:qe.t0=z.authToken;case 11:return qe.abrupt("return",qe.t0);case 13:case"end":return qe.stop()}},N)})),_e.apply(this,arguments)}function le(N,Z){return ve.apply(this,arguments)}function ve(){return(ve=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,Re(Z.appConfig);case 2:H=fe.sent;case 3:if(1!==H.authToken.requestStatus){fe.next=11;break}return fe.next=6,Tn(100);case 6:return fe.next=8,Re(Z.appConfig);case 8:H=fe.sent,fe.next=3;break;case 11:if(0!==(z=H.authToken).requestStatus){fe.next=16;break}return fe.abrupt("return",Ke(Z,B));case 16:return fe.abrupt("return",z);case 17:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function Re(N){return fi(N,function(Z){if(!dt(Z))throw At.create("not-registered");return function me(N){return 1===N.requestStatus&&N.requestTime+1e4<Date.now()}(Z.authToken)?Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}}):Z})}function Oe(N,Z){return et.apply(this,arguments)}function et(){return(et=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z,ee;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.prev=0,de.next=3,Ht(Z,B);case 3:return H=de.sent,z=Object.assign(Object.assign({},B),{authToken:H}),de.next=7,Jn(Z.appConfig,z);case 7:return de.abrupt("return",H);case 10:if(de.prev=10,de.t0=de.catch(0),!Ze(de.t0)||401!==de.t0.customData.serverCode&&404!==de.t0.customData.serverCode){de.next=17;break}return de.next=15,jn(Z.appConfig);case 15:de.next=20;break;case 17:return ee=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}),de.next=20,Jn(Z.appConfig,ee);case 20:throw de.t0;case 21:case"end":return de.stop()}},N,null,[[0,10]])}))).apply(this,arguments)}function dt(N){return void 0!==N&&2===N.registrationStatus}function Zt(N){return 2===N.requestStatus&&!function Vt(N){var Z=Date.now();return Z<N.creationTime||N.creationTime+N.expiresIn<Z+36e5}(N)}function Gt(N){var Z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:Z})}function he(){return(he=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z,ee;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return B=Z,de.next=3,xt(B);case 3:return z=(H=de.sent).installationEntry,(ee=H.registrationPromise)?ee.catch(console.error):Ke(B).catch(console.error),de.abrupt("return",z.fid);case 8:case"end":return de.stop()}},N)}))).apply(this,arguments)}function Le(){return Le=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,ee=arguments;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return B=ee.length>1&&void 0!==ee[1]&&ee[1],H=Z,de.next=4,vt(H);case 4:return de.next=6,Ke(H,B);case 6:return de.abrupt("return",de.sent.token);case 8:case"end":return de.stop()}},N)})),Le.apply(this,arguments)}function vt(N){return it.apply(this,arguments)}function it(){return(it=(0,P.Z)((0,j.Z)().mark(function N(Z){var H;return(0,j.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,xt(Z);case 2:if(!(H=ee.sent.registrationPromise)){ee.next=7;break}return ee.next=7,H;case 7:case"end":return ee.stop()}},N)}))).apply(this,arguments)}function ni(N){return At.create("missing-app-config-values",{valueName:N})}var Mr="installations",xa=function(Z){var B=Z.getProvider("app").getImmediate(),H=function nr(N){if(!N||!N.options)throw ni("App Configuration");if(!N.name)throw ni("App Name");for(var B=0,H=["projectId","apiKey","appId"];B<H.length;B++){var z=H[B];if(!N.options[z])throw ni(z)}return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(B);return{app:B,appConfig:H,heartbeatServiceProvider:(0,y._getProvider)(B,"heartbeat"),_delete:function(){return Promise.resolve()}}},Bi=function(Z){var B=Z.getProvider("app").getImmediate(),H=(0,y._getProvider)(B,Mr).getImmediate(),z={getId:function(){return function Ie(N){return he.apply(this,arguments)}(H)},getToken:function(fe){return function ke(N){return Le.apply(this,arguments)}(H,fe)}};return z};(function Ft(){(0,y._registerComponent)(new G.wA(Mr,xa,"PUBLIC")),(0,y._registerComponent)(new G.wA("installations-internal",Bi,"PRIVATE"))})(),(0,y.registerVersion)(be,Fe),(0,y.registerVersion)(be,Fe,"esm2017");var zt,fn="@firebase/remote-config",Xs=((0,ye.Z)(zt={},"registration-window","Undefined window object. This SDK only supports usage in a browser environment."),(0,ye.Z)(zt,"registration-project-id","Undefined project identifier. Check Firebase app initialization."),(0,ye.Z)(zt,"registration-api-key","Undefined API key. Check Firebase app initialization."),(0,ye.Z)(zt,"registration-app-id","Undefined app identifier. Check Firebase app initialization."),(0,ye.Z)(zt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"fetch-client-network","Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"fetch-timeout",'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),(0,ye.Z)(zt,"fetch-throttle",'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),(0,ye.Z)(zt,"fetch-client-parse","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,ye.Z)(zt,"fetch-status","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,ye.Z)(zt,"indexed-db-unavailable","Indexed DB is not supported by current browser"),zt),In=new J.LL("remoteconfig","Remote Config",Xs),tu=function(){function N(Z,B,H,z){(0,ie.Z)(this,N),this.client=Z,this.storage=B,this.storageCache=H,this.logger=z}return(0,pe.Z)(N,[{key:"isCachedDataFresh",value:function(B,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var z=Date.now()-H,ee=z<=B;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(z,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(B,".")+" Is cache hit: ".concat(ee,".")),ee}},{key:"fetch",value:(Z=(0,P.Z)((0,j.Z)().mark(function H(z){var fe,de,qe,st,nt;return(0,j.Z)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.next=2,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);case 2:if(fe=(0,se.Z)(Ut.sent,2),de=fe[0],!(qe=fe[1])||!this.isCachedDataFresh(z.cacheMaxAgeMillis,de)){Ut.next=8;break}return Ut.abrupt("return",qe);case 8:return z.eTag=qe&&qe.eTag,Ut.next=11,this.client.fetch(z);case 11:return st=Ut.sent,nt=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===st.status&&nt.push(this.storage.setLastSuccessfulFetchResponse(st)),Ut.next=16,Promise.all(nt);case 16:return Ut.abrupt("return",st);case 17:case"end":return Ut.stop()}},H,this)})),function B(H){return Z.apply(this,arguments)})}]),N;var Z}();function zl(){var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return N.languages&&N.languages[0]||N.language}var cr=function(){function N(Z,B,H,z,ee,fe){(0,ie.Z)(this,N),this.firebaseInstallations=Z,this.sdkVersion=B,this.namespace=H,this.projectId=z,this.apiKey=ee,this.appId=fe}return(0,pe.Z)(N,[{key:"fetch",value:function(Z){function B(H){return Z.apply(this,arguments)}return B.toString=function(){return Z.toString()},B}(function(){var Z=(0,P.Z)((0,j.Z)().mark(function B(H){var z,ee,fe,qe,st,nt,Ne,Ut,kn,Wt,Xt,Jt,Yt,Sn,wi,Ri,Sr,$n,Ma,vu;return(0,j.Z)().wrap(function(qn){for(;;)switch(qn.prev=qn.next){case 0:return qn.next=2,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]);case 2:return qe=(0,se.Z)(qn.sent,2),st=qe[0],nt=qe[1],Ne=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",Ut="".concat(Ne,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),kn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},Wt={sdk_version:this.sdkVersion,app_instance_id:st,app_instance_id_token:nt,app_id:this.appId,language_code:zl()},Xt={method:"POST",headers:kn,body:JSON.stringify(Wt)},Jt=fetch(Ut,Xt),Yt=new Promise(function(eh,Up){H.signal.addEventListener(function(){var ul=new Error("The operation was aborted.");ul.name="AbortError",Up(ul)})}),qn.prev=13,qn.next=16,Promise.race([Jt,Yt]);case 16:return qn.next=18,Jt;case 18:Sn=qn.sent,qn.next=26;break;case 21:throw qn.prev=21,qn.t0=qn.catch(13),wi="fetch-client-network","AbortError"===(null===(z=qn.t0)||void 0===z?void 0:z.name)&&(wi="fetch-timeout"),In.create(wi,{originalErrorMessage:null===(ee=qn.t0)||void 0===ee?void 0:ee.message});case 26:if(Ri=Sn.status,Sr=Sn.headers.get("ETag")||void 0,200!==Sn.status){qn.next=40;break}return qn.prev=29,qn.next=32,Sn.json();case 32:vu=qn.sent,qn.next=38;break;case 35:throw qn.prev=35,qn.t1=qn.catch(29),In.create("fetch-client-parse",{originalErrorMessage:null===(fe=qn.t1)||void 0===fe?void 0:fe.message});case 38:$n=vu.entries,Ma=vu.state;case 40:if("INSTANCE_STATE_UNSPECIFIED"===Ma?Ri=500:"NO_CHANGE"===Ma?Ri=304:("NO_TEMPLATE"===Ma||"EMPTY_CONFIG"===Ma)&&($n={}),304===Ri||200===Ri){qn.next=43;break}throw In.create("fetch-status",{httpStatus:Ri});case 43:return qn.abrupt("return",{status:Ri,eTag:Sr,config:$n});case 44:case"end":return qn.stop()}},B,this,[[13,21],[29,35]])}));return function(B){return Z.apply(this,arguments)}}())}]),N}();function pd(N,Z){return new Promise(function(B,H){var z=Math.max(Z-Date.now(),0),ee=setTimeout(B,z);N.addEventListener(function(){clearTimeout(ee),H(In.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function Df(N){if(!(N instanceof J.ZR&&N.customData))return!1;var Z=Number(N.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}var Sf=function(){function N(Z,B){(0,ie.Z)(this,N),this.client=Z,this.storage=B}return(0,pe.Z)(N,[{key:"fetch",value:(Z=(0,P.Z)((0,j.Z)().mark(function H(z){return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,this.storage.getThrottleMetadata();case 2:if(de.t0=de.sent,de.t0){de.next=5;break}de.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return de.abrupt("return",this.attemptFetch(z,de.t0));case 7:case"end":return de.stop()}},H,this)})),function B(H){return Z.apply(this,arguments)})},{key:"attemptFetch",value:function(){var Z=(0,P.Z)((0,j.Z)().mark(function H(z,ee){var fe,de,qe,st;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return fe=ee.throttleEndTimeMillis,de=ee.backoffCount,Ne.next=3,pd(z.signal,fe);case 3:return Ne.prev=3,Ne.next=6,this.client.fetch(z);case 6:return qe=Ne.sent,Ne.next=9,this.storage.deleteThrottleMetadata();case 9:return Ne.abrupt("return",qe);case 12:if(Ne.prev=12,Ne.t0=Ne.catch(3),Df(Ne.t0)){Ne.next=16;break}throw Ne.t0;case 16:return st={throttleEndTimeMillis:Date.now()+(0,J.$s)(de),backoffCount:de+1},Ne.next=19,this.storage.setThrottleMetadata(st);case 19:return Ne.abrupt("return",this.attemptFetch(z,st));case 20:case"end":return Ne.stop()}},H,this,[[3,12]])}));return function B(H,z){return Z.apply(this,arguments)}}()}]),N;var Z}(),Sp=function(){function N(Z,B,H,z,ee){(0,ie.Z)(this,N),this.app=Z,this._client=B,this._storageCache=H,this._storage=z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return(0,pe.Z)(N,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),N}();function Ha(N,Z){var B,H=N.target.error||void 0;return In.create(Z,{originalErrorMessage:H&&(null===(B=H)||void 0===B?void 0:B.message)})}var nu="app_namespace_store";function Pf(){return new Promise(function(N,Z){var B;try{var H=indexedDB.open("firebase_remote_config",1);H.onerror=function(z){Z(Ha(z,"storage-open"))},H.onsuccess=function(z){N(z.target.result)},H.onupgradeneeded=function(z){0===z.oldVersion&&z.target.result.createObjectStore(nu,{keyPath:"compositeKey"})}}catch(z){Z(In.create("storage-open",{originalErrorMessage:null===(B=z)||void 0===B?void 0:B.message}))}})}var wr,Rp=function(){function N(Z,B,H){var z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pf();(0,ie.Z)(this,N),this.appId=Z,this.appName=B,this.namespace=H,this.openDbPromise=z}return(0,pe.Z)(N,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(B){return this.set("last_fetch_status",B)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(B){return this.set("last_successful_fetch_timestamp_millis",B)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(B){return this.set("last_successful_fetch_response",B)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(B){return this.set("active_config",B)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(B){return this.set("active_config_etag",B)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(B){return this.set("throttle_metadata",B)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:(Z=(0,P.Z)((0,j.Z)().mark(function H(z){var fe,ee=this;return(0,j.Z)().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.openDbPromise;case 2:return fe=qe.sent,qe.abrupt("return",new Promise(function(st,nt){var Ne,kn=fe.transaction([nu],"readonly").objectStore(nu),Wt=ee.createCompositeKey(z);try{var Xt=kn.get(Wt);Xt.onerror=function(Jt){nt(Ha(Jt,"storage-get"))},Xt.onsuccess=function(Jt){var Yt=Jt.target.result;st(Yt?Yt.value:void 0)}}catch(Jt){nt(In.create("storage-get",{originalErrorMessage:null===(Ne=Jt)||void 0===Ne?void 0:Ne.message}))}}));case 4:case"end":return qe.stop()}},H,this)})),function B(H){return Z.apply(this,arguments)})},{key:"set",value:function(){var Z=(0,P.Z)((0,j.Z)().mark(function H(z,ee){var de,fe=this;return(0,j.Z)().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,this.openDbPromise;case 2:return de=st.sent,st.abrupt("return",new Promise(function(nt,Ne){var Ut,Wt=de.transaction([nu],"readwrite").objectStore(nu),Xt=fe.createCompositeKey(z);try{var Jt=Wt.put({compositeKey:Xt,value:ee});Jt.onerror=function(Yt){Ne(Ha(Yt,"storage-set"))},Jt.onsuccess=function(){nt()}}catch(Yt){Ne(In.create("storage-set",{originalErrorMessage:null===(Ut=Yt)||void 0===Ut?void 0:Ut.message}))}}));case 4:case"end":return st.stop()}},H,this)}));return function B(H,z){return Z.apply(this,arguments)}}()},{key:"delete",value:function(){var Z=(0,P.Z)((0,j.Z)().mark(function H(z){var fe,ee=this;return(0,j.Z)().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,this.openDbPromise;case 2:return fe=qe.sent,qe.abrupt("return",new Promise(function(st,nt){var Ne,kn=fe.transaction([nu],"readwrite").objectStore(nu),Wt=ee.createCompositeKey(z);try{var Xt=kn.delete(Wt);Xt.onerror=function(Jt){nt(Ha(Jt,"storage-delete"))},Xt.onsuccess=function(){st()}}catch(Jt){nt(In.create("storage-delete",{originalErrorMessage:null===(Ne=Jt)||void 0===Ne?void 0:Ne.message}))}}));case 4:case"end":return qe.stop()}},H,this)}));return function B(H){return Z.apply(this,arguments)}}()},{key:"createCompositeKey",value:function(B){return[this.appId,this.appName,this.namespace,B].join()}}]),N;var Z}(),Mf=function(){function N(Z){(0,ie.Z)(this,N),this.storage=Z}return(0,pe.Z)(N,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:(Z=(0,P.Z)((0,j.Z)().mark(function H(){var z,ee,fe,de,qe,st;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return z=this.storage.getLastFetchStatus(),ee=this.storage.getLastSuccessfulFetchTimestampMillis(),fe=this.storage.getActiveConfig(),Ne.next=5,z;case 5:return(de=Ne.sent)&&(this.lastFetchStatus=de),Ne.next=9,ee;case 9:return(qe=Ne.sent)&&(this.lastSuccessfulFetchTimestampMillis=qe),Ne.next=13,fe;case 13:(st=Ne.sent)&&(this.activeConfig=st);case 15:case"end":return Ne.stop()}},H,this)})),function B(){return Z.apply(this,arguments)})},{key:"setLastFetchStatus",value:function(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}},{key:"setActiveConfig",value:function(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}]),N;var Z}();function Of(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,P.Z)((0,j.Z)().mark(function N(){return(0,j.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((0,J.hl)()){H.next=2;break}return H.abrupt("return",!1);case 2:return H.prev=2,H.next=5,(0,J.eu)();case 5:return H.abrupt("return",H.sent);case 9:return H.prev=9,H.t0=H.catch(2),H.abrupt("return",!1);case 12:case"end":return H.stop()}},N,null,[[2,9]])}))).apply(this,arguments)}!function Pp(){(0,y._registerComponent)(new G.wA("remote-config",function N(Z,B){var H=B.instanceIdentifier,z=Z.getProvider("app").getImmediate(),ee=Z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw In.create("registration-window");if(!(0,J.hl)())throw In.create("indexed-db-unavailable");var fe=z.options,de=fe.projectId,qe=fe.apiKey,st=fe.appId;if(!de)throw In.create("registration-project-id");if(!qe)throw In.create("registration-api-key");if(!st)throw In.create("registration-app-id");var nt=new Rp(st,z.name,H=H||"firebase"),Ne=new Mf(nt),Ut=new Te.Yd(fn);Ut.logLevel=Te.in.ERROR;var kn=new cr(ee,y.SDK_VERSION,H,de,qe,st),Wt=new Sf(kn,nt),Xt=new tu(Wt,nt,Ne,Ut),Jt=new Sp(z,Xt,Ne,nt,Ut);return function os(N){var Z=(0,J.m9)(N);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(function(){Z._isInitializationComplete=!0}))}(Jt),Jt},"PUBLIC").setMultipleInstances(!0)),(0,y.registerVersion)(fn,"0.3.11"),(0,y.registerVersion)(fn,"0.3.11","esm2017")}();var Vu="/firebase-messaging-sw.js",ay="/firebase-cloud-messaging-push-scope",ju="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vi="google.c.a.c_id",Mp="google.c.a.c_l",$l="google.c.a.ts",ql="google.c.a.e",ru=function(){return(N=ru||(ru={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",ru;var N}();function ea(N){var Z=new Uint8Array(N);return btoa(String.fromCharCode.apply(String,(0,Ee.Z)(Z))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gd(N){for(var B=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(B),z=new Uint8Array(H.length),ee=0;ee<H.length;++ee)z[ee]=H.charCodeAt(ee);return z}var Uo="fcm_token_details_db",Nf="fcm_token_object_Store";function ji(N){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,P.Z)((0,j.Z)().mark(function N(Z){var z;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!("databases"in indexedDB)){de.next=7;break}return de.next=3,indexedDB.databases();case 3:if(de.sent.map(function(qe){return qe.name}).includes(Uo)){de.next=7;break}return de.abrupt("return",null);case 7:return z=null,de.next=10,(0,Ae.X3)(Uo,5,{upgrade:function(){var qe=(0,P.Z)((0,j.Z)().mark(function nt(Ne,Ut,kn,Wt){var Xt,Jt,Yt,Sn,wi,Ri;return(0,j.Z)().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(!(Ut<2)){$n.next=2;break}return $n.abrupt("return");case 2:if(Ne.objectStoreNames.contains(Nf)){$n.next=4;break}return $n.abrupt("return");case 4:return Jt=Wt.objectStore(Nf),$n.next=7,Jt.index("fcmSenderId").get(Z);case 7:return Yt=$n.sent,$n.next=10,Jt.clear();case 10:if(Yt){$n.next=12;break}return $n.abrupt("return");case 12:if(2!==Ut){$n.next=19;break}if((Sn=Yt).auth&&Sn.p256dh&&Sn.endpoint){$n.next=16;break}return $n.abrupt("return");case 16:z={token:Sn.fcmToken,createTime:null!==(Xt=Sn.createTime)&&void 0!==Xt?Xt:Date.now(),subscriptionOptions:{auth:Sn.auth,p256dh:Sn.p256dh,endpoint:Sn.endpoint,swScope:Sn.swScope,vapidKey:"string"==typeof Sn.vapidKey?Sn.vapidKey:ea(Sn.vapidKey)}},$n.next=20;break;case 19:3===Ut?z={token:(wi=Yt).fcmToken,createTime:wi.createTime,subscriptionOptions:{auth:ea(wi.auth),p256dh:ea(wi.p256dh),endpoint:wi.endpoint,swScope:wi.swScope,vapidKey:ea(wi.vapidKey)}}:4===Ut&&(z={token:(Ri=Yt).fcmToken,createTime:Ri.createTime,subscriptionOptions:{auth:ea(Ri.auth),p256dh:ea(Ri.p256dh),endpoint:Ri.endpoint,swScope:Ri.swScope,vapidKey:ea(Ri.vapidKey)}});case 20:case"end":return $n.stop()}},nt)}));return function st(nt,Ne,Ut,kn){return qe.apply(this,arguments)}}()});case 10:return de.sent.close(),de.next=14,(0,Ae.Lj)(Uo);case 14:return de.next=16,(0,Ae.Lj)("fcm_vapid_details_db");case 16:return de.next=18,(0,Ae.Lj)("undefined");case 18:return de.abrupt("return",Lf(z)?z:null);case 19:case"end":return de.stop()}},N)})),Hi.apply(this,arguments)}function Lf(N){if(!N||!N.subscriptionOptions)return!1;var Z=N.subscriptionOptions;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof Z.auth&&Z.auth.length>0&&"string"==typeof Z.p256dh&&Z.p256dh.length>0&&"string"==typeof Z.endpoint&&Z.endpoint.length>0&&"string"==typeof Z.swScope&&Z.swScope.length>0&&"string"==typeof Z.vapidKey&&Z.vapidKey.length>0}var Hu="firebase-messaging-store",fr=null;function Ql(){return fr||(fr=(0,Ae.X3)("firebase-messaging-database",1,{upgrade:function(Z,B){0===B&&Z.createObjectStore(Hu)}})),fr}function ri(N){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z,ee;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return B=ii(Z),de.next=3,Ql();case 3:return H=de.sent,de.next=6,H.transaction(Hu).objectStore(Hu).get(B);case 6:if(!(z=de.sent)){de.next=11;break}return de.abrupt("return",z);case 11:return de.next=13,ji(Z.appConfig.senderId);case 13:if(!(ee=de.sent)){de.next=18;break}return de.next=17,Fr(Z,ee);case 17:return de.abrupt("return",ee);case 18:case"end":return de.stop()}},N)}))).apply(this,arguments)}function Fr(N,Z){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,ee;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return H=ii(Z),de.next=3,Ql();case 3:return ee=de.sent.transaction(Hu,"readwrite"),de.next=7,ee.objectStore(Hu).put(B,H);case 7:return de.next=9,ee.done;case 9:return de.abrupt("return",B);case 10:case"end":return de.stop()}},N)}))).apply(this,arguments)}function iu(N){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return B=ii(Z),fe.next=3,Ql();case 3:return z=fe.sent.transaction(Hu,"readwrite"),fe.next=7,z.objectStore(Hu).delete(B);case 7:return fe.next=9,z.done;case 9:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function ii(N){return N.appConfig.appId}var Ff=((0,ye.Z)(wr={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,ye.Z)(wr,"only-available-in-window","This method is available in a Window context."),(0,ye.Z)(wr,"only-available-in-sw","This method is available in a service worker context."),(0,ye.Z)(wr,"permission-default","The notification permission was not granted and dismissed instead."),(0,ye.Z)(wr,"permission-blocked","The notification permission was not granted and blocked instead."),(0,ye.Z)(wr,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,ye.Z)(wr,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,ye.Z)(wr,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,ye.Z)(wr,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,ye.Z)(wr,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,ye.Z)(wr,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,ye.Z)(wr,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,ye.Z)(wr,"token-update-no-token","FCM returned no token when updating the user to push."),(0,ye.Z)(wr,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,ye.Z)(wr,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,ye.Z)(wr,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,ye.Z)(wr,"invalid-vapid-key","The public VAPID key must be a string."),(0,ye.Z)(wr,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),wr),Dr=new J.LL("messaging","Messaging",Ff);function Uf(N,Z){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z,ee,fe,de,qe;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,xf(Z);case 2:return z=Ne.sent,ee=md(B),fe={method:"POST",headers:z,body:JSON.stringify(ee)},Ne.prev=5,Ne.next=8,fetch(jo(Z.appConfig),fe);case 8:return qe=Ne.sent,Ne.next=11,qe.json();case 11:de=Ne.sent,Ne.next=17;break;case 14:throw Ne.prev=14,Ne.t0=Ne.catch(5),Dr.create("token-subscribe-failed",{errorInfo:null===(H=Ne.t0)||void 0===H?void 0:H.toString()});case 17:if(!de.error){Ne.next=20;break}throw Dr.create("token-subscribe-failed",{errorInfo:de.error.message});case 20:if(de.token){Ne.next=22;break}throw Dr.create("token-subscribe-no-token");case 22:return Ne.abrupt("return",de.token);case 23:case"end":return Ne.stop()}},N,null,[[5,14]])}))).apply(this,arguments)}function Vo(N,Z){return au.apply(this,arguments)}function au(){return(au=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z,ee,fe,de,qe;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,xf(Z);case 2:return z=Ne.sent,ee=md(B.subscriptionOptions),fe={method:"PATCH",headers:z,body:JSON.stringify(ee)},Ne.prev=5,Ne.next=8,fetch("".concat(jo(Z.appConfig),"/").concat(B.token),fe);case 8:return qe=Ne.sent,Ne.next=11,qe.json();case 11:de=Ne.sent,Ne.next=17;break;case 14:throw Ne.prev=14,Ne.t0=Ne.catch(5),Dr.create("token-update-failed",{errorInfo:null===(H=Ne.t0)||void 0===H?void 0:H.toString()});case 17:if(!de.error){Ne.next=20;break}throw Dr.create("token-update-failed",{errorInfo:de.error.message});case 20:if(de.token){Ne.next=22;break}throw Dr.create("token-update-no-token");case 22:return Ne.abrupt("return",de.token);case 23:case"end":return Ne.stop()}},N,null,[[5,14]])}))).apply(this,arguments)}function Qt(N,Z){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,ee,fe,de;return(0,j.Z)().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return nt.next=2,xf(Z);case 2:return ee={method:"DELETE",headers:nt.sent},nt.prev=4,nt.next=7,fetch("".concat(jo(Z.appConfig),"/").concat(B),ee);case 7:return fe=nt.sent,nt.next=10,fe.json();case 10:if(!(de=nt.sent).error){nt.next=14;break}throw Dr.create("token-unsubscribe-failed",{errorInfo:de.error.message});case 14:nt.next=19;break;case 16:throw nt.prev=16,nt.t0=nt.catch(4),Dr.create("token-unsubscribe-failed",{errorInfo:null===(H=nt.t0)||void 0===H?void 0:H.toString()});case 19:case"end":return nt.stop()}},N,null,[[4,16]])}))).apply(this,arguments)}function jo(N){var Z=N.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(Z,"/registrations")}function xf(N){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return B=Z.appConfig,H=Z.installations,fe.next=3,H.getToken();case 3:return fe.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":B.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(fe.sent)}));case 5:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function md(N){var z=N.vapidKey,ee={web:{endpoint:N.endpoint,auth:N.auth,p256dh:N.p256dh}};return z!==ju&&(ee.web.applicationPubKey=z),ee}var Ho=6048e5;function Xl(N){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,Ts(Z.swRegistration,Z.vapidKey);case 2:return H={vapidKey:Z.vapidKey,swScope:Z.swRegistration.scope,endpoint:(B=fe.sent).endpoint,auth:ea(B.getKey("auth")),p256dh:ea(B.getKey("p256dh"))},fe.next=6,ri(Z.firebaseDependencies);case 6:if(z=fe.sent){fe.next=11;break}return fe.abrupt("return",hr(Z.firebaseDependencies,H));case 11:if(Wa(z.subscriptionOptions,H)){fe.next=23;break}return fe.prev=12,fe.next=15,Qt(Z.firebaseDependencies,z.token);case 15:fe.next=20;break;case 17:fe.prev=17,fe.t0=fe.catch(12),console.warn(fe.t0);case 20:return fe.abrupt("return",hr(Z.firebaseDependencies,H));case 23:if(!(Date.now()>=z.createTime+Ho)){fe.next=27;break}return fe.abrupt("return",ec(Z,{token:z.token,createTime:Date.now(),subscriptionOptions:H}));case 27:return fe.abrupt("return",z.token);case 28:case"end":return fe.stop()}},N,null,[[12,17]])}))).apply(this,arguments)}function ft(N){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H;return(0,j.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,ri(Z.firebaseDependencies);case 2:if(!(B=ee.sent)){ee.next=8;break}return ee.next=6,Qt(Z.firebaseDependencies,B.token);case 6:return ee.next=8,iu(Z.firebaseDependencies);case 8:return ee.next=10,Z.swRegistration.pushManager.getSubscription();case 10:if(!(H=ee.sent)){ee.next=13;break}return ee.abrupt("return",H.unsubscribe());case 13:return ee.abrupt("return",!0);case 14:case"end":return ee.stop()}},N)}))).apply(this,arguments)}function ec(N,Z){return tc.apply(this,arguments)}function tc(){return(tc=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.prev=0,fe.next=3,Vo(Z.firebaseDependencies,B);case 3:return H=fe.sent,z=Object.assign(Object.assign({},B),{token:H,createTime:Date.now()}),fe.next=7,Fr(Z.firebaseDependencies,z);case 7:return fe.abrupt("return",H);case 10:return fe.prev=10,fe.t0=fe.catch(0),fe.next=14,ft(Z);case 14:throw fe.t0;case 15:case"end":return fe.stop()}},N,null,[[0,10]])}))).apply(this,arguments)}function hr(N,Z){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,Uf(Z,B);case 2:return z={token:fe.sent,createTime:Date.now(),subscriptionOptions:B},fe.next=6,Fr(Z,z);case 6:return fe.abrupt("return",z.token);case 7:case"end":return fe.stop()}},N)}))).apply(this,arguments)}function Ts(N,Z){return pi.apply(this,arguments)}function pi(){return(pi=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H;return(0,j.Z)().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,Z.pushManager.getSubscription();case 2:if(!(H=ee.sent)){ee.next=5;break}return ee.abrupt("return",H);case 5:return ee.abrupt("return",Z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gd(B)}));case 6:case"end":return ee.stop()}},N)}))).apply(this,arguments)}function Wa(N,Z){return Z.vapidKey===N.vapidKey&&Z.endpoint===N.endpoint&&Z.auth===N.auth&&Z.p256dh===N.p256dh}function zu(N){var Z={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function nc(N,Z){if(Z.notification){N.notification={};var B=Z.notification.title;B&&(N.notification.title=B);var H=Z.notification.body;H&&(N.notification.body=H);var z=Z.notification.image;z&&(N.notification.image=z)}}(Z,N),function Zp(N,Z){!Z.data||(N.data=Z.data)}(Z,N),function yd(N,Z){var B,H,z,ee,fe;if(Z.fcmOptions||null!==(B=Z.notification)&&void 0!==B&&B.click_action){N.fcmOptions={};var de=null!==(z=null===(H=Z.fcmOptions)||void 0===H?void 0:H.link)&&void 0!==z?z:null===(ee=Z.notification)||void 0===ee?void 0:ee.click_action;de&&(N.fcmOptions.link=de);var qe=null===(fe=Z.fcmOptions)||void 0===fe?void 0:fe.analytics_label;qe&&(N.fcmOptions.analyticsLabel=qe)}}(Z,N),Z}function _d(N){return"object"==typeof N&&!!N&&Vi in N}function gi(N,Z){for(var B=[],H=0;H<N.length;H++)B.push(N.charAt(H)),H<Z.length&&B.push(Z.charAt(H));return B.join("")}function rc(N){return Dr.create("missing-app-config-values",{valueName:N})}gi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var Ku=function(){function N(Z,B,H){(0,ie.Z)(this,N),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var z=function Aa(N){if(!N||!N.options)throw rc("App Configuration Object");if(!N.name)throw rc("App Name");for(var B=N.options,H=0,z=["projectId","apiKey","appId","messagingSenderId"];H<z.length;H++){var ee=z[H];if(!B[ee])throw rc(ee)}return{appName:N.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(Z);this.firebaseDependencies={app:Z,appConfig:z,installations:B,analyticsProvider:H}}return(0,pe.Z)(N,[{key:"_delete",value:function(){return Promise.resolve()}}]),N}();function ta(N){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,P.Z)((0,j.Z)().mark(function N(Z){var B;return(0,j.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,z.next=3,navigator.serviceWorker.register(Vu,{scope:ay});case 3:Z.swRegistration=z.sent,Z.swRegistration.update().catch(function(){}),z.next=10;break;case 7:throw z.prev=7,z.t0=z.catch(0),Dr.create("failed-service-worker-registration",{browserErrorMessage:null===(B=z.t0)||void 0===B?void 0:B.message});case 10:case"end":return z.stop()}},N,null,[[0,7]])}))).apply(this,arguments)}function Go(N,Z){return ic.apply(this,arguments)}function ic(){return(ic=(0,P.Z)((0,j.Z)().mark(function N(Z,B){return(0,j.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(B||Z.swRegistration){z.next=3;break}return z.next=3,ta(Z);case 3:if(B||!Z.swRegistration){z.next=5;break}return z.abrupt("return");case 5:if(B instanceof ServiceWorkerRegistration){z.next=7;break}throw Dr.create("invalid-sw-registration");case 7:Z.swRegistration=B;case 8:case"end":return z.stop()}},N)}))).apply(this,arguments)}function Vf(N,Z){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)((0,j.Z)().mark(function N(Z,B){return(0,j.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:B?Z.vapidKey=B:Z.vapidKey||(Z.vapidKey=ju);case 1:case"end":return z.stop()}},N)}))).apply(this,arguments)}function ac(){return(ac=(0,P.Z)((0,j.Z)().mark(function N(Z,B){return(0,j.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(navigator){z.next=2;break}throw Dr.create("only-available-in-window");case 2:if("default"!==Notification.permission){z.next=5;break}return z.next=5,Notification.requestPermission();case 5:if("granted"===Notification.permission){z.next=7;break}throw Dr.create("permission-blocked");case 7:return z.next=9,Vf(Z,null==B?void 0:B.vapidKey);case 9:return z.next=11,Go(Z,null==B?void 0:B.serviceWorkerRegistration);case 11:return z.abrupt("return",Xl(Z));case 12:case"end":return z.stop()}},N)}))).apply(this,arguments)}function Ko(N,Z,B){return sc.apply(this,arguments)}function sc(){return(sc=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H){var z;return(0,j.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return z=$o(B),de.next=3,Z.firebaseDependencies.analyticsProvider.get();case 3:de.sent.logEvent(z,{message_id:H[Vi],message_name:H[Mp],message_time:H[$l],message_device_time:Math.floor(Date.now()/1e3)});case 5:case"end":return de.stop()}},N)}))).apply(this,arguments)}function $o(N){switch(N){case ru.NOTIFICATION_CLICKED:return"notification_open";case ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function su(){return(su=(0,P.Z)((0,j.Z)().mark(function N(Z,B){var H,z;return(0,j.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if((H=B.data).isFirebaseMessaging){fe.next=3;break}return fe.abrupt("return");case 3:if(Z.onMessageHandler&&H.messageType===ru.PUSH_RECEIVED&&("function"==typeof Z.onMessageHandler?Z.onMessageHandler(zu(H)):Z.onMessageHandler.next(zu(H))),!_d(z=H.data)||"1"!==z[ql]){fe.next=8;break}return fe.next=8,Ko(Z,H.messageType,z);case 8:case"end":return fe.stop()}},N)}))).apply(this,arguments)}var mi,uu="@firebase/messaging",qo=function(Z){var B=new Ku(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),Z.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(H){return function Ds(N,Z){return su.apply(this,arguments)}(B,H)}),B},qu=function(Z){var B=Z.getProvider("messaging").getImmediate();return{getToken:function(ee){return function $u(N,Z){return ac.apply(this,arguments)}(B,ee)}}};function Ss(){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,P.Z)((0,j.Z)().mark(function N(){return(0,j.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.prev=0,B.next=3,(0,J.eu)();case 3:B.next=8;break;case 5:return B.prev=5,B.t0=B.catch(0),B.abrupt("return",!1);case 8:return B.abrupt("return","undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"));case 9:case"end":return B.stop()}},N,null,[[0,5]])}))).apply(this,arguments)}!function kd(){(0,y._registerComponent)(new G.wA("messaging",qo,"PUBLIC")),(0,y._registerComponent)(new G.wA("messaging-internal",qu,"PRIVATE")),(0,y.registerVersion)(uu,"0.9.16"),(0,y.registerVersion)(uu,"0.9.16","esm2017")}();var As="analytics",lc="firebase_id",Id=6e4,cc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gi="https://www.googletagmanager.com/gtag/js",gr=new Te.Yd("@firebase/analytics");function Cd(N){return Promise.all(N.map(function(Z){return Z.catch(function(B){return B})}))}function fc(N,Z){var B=document.createElement("script");B.src="".concat(Gi,"?l=").concat(N,"&id=").concat(Z),B.async=!0,document.head.appendChild(B)}function hc(N,Z,B,H,z,ee){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H,z,ee,fe){var de,st;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(de=z[ee],Ne.prev=1,!de){Ne.next=7;break}return Ne.next=5,B[de];case 5:Ne.next=14;break;case 7:return Ne.next=9,Cd(H);case 9:if(!(st=Ne.sent.find(function(Ut){return Ut.measurementId===ee}))){Ne.next=14;break}return Ne.next=14,B[st.appId];case 14:Ne.next=19;break;case 16:Ne.prev=16,Ne.t0=Ne.catch(1),gr.error(Ne.t0);case 19:Z("config",ee,fe);case 20:case"end":return Ne.stop()}},N,null,[[1,16]])}))).apply(this,arguments)}function Xo(N,Z,B,H,z){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H,z,ee){var fe,de,qe,st,nt,Ne;return(0,j.Z)().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(Wt.prev=0,fe=[],!ee||!ee.send_to){Wt.next=26;break}return de=ee.send_to,Array.isArray(de)||(de=[de]),Wt.next=7,Cd(H);case 7:qe=Wt.sent,st=(0,Q.Z)(de),Wt.prev=9,Ne=function(){var Jt=nt.value,Yt=qe.find(function(wi){return wi.measurementId===Jt}),Sn=Yt&&B[Yt.appId];if(!Sn)return fe=[],"break";fe.push(Sn)},st.s();case 12:if((nt=st.n()).done){Wt.next=18;break}if("break"!==Ne()){Wt.next=16;break}return Wt.abrupt("break",18);case 16:Wt.next=12;break;case 18:Wt.next=23;break;case 20:Wt.prev=20,Wt.t0=Wt.catch(9),st.e(Wt.t0);case 23:return Wt.prev=23,st.f(),Wt.finish(23);case 26:return 0===fe.length&&(fe=Object.values(B)),Wt.next=29,Promise.all(fe);case 29:Z("event",z,ee||{}),Wt.next=35;break;case 32:Wt.prev=32,Wt.t1=Wt.catch(0),gr.error(Wt.t1);case 35:case"end":return Wt.stop()}},N,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function vc(){for(var N=window.document.getElementsByTagName("script"),Z=0,B=Object.values(N);Z<B.length;Z++){var H=B[Z];if(H.src&&H.src.includes(Gi))return H}return null}var Gf=((0,ye.Z)(mi={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),(0,ye.Z)(mi,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),(0,ye.Z)(mi,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),(0,ye.Z)(mi,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),(0,ye.Z)(mi,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,ye.Z)(mi,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),(0,ye.Z)(mi,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),(0,ye.Z)(mi,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),(0,ye.Z)(mi,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),(0,ye.Z)(mi,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),mi),ai=new J.LL("analytics","Analytics",Gf),Xu=function(){function N(){var Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;(0,ie.Z)(this,N),this.throttleMetadata=Z,this.intervalMillis=B}return(0,pe.Z)(N,[{key:"getThrottleMetadata",value:function(B){return this.throttleMetadata[B]}},{key:"setThrottleMetadata",value:function(B,H){this.throttleMetadata[B]=H}},{key:"deleteThrottleMetadata",value:function(B){delete this.throttleMetadata[B]}}]),N}(),pc=new Xu;function Ps(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function Kf(N){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,ee,fe,de,qe,st;return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return H=Z.appId,ee={method:"GET",headers:Ps(Z.apiKey)},fe=cc.replace("{app-id}",H),Ne.next=5,fetch(fe,ee);case 5:if(200===(de=Ne.sent).status||304===de.status){Ne.next=18;break}return qe="",Ne.prev=8,Ne.next=11,de.json();case 11:!(null===(B=(st=Ne.sent).error)||void 0===B)&&B.message&&(qe=st.error.message),Ne.next=17;break;case 15:Ne.prev=15,Ne.t0=Ne.catch(8);case 17:throw ai.create("config-fetch-failed",{httpStatus:de.status,responseMessage:qe});case 18:return Ne.abrupt("return",de.json());case 19:case"end":return Ne.stop()}},N,null,[[8,15]])}))).apply(this,arguments)}function Td(N){return mr.apply(this,arguments)}function mr(){return mr=(0,P.Z)((0,j.Z)().mark(function N(Z){var B,H,z,ee,fe,de,qe,st,nt=arguments;return(0,j.Z)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(B=nt.length>1&&void 0!==nt[1]?nt[1]:pc,H=nt.length>2?nt[2]:void 0,fe=(z=Z.options).apiKey,de=z.measurementId,ee=z.appId){Ut.next=5;break}throw ai.create("no-app-id");case 5:if(fe){Ut.next=9;break}if(!de){Ut.next=8;break}return Ut.abrupt("return",{measurementId:de,appId:ee});case 8:throw ai.create("no-api-key");case 9:return qe=B.getThrottleMetadata(ee)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new ou,setTimeout((0,P.Z)((0,j.Z)().mark(function kn(){return(0,j.Z)().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:st.abort();case 1:case"end":return Xt.stop()}},kn)})),void 0!==H?H:Id),Ut.abrupt("return",Jo({appId:ee,apiKey:fe,measurementId:de},qe,st,B));case 13:case"end":return Ut.stop()}},N)})),mr.apply(this,arguments)}function Jo(N,Z,B){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H){var z,ee,fe,de,qe,st,nt,Ne,Ut,kn,Wt,Xt=arguments;return(0,j.Z)().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return z=B.throttleEndTimeMillis,ee=B.backoffCount,fe=Xt.length>3&&void 0!==Xt[3]?Xt[3]:pc,st=Z.appId,nt=Z.measurementId,Yt.prev=3,Yt.next=6,ma(H,z);case 6:Yt.next=14;break;case 8:if(Yt.prev=8,Yt.t0=Yt.catch(3),!nt){Yt.next=13;break}return gr.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(nt)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===(de=Yt.t0)||void 0===de?void 0:de.message,"]")),Yt.abrupt("return",{appId:st,measurementId:nt});case 13:throw Yt.t0;case 14:return Yt.prev=14,Yt.next=17,Kf(Z);case 17:return Ne=Yt.sent,fe.deleteThrottleMetadata(st),Yt.abrupt("return",Ne);case 22:if(Yt.prev=22,Yt.t1=Yt.catch(14),el(Ut=Yt.t1)){Yt.next=33;break}if(fe.deleteThrottleMetadata(st),!nt){Yt.next=32;break}return gr.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(nt)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==Ut?void 0:Ut.message,"]")),Yt.abrupt("return",{appId:st,measurementId:nt});case 32:throw Yt.t1;case 33:return kn=503===Number(null===(qe=null==Ut?void 0:Ut.customData)||void 0===qe?void 0:qe.httpStatus)?(0,J.$s)(ee,fe.intervalMillis,30):(0,J.$s)(ee,fe.intervalMillis),Wt={throttleEndTimeMillis:Date.now()+kn,backoffCount:ee+1},fe.setThrottleMetadata(st,Wt),gr.debug("Calling attemptFetch again in ".concat(kn," millis")),Yt.abrupt("return",Jo(Z,Wt,H,fe));case 38:case"end":return Yt.stop()}},N,null,[[3,8],[14,22]])})),Ju.apply(this,arguments)}function ma(N,Z){return new Promise(function(B,H){var z=Math.max(Z-Date.now(),0),ee=setTimeout(B,z);N.addEventListener(function(){clearTimeout(ee),H(ai.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function el(N){if(!(N instanceof J.ZR&&N.customData))return!1;var Z=Number(N.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}var eo,za,ou=function(){function N(){(0,ie.Z)(this,N),this.listeners=[]}return(0,pe.Z)(N,[{key:"addEventListener",value:function(B){this.listeners.push(B)}},{key:"abort",value:function(){this.listeners.forEach(function(B){return B()})}}]),N}();function lu(){return(lu=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H,z,ee){var fe,de;return(0,j.Z)().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(!ee||!ee.global){st.next=5;break}return Z("event",H,z),st.abrupt("return");case 5:return st.next=7,B;case 7:fe=st.sent,de=Object.assign(Object.assign({},z),{send_to:fe}),Z("event",H,de);case 10:case"end":return st.stop()}},N)}))).apply(this,arguments)}function mc(N){za=N}function nl(N){eo=N}function Sd(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,P.Z)((0,j.Z)().mark(function N(){var Z;return(0,j.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((0,J.hl)()){H.next=5;break}return gr.warn(ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),H.abrupt("return",!1);case 5:return H.prev=5,H.next=8,(0,J.eu)();case 8:H.next=14;break;case 10:return H.prev=10,H.t0=H.catch(5),gr.warn(ai.create("indexeddb-unavailable",{errorInfo:null===(Z=H.t0)||void 0===Z?void 0:Z.toString()}).message),H.abrupt("return",!1);case 14:return H.abrupt("return",!0);case 15:case"end":return H.stop()}},N,null,[[5,10]])}))).apply(this,arguments)}function yc(){return(yc=(0,P.Z)((0,j.Z)().mark(function N(Z,B,H,z,ee,fe,de){var qe,st,nt,Ut,kn,Wt,Xt;return(0,j.Z)().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return(st=Td(Z)).then(function(Sn){H[Sn.measurementId]=Sn.appId,Z.options.measurementId&&Sn.measurementId!==Z.options.measurementId&&gr.warn("The measurement ID in the local Firebase config (".concat(Z.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(Sn.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(Sn){return gr.error(Sn)}),B.push(st),nt=Sd().then(function(Sn){if(Sn)return z.getId()}),Yt.next=6,Promise.all([st,nt]);case 6:return Ut=(0,se.Z)(Yt.sent,2),kn=Ut[0],Wt=Ut[1],vc()||fc(fe,kn.measurementId),za&&(ee("consent","default",za),mc(void 0)),ee("js",new Date),(Xt=null!==(qe=null==de?void 0:de.config)&&void 0!==qe?qe:{}).origin="firebase",Xt.update=!0,null!=Wt&&(Xt[lc]=Wt),ee("config",kn.measurementId,Xt),eo&&(ee("set",eo),nl(void 0)),Yt.abrupt("return",kn.measurementId);case 20:case"end":return Yt.stop()}},N)}))).apply(this,arguments)}var Ns,qa,qf=function(){function N(Z){(0,ie.Z)(this,N),this.app=Z}return(0,pe.Z)(N,[{key:"_delete",value:function(){return delete $a[this.app.options.appId],Promise.resolve()}}]),N}(),$a={},Yf=[],no={},ls="dataLayer",rl=!1;function Lp(N,Z,B){!function sy(){var N=[];if((0,J.ru)()&&N.push("This is a browser extension environment."),(0,J.zI)()||N.push("Cookies are not available."),N.length>0){var Z=N.map(function(H,z){return"(".concat(z+1,") ").concat(H)}).join(" "),B=ai.create("invalid-analytics-context",{errorInfo:Z});gr.warn(B.message)}}();var H=N.options.appId;if(!H)throw ai.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw ai.create("no-api-key");gr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(N.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=$a[H])throw ai.create("already-exists",{id:H});if(!rl){!function Rs(N){var Z=[];Array.isArray(window[N])?Z=window[N]:window[N]=Z}(ls);var z=function Yu(N,Z,B,H,z){var ee=function(){for(var de=arguments.length,qe=new Array(de),st=0;st<de;st++)qe[st]=arguments[st];window[H].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ee=window[z]),window[z]=function dc(N,Z,B,H){function ee(){return(ee=(0,P.Z)((0,j.Z)().mark(function fe(de,qe,st){return(0,j.Z)().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Ne.prev=0,"event"!==de){Ne.next=6;break}return Ne.next=4,Xo(N,Z,B,qe,st);case 4:Ne.next=12;break;case 6:if("config"!==de){Ne.next=11;break}return Ne.next=9,hc(N,Z,B,H,qe,st);case 9:Ne.next=12;break;case 11:"consent"===de?N("consent","update",st):N("set",qe);case 12:Ne.next=17;break;case 14:Ne.prev=14,Ne.t0=Ne.catch(0),gr.error(Ne.t0);case 17:case"end":return Ne.stop()}},fe,null,[[0,14]])}))).apply(this,arguments)}return function z(fe,de,qe){return ee.apply(this,arguments)}}(ee,N,Z,B),{gtagCore:ee,wrappedGtag:window[z]}}($a,Yf,no,ls,"gtag");qa=z.wrappedGtag,Ns=z.gtagCore,rl=!0}return $a[H]=function Np(N,Z,B,H,z,ee,fe){return yc.apply(this,arguments)}(N,Yf,no,Z,Ns,ls,B),new qf(N)}function uy(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,P.Z)((0,j.Z)().mark(function N(){return(0,j.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(0,J.ru)()){H.next=2;break}return H.abrupt("return",!1);case 2:if((0,J.zI)()){H.next=4;break}return H.abrupt("return",!1);case 4:if((0,J.hl)()){H.next=6;break}return H.abrupt("return",!1);case 6:return H.prev=6,H.next=9,(0,J.eu)();case 9:return H.abrupt("return",H.sent);case 13:return H.prev=13,H.t0=H.catch(6),H.abrupt("return",!1);case 16:case"end":return H.stop()}},N,null,[[6,13]])}))).apply(this,arguments)}var Dt="@firebase/analytics";!function $r(){(0,y._registerComponent)(new G.wA(As,function(Z,B){var H=B.options;return Lp(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),H)},"PUBLIC")),(0,y._registerComponent)(new G.wA("analytics-internal",function N(Z){try{var B=Z.getProvider(As).getImmediate();return{logEvent:function(z,ee,fe){return function Kn(N,Z,B,H){N=(0,J.m9)(N),function gc(N,Z,B,H,z){return lu.apply(this,arguments)}(qa,$a[N.app.options.appId],Z,B,H).catch(function(z){return gr.error(z)})}(B,z,ee,fe)}}}catch(H){throw ai.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,y.registerVersion)(Dt,"0.8.0"),(0,y.registerVersion)(Dt,"0.8.0","esm2017")}();var Qf=U(3237),cs=U(1120),dr=U(136),ra=U(8486),fu=function(N){(0,dr.Z)(B,N);var Z=(0,ra.Z)(B);function B(H,z){var ee;return(0,ie.Z)(this,B),(ee=Z.call(this,H,z)).scheduler=H,ee.work=z,ee}return(0,pe.Z)(B,[{key:"schedule",value:function(z){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return ee>0?(0,Qf.Z)((0,cs.Z)(B.prototype),"schedule",this).call(this,z,ee):(this.delay=ee,this.state=z,this.scheduler.flush(this),this)}},{key:"execute",value:function(z,ee){return ee>0||this.closed?(0,Qf.Z)((0,cs.Z)(B.prototype),"execute",this).call(this,z,ee):this._execute(z,ee)}},{key:"requestAsyncId",value:function(z,ee){var fe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!=fe&&fe>0||null==fe&&this.delay>0?(0,Qf.Z)((0,cs.Z)(B.prototype),"requestAsyncId",this).call(this,z,ee,fe):(z.flush(this),0)}}]),B}(U(4408).o),al=function(N){(0,dr.Z)(B,N);var Z=(0,ra.Z)(B);function B(){return(0,ie.Z)(this,B),Z.apply(this,arguments)}return(0,pe.Z)(B)}(U(7565).v),Pd=new al(fu),qt=U(4986),Md=U(9751),Xf=U(8505),_i=U(5363),hu=U(9468),Fp=new A.GfV("7.4.1"),ao="__angularfire_symbol__analyticsIsSupportedValue",so="__angularfire_symbol__analyticsIsSupported",sl="__angularfire_symbol__remoteConfigIsSupportedValue",Ya="__angularfire_symbol__remoteConfigIsSupported",kc="__angularfire_symbol__messagingIsSupportedValue",Fs="__angularfire_symbol__messagingIsSupported";function Qa(N,Z,B){if(Z){if(1===Z.length)return Z[0];var H=Z.filter(function(fe){return fe.app===B});if(1===H.length)return H[0]}return B.container.getProvider(N).getImmediate({optional:!0})}globalThis[so]||(globalThis[so]=uy().then(function(N){return globalThis[ao]=N}).catch(function(){return globalThis[ao]=!1})),globalThis[Fs]||(globalThis[Fs]=Ss().then(function(N){return globalThis[kc]=N}).catch(function(){return globalThis[kc]=!1})),globalThis[Ya]||(globalThis[Ya]=Of().then(function(N){return globalThis[sl]=N}).catch(function(){return globalThis[sl]=!1}));var _a=function(Z,B){var H=B?[B]:(0,R.C6)(),z=[];return H.forEach(function(ee){ee.container.getProvider(Z).instances.forEach(function(de){z.includes(de)||z.push(de)})}),z};function ia(){}var br=function(){function N(Z){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pd;(0,ie.Z)(this,N),this.zone=Z,this.delegate=B}return(0,pe.Z)(N,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(B,H,z){var ee=this.zone;return this.delegate.schedule(function(qe){var st=this;ee.runGuarded(function(){B.apply(st,[qe])})},H,z)}}]),N}(),bc=function(){function N(Z){(0,ie.Z)(this,N),this.zone=Z,this.task=null}return(0,pe.Z)(N,[{key:"call",value:function(B,H){var z=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",ia,{},ia,ia)}),H.pipe((0,Xf.b)({next:z,complete:z,error:z})).subscribe(B).add(z)}},{key:"unscheduleTask",value:function(){var B=this;setTimeout(function(){null!=B.task&&"scheduled"===B.task.state&&(B.task.invoke(),B.task=null)},10)}}]),N}(),Ec=function(){var N=(0,pe.Z)(function Z(B){(0,ie.Z)(this,Z),this.ngZone=B,this.outsideAngular=B.runOutsideAngular(function(){return new br(Zone.current)}),this.insideAngular=B.run(function(){return new br(Zone.current,qt.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)});return N.\u0275fac=function(B){return new(B||N)(A.LFG(A.R0b))},N.\u0275prov=A.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N}();function Bn(){var N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Pa(N){return Bn().ngZone.runOutsideAngular(function(){return N()})}function ki(N){return Bn().ngZone.run(function(){return N()})}function ka(N){return N.pipe((0,_i.Q)(Bn().outsideAngular))}function du(N){return Bn(),function Ic(N){return function(B){return(B=B.lift(new bc(N.ngZone))).pipe((0,hu.R)(N.outsideAngular),(0,_i.Q)(N.insideAngular))}}(Bn())(N)}var uo=function(Z,B){var H=void 0;return function(){var z=arguments;return B&&setTimeout(function(){"scheduled"===B.state&&B.invoke()},10),ki(function(){return Z.apply(H,z)})}},zi=function(Z,B){return function(){for(var z,H=this,ee=arguments,fe=0;fe<arguments.length;fe++)"function"==typeof ee[fe]&&(B&&(z||(z=ki(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",ia,{},ia,ia)}))),ee[fe]=uo(ee[fe],z));var de=Pa(function(){return Z.apply(H,ee)});if(!B){if(de instanceof Md.y){var qe=Bn();return de.pipe((0,hu.R)(qe.outsideAngular),(0,_i.Q)(qe.insideAngular))}return ki(function(){return de})}return de instanceof Md.y?de.pipe(du):de instanceof Promise?ki(function(){return new Promise(function(st,nt){return de.then(function(Ne){return ki(function(){return st(Ne)})},function(Ne){return ki(function(){return nt(Ne)})})})}):"function"==typeof de&&z?function(){return setTimeout(function(){z&&"scheduled"===z.state&&z.invoke()},10),de.apply(this,arguments)}:ki(function(){return de})}}},7143:function(St,He,U){U.d(He,{$:function(){return md},A:function(){return Qe},B:function(){return At},G:function(){return us},H:function(){return Ba},J:function(){return Ha},L:function(){return he},M:function(){return ju},N:function(){return $l},P:function(){return Pd},Q:function(){return ql},R:function(){return Kn},T:function(){return Op},U:function(){return Mp},V:function(){return Uo},W:function(){return Zf},X:function(){return xo},Y:function(){return Wi},Z:function(){return au},_:function(){return Wu},a:function(){return pc},a0:function(){return Cn},a1:function(){return tc},a2:function(){return Wo},a3:function(){return pi},a4:function(){return zu},a5:function(){return Zp},a6:function(){return _d},a7:function(){return gi},a8:function(){return rc},a9:function(){return Ku},aA:function(){return st},aB:function(){return z},aC:function(){return Ec},aD:function(){return bc},aE:function(){return fn},aI:function(){return Ra},aL:function(){return ea},aa:function(){return ic},ab:function(){return zo},ac:function(){return ac},af:function(){return Ds},ag:function(){return uu},ah:function(){return uc},ak:function(){return ri},al:function(){return Yo},an:function(){return Cd},ao:function(){return Wf},ap:function(){return nr},aq:function(){return rn},ar:function(){return Zn},as:function(){return er},at:function(){return we},au:function(){return oo},av:function(){return kn},aw:function(){return $e},ax:function(){return Be},ay:function(){return Wn},az:function(){return ke},b:function(){return Qu},c:function(){return ao},d:function(){return kc},e:function(){return sl},f:function(){return ki},g:function(){return zi},h:function(){return du},i:function(){return yc},j:function(){return B},k:function(){return Bp},l:function(){return Qf},m:function(){return Vp},o:function(){return je},r:function(){return dr},s:function(){return na},u:function(){return io}});var Ue,ie=U(3237),pe=U(1120),A=U(7326),R=U(136),j=U(8486),se=U(7762),P=U(4165),ye=U(7685),y=U(5861),J=U(5671),G=U(3144),Te=U(4902),Q=U(4942),Ee=U(2090),Ae=U(9681),Me=U(655),be=U(1877),Fe=U(4859),je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Qe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Je(){return(0,Q.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var At=function tt(){var b;return(0,Q.Z)(b={},"admin-restricted-operation","This operation is restricted to administrators only."),(0,Q.Z)(b,"argument-error",""),(0,Q.Z)(b,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,Q.Z)(b,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,Q.Z)(b,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,Q.Z)(b,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,Q.Z)(b,"cordova-not-ready","Cordova framework is not ready."),(0,Q.Z)(b,"cors-unsupported","This browser is not supported."),(0,Q.Z)(b,"credential-already-in-use","This credential is already associated with a different user account."),(0,Q.Z)(b,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,Q.Z)(b,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,Q.Z)(b,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,Q.Z)(b,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,Q.Z)(b,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,Q.Z)(b,"email-already-in-use","The email address is already in use by another account."),(0,Q.Z)(b,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,Q.Z)(b,"expired-action-code","The action code has expired."),(0,Q.Z)(b,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,Q.Z)(b,"internal-error","An internal AuthError has occurred."),(0,Q.Z)(b,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,Q.Z)(b,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,Q.Z)(b,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,Q.Z)(b,"invalid-auth-event","An internal AuthError has occurred."),(0,Q.Z)(b,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,Q.Z)(b,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,Q.Z)(b,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,Q.Z)(b,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,Q.Z)(b,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,Q.Z)(b,"invalid-email","The email address is badly formatted."),(0,Q.Z)(b,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,Q.Z)(b,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,Q.Z)(b,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,Q.Z)(b,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,Q.Z)(b,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Q.Z)(b,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,Q.Z)(b,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,Q.Z)(b,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,Q.Z)(b,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,Q.Z)(b,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,Q.Z)(b,"wrong-password","The password is invalid or the user does not have a password."),(0,Q.Z)(b,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,Q.Z)(b,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,Q.Z)(b,"invalid-provider-id","The specified provider ID is invalid."),(0,Q.Z)(b,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,Q.Z)(b,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,Q.Z)(b,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,Q.Z)(b,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,Q.Z)(b,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,Q.Z)(b,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,Q.Z)(b,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,Q.Z)(b,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,Q.Z)(b,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,Q.Z)(b,"missing-continue-uri","A continue URL must be provided in the request."),(0,Q.Z)(b,"missing-iframe-start","An internal AuthError has occurred."),(0,Q.Z)(b,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,Q.Z)(b,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,Q.Z)(b,"missing-multi-factor-info","No second factor identifier is provided."),(0,Q.Z)(b,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,Q.Z)(b,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,Q.Z)(b,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,Q.Z)(b,"app-deleted","This instance of FirebaseApp has been deleted."),(0,Q.Z)(b,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,Q.Z)(b,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,Q.Z)(b,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,Q.Z)(b,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,Q.Z)(b,"no-auth-event","An internal AuthError has occurred."),(0,Q.Z)(b,"no-such-provider","User was not linked to an account with the given provider."),(0,Q.Z)(b,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,Q.Z)(b,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,Q.Z)(b,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,Q.Z)(b,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,Q.Z)(b,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,Q.Z)(b,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,Q.Z)(b,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,Q.Z)(b,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,Q.Z)(b,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,Q.Z)(b,"rejected-credential","The request contains malformed or mismatching credentials."),(0,Q.Z)(b,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,Q.Z)(b,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,Q.Z)(b,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,Q.Z)(b,"timeout","The operation has timed out."),(0,Q.Z)(b,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,Q.Z)(b,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,Q.Z)(b,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,Q.Z)(b,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,Q.Z)(b,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,Q.Z)(b,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,Q.Z)(b,"unverified-email","The operation requires a verified email."),(0,Q.Z)(b,"user-cancelled","The user did not grant your application the permissions it requested."),(0,Q.Z)(b,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,Q.Z)(b,"user-disabled","The user account has been disabled by an administrator."),(0,Q.Z)(b,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,Q.Z)(b,"user-signed-out",""),(0,Q.Z)(b,"weak-password","The password must be 6 characters long or more."),(0,Q.Z)(b,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,Q.Z)(b,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),b},Ze=Je,oe=new Ee.LL("auth","Firebase",Je()),te=new be.Yd("@firebase/auth");function ue(b){if(te.logLevel<=be.in.ERROR){for(var w=arguments.length,k=new Array(w>1?w-1:0),E=1;E<w;E++)k[E-1]=arguments[E];te.error.apply(te,["Auth (".concat(Ae.SDK_VERSION,"): ").concat(b)].concat(k))}}function we(b){for(var w=arguments.length,k=new Array(w>1?w-1:0),E=1;E<w;E++)k[E-1]=arguments[E];throw at.apply(void 0,[b].concat(k))}function $e(b){for(var w=arguments.length,k=new Array(w>1?w-1:0),E=1;E<w;E++)k[E-1]=arguments[E];return at.apply(void 0,[b].concat(k))}function pt(b,w,k){var E=Object.assign(Object.assign({},Ze()),(0,Q.Z)({},w,k));return new Ee.LL("auth","Firebase",E).create(w,{appName:b.name})}function It(b,w,k){if(!(w instanceof k))throw k.name!==w.constructor.name&&we(b,"argument-error"),pt(b,"argument-error","Type of ".concat(w.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function at(b){for(var w=arguments.length,k=new Array(w>1?w-1:0),E=1;E<w;E++)k[E-1]=arguments[E];if("string"!=typeof b){var _,T=k[0],M=(0,Te.Z)(k.slice(1));return M[0]&&(M[0].appName=b.name),(_=b._errorFactory).create.apply(_,[T].concat((0,Te.Z)(M)))}return oe.create.apply(oe,[b].concat(k))}function Be(b,w){if(!b){for(var k=arguments.length,E=new Array(k>2?k-2:0),_=2;_<k;_++)E[_-2]=arguments[_];throw at.apply(void 0,[w].concat(E))}}function mt(b){var w="INTERNAL ASSERTION FAILED: "+b;throw ue(w),new Error(w)}function rn(b,w){b||mt(w)}var Tn=new Map;function Wn(b){rn(b instanceof Function,"Expected a class definition");var w=Tn.get(b);return w?(rn(w instanceof b,"Instance stored in cache mismatched with class"),w):(w=new b,Tn.set(b,w),w)}function Hr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ci(){return"http:"===kr()||"https:"===kr()}function kr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}var An=function(){function b(w,k){(0,J.Z)(this,b),this.shortDelay=w,this.longDelay=k,rn(k>w,"Short delay should be less than long delay!"),this.isMobile=(0,Ee.uI)()||(0,Ee.b$)()}return(0,G.Z)(b,[{key:"get",value:function(){return function ei(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ci()||(0,Ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),b}();function tn(b,w){rn(b.emulator,"Emulator should always be set here");var k=b.emulator.url;return w?"".concat(k).concat(w.startsWith("/")?w.slice(1):w):k}var pa=function(){function b(){(0,J.Z)(this,b)}return(0,G.Z)(b,null,[{key:"initialize",value:function(k,E,_){this.fetchImpl=k,E&&(this.headersImpl=E),_&&(this.responseImpl=_)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),b}(),xu=((0,Q.Z)(Ue={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,Q.Z)(Ue,"MISSING_CUSTOM_TOKEN","internal-error"),(0,Q.Z)(Ue,"INVALID_IDENTIFIER","invalid-email"),(0,Q.Z)(Ue,"MISSING_CONTINUE_URI","internal-error"),(0,Q.Z)(Ue,"INVALID_PASSWORD","wrong-password"),(0,Q.Z)(Ue,"MISSING_PASSWORD","internal-error"),(0,Q.Z)(Ue,"EMAIL_EXISTS","email-already-in-use"),(0,Q.Z)(Ue,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,Q.Z)(Ue,"INVALID_IDP_RESPONSE","invalid-credential"),(0,Q.Z)(Ue,"INVALID_PENDING_TOKEN","invalid-credential"),(0,Q.Z)(Ue,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,Q.Z)(Ue,"MISSING_REQ_TYPE","internal-error"),(0,Q.Z)(Ue,"EMAIL_NOT_FOUND","user-not-found"),(0,Q.Z)(Ue,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,Q.Z)(Ue,"EXPIRED_OOB_CODE","expired-action-code"),(0,Q.Z)(Ue,"INVALID_OOB_CODE","invalid-action-code"),(0,Q.Z)(Ue,"MISSING_OOB_CODE","internal-error"),(0,Q.Z)(Ue,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,Q.Z)(Ue,"INVALID_ID_TOKEN","invalid-user-token"),(0,Q.Z)(Ue,"TOKEN_EXPIRED","user-token-expired"),(0,Q.Z)(Ue,"USER_NOT_FOUND","user-token-expired"),(0,Q.Z)(Ue,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,Q.Z)(Ue,"INVALID_CODE","invalid-verification-code"),(0,Q.Z)(Ue,"INVALID_SESSION_INFO","invalid-verification-id"),(0,Q.Z)(Ue,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,Q.Z)(Ue,"MISSING_SESSION_INFO","missing-verification-id"),(0,Q.Z)(Ue,"SESSION_EXPIRED","code-expired"),(0,Q.Z)(Ue,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,Q.Z)(Ue,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,Q.Z)(Ue,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,Q.Z)(Ue,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,Q.Z)(Ue,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,Q.Z)(Ue,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,Q.Z)(Ue,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,Q.Z)(Ue,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,Q.Z)(Ue,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,Q.Z)(Ue,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,Q.Z)(Ue,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ue),Yi=new An(3e4,6e4);function un(b,w){return b.tenantId&&!w.tenantId?Object.assign(Object.assign({},w),{tenantId:b.tenantId}):w}function lr(b,w,k,E){return Ui.apply(this,arguments)}function Ui(){return Ui=(0,y.Z)((0,P.Z)().mark(function b(w,k,E,_){var M=arguments;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",Si(w,M.length>4&&void 0!==M[4]?M[4]:{},(0,y.Z)((0,P.Z)().mark(function Y(){var Ce,Xe,kt,lt;return(0,P.Z)().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ce={},Xe={},_&&("GET"===k?Xe=_:Ce={body:JSON.stringify(_)}),kt=(0,Ee.xO)(Object.assign({key:w.config.apiKey},Xe)).slice(1),Ct.next=6,w._getAdditionalHeaders();case 6:return(lt=Ct.sent)["Content-Type"]="application/json",w.languageCode&&(lt["X-Firebase-Locale"]=w.languageCode),Ct.abrupt("return",pa.fetch()(Jn(w,w.config.apiHost,E,kt),Object.assign({method:k,headers:lt,referrerPolicy:"no-referrer"},Ce)));case 10:case"end":return Ct.stop()}},Y)}))));case 2:case"end":return V.stop()}},b)})),Ui.apply(this,arguments)}function Si(b,w,k){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M,O,Y,Ce,Xe,kt,lt;return(0,P.Z)().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return w._canInitEmulator=!1,_=Object.assign(Object.assign({},xu),k),Ct.prev=2,T=new Ai(w),Ct.next=6,Promise.race([E(),T.promise]);case 6:return M=Ct.sent,T.clearNetworkTimeout(),Ct.next=10,M.json();case 10:if(!("needConfirmation"in(O=Ct.sent))){Ct.next=13;break}throw jn(w,"account-exists-with-different-credential",O);case 13:if(!M.ok||"errorMessage"in O){Ct.next=17;break}return Ct.abrupt("return",O);case 17:if(Y=(M.ok?O.errorMessage:O.error.message).split(" : "),Ce=(0,ye.Z)(Y,2),kt=Ce[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==(Xe=Ce[0])){Ct.next=23;break}throw jn(w,"credential-already-in-use",O);case 23:if("EMAIL_EXISTS"!==Xe){Ct.next=27;break}throw jn(w,"email-already-in-use",O);case 27:if("USER_DISABLED"!==Xe){Ct.next=29;break}throw jn(w,"user-disabled",O);case 29:if(lt=_[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-"),!kt){Ct.next=34;break}throw pt(w,lt,kt);case 34:we(w,lt);case 35:Ct.next=42;break;case 37:if(Ct.prev=37,Ct.t0=Ct.catch(2),!(Ct.t0 instanceof Ee.ZR)){Ct.next=41;break}throw Ct.t0;case 41:we(w,"network-request-failed");case 42:case"end":return Ct.stop()}},b,null,[[2,37]])}))).apply(this,arguments)}function Pr(b,w,k,E){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,y.Z)((0,P.Z)().mark(function b(w,k,E,_){var T,M,O=arguments;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return T=O.length>4&&void 0!==O[4]?O[4]:{},Y.next=3,lr(w,k,E,_,T);case 3:return"mfaPendingCredential"in(M=Y.sent)&&we(w,"multi-factor-auth-required",{_serverResponse:M}),Y.abrupt("return",M);case 6:case"end":return Y.stop()}},b)})),Ca.apply(this,arguments)}function Jn(b,w,k,E){var _="".concat(w).concat(k,"?").concat(E);return b.config.emulator?tn(b.config,_):"".concat(b.config.apiScheme,"://").concat(_)}var Ai=function(){function b(w){var k=this;(0,J.Z)(this,b),this.auth=w,this.timer=null,this.promise=new Promise(function(E,_){k.timer=setTimeout(function(){return _($e(k.auth,"network-request-failed"))},Yi.get())})}return(0,G.Z)(b,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),b}();function jn(b,w,k){var E={appName:b.name};k.email&&(E.email=k.email),k.phoneNumber&&(E.phoneNumber=k.phoneNumber);var _=$e(b,w,E);return _.customData._tokenResponse=k,_}function Gr(b,w){return fi.apply(this,arguments)}function fi(){return(fi=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:delete",k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Qi(b,w){return xt.apply(this,arguments)}function xt(){return(xt=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:update",k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function hi(b,w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:lookup",k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Ot(b){if(b)try{var w=new Date(Number(b));if(!isNaN(w.getTime()))return w.toUTCString()}catch(k){}}function pr(){return pr=(0,y.Z)((0,P.Z)().mark(function b(w){var k,E,_,T,M,O,V=arguments;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return k=V.length>1&&void 0!==V[1]&&V[1],E=(0,Ee.m9)(w),Ce.next=4,E.getIdToken(k);case 4:return Be((T=xi(_=Ce.sent))&&T.exp&&T.auth_time&&T.iat,E.auth,"internal-error"),O=null==(M="object"==typeof T.firebase?T.firebase:void 0)?void 0:M.sign_in_provider,Ce.abrupt("return",{claims:T,token:_,authTime:Ot(Fn(T.auth_time)),issuedAtTime:Ot(Fn(T.iat)),expirationTime:Ot(Fn(T.exp)),signInProvider:O||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null});case 10:case"end":return Ce.stop()}},b)})),pr.apply(this,arguments)}function Fn(b){return 1e3*Number(b)}function xi(b){var w,k=b.split("."),E=(0,ye.Z)(k,3),T=E[1];if(void 0===E[0]||void 0===T||void 0===E[2])return ue("JWT malformed, contained fewer than 3 sections"),null;try{var O=(0,Ee.tV)(T);return O?JSON.parse(O):(ue("Failed to decode base64 JWT payload"),null)}catch(V){return ue("Caught error parsing JWT payload as JSON",null===(w=V)||void 0===w?void 0:w.toString()),null}}function sr(b,w){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,y.Z)((0,P.Z)().mark(function b(w,k){var _=arguments;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(_.length>2&&void 0!==_[2]&&_[2])){M.next=3;break}return M.abrupt("return",k);case 3:return M.prev=3,M.next=6,k;case 6:return M.abrupt("return",M.sent);case 9:if(M.prev=9,M.t0=M.catch(3),!(M.t0 instanceof Ee.ZR&&Ta(M.t0))){M.next=15;break}if(w.auth.currentUser!==w){M.next=15;break}return M.next=15,w.auth.signOut();case 15:throw M.t0;case 16:case"end":return M.stop()}},b,null,[[3,9]])})),Ht.apply(this,arguments)}function Ta(b){var w=b.code;return w==="auth/".concat("user-disabled")||w==="auth/".concat("user-token-expired")}var Rn=function(){function b(w){(0,J.Z)(this,b),this.user=w,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,G.Z)(b,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(k){var E;if(k){var _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}this.errorBackoff=3e4;var M=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,M)}},{key:"schedule",value:function(){var k=this,E=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var _=this.getInterval(E);this.timerId=setTimeout((0,y.Z)((0,P.Z)().mark(function T(){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,k.iteration();case 2:case"end":return O.stop()}},T)})),_)}}},{key:"iteration",value:(w=(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,this.user.getIdToken(!0);case 3:M.next=9;break;case 5:return M.prev=5,M.t0=M.catch(0),(null===(_=M.t0)||void 0===_?void 0:_.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),M.abrupt("return");case 9:this.schedule();case 10:case"end":return M.stop()}},E,this,[[0,5]])})),function k(){return w.apply(this,arguments)})}]),b;var w}(),Ke=function(){function b(w,k){(0,J.Z)(this,b),this.createdAt=w,this.lastLoginAt=k,this._initializeTime()}return(0,G.Z)(b,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ot(this.lastLoginAt),this.creationTime=Ot(this.createdAt)}},{key:"_copy",value:function(k){this.createdAt=k.createdAt,this.lastLoginAt=k.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),b}();function _e(b){return le.apply(this,arguments)}function le(){return(le=(0,y.Z)((0,P.Z)().mark(function b(w){var k,E,_,T,M,O,V,Ce,Xe,kt;return(0,P.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return E=w.auth,wt.next=3,w.getIdToken();case 3:return _=wt.sent,wt.next=6,sr(w,hi(E,{idToken:_}));case 6:Be(null==(T=wt.sent)?void 0:T.users.length,E,"internal-error"),w._notifyReloadListener(M=T.users[0]),O=null!==(k=M.providerUserInfo)&&void 0!==k&&k.length?et(M.providerUserInfo):[],V=Oe(w.providerData,O),Ce=!(w.email&&M.passwordHash||null!=V&&V.length),Xe=!!w.isAnonymous&&Ce,kt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:V,metadata:new Ke(M.createdAt,M.lastLoginAt),isAnonymous:Xe},Object.assign(w,kt);case 17:case"end":return wt.stop()}},b)}))).apply(this,arguments)}function Re(){return(Re=(0,y.Z)((0,P.Z)().mark(function b(w){var k;return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return k=(0,Ee.m9)(w),_.next=3,_e(k);case 3:return _.next=5,k.auth._persistUserIfCurrent(k);case 5:k.auth._notifyListenersIfCurrent(k);case 6:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Oe(b,w){var k=b.filter(function(E){return!w.some(function(_){return _.providerId===E.providerId})});return[].concat((0,Te.Z)(k),(0,Te.Z)(w))}function et(b){return b.map(function(w){var k=w.providerId,E=(0,Me._T)(w,["providerId"]);return{providerId:k,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function dt(b,w){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Si(w,{},(0,y.Z)((0,P.Z)().mark(function M(){var O,V,Xe,kt;return(0,P.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return O=(0,Ee.xO)({grant_type:"refresh_token",refresh_token:k}).slice(1),Xe=Jn(w,(V=w.config).tokenApiHost,"/v1/token","key=".concat(V.apiKey)),wt.next=5,w._getAdditionalHeaders();case 5:return(kt=wt.sent)["Content-Type"]="application/x-www-form-urlencoded",wt.abrupt("return",pa.fetch()(Xe,{method:"POST",headers:kt,body:O}));case 8:case"end":return wt.stop()}},M)})));case 2:return T.abrupt("return",{accessToken:(E=T.sent).access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token});case 4:case"end":return T.stop()}},b)}))).apply(this,arguments)}var Vt=function(){function b(){(0,J.Z)(this,b),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,G.Z)(b,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(k){Be(k.idToken,"internal-error"),Be(void 0!==k.idToken,"internal-error"),Be(void 0!==k.refreshToken,"internal-error");var E="expiresIn"in k&&void 0!==k.expiresIn?Number(k.expiresIn):function zr(b){var w=xi(b);return Be(w,"internal-error"),Be(void 0!==w.exp,"internal-error"),Be(void 0!==w.iat,"internal-error"),Number(w.exp)-Number(w.iat)}(k.idToken);this.updateTokensAndExpiration(k.idToken,k.refreshToken,E)}},{key:"getToken",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M=arguments;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(T=M.length>1&&void 0!==M[1]&&M[1],Be(!this.accessToken||this.refreshToken,_,"user-token-expired"),T||!this.accessToken||this.isExpired){V.next=4;break}return V.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){V.next=8;break}return V.next=7,this.refresh(_,this.refreshToken);case 7:return V.abrupt("return",this.accessToken);case 8:return V.abrupt("return",null);case 9:case"end":return V.stop()}},E,this)})),function k(E){return w.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var M;return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,dt(_,T);case 2:this.updateTokensAndExpiration((M=Xe.sent).accessToken,M.refreshToken,Number(M.expiresIn));case 7:case"end":return Xe.stop()}},E,this)}));return function k(E,_){return w.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(k,E,_){this.refreshToken=E||null,this.accessToken=k||null,this.expirationTime=Date.now()+1e3*_}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(k){this.accessToken=k.accessToken,this.refreshToken=k.refreshToken,this.expirationTime=k.expirationTime}},{key:"_clone",value:function(){return Object.assign(new b,this.toJSON())}},{key:"_performRefresh",value:function(){return mt("not implemented")}}],[{key:"fromJSON",value:function(k,E){var _=E.refreshToken,T=E.accessToken,M=E.expirationTime,O=new b;return _&&(Be("string"==typeof _,"internal-error",{appName:k}),O.refreshToken=_),T&&(Be("string"==typeof T,"internal-error",{appName:k}),O.accessToken=T),M&&(Be("number"==typeof M,"internal-error",{appName:k}),O.expirationTime=M),O}}]),b;var w}();function Gt(b,w){Be("string"==typeof b||void 0===b,"internal-error",{appName:w})}var me=function(){function b(w){(0,J.Z)(this,b);var k=w.uid,E=w.auth,_=w.stsTokenManager,T=(0,Me._T)(w,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=k,this.auth=E,this.stsTokenManager=_,this.accessToken=_.accessToken,this.displayName=T.displayName||null,this.email=T.email||null,this.emailVerified=T.emailVerified||!1,this.phoneNumber=T.phoneNumber||null,this.photoURL=T.photoURL||null,this.isAnonymous=T.isAnonymous||!1,this.tenantId=T.tenantId||null,this.providerData=T.providerData?(0,Te.Z)(T.providerData):[],this.metadata=new Ke(T.createdAt||void 0,T.lastLoginAt||void 0)}return(0,G.Z)(b,[{key:"getIdToken",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,sr(this,this.stsTokenManager.getToken(this.auth,_));case 2:if(Be(T=O.sent,this.auth,"internal-error"),this.accessToken===T){O.next=9;break}return this.accessToken=T,O.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return O.abrupt("return",T);case 10:case"end":return O.stop()}},E,this)})),function k(E){return w.apply(this,arguments)})},{key:"getIdTokenResult",value:function(k){return function ti(b){return pr.apply(this,arguments)}(this,k)}},{key:"reload",value:function(){return function ve(b){return Re.apply(this,arguments)}(this)}},{key:"_assign",value:function(k){this!==k&&(Be(this.uid===k.uid,this.auth,"internal-error"),this.displayName=k.displayName,this.photoURL=k.photoURL,this.email=k.email,this.emailVerified=k.emailVerified,this.phoneNumber=k.phoneNumber,this.isAnonymous=k.isAnonymous,this.tenantId=k.tenantId,this.providerData=k.providerData.map(function(E){return Object.assign({},E)}),this.metadata._copy(k.metadata),this.stsTokenManager._assign(k.stsTokenManager))}},{key:"_clone",value:function(k){return new b(Object.assign(Object.assign({},this),{auth:k,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(k){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=k,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(k){this.reloadListener?this.reloadListener(k):this.reloadUserInfo=k}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M,O=arguments;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(T=O.length>1&&void 0!==O[1]&&O[1],M=!1,_.idToken&&_.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(_),M=!0),!T){Y.next=6;break}return Y.next=6,_e(this);case 6:return Y.next=8,this.auth._persistUserIfCurrent(this);case 8:M&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return Y.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"delete",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this.getIdToken();case 2:return _=M.sent,M.next=5,sr(this,Gr(this.auth,{idToken:_}));case 5:return this.stsTokenManager.clearRefreshToken(),M.abrupt("return",this.auth.signOut());case 7:case"end":return M.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(k){return Object.assign({},k)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(k,E){var _,T,M,O,V,Y,Ce,Xe,kt=null!==(_=E.displayName)&&void 0!==_?_:void 0,lt=null!==(T=E.email)&&void 0!==T?T:void 0,wt=null!==(M=E.phoneNumber)&&void 0!==M?M:void 0,Ct=null!==(O=E.photoURL)&&void 0!==O?O:void 0,Or=null!==(V=E.tenantId)&&void 0!==V?V:void 0,Yn=null!==(Y=E._redirectEventId)&&void 0!==Y?Y:void 0,Xa=null!==(Ce=E.createdAt)&&void 0!==Ce?Ce:void 0,hn=null!==(Xe=E.lastLoginAt)&&void 0!==Xe?Xe:void 0,Zr=E.uid,gu=E.emailVerified,xs=E.isAnonymous,Ac=E.providerData,yr=E.stsTokenManager;Be(Zr&&yr,k,"internal-error");var cl=Vt.fromJSON(this.name,yr);Be("string"==typeof Zr,k,"internal-error"),Gt(kt,k.name),Gt(lt,k.name),Be("boolean"==typeof gu,k,"internal-error"),Be("boolean"==typeof xs,k,"internal-error"),Gt(wt,k.name),Gt(Ct,k.name),Gt(Or,k.name),Gt(Yn,k.name),Gt(Xa,k.name),Gt(hn,k.name);var fl=new b({uid:Zr,auth:k,email:lt,emailVerified:gu,displayName:kt,isAnonymous:xs,photoURL:Ct,phoneNumber:wt,tenantId:Or,stsTokenManager:cl,createdAt:Xa,lastLoginAt:hn});return Ac&&Array.isArray(Ac)&&(fl.providerData=Ac.map(function(Ld){return Object.assign({},Ld)})),Yn&&(fl._redirectEventId=Yn),fl}},{key:"_fromIdTokenResponse",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var M,O,V,Y=arguments;return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return M=Y.length>2&&void 0!==Y[2]&&Y[2],(O=new Vt).updateFromServerResponse(T),V=new b({uid:T.localId,auth:_,stsTokenManager:O,isAnonymous:M}),Xe.next=6,_e(V);case 6:return Xe.abrupt("return",V);case 7:case"end":return Xe.stop()}},E)}));return function k(E,_){return w.apply(this,arguments)}}()}]),b;var w}(),Ie=function(){var b=function(){function w(){(0,J.Z)(this,w),this.type="NONE",this.storage={}}return(0,G.Z)(w,[{key:"_isAvailable",value:(k=(0,y.Z)((0,P.Z)().mark(function _(){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",!0);case 1:case"end":return M.stop()}},_)})),function E(){return k.apply(this,arguments)})},{key:"_set",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T,M){return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:this.storage[T]=M;case 1:case"end":return V.stop()}},_,this)}));return function E(_,T){return k.apply(this,arguments)}}()},{key:"_get",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){var M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",void 0===(M=this.storage[T])?null:M);case 2:case"end":return V.stop()}},_,this)}));return function E(_){return k.apply(this,arguments)}}()},{key:"_remove",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:delete this.storage[T];case 1:case"end":return O.stop()}},_,this)}));return function E(_){return k.apply(this,arguments)}}()},{key:"_addListener",value:function(E,_){}},{key:"_removeListener",value:function(E,_){}}]),w;var k}();return b.type="NONE",b}(),he=Ie;function ke(b,w,k){return"firebase".concat(":",b,":").concat(w,":").concat(k)}var Le=function(){function b(w,k,E){(0,J.Z)(this,b),this.persistence=w,this.auth=k,this.userKey=E;var _=this.auth,T=_.config,M=_.name;this.fullUserKey=ke(this.userKey,T.apiKey,M),this.fullPersistenceKey=ke("persistence",T.apiKey,M),this.boundEventHandler=k._onStorageEvent.bind(k),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,G.Z)(b,[{key:"setCurrentUser",value:function(k){return this.persistence._set(this.fullUserKey,k.toJSON())}},{key:"getCurrentUser",value:(w=(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,this.persistence._get(this.fullUserKey);case 2:return M.abrupt("return",(_=M.sent)?me._fromJSON(this.auth,_):null);case 4:case"end":return M.stop()}},E,this)})),function k(){return w.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.persistence!==_){O.next=2;break}return O.abrupt("return");case 2:return O.next=4,this.getCurrentUser();case 4:return T=O.sent,O.next=7,this.removeCurrentUser();case 7:if(this.persistence=_,!T){O.next=10;break}return O.abrupt("return",this.setCurrentUser(T));case 10:case"end":return O.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var M,O,V,Y,Ce,Xe,kt,lt,wt,Ct,Or,Yn=arguments;return(0,P.Z)().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(M=Yn.length>2&&void 0!==Yn[2]?Yn[2]:"authUser",T.length){hn.next=3;break}return hn.abrupt("return",new b(Wn(he),_,M));case 3:return hn.next=5,Promise.all(T.map(function(){var Zr=(0,y.Z)((0,P.Z)().mark(function gu(xs){return(0,P.Z)().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return yr.next=2,xs._isAvailable();case 2:if(!yr.sent){yr.next=4;break}return yr.abrupt("return",xs);case 4:return yr.abrupt("return",void 0);case 5:case"end":return yr.stop()}},gu)}));return function(gu){return Zr.apply(this,arguments)}}()));case 5:O=hn.sent.filter(function(Zr){return Zr}),V=O[0]||Wn(he),Y=ke(M,_.config.apiKey,_.name),Ce=null,Xe=(0,se.Z)(T),hn.prev=10,Xe.s();case 12:if((kt=Xe.n()).done){hn.next=29;break}return lt=kt.value,hn.prev=14,hn.next=17,lt._get(Y);case 17:if(!(wt=hn.sent)){hn.next=23;break}return Ct=me._fromJSON(_,wt),lt!==V&&(Ce=Ct),V=lt,hn.abrupt("break",29);case 23:hn.next=27;break;case 25:hn.prev=25,hn.t0=hn.catch(14);case 27:hn.next=12;break;case 29:hn.next=34;break;case 31:hn.prev=31,hn.t1=hn.catch(10),Xe.e(hn.t1);case 34:return hn.prev=34,Xe.f(),hn.finish(34);case 37:if(Or=O.filter(function(Zr){return Zr._shouldAllowMigration}),V._shouldAllowMigration&&Or.length){hn.next=40;break}return hn.abrupt("return",new b(V,_,M));case 40:if(V=Or[0],!Ce){hn.next=44;break}return hn.next=44,V._set(Y,Ce.toJSON());case 44:return hn.next=46,Promise.all(T.map(function(){var Zr=(0,y.Z)((0,P.Z)().mark(function gu(xs){return(0,P.Z)().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(xs===V){yr.next=8;break}return yr.prev=1,yr.next=4,xs._remove(Y);case 4:yr.next=8;break;case 6:yr.prev=6,yr.t0=yr.catch(1);case 8:case"end":return yr.stop()}},gu,null,[[1,6]])}));return function(gu){return Zr.apply(this,arguments)}}()));case 46:return hn.abrupt("return",new b(V,_,M));case 47:case"end":return hn.stop()}},E,null,[[10,31,34,37],[14,25]])}));return function k(E,_){return w.apply(this,arguments)}}()}]),b;var w}();function vt(b){var w=b.toLowerCase();if(w.includes("opera/")||w.includes("opr/")||w.includes("opios/"))return"Opera";if(Bt(w))return"IEMobile";if(w.includes("msie")||w.includes("trident/"))return"IE";if(w.includes("edge/"))return"Edge";if(it(w))return"Firefox";if(w.includes("silk/"))return"Silk";if(ln(w))return"Blackberry";if(di(w))return"Webos";if(ht(w))return"Safari";if((w.includes("chrome/")||Pt(w))&&!w.includes("edge/"))return"Chrome";if(er(w))return"Android";var E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==E?void 0:E.length)?E[1]:"Other"}function it(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/firefox\//i.test(b)}function ht(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)(),w=b.toLowerCase();return w.includes("safari/")&&!w.includes("chrome/")&&!w.includes("crios/")&&!w.includes("android")}function Pt(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/crios\//i.test(b)}function Bt(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/iemobile/i.test(b)}function er(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/android/i.test(b)}function ln(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/blackberry/i.test(b)}function di(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/webos/i.test(b)}function Zn(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function nr(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function ni(){var w,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return Zn(b)&&!(null===(w=window.navigator)||void 0===w||!w.standalone)}function Mr(){return(0,Ee.w1)()&&10===document.documentMode}function Cr(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Ee.z$)();return Zn(b)||er(b)||di(b)||ln(b)||/windows phone/i.test(b)||Bt(b)}function Bi(b){var k,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(b){case"Browser":k=vt((0,Ee.z$)());break;case"Worker":k="".concat(vt((0,Ee.z$)()),"-").concat(b);break;default:k=b}var E=w.length?w.join(","):"FirebaseCore-web";return"".concat(k,"/","JsCore","/").concat(Ae.SDK_VERSION,"/").concat(E)}var Ft=function(){function b(w){(0,J.Z)(this,b),this.auth=w,this.queue=[]}return(0,G.Z)(b,[{key:"pushCallback",value:function(k,E){var _=this,T=function(V){return new Promise(function(Y,Ce){try{Y(k(V))}catch(kt){Ce(kt)}})};T.onAbort=E,this.queue.push(T);var M=this.queue.length-1;return function(){_.queue[M]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M,O,V,Y,Ce,Xe,kt;return(0,P.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(this.auth.currentUser!==_){wt.next=2;break}return wt.abrupt("return");case 2:M=[],wt.prev=3,O=(0,se.Z)(this.queue),wt.prev=5,O.s();case 7:if((V=O.n()).done){wt.next=14;break}return Y=V.value,wt.next=11,Y(_);case 11:Y.onAbort&&M.push(Y.onAbort);case 12:wt.next=7;break;case 14:wt.next=19;break;case 16:wt.prev=16,wt.t0=wt.catch(5),O.e(wt.t0);case 19:return wt.prev=19,O.f(),wt.finish(19);case 22:wt.next=30;break;case 24:wt.prev=24,wt.t1=wt.catch(3),M.reverse(),Ce=(0,se.Z)(M);try{for(Ce.s();!(Xe=Ce.n()).done;){kt=Xe.value;try{kt()}catch(Ct){}}}catch(Ct){Ce.e(Ct)}finally{Ce.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(T=wt.t1)||void 0===T?void 0:T.message});case 30:case"end":return wt.stop()}},E,this,[[3,24],[5,16,19,22]])})),function k(E){return w.apply(this,arguments)})}]),b;var w}(),zt=function(){function b(w,k,E){(0,J.Z)(this,b),this.app=w,this.heartbeatServiceProvider=k,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kr(this),this.idTokenSubscription=new Kr(this),this.beforeStateQueue=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=w.name,this.clientVersion=E.sdkClientVersion}return(0,G.Z)(b,[{key:"_initializeWithPersistence",value:function(k,E){var _=this;return E&&(this._popupRedirectResolver=Wn(E)),this._initializationPromise=this.queue((0,y.Z)((0,P.Z)().mark(function T(){var M,O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!_._deleted){Y.next=2;break}return Y.abrupt("return");case 2:return Y.next=4,Le.create(_,k);case 4:if(_.persistenceManager=Y.sent,!_._deleted){Y.next=7;break}return Y.abrupt("return");case 7:if(null===(M=_._popupRedirectResolver)||void 0===M||!M._shouldInitProactively){Y.next=15;break}return Y.prev=8,Y.next=11,_._popupRedirectResolver._initialize(_);case 11:Y.next=15;break;case 13:Y.prev=13,Y.t0=Y.catch(8);case 15:return Y.next=17,_.initializeCurrentUser(E);case 17:if(_.lastNotifiedUid=(null===(O=_.currentUser)||void 0===O?void 0:O.uid)||null,!_._deleted){Y.next=20;break}return Y.abrupt("return");case 20:_._isInitialized=!0;case 21:case"end":return Y.stop()}},T,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:(w=(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!this._deleted){M.next=2;break}return M.abrupt("return");case 2:return M.next=4,this.assertedPersistence.getCurrentUser();case 4:if(_=M.sent,this.currentUser||_){M.next=7;break}return M.abrupt("return");case 7:if(!this.currentUser||!_||this.currentUser.uid!==_.uid){M.next=12;break}return this._currentUser._assign(_),M.next=11,this.currentUser.getIdToken();case 11:return M.abrupt("return");case 12:return M.next=14,this._updateCurrentUser(_,!0);case 14:case"end":return M.stop()}},E,this)})),function k(){return w.apply(this,arguments)})},{key:"initializeCurrentUser",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M,O,V,Y,Ce,Xe;return(0,P.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=2,this.assertedPersistence.getCurrentUser();case 2:if(O=M=lt.sent,V=!1,!_||!this.config.authDomain){lt.next=14;break}return lt.next=8,this.getOrInitRedirectPersistenceManager();case 8:return Y=null===(T=this.redirectUser)||void 0===T?void 0:T._redirectEventId,Ce=null==O?void 0:O._redirectEventId,lt.next=12,this.tryRedirectSignIn(_);case 12:Xe=lt.sent,(!Y||Y===Ce)&&(null==Xe?void 0:Xe.user)&&(O=Xe.user,V=!0);case 14:if(O){lt.next=16;break}return lt.abrupt("return",this.directlySetCurrentUser(null));case 16:if(O._redirectEventId){lt.next=32;break}if(!V){lt.next=27;break}return lt.prev=18,lt.next=21,this.beforeStateQueue.runMiddleware(O);case 21:lt.next=27;break;case 23:lt.prev=23,lt.t0=lt.catch(18),O=M,this._popupRedirectResolver._overrideRedirectResult(this,function(){return Promise.reject(lt.t0)});case 27:if(!O){lt.next=31;break}return lt.abrupt("return",this.reloadAndSetCurrentUserOrClear(O));case 31:return lt.abrupt("return",this.directlySetCurrentUser(null));case 32:return Be(this._popupRedirectResolver,this,"argument-error"),lt.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==O._redirectEventId){lt.next=37;break}return lt.abrupt("return",this.directlySetCurrentUser(O));case 37:return lt.abrupt("return",this.reloadAndSetCurrentUserOrClear(O));case 38:case"end":return lt.stop()}},E,this,[[18,23]])}));return function k(E){return w.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return T=null,O.prev=1,O.next=4,this._popupRedirectResolver._completeRedirectFn(this,_,!0);case 4:T=O.sent,O.next=11;break;case 7:return O.prev=7,O.t0=O.catch(1),O.next=11,this._setRedirectUser(null);case 11:return O.abrupt("return",T);case 12:case"end":return O.stop()}},E,this,[[1,7]])}));return function k(E){return w.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,_e(_);case 3:O.next=9;break;case 5:if(O.prev=5,O.t0=O.catch(0),(null===(T=O.t0)||void 0===T?void 0:T.code)==="auth/".concat("network-request-failed")){O.next=9;break}return O.abrupt("return",this.directlySetCurrentUser(null));case 9:return O.abrupt("return",this.directlySetCurrentUser(_));case 10:case"end":return O.stop()}},E,this,[[0,5]])}));return function k(E){return w.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function Ia(){if("undefined"==typeof navigator)return null;var b=navigator;return b.languages&&b.languages[0]||b.language||null}()}},{key:"_delete",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:this._deleted=!0;case 1:case"end":return T.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return(T=_?(0,Ee.m9)(_):null)&&Be(T.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),O.abrupt("return",this._updateCurrentUser(T&&T._clone(this)));case 3:case"end":return O.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var M,T=this,O=arguments;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(M=O.length>1&&void 0!==O[1]&&O[1],!this._deleted){Y.next=3;break}return Y.abrupt("return");case 3:if(_&&Be(this.tenantId===_.tenantId,this,"tenant-id-mismatch"),M){Y.next=7;break}return Y.next=7,this.beforeStateQueue.runMiddleware(_);case 7:return Y.abrupt("return",this.queue((0,y.Z)((0,P.Z)().mark(function Ce(){return(0,P.Z)().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,T.directlySetCurrentUser(_);case 2:T.notifyAuthListeners();case 3:case"end":return kt.stop()}},Ce)}))));case 8:case"end":return Y.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"signOut",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){T.next=5;break}return T.next=5,this._setRedirectUser(null);case 5:return T.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return T.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()},{key:"setPersistence",value:function(k){var E=this;return this.queue((0,y.Z)((0,P.Z)().mark(function _(){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,E.assertedPersistence.setPersistence(Wn(k));case 2:case"end":return M.stop()}},_)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(k){this._errorFactory=new Ee.LL("auth","Firebase",k())}},{key:"onAuthStateChanged",value:function(k,E,_){return this.registerStateListener(this.authStateSubscription,k,E,_)}},{key:"beforeAuthStateChanged",value:function(k,E){return this.beforeStateQueue.pushCallback(k,E)}},{key:"onIdTokenChanged",value:function(k,E,_){return this.registerStateListener(this.idTokenSubscription,k,E,_)}},{key:"toJSON",value:function(){var k;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(k=this._currentUser)||void 0===k?void 0:k.toJSON()}}},{key:"_setRedirectUser",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.getOrInitRedirectPersistenceManager(T);case 2:return M=V.sent,V.abrupt("return",null===_?M.removeCurrentUser():M.setCurrentUser(_));case 4:case"end":return V.stop()}},E,this)}));return function k(E,_){return w.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.redirectPersistenceManager){O.next=9;break}return Be(T=_&&Wn(_)||this._popupRedirectResolver,this,"argument-error"),O.next=5,Le.create(this,[Wn(T._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=O.sent,O.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=O.sent;case 9:return O.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return O.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!this._isInitialized){V.next=3;break}return V.next=3,this.queue((0,y.Z)((0,P.Z)().mark(function Y(){return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:case"end":return Xe.stop()}},Y)})));case 3:if((null===(T=this._currentUser)||void 0===T?void 0:T._redirectEventId)!==_){V.next=5;break}return V.abrupt("return",this._currentUser);case 5:if((null===(M=this.redirectUser)||void 0===M?void 0:M._redirectEventId)!==_){V.next=7;break}return V.abrupt("return",this.redirectUser);case 7:return V.abrupt("return",null);case 8:case"end":return V.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T=this;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(_!==this.currentUser){O.next=2;break}return O.abrupt("return",this.queue((0,y.Z)((0,P.Z)().mark(function V(){return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",T.directlySetCurrentUser(_));case 1:case"end":return Ce.stop()}},V)}))));case 2:case"end":return O.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(k){k===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var k,E;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var _=null!==(E=null===(k=this.currentUser)||void 0===k?void 0:k.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(k,E,_,T){var M=this;if(this._deleted)return function(){};var O="function"==typeof E?E:E.next.bind(E),V=this._isInitialized?Promise.resolve():this._initializationPromise;return Be(V,this,"internal-error"),V.then(function(){return O(M.currentUser)}),"function"==typeof E?k.addObserver(E,_,T):k.addObserver(E)}},{key:"directlySetCurrentUser",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.currentUser&&this.currentUser!==_&&this._currentUser._stopProactiveRefresh(),_&&this.isProactiveRefreshEnabled&&_._startProactiveRefresh(),this.currentUser=_,!_){M.next=8;break}return M.next=6,this.assertedPersistence.setCurrentUser(_);case 6:M.next=10;break;case 8:return M.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return M.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"queue",value:function(k){return this.operations=this.operations.then(k,k),this.operations}},{key:"assertedPersistence",get:function(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(k){!k||this.frameworks.includes(k)||(this.frameworks.push(k),this.frameworks.sort(),this.clientVersion=Bi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return T=(0,Q.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(T["X-Firebase-gmpid"]=this.app.options.appId),V.next=4,null===(_=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();case 4:return(M=V.sent)&&(T["X-Firebase-Client"]=M),V.abrupt("return",T);case 7:case"end":return V.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()}]),b;var w}();function fn(b){return(0,Ee.m9)(b)}var Kr=function(){function b(w){var k=this;(0,J.Z)(this,b),this.auth=w,this.observer=null,this.addObserver=(0,Ee.ne)(function(E){return k.observer=E})}return(0,G.Z)(b,[{key:"next",get:function(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),b}();function us(b,w,k){var E=fn(b);Be(E._canInitEmulator,E,"emulator-config-failed"),Be(/^https?:\/\//.test(w),E,"invalid-emulator-scheme");var _=!(null==k||!k.disableWarnings),T=Tr(w),M=function Xs(b){var w=Tr(b),k=/(\/\/)?([^?#/]+)/.exec(b.substr(w.length));if(!k)return{host:"",port:null};var E=k[2].split("@").pop()||"",_=/^(\[[^\]]+\])(:|$)/.exec(E);if(_){var T=_[1];return{host:T,port:In(E.substr(T.length+1))}}var M=E.split(":"),O=(0,ye.Z)(M,2);return{host:O[0],port:In(O[1])}}(w),O=M.host,V=M.port,Y=null===V?"":":".concat(V);E.config.emulator={url:"".concat(T,"//").concat(O).concat(Y,"/")},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:O,port:V,protocol:T.replace(":",""),options:Object.freeze({disableWarnings:_})}),_||function Bu(){function b(){var w=document.createElement("p"),k=w.style;w.innerText="Running in emulator mode. Do not use with production credentials.",k.position="fixed",k.width="100%",k.backgroundColor="#ffffff",k.border=".1em solid #000000",k.color="#b50000",k.bottom="0px",k.left="0px",k.margin="0px",k.zIndex="10000",k.textAlign="center",w.classList.add("firebase-emulator-warning"),document.body.appendChild(w)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Tr(b){var w=b.indexOf(":");return w<0?"":b.substr(0,w+1)}function In(b){if(!b)return null;var w=Number(b);return isNaN(w)?null:w}var Ba=function(){function b(w,k){(0,J.Z)(this,b),this.providerId=w,this.signInMethod=k}return(0,G.Z)(b,[{key:"toJSON",value:function(){return mt("not implemented")}},{key:"_getIdTokenResponse",value:function(k){return mt("not implemented")}},{key:"_linkToIdToken",value:function(k,E){return mt("not implemented")}},{key:"_getReauthenticationResolver",value:function(k){return mt("not implemented")}}]),b}();function pn(b,w){return Js.apply(this,arguments)}function Js(){return(Js=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:resetPassword",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function eu(b,w){return Es.apply(this,arguments)}function Es(){return(Es=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:update",k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Is(b,w){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:update",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Va(b,w){return os.apply(this,arguments)}function os(){return(os=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithPassword",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function vi(b,w){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:sendOobCode",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Wl(b,w){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",vi(w,k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Dp(b,w){return vd.apply(this,arguments)}function vd(){return(vd=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",vi(w,k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Lr(b,w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",vi(w,k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Gl(b,w){return tu.apply(this,arguments)}function tu(){return(tu=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",vi(w,k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function zl(b,w){return cr.apply(this,arguments)}function cr(){return(cr=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithEmailLink",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function pd(b,w){return Df.apply(this,arguments)}function Df(){return(Df=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithEmailLink",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}var Sf=function(b){(0,R.Z)(k,b);var E,w=(0,j.Z)(k);function k(E,_,T){var M,O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,J.Z)(this,k),(M=w.call(this,"password",T))._email=E,M._password=_,M._tenantId=O,M}return(0,G.Z)(k,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(E=(0,y.Z)((0,P.Z)().mark(function T(M){return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:V.t0=this.signInMethod,V.next="password"===V.t0?3:"emailLink"===V.t0?4:5;break;case 3:return V.abrupt("return",Va(M,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return V.abrupt("return",zl(M,{email:this._email,oobCode:this._password}));case 5:we(M,"internal-error");case 6:case"end":return V.stop()}},T,this)})),function _(T){return E.apply(this,arguments)})},{key:"_linkToIdToken",value:function(){var E=(0,y.Z)((0,P.Z)().mark(function T(M,O){return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:Y.t0=this.signInMethod,Y.next="password"===Y.t0?3:"emailLink"===Y.t0?4:5;break;case 3:return Y.abrupt("return",eu(M,{idToken:O,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return Y.abrupt("return",pd(M,{idToken:O,email:this._email,oobCode:this._password}));case 5:we(M,"internal-error");case 6:case"end":return Y.stop()}},T,this)}));return function _(T,M){return E.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(_){return this._getIdTokenResponse(_)}}],[{key:"_fromEmailAndPassword",value:function(_,T){return new k(_,T,"password")}},{key:"_fromEmailAndCode",value:function(_,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new k(_,T,"emailLink",M)}},{key:"fromJSON",value:function(_){var T="string"==typeof _?JSON.parse(_):_;if((null==T?void 0:T.email)&&(null==T?void 0:T.password)){if("password"===T.signInMethod)return this._fromEmailAndPassword(T.email,T.password);if("emailLink"===T.signInMethod)return this._fromEmailAndCode(T.email,T.password,T.tenantId)}return null}}]),k}(Ba);function ja(b,w){return Af.apply(this,arguments)}function Af(){return(Af=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithIdp",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}var Ha=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(){var E;return(0,J.Z)(this,k),(E=w.apply(this,arguments)).pendingToken=null,E}return(0,G.Z)(k,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(_){return ja(_,this.buildRequest())}},{key:"_linkToIdToken",value:function(_,T){var M=this.buildRequest();return M.idToken=T,ja(_,M)}},{key:"_getReauthenticationResolver",value:function(_){var T=this.buildRequest();return T.autoCreate=!1,ja(_,T)}},{key:"buildRequest",value:function(){var _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{var T={};this.idToken&&(T.id_token=this.idToken),this.accessToken&&(T.access_token=this.accessToken),this.secret&&(T.oauth_token_secret=this.secret),T.providerId=this.providerId,this.nonce&&!this.pendingToken&&(T.nonce=this.nonce),_.postBody=(0,Ee.xO)(T)}return _}}],[{key:"_fromParams",value:function(_){var T=new k(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(T.idToken=_.idToken),_.accessToken&&(T.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(T.nonce=_.nonce),_.pendingToken&&(T.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(T.accessToken=_.oauthToken,T.secret=_.oauthTokenSecret):we("argument-error"),T}},{key:"fromJSON",value:function(_){var T="string"==typeof _?JSON.parse(_):_,M=T.providerId,O=T.signInMethod,V=(0,Me._T)(T,["providerId","signInMethod"]);if(!M||!O)return null;var Y=new k(M,O);return Y.idToken=V.idToken||void 0,Y.accessToken=V.accessToken||void 0,Y.secret=V.secret,Y.nonce=V.nonce,Y.pendingToken=V.pendingToken||null,Y}}]),k}(Ba);function nu(b,w){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:sendVerificationCode",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Pf(){return(Pf=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithPhoneNumber",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Mf(){return(Mf=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Pr(w,"POST","/v1/accounts:signInWithPhoneNumber",un(w,k));case 2:if(!(E=T.sent).temporaryProof){T.next=5;break}throw jn(w,"account-exists-with-different-credential",E);case 5:return T.abrupt("return",E);case 6:case"end":return T.stop()}},b)}))).apply(this,arguments)}var Pp=(0,Q.Z)({},"USER_NOT_FOUND","user-not-found");function Fo(){return(Fo=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return E=Object.assign(Object.assign({},k),{operation:"REAUTH"}),T.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithPhoneNumber",un(w,E),Pp));case 2:case"end":return T.stop()}},b)}))).apply(this,arguments)}var Of=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E){var _;return(0,J.Z)(this,k),(_=w.call(this,"phone","phone")).params=E,_}return(0,G.Z)(k,[{key:"_getIdTokenResponse",value:function(_){return function Ap(b,w){return Pf.apply(this,arguments)}(_,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(_,T){return function Rp(b,w){return Mf.apply(this,arguments)}(_,Object.assign({idToken:T},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(_){return function iy(b,w){return Fo.apply(this,arguments)}(_,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var _=this.params,T=_.temporaryProof,M=_.phoneNumber;return T&&M?{temporaryProof:T,phoneNumber:M}:{sessionInfo:_.verificationId,code:_.verificationCode}}},{key:"toJSON",value:function(){var _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}}],[{key:"_fromVerification",value:function(_,T){return new k({verificationId:_,verificationCode:T})}},{key:"_fromTokenResponse",value:function(_,T){return new k({phoneNumber:_,temporaryProof:T})}},{key:"fromJSON",value:function(_){"string"==typeof _&&(_=JSON.parse(_));var M=_.verificationId,O=_.verificationCode,V=_.phoneNumber,Y=_.temporaryProof;return O||M||V||Y?new k({verificationId:M,verificationCode:O,phoneNumber:V,temporaryProof:Y}):null}}]),k}(Ba),Vu=function(){function b(w){(0,J.Z)(this,b);var k,E,_,T,M,O,V=(0,Ee.zd)((0,Ee.pd)(w)),Y=null!==(k=V.apiKey)&&void 0!==k?k:null,Ce=null!==(E=V.oobCode)&&void 0!==E?E:null,Xe=function Kl(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(_=V.mode)&&void 0!==_?_:null);Be(Y&&Ce&&Xe,"argument-error"),this.apiKey=Y,this.operation=Xe,this.code=Ce,this.continueUrl=null!==(T=V.continueUrl)&&void 0!==T?T:null,this.languageCode=null!==(M=V.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(O=V.tenantId)&&void 0!==O?O:null}return(0,G.Z)(b,null,[{key:"parseLink",value:function(k){var E=function wr(b){var w=(0,Ee.zd)((0,Ee.pd)(b)).link,k=w?(0,Ee.zd)((0,Ee.pd)(w)).deep_link_id:null,E=(0,Ee.zd)((0,Ee.pd)(b)).deep_link_id;return(E?(0,Ee.zd)((0,Ee.pd)(E)).link:null)||E||k||w||b}(k);try{return new b(E)}catch(_){return null}}}]),b}(),ju=function(){var b=function(){function w(){(0,J.Z)(this,w),this.providerId=w.PROVIDER_ID}return(0,G.Z)(w,null,[{key:"credential",value:function(E,_){return Sf._fromEmailAndPassword(E,_)}},{key:"credentialWithLink",value:function(E,_){var T=Vu.parseLink(_);return Be(T,"argument-error"),Sf._fromEmailAndCode(E,T.code,T.tenantId)}}]),w}();return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b}(),Da=function(){function b(w){(0,J.Z)(this,b),this.providerId=w,this.defaultLanguageCode=null,this.customParameters={}}return(0,G.Z)(b,[{key:"setDefaultLanguage",value:function(k){this.defaultLanguageCode=k}},{key:"setCustomParameters",value:function(k){return this.customParameters=k,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),b}(),Vi=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(){var E;return(0,J.Z)(this,k),(E=w.apply(this,arguments)).scopes=[],E}return(0,G.Z)(k,[{key:"addScope",value:function(_){return this.scopes.includes(_)||this.scopes.push(_),this}},{key:"getScopes",value:function(){return(0,Te.Z)(this.scopes)}}]),k}(Da),Mp=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(){return(0,J.Z)(this,k),w.apply(this,arguments)}return(0,G.Z)(k,[{key:"credential",value:function(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}},{key:"_credential",value:function(_){return Be(_.idToken||_.accessToken,"argument-error"),Ha._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(_){var T="string"==typeof _?JSON.parse(_):_;return Be("providerId"in T&&"signInMethod"in T,"argument-error"),Ha._fromParams(T)}},{key:"credentialFromResult",value:function(_){return k.oauthCredentialFromTaggedObject(_)}},{key:"credentialFromError",value:function(_){return k.oauthCredentialFromTaggedObject(_.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(_){var T=_._tokenResponse;if(!T)return null;var M=T.oauthIdToken,O=T.oauthAccessToken,Y=T.pendingToken,Ce=T.nonce,Xe=T.providerId;if(!O&&!T.oauthTokenSecret&&!M&&!Y||!Xe)return null;try{return new k(Xe)._credential({idToken:M,accessToken:O,nonce:Ce,pendingToken:Y})}catch(kt){return null}}}]),k}(Vi),$l=function(){var b=function(w){(0,R.Z)(E,w);var k=(0,j.Z)(E);function E(){return(0,J.Z)(this,E),k.call(this,"facebook.com")}return(0,G.Z)(E,null,[{key:"credential",value:function(T){return Ha._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:T})}},{key:"credentialFromResult",value:function(T){return E.credentialFromTaggedObject(T)}},{key:"credentialFromError",value:function(T){return E.credentialFromTaggedObject(T.customData||{})}},{key:"credentialFromTaggedObject",value:function(T){var M=T._tokenResponse;if(!M||!("oauthAccessToken"in M)||!M.oauthAccessToken)return null;try{return E.credential(M.oauthAccessToken)}catch(O){return null}}}]),E}(Vi);return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b}(),ql=function(){var b=function(w){(0,R.Z)(E,w);var k=(0,j.Z)(E);function E(){var _;return(0,J.Z)(this,E),(_=k.call(this,"google.com")).addScope("profile"),_}return(0,G.Z)(E,null,[{key:"credential",value:function(T,M){return Ha._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:T,accessToken:M})}},{key:"credentialFromResult",value:function(T){return E.credentialFromTaggedObject(T)}},{key:"credentialFromError",value:function(T){return E.credentialFromTaggedObject(T.customData||{})}},{key:"credentialFromTaggedObject",value:function(T){var M=T._tokenResponse;if(!M)return null;var O=M.oauthIdToken,V=M.oauthAccessToken;if(!O&&!V)return null;try{return E.credential(O,V)}catch(Y){return null}}}]),E}(Vi);return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b}(),Op=function(){var b=function(w){(0,R.Z)(E,w);var k=(0,j.Z)(E);function E(){return(0,J.Z)(this,E),k.call(this,"github.com")}return(0,G.Z)(E,null,[{key:"credential",value:function(T){return Ha._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:T})}},{key:"credentialFromResult",value:function(T){return E.credentialFromTaggedObject(T)}},{key:"credentialFromError",value:function(T){return E.credentialFromTaggedObject(T.customData||{})}},{key:"credentialFromTaggedObject",value:function(T){var M=T._tokenResponse;if(!M||!("oauthAccessToken"in M)||!M.oauthAccessToken)return null;try{return E.credential(M.oauthAccessToken)}catch(O){return null}}}]),E}(Vi);return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b}(),ea=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_){var T;return(0,J.Z)(this,k),(T=w.call(this,E,E)).pendingToken=_,T}return(0,G.Z)(k,[{key:"_getIdTokenResponse",value:function(_){return ja(_,this.buildRequest())}},{key:"_linkToIdToken",value:function(_,T){var M=this.buildRequest();return M.idToken=T,ja(_,M)}},{key:"_getReauthenticationResolver",value:function(_){var T=this.buildRequest();return T.autoCreate=!1,ja(_,T)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(_){var T="string"==typeof _?JSON.parse(_):_,M=T.providerId,O=T.signInMethod,V=T.pendingToken;return M&&O&&V&&M===O?new k(M,V):null}},{key:"_create",value:function(_,T){return new k(_,T)}}]),k}(Ba),Uo=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E){return(0,J.Z)(this,k),Be(E.startsWith("saml."),"argument-error"),w.call(this,E)}return(0,G.Z)(k,null,[{key:"credentialFromResult",value:function(_){return k.samlCredentialFromTaggedObject(_)}},{key:"credentialFromError",value:function(_){return k.samlCredentialFromTaggedObject(_.customData||{})}},{key:"credentialFromJSON",value:function(_){var T=ea.fromJSON(_);return Be(T,"argument-error"),T}},{key:"samlCredentialFromTaggedObject",value:function(_){var T=_._tokenResponse;if(!T)return null;var M=T.pendingToken,O=T.providerId;if(!M||!O)return null;try{return ea._create(O,M)}catch(V){return null}}}]),k}(Da),Zf=function(){var b=function(w){(0,R.Z)(E,w);var k=(0,j.Z)(E);function E(){return(0,J.Z)(this,E),k.call(this,"twitter.com")}return(0,G.Z)(E,null,[{key:"credential",value:function(T,M){return Ha._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:T,oauthTokenSecret:M})}},{key:"credentialFromResult",value:function(T){return E.credentialFromTaggedObject(T)}},{key:"credentialFromError",value:function(T){return E.credentialFromTaggedObject(T.customData||{})}},{key:"credentialFromTaggedObject",value:function(T){var M=T._tokenResponse;if(!M)return null;var O=M.oauthAccessToken,V=M.oauthTokenSecret;if(!O||!V)return null;try{return E.credential(O,V)}catch(Y){return null}}}]),E}(Vi);return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b}();function Nf(b,w){return ji.apply(this,arguments)}function ji(){return(ji=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signUp",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}var Hi=function(){function b(w){(0,J.Z)(this,b),this.user=w.user,this.providerId=w.providerId,this._tokenResponse=w._tokenResponse,this.operationType=w.operationType}return(0,G.Z)(b,null,[{key:"_fromIdTokenResponse",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_,T,M){var O,V,Y,Ce,Xe=arguments;return(0,P.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return O=Xe.length>3&&void 0!==Xe[3]&&Xe[3],lt.next=3,me._fromIdTokenResponse(_,M,O);case 3:return V=lt.sent,Y=Lf(M),Ce=new b({user:V,providerId:Y,_tokenResponse:M,operationType:T}),lt.abrupt("return",Ce);case 7:case"end":return lt.stop()}},E)})),function k(E,_,T){return w.apply(this,arguments)})},{key:"_forOperation",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T,M){var O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,_._updateTokensIfNecessary(M,!0);case 2:return O=Lf(M),Y.abrupt("return",new b({user:_,providerId:O,_tokenResponse:M,operationType:T}));case 4:case"end":return Y.stop()}},E)}));return function k(E,_,T){return w.apply(this,arguments)}}()}]),b;var w}();function Lf(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function xo(b){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,y.Z)((0,P.Z)().mark(function b(w){var k,E,_,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=fn(w),O.next=3,E._initializationPromise;case 3:if(null===(k=E.currentUser)||void 0===k||!k.isAnonymous){O.next=5;break}return O.abrupt("return",new Hi({user:E.currentUser,providerId:null,operationType:"signIn"}));case 5:return O.next=7,Nf(E,{returnSecureToken:!0});case 7:return _=O.sent,O.next=10,Hi._fromIdTokenResponse(E,"signIn",_,!0);case 10:return T=O.sent,O.next=13,E._updateCurrentUser(T.user);case 13:return O.abrupt("return",T);case 14:case"end":return O.stop()}},b)}))).apply(this,arguments)}var Hu=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_,T,M){var O,V;return(0,J.Z)(this,k),(O=w.call(this,_.code,_.message)).operationType=T,O.user=M,Object.setPrototypeOf((0,A.Z)(O),k.prototype),O.customData={appName:E.name,tenantId:null!==(V=E.tenantId)&&void 0!==V?V:void 0,_serverResponse:_.customData._serverResponse,operationType:T},O}return(0,G.Z)(k,null,[{key:"_fromErrorAndOperation",value:function(_,T,M,O){return new k(_,T,M,O)}}]),k}(Ee.ZR);function fr(b,w,k,E){return("reauthenticate"===w?k._getReauthenticationResolver(b):k._getIdTokenResponse(b)).catch(function(T){throw T.code==="auth/".concat("multi-factor-auth-required")?Hu._fromErrorAndOperation(b,T,w,E):T})}function Ql(b){return new Set(b.map(function(w){return w.providerId}).filter(function(w){return!!w}))}function ri(b,w){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return E=(0,Ee.m9)(w),V.next=3,iu(!0,E,k);case 3:return V.t0=Qi,V.t1=E.auth,V.next=7,E.getIdToken();case 7:return V.t2=V.sent,V.t3=[k],V.t4={idToken:V.t2,deleteProvider:V.t3},V.next=12,(0,V.t0)(V.t1,V.t4);case 12:return M=Ql(V.sent.providerUserInfo||[]),E.providerData=E.providerData.filter(function(Y){return M.has(Y.providerId)}),M.has("phone")||(E.phoneNumber=null),V.next=19,E.auth._persistUserIfCurrent(E);case 19:return V.abrupt("return",E);case 20:case"end":return V.stop()}},b)}))).apply(this,arguments)}function Fr(b,w){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,T=arguments;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=T.length>2&&void 0!==T[2]&&T[2],O.t0=sr,O.t1=w,O.t2=k,O.t3=w.auth,O.next=7,w.getIdToken();case 7:return O.t4=O.sent,O.t5=O.t2._linkToIdToken.call(O.t2,O.t3,O.t4),O.t6=E,O.next=12,(0,O.t0)(O.t1,O.t5,O.t6);case 12:return O.abrupt("return",Hi._forOperation(w,"link",O.sent));case 14:case"end":return O.stop()}},b)})),Bo.apply(this,arguments)}function iu(b,w,k){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,_e(k);case 2:_=Ql(k.providerData),T=!1===w?"provider-already-linked":"no-such-provider",Be(_.has(E)===w,k.auth,T);case 5:case"end":return O.stop()}},b)}))).apply(this,arguments)}function ii(b,w){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T,M,O,V,Ce=arguments;return(0,P.Z)().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return E=Ce.length>2&&void 0!==Ce[2]&&Ce[2],T=w.auth,M="reauthenticate",kt.prev=3,kt.next=6,sr(w,fr(T,M,k,w),E);case 6:return Be((O=kt.sent).idToken,T,"internal-error"),Be(V=xi(O.idToken),T,"internal-error"),Be(w.uid===V.sub,T,"user-mismatch"),kt.abrupt("return",Hi._forOperation(w,M,O));case 15:throw kt.prev=15,kt.t0=kt.catch(3),(null===(_=kt.t0)||void 0===_?void 0:_.code)==="auth/".concat("user-not-found")&&we(T,"user-mismatch"),kt.t0;case 19:case"end":return kt.stop()}},b,null,[[3,15]])})),Ff.apply(this,arguments)}function Dr(b,w){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T,M,O=arguments;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return E=O.length>2&&void 0!==O[2]&&O[2],_="signIn",Y.next=4,fr(w,_,k);case 4:return T=Y.sent,Y.next=7,Hi._fromIdTokenResponse(w,_,T);case 7:if(M=Y.sent,E){Y.next=11;break}return Y.next=11,w._updateCurrentUser(M.user);case 11:return Y.abrupt("return",M);case 12:case"end":return Y.stop()}},b)})),Uf.apply(this,arguments)}function Wi(b,w){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Dr(fn(w),k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function au(b,w){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return E=(0,Ee.m9)(w),T.next=3,iu(!1,E,k.providerId);case 3:return T.abrupt("return",Fr(E,k));case 4:case"end":return T.stop()}},b)}))).apply(this,arguments)}function Wu(b,w){return jo.apply(this,arguments)}function jo(){return(jo=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",ii((0,Ee.m9)(w),k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function xf(b,w){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Pr(w,"POST","/v1/accounts:signInWithCustomToken",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function md(b,w){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=fn(w),O.next=3,xf(E,{token:k,returnSecureToken:!0});case 3:return _=O.sent,O.next=6,Hi._fromIdTokenResponse(E,"signIn",_);case 6:return T=O.sent,O.next=9,E._updateCurrentUser(T.user);case 9:return O.abrupt("return",T);case 10:case"end":return O.stop()}},b)}))).apply(this,arguments)}var Xl=function(){function b(w,k){(0,J.Z)(this,b),this.factorId=w,this.uid=k.mfaEnrollmentId,this.enrollmentTime=new Date(k.enrolledAt).toUTCString(),this.displayName=k.displayName}return(0,G.Z)(b,null,[{key:"_fromServerResponse",value:function(k,E){return"phoneInfo"in E?Jl._fromServerResponse(k,E):we(k,"internal-error")}}]),b}(),Jl=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E){var _;return(0,J.Z)(this,k),(_=w.call(this,"phone",E)).phoneNumber=E.phoneInfo,_}return(0,G.Z)(k,null,[{key:"_fromServerResponse",value:function(_,T){return new k(T)}}]),k}(Xl);function ft(b,w,k){var E;Be((null===(E=k.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),Be(void 0===k.dynamicLinkDomain||k.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),w.continueUrl=k.url,w.dynamicLinkDomain=k.dynamicLinkDomain,w.canHandleCodeInApp=k.handleCodeInApp,k.iOS&&(Be(k.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),w.iOSBundleId=k.iOS.bundleId),k.android&&(Be(k.android.packageName.length>0,b,"missing-android-pkg-name"),w.androidInstallApp=k.android.installApp,w.androidMinimumVersionCode=k.android.minimumVersion,w.androidPackageName=k.android.packageName)}function Cn(b,w,k){return ec.apply(this,arguments)}function ec(){return(ec=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=(0,Ee.m9)(w),T={requestType:"PASSWORD_RESET",email:k},E&&ft(_,T,E),O.next=5,Dp(_,T);case 5:case"end":return O.stop()}},b)}))).apply(this,arguments)}function tc(b,w,k){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,pn((0,Ee.m9)(w),{oobCode:k,newPassword:E});case 2:case"end":return T.stop()}},b)}))).apply(this,arguments)}function Wo(b,w){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,Is((0,Ee.m9)(w),{oobCode:k});case 2:case"end":return _.stop()}},b)}))).apply(this,arguments)}function pi(b,w){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return E=(0,Ee.m9)(w),V.next=3,pn(E,{oobCode:k});case 3:Be(T=(_=V.sent).requestType,E,"internal-error"),V.t0=T,V.next="EMAIL_SIGNIN"===V.t0?9:"VERIFY_AND_CHANGE_EMAIL"===V.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===V.t0?12:13;break;case 9:return V.abrupt("break",14);case 10:return Be(_.newEmail,E,"internal-error"),V.abrupt("break",14);case 12:Be(_.mfaInfo,E,"internal-error");case 13:Be(_.email,E,"internal-error");case 14:return M=null,_.mfaInfo&&(M=Xl._fromServerResponse(fn(E),_.mfaInfo)),V.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:T});case 17:case"end":return V.stop()}},b)}))).apply(this,arguments)}function zu(b,w){return nc.apply(this,arguments)}function nc(){return(nc=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,pi((0,Ee.m9)(w),k);case 2:return M.abrupt("return",M.sent.data.email);case 5:case"end":return M.stop()}},b)}))).apply(this,arguments)}function Zp(b,w,k){return yd.apply(this,arguments)}function yd(){return(yd=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return _=fn(w),V.next=3,Nf(_,{returnSecureToken:!0,email:k,password:E});case 3:return T=V.sent,V.next=6,Hi._fromIdTokenResponse(_,"signIn",T);case 6:return M=V.sent,V.next=9,_._updateCurrentUser(M.user);case 9:return V.abrupt("return",M);case 10:case"end":return V.stop()}},b)}))).apply(this,arguments)}function _d(b,w,k){return Wi((0,Ee.m9)(b),ju.credential(w,k))}function gi(b,w,k){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=(0,Ee.m9)(w),T={requestType:"EMAIL_SIGNIN",email:k},Be(E.handleCodeInApp,_,"argument-error"),E&&ft(_,T,E),O.next=6,Lr(_,T);case 6:case"end":return O.stop()}},b)}))).apply(this,arguments)}function rc(b,w){var k=Vu.parseLink(w);return"EMAIL_SIGNIN"===(null==k?void 0:k.operation)}function Ku(b,w,k){return ta.apply(this,arguments)}function ta(){return(ta=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=(0,Ee.m9)(w),Be((T=ju.credentialWithLink(k,E||Hr()))._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),O.abrupt("return",Wi(_,T));case 4:case"end":return O.stop()}},b)}))).apply(this,arguments)}function Bf(b,w){return Go.apply(this,arguments)}function Go(){return(Go=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:createAuthUri",un(w,k)));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function ic(b,w){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return E=ci()?Hr():"http://localhost",_={identifier:k,continueUri:E},V.next=4,Bf((0,Ee.m9)(w),_);case 4:return V.abrupt("return",V.sent.signinMethods||[]);case 7:case"end":return V.stop()}},b)}))).apply(this,arguments)}function zo(b,w){return $u.apply(this,arguments)}function $u(){return($u=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,T;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return E=(0,Ee.m9)(w),Y.next=3,w.getIdToken();case 3:return T={requestType:"VERIFY_EMAIL",idToken:Y.sent},k&&ft(E.auth,T,k),Y.next=8,Wl(E.auth,T);case 8:if(Y.sent.email===w.email){Y.next=13;break}return Y.next=13,w.reload();case 13:case"end":return Y.stop()}},b)}))).apply(this,arguments)}function ac(b,w,k){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,M;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return _=(0,Ee.m9)(w),Ce.next=3,w.getIdToken();case 3:return M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:Ce.sent,newEmail:k},E&&ft(_.auth,M,E),Ce.next=8,Gl(_.auth,M);case 8:if(Ce.sent.email===w.email){Ce.next=13;break}return Ce.next=13,w.reload();case 13:case"end":return Ce.stop()}},b)}))).apply(this,arguments)}function sc(b,w){return $o.apply(this,arguments)}function $o(){return($o=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",lr(w,"POST","/v1/accounts:update",k));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function Ds(b,w){return su.apply(this,arguments)}function su(){return(su=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T,O,V,Y;return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(_=k.photoURL,void 0!==(E=k.displayName)||void 0!==_){Xe.next=3;break}return Xe.abrupt("return");case 3:return T=(0,Ee.m9)(w),Xe.next=6,T.getIdToken();case 6:return O={idToken:Xe.sent,displayName:E,photoUrl:_,returnSecureToken:!0},Xe.next=10,sr(T,sc(T.auth,O));case 10:return T.displayName=(V=Xe.sent).displayName||null,T.photoURL=V.photoUrl||null,(Y=T.providerData.find(function(kt){return"password"===kt.providerId}))&&(Y.displayName=T.displayName,Y.photoURL=T.photoURL),Xe.next=17,T._updateTokensIfNecessary(V);case 17:case"end":return Xe.stop()}},b)}))).apply(this,arguments)}function uu(b,w){return qo((0,Ee.m9)(b),w,null)}function uc(b,w){return qo((0,Ee.m9)(b),null,w)}function qo(b,w,k){return qu.apply(this,arguments)}function qu(){return(qu=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,M,O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return _=w.auth,Y.next=3,w.getIdToken();case 3:return M={idToken:Y.sent,returnSecureToken:!0},k&&(M.email=k),E&&(M.password=E),Y.next=9,sr(w,eu(_,M));case 9:return O=Y.sent,Y.next=12,w._updateTokensIfNecessary(O,!0);case 12:case"end":return Y.stop()}},b)}))).apply(this,arguments)}var Ss=(0,G.Z)(function b(w,k){var E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,J.Z)(this,b),this.isNewUser=w,this.providerId=k,this.profile=E}),Ur=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_,T,M){var O;return(0,J.Z)(this,k),(O=w.call(this,E,_,T)).username=M,O}return(0,G.Z)(k)}(Ss),ga=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_){return(0,J.Z)(this,k),w.call(this,E,"facebook.com",_)}return(0,G.Z)(k)}(Ss),zn=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_){return(0,J.Z)(this,k),w.call(this,E,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}return(0,G.Z)(k)}(Ur),jf=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_){return(0,J.Z)(this,k),w.call(this,E,"google.com",_)}return(0,G.Z)(k)}(Ss),wd=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E,_,T){return(0,J.Z)(this,k),w.call(this,E,"twitter.com",_,T)}return(0,G.Z)(k)}(Ur);function Yo(b){var k=b._tokenResponse;return b.user.isAnonymous&&!k?{providerId:null,isNewUser:!1,profile:null}:function kd(b){var w,k;if(!b)return null;var E=b.providerId,_=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},T=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&(null==b?void 0:b.idToken)){var M=null===(k=null===(w=xi(b.idToken))||void 0===w?void 0:w.firebase)||void 0===k?void 0:k.sign_in_provider;if(M)return new Ss(T,"anonymous"!==M&&"custom"!==M?M:null)}if(!E)return null;switch(E){case"facebook.com":return new ga(T,_);case"github.com":return new zn(T,_);case"google.com":return new jf(T,_);case"twitter.com":return new wd(T,_,b.screenName||null);case"custom":case"anonymous":return new Ss(T,null);default:return new Ss(T,E,_)}}(k)}var Gi=function(){function b(w,k,E){(0,J.Z)(this,b),this.type=w,this.credential=k,this.auth=E}return(0,G.Z)(b,[{key:"toJSON",value:function(){return{multiFactorSession:(0,Q.Z)({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(k,E){return new b("enroll",k,E)}},{key:"_fromMfaPendingCredential",value:function(k){return new b("signin",k)}},{key:"fromJSON",value:function(k){var E,_;if(null!=k&&k.multiFactorSession){if(null!==(E=k.multiFactorSession)&&void 0!==E&&E.pendingCredential)return b._fromMfaPendingCredential(k.multiFactorSession.pendingCredential);if(null!==(_=k.multiFactorSession)&&void 0!==_&&_.idToken)return b._fromIdtoken(k.multiFactorSession.idToken)}return null}}]),b}(),gr=function(){function b(w,k,E){(0,J.Z)(this,b),this.session=w,this.hints=k,this.signInResolver=E}return(0,G.Z)(b,[{key:"resolveSignIn",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",this.signInResolver(_));case 2:case"end":return O.stop()}},E,this)})),function k(E){return w.apply(this,arguments)})}],[{key:"_fromError",value:function(k,E){var _=fn(k),T=E.customData._serverResponse,M=(T.mfaInfo||[]).map(function(V){return Xl._fromServerResponse(_,V)});Be(T.mfaPendingCredential,_,"internal-error");var O=Gi._fromMfaPendingCredential(T.mfaPendingCredential);return new b(O,M,function(){var V=(0,y.Z)((0,P.Z)().mark(function Y(Ce){var Xe,kt,lt;return(0,P.Z)().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,Ce._process(_,O);case 2:Xe=Ct.sent,delete T.mfaInfo,delete T.mfaPendingCredential,kt=Object.assign(Object.assign({},T),{idToken:Xe.idToken,refreshToken:Xe.refreshToken}),Ct.t0=E.operationType,Ct.next="signIn"===Ct.t0?9:"reauthenticate"===Ct.t0?15:17;break;case 9:return Ct.next=11,Hi._fromIdTokenResponse(_,E.operationType,kt);case 11:return lt=Ct.sent,Ct.next=14,_._updateCurrentUser(lt.user);case 14:return Ct.abrupt("return",lt);case 15:return Be(E.user,_,"internal-error"),Ct.abrupt("return",Hi._forOperation(E.user,E.operationType,kt));case 17:we(_,"internal-error");case 18:case"end":return Ct.stop()}},Y)}));return function(Y){return V.apply(this,arguments)}}())}}]),b;var w}();function Cd(b,w){var k,E=(0,Ee.m9)(b),_=w;return Be(w.customData.operationType,E,"argument-error"),Be(null===(k=_.customData._serverResponse)||void 0===k?void 0:k.mfaPendingCredential,E,"argument-error"),gr._fromError(E,_)}function fc(b,w){return lr(b,"POST","/v2/accounts/mfaEnrollment:start",un(b,w))}function hc(b,w){return lr(b,"POST","/v2/accounts/mfaEnrollment:withdraw",un(b,w))}var Qo=function(){function b(w){var k=this;(0,J.Z)(this,b),this.user=w,this.enrolledFactors=[],w._onReload(function(E){E.mfaInfo&&(k.enrolledFactors=E.mfaInfo.map(function(_){return Xl._fromServerResponse(w.auth,_)}))})}return(0,G.Z)(b,[{key:"getSession",value:(w=(0,y.Z)((0,P.Z)().mark(function E(){return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.t0=Gi,T.next=3,this.user.getIdToken();case 3:return T.t1=T.sent,T.t2=this.user.auth,T.abrupt("return",T.t0._fromIdtoken.call(T.t0,T.t1,T.t2));case 6:case"end":return T.stop()}},E,this)})),function k(){return w.apply(this,arguments)})},{key:"enroll",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var M,O,V;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return M=_,Ce.next=3,this.getSession();case 3:return O=Ce.sent,Ce.next=6,sr(this.user,M._process(this.user.auth,O,T));case 6:return V=Ce.sent,Ce.next=9,this.user._updateTokensIfNecessary(V);case 9:return Ce.abrupt("return",this.user.reload());case 10:case"end":return Ce.stop()}},E,this)}));return function k(E,_){return w.apply(this,arguments)}}()},{key:"unenroll",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M,O,V;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return M="string"==typeof _?_:_.uid,Ce.next=3,this.user.getIdToken();case 3:return O=Ce.sent,Ce.next=6,sr(this.user,hc(this.user.auth,{idToken:O,mfaEnrollmentId:M}));case 6:return V=Ce.sent,this.enrolledFactors=this.enrolledFactors.filter(function(Xe){return Xe.uid!==M}),Ce.next=10,this.user._updateTokensIfNecessary(V);case 10:return Ce.prev=10,Ce.next=13,this.user.reload();case 13:Ce.next=19;break;case 15:if(Ce.prev=15,Ce.t0=Ce.catch(10),(null===(T=Ce.t0)||void 0===T?void 0:T.code)==="auth/".concat("user-token-expired")){Ce.next=19;break}throw Ce.t0;case 19:case"end":return Ce.stop()}},E,this,[[10,15]])}));return function k(E){return w.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(k){return new b(k)}}]),b;var w}(),Xo=new WeakMap;function Wf(b){var w=(0,Ee.m9)(b);return Xo.has(w)||Xo.set(w,Qo._fromUser(w)),Xo.get(w)}var dc="__sak",Yu=function(){function b(w,k){(0,J.Z)(this,b),this.storageRetriever=w,this.type=k}return(0,G.Z)(b,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch(k){return Promise.resolve(!1)}}},{key:"_set",value:function(k,E){return this.storage.setItem(k,JSON.stringify(E)),Promise.resolve()}},{key:"_get",value:function(k){var E=this.storage.getItem(k);return Promise.resolve(E?JSON.parse(E):null)}},{key:"_remove",value:function(k){return this.storage.removeItem(k),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),b}(),zf=function(){var b=function(w){(0,R.Z)(E,w);var _,k=(0,j.Z)(E);function E(){var _;return(0,J.Z)(this,E),(_=k.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(T,M){return _.onStorageEvent(T,M)},_.listeners={},_.localCache={},_.pollTimer=null,_.safariLocalStorageNotSynced=function vc(){var b=(0,Ee.z$)();return ht(b)||Zn(b)}()&&function xa(){try{return!(!window||window===window.top)}catch(b){return!1}}(),_.fallbackToPolling=Cr(),_._shouldAllowMigration=!0,_}return(0,G.Z)(E,[{key:"forAllChangedKeys",value:function(T){for(var M=0,O=Object.keys(this.listeners);M<O.length;M++){var V=O[M],Y=this.storage.getItem(V),Ce=this.localCache[V];Y!==Ce&&T(V,Ce,Y)}}},{key:"onStorageEvent",value:function(T){var M=this,O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(T.key){var V=T.key;if(O?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var Y=this.storage.getItem(V);if(T.newValue!==Y)null!==T.newValue?this.storage.setItem(V,T.newValue):this.storage.removeItem(V);else if(this.localCache[V]===T.newValue&&!O)return}var Ce=function(){var lt=M.storage.getItem(V);!O&&M.localCache[V]===lt||M.notifyListeners(V,lt)},Xe=this.storage.getItem(V);Mr()&&Xe!==T.newValue&&T.newValue!==T.oldValue?setTimeout(Ce,10):Ce()}else this.forAllChangedKeys(function(kt,lt,wt){M.notifyListeners(kt,wt)})}},{key:"notifyListeners",value:function(T,M){this.localCache[T]=M;var O=this.listeners[T];if(O)for(var V=0,Y=Array.from(O);V<Y.length;V++)(0,Y[V])(M&&JSON.parse(M))}},{key:"startPolling",value:function(){var T=this;this.stopPolling(),this.pollTimer=setInterval(function(){T.forAllChangedKeys(function(M,O,V){T.onStorageEvent(new StorageEvent("storage",{key:M,oldValue:O,newValue:V}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(T,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[T]||(this.listeners[T]=new Set,this.localCache[T]=this.storage.getItem(T)),this.listeners[T].add(M)}},{key:"_removeListener",value:function(T,M){this.listeners[T]&&(this.listeners[T].delete(M),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(_=(0,y.Z)((0,P.Z)().mark(function M(O,V){return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,ie.Z)((0,pe.Z)(E.prototype),"_set",this).call(this,O,V);case 2:this.localCache[O]=JSON.stringify(V);case 3:case"end":return Ce.stop()}},M,this)})),function T(M,O){return _.apply(this,arguments)})},{key:"_get",value:function(){var _=(0,y.Z)((0,P.Z)().mark(function M(O){var V;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,ie.Z)((0,pe.Z)(E.prototype),"_get",this).call(this,O);case 2:return V=Ce.sent,this.localCache[O]=JSON.stringify(V),Ce.abrupt("return",V);case 5:case"end":return Ce.stop()}},M,this)}));return function T(M){return _.apply(this,arguments)}}()},{key:"_remove",value:function(){var _=(0,y.Z)((0,P.Z)().mark(function M(O){return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,ie.Z)((0,pe.Z)(E.prototype),"_remove",this).call(this,O);case 2:delete this.localCache[O];case 3:case"end":return Y.stop()}},M,this)}));return function T(M){return _.apply(this,arguments)}}()}]),E}(Yu);return b.type="LOCAL",b}(),Qu=zf,pc=function(){var b=function(w){(0,R.Z)(E,w);var k=(0,j.Z)(E);function E(){return(0,J.Z)(this,E),k.call(this,function(){return window.sessionStorage},"SESSION")}return(0,G.Z)(E,[{key:"_addListener",value:function(T,M){}},{key:"_removeListener",value:function(T,M){}}]),E}(Yu);return b.type="SESSION",b}();function Ps(b){return Promise.all(b.map(function(){var w=(0,y.Z)((0,P.Z)().mark(function k(E){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,M.next=3,E;case 3:return M.abrupt("return",{fulfilled:!0,value:M.sent});case 7:return M.prev=7,M.t0=M.catch(0),M.abrupt("return",{fulfilled:!1,reason:M.t0});case 10:case"end":return M.stop()}},k,null,[[0,7]])}));return function(k){return w.apply(this,arguments)}}()))}var Kf=function(){var b=function(){function w(k){(0,J.Z)(this,w),this.eventTarget=k,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,G.Z)(w,[{key:"isListeningto",value:function(E){return this.eventTarget===E}},{key:"handleEvent",value:(k=(0,y.Z)((0,P.Z)().mark(function _(T){var M,O,V,Y,Ce,Xe,kt;return(0,P.Z)().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(V=(O=(M=T).data).eventId,Ce=O.data,null!=(Xe=this.handlersMap[Y=O.eventType])&&Xe.size){Ct.next=5;break}return Ct.abrupt("return");case 5:return M.ports[0].postMessage({status:"ack",eventId:V,eventType:Y}),kt=Array.from(Xe).map(function(){var Or=(0,y.Z)((0,P.Z)().mark(function Yn(Xa){return(0,P.Z)().wrap(function(Zr){for(;;)switch(Zr.prev=Zr.next){case 0:return Zr.abrupt("return",Xa(M.origin,Ce));case 1:case"end":return Zr.stop()}},Yn)}));return function(Yn){return Or.apply(this,arguments)}}()),Ct.next=9,Ps(kt);case 9:M.ports[0].postMessage({status:"done",eventId:V,eventType:Y,response:Ct.sent});case 11:case"end":return Ct.stop()}},_,this)})),function E(_){return k.apply(this,arguments)})},{key:"_subscribe",value:function(E,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(_)}},{key:"_unsubscribe",value:function(E,_){this.handlersMap[E]&&_&&this.handlersMap[E].delete(_),(!_||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(E){var _=this.receivers.find(function(M){return M.isListeningto(E)});if(_)return _;var T=new w(E);return this.receivers.push(T),T}}]),w;var k}();return b.receivers=[],b}();function Ra(){for(var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,k="",E=0;E<w;E++)k+=Math.floor(10*Math.random());return b+k}var Td=function(){function b(w){(0,J.Z)(this,b),this.target=w,this.handlers=new Set}return(0,G.Z)(b,[{key:"removeMessageHandler",value:function(k){k.messageChannel&&(k.messageChannel.port1.removeEventListener("message",k.onMessage),k.messageChannel.port1.close()),this.handlers.delete(k)}},{key:"_send",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_,T){var O,V,Y,Ce,M=this,Xe=arguments;return(0,P.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(O=Xe.length>2&&void 0!==Xe[2]?Xe[2]:50,V="undefined"!=typeof MessageChannel?new MessageChannel:null){lt.next=4;break}throw new Error("connection_unavailable");case 4:return lt.abrupt("return",new Promise(function(wt,Ct){var Or=Ra("",20);V.port1.start();var Yn=setTimeout(function(){Ct(new Error("unsupported_event"))},O);M.handlers.add(Ce={messageChannel:V,onMessage:function(hn){var Zr=hn;if(Zr.data.eventId===Or)switch(Zr.data.status){case"ack":clearTimeout(Yn),Y=setTimeout(function(){Ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),wt(Zr.data.response);break;default:clearTimeout(Yn),clearTimeout(Y),Ct(new Error("invalid_response"))}}}),V.port1.addEventListener("message",Ce.onMessage),M.target.postMessage({eventType:_,eventId:Or,data:T},[V.port2])}).finally(function(){Ce&&M.removeMessageHandler(Ce)}));case 5:case"end":return lt.stop()}},E)})),function k(E,_){return w.apply(this,arguments)})}]),b;var w}();function mr(){return window}function Jo(b){mr().location.href=b}function Ju(){return void 0!==mr().WorkerGlobalScope&&"function"==typeof mr().importScripts}function ma(){return el.apply(this,arguments)}function el(){return(el=(0,y.Z)((0,P.Z)().mark(function b(){return(0,P.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(null!=navigator&&navigator.serviceWorker){E.next=2;break}return E.abrupt("return",null);case 2:return E.prev=2,E.next=5,navigator.serviceWorker.ready;case 5:return E.abrupt("return",E.sent.active);case 9:return E.prev=9,E.t0=E.catch(2),E.abrupt("return",null);case 12:case"end":return E.stop()}},b,null,[[2,9]])}))).apply(this,arguments)}function ou(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}var gc="firebaseLocalStorageDb",cu="firebaseLocalStorage",tl="fbase_key",Ms=function(){function b(w){(0,J.Z)(this,b),this.request=w}return(0,G.Z)(b,[{key:"toPromise",value:function(){var k=this;return new Promise(function(E,_){k.request.addEventListener("success",function(){E(k.request.result)}),k.request.addEventListener("error",function(){_(k.request.error)})})}}]),b}();function Os(b,w){return b.transaction([cu],w?"readwrite":"readonly").objectStore(cu)}function $f(){var b=indexedDB.deleteDatabase(gc);return new Ms(b).toPromise()}function to(){var b=indexedDB.open(gc,1);return new Promise(function(w,k){b.addEventListener("error",function(){k(b.error)}),b.addEventListener("upgradeneeded",function(){var E=b.result;try{E.createObjectStore(cu,{keyPath:tl})}catch(_){k(_)}}),b.addEventListener("success",(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if((_=b.result).objectStoreNames.contains(cu)){M.next=12;break}return _.close(),M.next=5,$f();case 5:return M.t0=w,M.next=8,to();case 8:M.t1=M.sent,(0,M.t0)(M.t1),M.next=13;break;case 12:w(_);case 13:case"end":return M.stop()}},E)})))})}function Dd(b,w,k){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return T=Os(w,!0).put(((0,Q.Z)(_={},tl,k),(0,Q.Z)(_,"value",E),_)),O.abrupt("return",new Ms(T).toPromise());case 2:case"end":return O.stop()}},b)}))).apply(this,arguments)}function za(b,w){return mc.apply(this,arguments)}function mc(){return(mc=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return E=Os(w,!1).get(k),M.next=3,new Ms(E).toPromise();case 3:return M.abrupt("return",void 0===(_=M.sent)?null:_.value);case 5:case"end":return M.stop()}},b)}))).apply(this,arguments)}function nl(b,w){var k=Os(b,!0).delete(w);return new Ms(k).toPromise()}var Np=function(){var b=function(){function w(){(0,J.Z)(this,w),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return(0,G.Z)(w,[{key:"_openDb",value:(k=(0,y.Z)((0,P.Z)().mark(function _(){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!this.db){M.next=2;break}return M.abrupt("return",this.db);case 2:return M.next=4,to();case 4:return this.db=M.sent,M.abrupt("return",this.db);case 6:case"end":return M.stop()}},_,this)})),function E(){return k.apply(this,arguments)})},{key:"_withRetries",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){var M,O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:M=0;case 1:return Y.prev=2,Y.next=5,this._openDb();case 5:return O=Y.sent,Y.next=8,T(O);case 8:return Y.abrupt("return",Y.sent);case 11:if(Y.prev=11,Y.t0=Y.catch(2),!(M++>3)){Y.next=15;break}throw Y.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:Y.next=1;break;case 18:case"end":return Y.stop()}},_,this,[[2,11]])}));return function E(_){return k.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Ju()?this.initializeReceiver():this.initializeSender());case 1:case"end":return M.stop()}},_,this)}));return function E(){return k.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(){var T=this;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:this.receiver=Kf._getInstance(Ju()?self:null),this.receiver._subscribe("keyChanged",function(){var V=(0,y.Z)((0,P.Z)().mark(function Y(Ce,Xe){return(0,P.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.next=2,T._poll();case 2:return wt.abrupt("return",{keyProcessed:wt.sent.includes(Xe.key)});case 4:case"end":return wt.stop()}},Y)}));return function(Y,Ce){return V.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var V=(0,y.Z)((0,P.Z)().mark(function Y(Ce,Xe){return(0,P.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.abrupt("return",["keyChanged"]);case 1:case"end":return lt.stop()}},Y)}));return function(Y,Ce){return V.apply(this,arguments)}}());case 3:case"end":return O.stop()}},_,this)}));return function E(){return k.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(){var T,M,O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,ma();case 2:if(this.activeServiceWorker=Y.sent,this.activeServiceWorker){Y.next=5;break}return Y.abrupt("return");case 5:return this.sender=new Td(this.activeServiceWorker),Y.next=8,this.sender._send("ping",{},800);case 8:if(O=Y.sent){Y.next=11;break}return Y.abrupt("return");case 11:(null===(T=O[0])||void 0===T?void 0:T.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return Y.stop()}},_,this)}));return function E(){return k.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.sender&&this.activeServiceWorker&&ou()===this.activeServiceWorker){O.next=2;break}return O.abrupt("return");case 2:return O.prev=2,O.next=5,this.sender._send("keyChanged",{key:T},this.serviceWorkerReceiverAvailable?800:50);case 5:O.next=9;break;case 7:O.prev=7,O.t0=O.catch(2);case 9:case"end":return O.stop()}},_,this,[[2,7]])}));return function E(_){return k.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(){var T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(O.prev=0,indexedDB){O.next=3;break}return O.abrupt("return",!1);case 3:return O.next=5,to();case 5:return T=O.sent,O.next=8,Dd(T,dc,"1");case 8:return O.next=10,nl(T,dc);case 10:return O.abrupt("return",!0);case 13:O.prev=13,O.t0=O.catch(0);case 15:return O.abrupt("return",!1);case 16:case"end":return O.stop()}},_,null,[[0,13]])}));return function E(){return k.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return this.pendingWrites++,O.prev=1,O.next=4,T();case 4:return O.prev=4,this.pendingWrites--,O.finish(4);case 7:case"end":return O.stop()}},_,this,[[1,,4,7]])}));return function E(_){return k.apply(this,arguments)}}()},{key:"_set",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T,M){var O=this;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",this._withPendingWrite((0,y.Z)((0,P.Z)().mark(function Ce(){return(0,P.Z)().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,O._withRetries(function(lt){return Dd(lt,T,M)});case 2:return O.localCache[T]=M,kt.abrupt("return",O.notifyServiceWorker(T));case 4:case"end":return kt.stop()}},Ce)}))));case 1:case"end":return Y.stop()}},_,this)}));return function E(_,T){return k.apply(this,arguments)}}()},{key:"_get",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){var M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this._withRetries(function(Y){return za(Y,T)});case 2:return this.localCache[T]=M=V.sent,V.abrupt("return",M);case 5:case"end":return V.stop()}},_,this)}));return function E(_){return k.apply(this,arguments)}}()},{key:"_remove",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(T){var M=this;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",this._withPendingWrite((0,y.Z)((0,P.Z)().mark(function Y(){return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.next=2,M._withRetries(function(kt){return nl(kt,T)});case 2:return delete M.localCache[T],Xe.abrupt("return",M.notifyServiceWorker(T));case 4:case"end":return Xe.stop()}},Y)}))));case 1:case"end":return V.stop()}},_,this)}));return function E(_){return k.apply(this,arguments)}}()},{key:"_poll",value:function(){var k=(0,y.Z)((0,P.Z)().mark(function _(){var T,M,O,V,Y,Ce,Xe,kt,lt,wt,Ct;return(0,P.Z)().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return Yn.next=2,this._withRetries(function(Xa){var hn=Os(Xa,!1).getAll();return new Ms(hn).toPromise()});case 2:if(T=Yn.sent){Yn.next=5;break}return Yn.abrupt("return",[]);case 5:if(0===this.pendingWrites){Yn.next=7;break}return Yn.abrupt("return",[]);case 7:M=[],O=new Set,V=(0,se.Z)(T);try{for(V.s();!(Y=V.n()).done;)kt=(Ce=Y.value).value,O.add(Xe=Ce.fbase_key),JSON.stringify(this.localCache[Xe])!==JSON.stringify(kt)&&(this.notifyListeners(Xe,kt),M.push(Xe))}catch(Xa){V.e(Xa)}finally{V.f()}for(lt=0,wt=Object.keys(this.localCache);lt<wt.length;lt++)this.localCache[Ct=wt[lt]]&&!O.has(Ct)&&(this.notifyListeners(Ct,null),M.push(Ct));return Yn.abrupt("return",M);case 13:case"end":return Yn.stop()}},_,this)}));return function E(){return k.apply(this,arguments)}}()},{key:"notifyListeners",value:function(E,_){this.localCache[E]=_;var T=this.listeners[E];if(T)for(var M=0,O=Array.from(T);M<O.length;M++)(0,O[M])(_)}},{key:"startPolling",value:function(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)((0,P.Z)().mark(function _(){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",E._poll());case 1:case"end":return M.stop()}},_)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(E,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(_)}},{key:"_removeListener",value:function(E,_){this.listeners[E]&&(this.listeners[E].delete(_),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),w;var k}();return b.type="LOCAL",b}(),yc=Np;function qf(b,w){return lr(b,"POST","/v2/accounts/mfaSignIn:start",un(b,w))}function Yf(b){return no.apply(this,arguments)}function no(){return(no=(0,y.Z)((0,P.Z)().mark(function b(w){return(0,P.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,lr(w,"GET","/v1/recaptchaParams");case 2:if(E.t0=E.sent.recaptchaSiteKey,E.t0){E.next=5;break}E.t0="";case 5:return E.abrupt("return",E.t0);case 6:case"end":return E.stop()}},b)}))).apply(this,arguments)}function Zs(b){return new Promise(function(w,k){var E=document.createElement("script");E.setAttribute("src",b),E.onload=w,E.onerror=function(_){var T=$e("internal-error");T.customData=_,k(T)},E.type="text/javascript",E.charset="UTF-8",function ls(){var b,w;return null!==(w=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==w?w:document}().appendChild(E)})}function Ns(b){return"__".concat(b).concat(Math.floor(1e6*Math.random()))}var Ls=1e12,sy=function(){function b(w){(0,J.Z)(this,b),this.auth=w,this.counter=Ls,this._widgets=new Map}return(0,G.Z)(b,[{key:"render",value:function(k,E){var _=this.counter;return this._widgets.set(_,new Lp(k,this.auth.name,E||{})),this.counter++,_}},{key:"reset",value:function(k){var E,_=k||Ls;null===(E=this._widgets.get(_))||void 0===E||E.delete(),this._widgets.delete(_)}},{key:"getResponse",value:function(k){var E;return(null===(E=this._widgets.get(k||Ls))||void 0===E?void 0:E.getResponse())||""}},{key:"execute",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){var T;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return null===(T=this._widgets.get(_||Ls))||void 0===T||T.execute(),V.abrupt("return","");case 3:case"end":return V.stop()}},E,this)})),function k(E){return w.apply(this,arguments)})}]),b;var w}(),Lp=function(){function b(w,k,E){var _=this;(0,J.Z)(this,b),this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){_.execute()};var T="string"==typeof w?document.getElementById(w):w;Be(T,"argument-error",{appName:k}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,G.Z)(b,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var k=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){k.responseToken=function rr(b){for(var w=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",E=0;E<b;E++)w.push(k.charAt(Math.floor(Math.random()*k.length)));return w.join("")}(50);var E=k.params,_=E.callback,T=E["expired-callback"];if(_)try{_(k.responseToken)}catch(M){}k.timerId=window.setTimeout(function(){if(k.timerId=null,k.responseToken=null,T)try{T()}catch(M){}k.isVisible&&k.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),b}(),Ad=Ns("rcb"),uy=new An(3e4,6e4),Rd="https://www.google.com/recaptcha/api.js?",oy=function(){function b(){var w;(0,J.Z)(this,b),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(w=mr().grecaptcha)||void 0===w||!w.render)}return(0,G.Z)(b,[{key:"load",value:function(k){var E=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Be(Wk(_),k,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(mr().grecaptcha):new Promise(function(T,M){var O=mr().setTimeout(function(){M($e(k,"network-request-failed"))},uy.get());mr()[Ad]=function(){mr().clearTimeout(O),delete mr()[Ad];var Y=mr().grecaptcha;if(Y){var Ce=Y.render;Y.render=function(Xe,kt){var lt=Ce(Xe,kt);return E.counter++,lt},E.hostLanguage=_,T(Y)}else M($e(k,"internal-error"))},Zs("".concat(Rd,"?").concat((0,Ee.xO)({onload:Ad,render:"explicit",hl:_}))).catch(function(){clearTimeout(O),M($e(k,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(k){var E;return!(null===(E=mr().grecaptcha)||void 0===E||!E.render)&&(k===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),b}();function Wk(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}var _c=function(){function b(){(0,J.Z)(this,b)}return(0,G.Z)(b,[{key:"load",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",new sy(_));case 1:case"end":return M.stop()}},E)})),function k(E){return w.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),b;var w}(),yi="recaptcha",on={theme:"light",type:"image"},Kn=function(){function b(w){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},on),E=arguments.length>2?arguments[2]:void 0;(0,J.Z)(this,b),this.parameters=k,this.type=yi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(E),this.isInvisible="invisible"===this.parameters.size,Be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var _="string"==typeof w?document.getElementById(w):w;Be(_,this.auth,"argument-error"),this.container=_,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _c:new oy,this.validateStartingState()}return(0,G.Z)(b,[{key:"verify",value:(w=(0,y.Z)((0,P.Z)().mark(function E(){var T,M,O,_=this;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return this.assertNotDestroyed(),Y.next=3,this.render();case 3:if(T=Y.sent,M=this.getAssertedRecaptcha(),!(O=M.getResponse(T))){Y.next=8;break}return Y.abrupt("return",O);case 8:return Y.abrupt("return",new Promise(function(Ce){_.tokenChangeListeners.add(function kt(lt){!lt||(_.tokenChangeListeners.delete(kt),Ce(lt))}),_.isInvisible&&M.execute(T)}));case 9:case"end":return Y.stop()}},E,this)})),function k(){return w.apply(this,arguments)})},{key:"render",value:function(){var k=this;try{this.assertNotDestroyed()}catch(E){return Promise.reject(E)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(E){throw k.renderPromise=null,E})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var k=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(E){k.container.removeChild(E)})}},{key:"validateStartingState",value:function(){Be(!this.parameters.sitekey,this.auth,"argument-error"),Be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Be("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(k){var E=this;return function(_){if(E.tokenChangeListeners.forEach(function(M){return M(_)}),"function"==typeof k)k(_);else if("string"==typeof k){var T=mr()[k];"function"==typeof T&&T(_)}}}},{key:"assertNotDestroyed",value:function(){Be(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.init();case 2:return this.widgetId||(_=this.container,this.isInvisible||(T=document.createElement("div"),_.appendChild(T),_=T),this.widgetId=this.getAssertedRecaptcha().render(_,this.parameters)),O.abrupt("return",this.widgetId);case 4:case"end":return O.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()},{key:"init",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(){var _;return(0,P.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return Be(ci()&&!Ju(),this.auth,"internal-error"),M.next=3,il();case 3:return M.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=M.sent,M.next=8,Yf(this.auth);case 8:Be(_=M.sent,this.auth,"internal-error"),this.parameters.sitekey=_;case 11:case"end":return M.stop()}},E,this)}));return function k(){return w.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),b;var w}();function il(){var b=null;return new Promise(function(w){"complete"!==document.readyState?(b=function(){return w()},window.addEventListener("load",b)):w()}).catch(function(w){throw b&&window.removeEventListener("load",b),w})}var Dt=function(){function b(w,k){(0,J.Z)(this,b),this.verificationId=w,this.onConfirmation=k}return(0,G.Z)(b,[{key:"confirm",value:function(k){var E=Of._fromVerification(this.verificationId,k);return this.onConfirmation(E)}}]),b}();function na(b,w,k){return $r.apply(this,arguments)}function $r(){return($r=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=fn(w),O.next=3,ro(_,k,(0,Ee.m9)(E));case 3:return O.abrupt("return",new Dt(O.sent,function(V){return Wi(_,V)}));case 5:case"end":return O.stop()}},b)}))).apply(this,arguments)}function Qf(b,w,k){return cs.apply(this,arguments)}function cs(){return(cs=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=(0,Ee.m9)(w),O.next=3,iu(!1,_,"phone");case 3:return O.next=5,ro(_.auth,k,(0,Ee.m9)(E));case 5:return O.abrupt("return",new Dt(O.sent,function(V){return au(_,V)}));case 7:case"end":return O.stop()}},b)}))).apply(this,arguments)}function dr(b,w,k){return ra.apply(this,arguments)}function ra(){return(ra=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=(0,Ee.m9)(w),O.next=3,ro(_.auth,k,(0,Ee.m9)(E));case 3:return O.abrupt("return",new Dt(O.sent,function(V){return Wu(_,V)}));case 5:case"end":return O.stop()}},b)}))).apply(this,arguments)}function ro(b,w,k){return fu.apply(this,arguments)}function fu(){return(fu=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M,O,Y;return(0,P.Z)().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.next=2,E.verify();case 2:if(T=wt.sent,wt.prev=3,Be("string"==typeof T,w,"argument-error"),Be(E.type===yi,w,"argument-error"),!("session"in(M="string"==typeof k?{phoneNumber:k}:k))){wt.next=26;break}if(O=M.session,!("phoneNumber"in M)){wt.next=17;break}return Be("enroll"===O.type,w,"internal-error"),wt.next=13,fc(w,{idToken:O.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}});case 13:return wt.abrupt("return",wt.sent.phoneSessionInfo.sessionInfo);case 17:return Be("signin"===O.type,w,"internal-error"),Be(Y=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid,w,"missing-multi-factor-info"),wt.next=22,qf(w,{mfaPendingCredential:O.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:T}});case 22:return wt.abrupt("return",wt.sent.phoneResponseInfo.sessionInfo);case 24:wt.next=31;break;case 26:return wt.next=28,nu(w,{phoneNumber:M.phoneNumber,recaptchaToken:T});case 28:return wt.abrupt("return",wt.sent.sessionInfo);case 31:return wt.prev=31,E._reset(),wt.finish(31);case 34:case"end":return wt.stop()}},b,null,[[3,,31,34]])}))).apply(this,arguments)}function io(b,w){return al.apply(this,arguments)}function al(){return(al=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,Fr((0,Ee.m9)(w),k);case 2:case"end":return _.stop()}},b)}))).apply(this,arguments)}var Pd=function(){var b=function(){function w(k){(0,J.Z)(this,w),this.providerId=w.PROVIDER_ID,this.auth=fn(k)}return(0,G.Z)(w,[{key:"verifyPhoneNumber",value:function(E,_){return ro(this.auth,E,(0,Ee.m9)(_))}}],[{key:"credential",value:function(E,_){return Of._fromVerification(E,_)}},{key:"credentialFromResult",value:function(E){return w.credentialFromTaggedObject(E)}},{key:"credentialFromError",value:function(E){return w.credentialFromTaggedObject(E.customData||{})}},{key:"credentialFromTaggedObject",value:function(E){var _=E._tokenResponse;if(!_)return null;var T=_.phoneNumber,M=_.temporaryProof;return T&&M?Of._fromTokenResponse(T,M):null}}]),w}();return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b}();function ya(b,w){return w?Wn(w):(Be(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}var qt=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E){var _;return(0,J.Z)(this,k),(_=w.call(this,"custom","custom")).params=E,_}return(0,G.Z)(k,[{key:"_getIdTokenResponse",value:function(_){return ja(_,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(_,T){return ja(_,this._buildIdpRequest(T))}},{key:"_getReauthenticationResolver",value:function(_){return ja(_,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(_){var T={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(T.idToken=_),T}}]),k}(Ba);function Md(b){return Dr(b.auth,new qt(b),b.bypassAuthState)}function Xf(b){var k=b.user;return Be(k,b.auth,"internal-error"),ii(k,new qt(b),b.bypassAuthState)}function _i(b){return hu.apply(this,arguments)}function hu(){return(hu=(0,y.Z)((0,P.Z)().mark(function b(w){var E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return Be(E=w.user,w.auth,"internal-error"),T.abrupt("return",Fr(E,new qt(w),w.bypassAuthState));case 3:case"end":return T.stop()}},b)}))).apply(this,arguments)}var ir=function(){function b(w,k,E,_){var T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,J.Z)(this,b),this.auth=w,this.resolver=E,this.user=_,this.bypassAuthState=T,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(k)?k:[k]}return(0,G.Z)(b,[{key:"execute",value:function(){var k=this;return new Promise(function(){var E=(0,y.Z)((0,P.Z)().mark(function _(T,M){return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return k.pendingPromise={resolve:T,reject:M},V.prev=1,V.next=4,k.resolver._initialize(k.auth);case 4:return k.eventManager=V.sent,V.next=7,k.onExecution();case 7:k.eventManager.registerConsumer(k),V.next=13;break;case 10:V.prev=10,V.t0=V.catch(1),k.reject(V.t0);case 13:case"end":return V.stop()}},_,null,[[1,10]])}));return function(_,T){return E.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M,O,V,Y,Ce,Xe;return(0,P.Z)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(T=_.urlResponse,M=_.sessionId,O=_.postBody,V=_.tenantId,Ce=_.type,!(Y=_.error)){lt.next=4;break}return this.reject(Y),lt.abrupt("return");case 4:return Xe={auth:this.auth,requestUri:T,sessionId:M,tenantId:V||void 0,postBody:O||void 0,user:this.user,bypassAuthState:this.bypassAuthState},lt.prev=5,lt.t0=this,lt.next=9,this.getIdpTask(Ce)(Xe);case 9:lt.t1=lt.sent,lt.t0.resolve.call(lt.t0,lt.t1),lt.next=16;break;case 13:lt.prev=13,lt.t2=lt.catch(5),this.reject(lt.t2);case 16:case"end":return lt.stop()}},E,this,[[5,13]])})),function k(E){return w.apply(this,arguments)})},{key:"onError",value:function(k){this.reject(k)}},{key:"getIdpTask",value:function(k){switch(k){case"signInViaPopup":case"signInViaRedirect":return Md;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return Xf;default:we(this.auth,"internal-error")}}},{key:"resolve",value:function(k){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(k),this.unregisterAndCleanUp()}},{key:"reject",value:function(k){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(k),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),b;var w}(),Fp=new An(2e3,1e4);function ao(b,w,k){return so.apply(this,arguments)}function so(){return(so=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return _=fn(w),It(w,k,Da),T=ya(_,E),M=new fs(_,"signInViaPopup",k,T),V.abrupt("return",M.executeNotNull());case 5:case"end":return V.stop()}},b)}))).apply(this,arguments)}function sl(b,w,k){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return It((_=(0,Ee.m9)(w)).auth,k,Da),T=ya(_.auth,E),M=new fs(_.auth,"reauthViaPopup",k,T,_),V.abrupt("return",M.executeNotNull());case 5:case"end":return V.stop()}},b)}))).apply(this,arguments)}function kc(b,w,k){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return It((_=(0,Ee.m9)(w)).auth,k,Da),T=ya(_.auth,E),M=new fs(_.auth,"linkViaPopup",k,T,_),V.abrupt("return",M.executeNotNull());case 5:case"end":return V.stop()}},b)}))).apply(this,arguments)}var fs=function(){var b=function(w){(0,R.Z)(E,w);var _,k=(0,j.Z)(E);function E(_,T,M,O,V){var Y;return(0,J.Z)(this,E),(Y=k.call(this,_,T,O,V)).provider=M,Y.authWindow=null,Y.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=(0,A.Z)(Y),Y}return(0,G.Z)(E,[{key:"executeNotNull",value:(_=(0,y.Z)((0,P.Z)().mark(function M(){var O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.execute();case 2:return Be(O=Y.sent,this.auth,"internal-error"),Y.abrupt("return",O);case 5:case"end":return Y.stop()}},M,this)})),function T(){return _.apply(this,arguments)})},{key:"onExecution",value:function(){var _=(0,y.Z)((0,P.Z)().mark(function M(){var V,O=this;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return rn(1===this.filter.length,"Popup operations only handle one event"),V=Ra(),Ce.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],V);case 4:this.authWindow=Ce.sent,this.authWindow.associatedEvent=V,this.resolver._originValidation(this.auth).catch(function(Xe){O.reject(Xe)}),this.resolver._isIframeWebStorageSupported(this.auth,function(Xe){Xe||O.reject($e(O.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return Ce.stop()}},M,this)}));return function T(){return _.apply(this,arguments)}}()},{key:"eventId",get:function(){var T;return(null===(T=this.authWindow)||void 0===T?void 0:T.associatedEvent)||null}},{key:"cancel",value:function(){this.reject($e(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var T=this;!function O(){var V,Y;T.pollId=null!==(Y=null===(V=T.authWindow)||void 0===V?void 0:V.window)&&void 0!==Y&&Y.closed?window.setTimeout(function(){T.pollId=null,T.reject($e(T.auth,"popup-closed-by-user"))},2e3):window.setTimeout(O,Fp.get())}()}}]),E}(ir);return b.currentPopupAction=null,b}(),Us=new Map,Jf=function(b){(0,R.Z)(k,b);var E,w=(0,j.Z)(k);function k(E,_){var T,M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,J.Z)(this,k),(T=w.call(this,E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,M)).eventId=null,T}return(0,G.Z)(k,[{key:"execute",value:(E=(0,y.Z)((0,P.Z)().mark(function T(){var M,V;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(M=Us.get(this.auth._key())){Ce.next=21;break}return Ce.prev=2,Ce.next=5,Qa(this.resolver,this.auth);case 5:if(!Ce.sent){Ce.next=12;break}return Ce.next=9,(0,ie.Z)((0,pe.Z)(k.prototype),"execute",this).call(this);case 9:Ce.t0=Ce.sent,Ce.next=13;break;case 12:Ce.t0=null;case 13:V=Ce.t0,M=function(){return Promise.resolve(V)},Ce.next=20;break;case 17:Ce.prev=17,Ce.t1=Ce.catch(2),M=function(){return Promise.reject(Ce.t1)};case 20:Us.set(this.auth._key(),M);case 21:return this.bypassAuthState||Us.set(this.auth._key(),function(){return Promise.resolve(null)}),Ce.abrupt("return",M());case 23:case"end":return Ce.stop()}},T,this,[[2,17]])})),function _(){return E.apply(this,arguments)})},{key:"onAuthEvent",value:function(){var E=(0,y.Z)((0,P.Z)().mark(function T(M){var O;return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if("signInViaRedirect"!==M.type){Y.next=4;break}return Y.abrupt("return",(0,ie.Z)((0,pe.Z)(k.prototype),"onAuthEvent",this).call(this,M));case 4:if("unknown"!==M.type){Y.next=7;break}return this.resolve(null),Y.abrupt("return");case 7:if(!M.eventId){Y.next=17;break}return Y.next=10,this.auth._redirectUserForId(M.eventId);case 10:if(!(O=Y.sent)){Y.next=16;break}return this.user=O,Y.abrupt("return",(0,ie.Z)((0,pe.Z)(k.prototype),"onAuthEvent",this).call(this,M));case 16:this.resolve(null);case 17:case"end":return Y.stop()}},T,this)}));return function _(T){return E.apply(this,arguments)}}()},{key:"onExecution",value:function(){var E=(0,y.Z)((0,P.Z)().mark(function T(){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:case"end":return O.stop()}},T)}));return function _(){return E.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),k}(ir);function Qa(b,w){return _a.apply(this,arguments)}function _a(){return(_a=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=Pa(k),_=Bn(w),O.next=4,_._isAvailable();case 4:if(O.sent){O.next=6;break}return O.abrupt("return",!1);case 6:return O.next=8,_._get(E);case 8:return O.t0=O.sent,T="true"===O.t0,O.next=12,_._remove(E);case 12:return O.abrupt("return",T);case 13:case"end":return O.stop()}},b)}))).apply(this,arguments)}function ia(b,w){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Bn(w)._set(Pa(k),"true"));case 1:case"end":return _.stop()}},b)}))).apply(this,arguments)}function bc(){Us.clear()}function Ec(b,w){Us.set(b._key(),w)}function Bn(b){return Wn(b._redirectPersistence)}function Pa(b){return ke("pendingRedirect",b.config.apiKey,b.name)}function ki(b,w,k){return function ka(b,w,k){return Dn.apply(this,arguments)}(b,w,k)}function Dn(){return(Dn=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=fn(w),It(w,k,Da),T=ya(_,E),O.next=5,ia(T,_);case 5:return O.abrupt("return",T._openRedirect(_,k,"signInViaRedirect"));case 6:case"end":return O.stop()}},b)}))).apply(this,arguments)}function du(b,w,k){return function Ic(b,w,k){return uo.apply(this,arguments)}(b,w,k)}function uo(){return(uo=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return It((_=(0,Ee.m9)(w)).auth,k,Da),T=ya(_.auth,E),V.next=5,ia(T,_.auth);case 5:return V.next=7,fe(_);case 7:return V.abrupt("return",T._openRedirect(_.auth,k,"reauthViaRedirect",V.sent));case 9:case"end":return V.stop()}},b)}))).apply(this,arguments)}function zi(b,w,k){return function N(b,w,k){return Z.apply(this,arguments)}(b,w,k)}function Z(){return(Z=(0,y.Z)((0,P.Z)().mark(function b(w,k,E){var _,T;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return It((_=(0,Ee.m9)(w)).auth,k,Da),T=ya(_.auth,E),V.next=5,iu(!1,_,k.providerId);case 5:return V.next=7,ia(T,_.auth);case 7:return V.next=9,fe(_);case 9:return V.abrupt("return",T._openRedirect(_.auth,k,"linkViaRedirect",V.sent));case 11:case"end":return V.stop()}},b)}))).apply(this,arguments)}function B(b,w){return H.apply(this,arguments)}function H(){return(H=(0,y.Z)((0,P.Z)().mark(function b(w,k){return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,fn(w)._initializationPromise;case 2:return _.abrupt("return",z(w,k,!1));case 3:case"end":return _.stop()}},b)}))).apply(this,arguments)}function z(b,w){return ee.apply(this,arguments)}function ee(){return ee=(0,y.Z)((0,P.Z)().mark(function b(w,k){var E,_,T,M,O,V=arguments;return(0,P.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return E=V.length>2&&void 0!==V[2]&&V[2],_=fn(w),T=ya(_,k),M=new Jf(_,T,E),Ce.next=6,M.execute();case 6:if(!(O=Ce.sent)||E){Ce.next=13;break}return delete O.user._redirectEventId,Ce.next=11,_._persistUserIfCurrent(O.user);case 11:return Ce.next=13,_._setRedirectUser(null,k);case 13:return Ce.abrupt("return",O);case 14:case"end":return Ce.stop()}},b)})),ee.apply(this,arguments)}function fe(b){return de.apply(this,arguments)}function de(){return(de=(0,y.Z)((0,P.Z)().mark(function b(w){var k;return(0,P.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return k=Ra("".concat(w.uid,":::")),w._redirectEventId=k,_.next=4,w.auth._setRedirectUser(w);case 4:return _.next=6,w.auth._persistUserIfCurrent(w);case 6:return _.abrupt("return",k);case 7:case"end":return _.stop()}},b)}))).apply(this,arguments)}var st=function(){function b(w){(0,J.Z)(this,b),this.auth=w,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,G.Z)(b,[{key:"registerConsumer",value:function(k){this.consumers.add(k),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,k)&&(this.sendToConsumer(this.queuedRedirectEvent,k),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(k){this.consumers.delete(k)}},{key:"onEvent",value:function(k){var E=this;if(this.hasEventBeenHandled(k))return!1;var _=!1;return this.consumers.forEach(function(T){E.isEventForConsumer(k,T)&&(_=!0,E.sendToConsumer(k,T),E.saveEventToCache(k))}),this.hasHandledPotentialRedirect||!function Ut(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ne(b);default:return!1}}(k)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=k,_=!0)),_}},{key:"sendToConsumer",value:function(k,E){var _;if(k.error&&!Ne(k)){var T=(null===(_=k.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";E.onError($e(this.auth,T))}else E.onAuthEvent(k)}},{key:"isEventForConsumer",value:function(k,E){var _=null===E.eventId||!!k.eventId&&k.eventId===E.eventId;return E.filter.includes(k.type)&&_}},{key:"hasEventBeenHandled",value:function(k){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nt(k))}},{key:"saveEventToCache",value:function(k){this.cachedEventUids.add(nt(k)),this.lastProcessedEventTime=Date.now()}}]),b}();function nt(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(function(w){return w}).join("-")}function Ne(b){var k=b.error;return"unknown"===b.type&&(null==k?void 0:k.code)==="auth/".concat("no-auth-event")}function kn(b){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,y.Z)((0,P.Z)().mark(function b(w){var E=arguments;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",lr(w,"GET","/v1/projects",E.length>1&&void 0!==E[1]?E[1]:{}));case 2:case"end":return T.stop()}},b)})),Wt.apply(this,arguments)}var Xt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jt=/^https?/;function Sn(){return(Sn=(0,y.Z)((0,P.Z)().mark(function b(w){var _,T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!w.config.emulator){V.next=2;break}return V.abrupt("return");case 2:return V.next=4,kn(w);case 4:_=(0,se.Z)(V.sent.authorizedDomains),V.prev=7,_.s();case 9:if((T=_.n()).done){V.next=20;break}if(M=T.value,V.prev=11,!wi(M)){V.next=14;break}return V.abrupt("return");case 14:V.next=18;break;case 16:V.prev=16,V.t0=V.catch(11);case 18:V.next=9;break;case 20:V.next=25;break;case 22:V.prev=22,V.t1=V.catch(7),_.e(V.t1);case 25:return V.prev=25,_.f(),V.finish(25);case 28:we(w,"unauthorized-domain");case 29:case"end":return V.stop()}},b,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function wi(b){var w=Hr(),k=new URL(w),E=k.protocol,_=k.hostname;if(b.startsWith("chrome-extension://")){var T=new URL(b);return""===T.hostname&&""===_?"chrome-extension:"===E&&b.replace("chrome-extension://","")===w.replace("chrome-extension://",""):"chrome-extension:"===E&&T.hostname===_}if(!Jt.test(E))return!1;if(Xt.test(b))return _===b;var M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(_)}var Ri=new An(3e4,6e4);function Sr(){var b=mr().___jsl;if(null!=b&&b.H)for(var w=0,k=Object.keys(b.H);w<k.length;w++){var E=k[w];if(b.H[E].r=b.H[E].r||[],b.H[E].L=b.H[E].L||[],b.H[E].r=(0,Te.Z)(b.H[E].L),b.CP)for(var _=0;_<b.CP.length;_++)b.CP[_]=null}}var Ma=null;function vu(b){return Ma=Ma||function $n(b){return new Promise(function(w,k){var E,_,T;function M(){Sr(),gapi.load("gapi.iframes",{callback:function(){w(gapi.iframes.getContext())},ontimeout:function(){Sr(),k($e(b,"network-request-failed"))},timeout:Ri.get()})}if(null!==(_=null===(E=mr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==_&&_.Iframe)w(gapi.iframes.getContext());else{if(null===(T=mr().gapi)||void 0===T||!T.load){var O=Ns("iframefcb");return mr()[O]=function(){gapi.load?M():k($e(b,"network-request-failed"))},Zs("https://apis.google.com/js/api.js?onload=".concat(O)).catch(function(V){return k(V)})}M()}}).catch(function(w){throw Ma=null,w})}(b),Ma}var Od=new An(5e3,15e3),Up={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ul=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gk(b){var w=b.config;Be(w.authDomain,b,"auth-domain-config-required");var k=w.emulator?tn(w,"emulator/auth/iframe"):"https://".concat(b.config.authDomain,"/").concat("__/auth/iframe"),E={apiKey:w.apiKey,appName:b.name,v:Ae.SDK_VERSION},_=ul.get(b.config.apiHost);_&&(E.eid=_);var T=b._getFrameworks();return T.length&&(E.fw=T.join(",")),"".concat(k,"?").concat((0,Ee.xO)(E).slice(1))}function th(b){return nh.apply(this,arguments)}function nh(){return nh=(0,y.Z)((0,P.Z)().mark(function b(w){var k,E;return(0,P.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,vu(w);case 2:return k=T.sent,Be(E=mr().gapi,w,"internal-error"),T.abrupt("return",k.open({where:document.body,url:Gk(w),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Up,dontclear:!0},function(M){return new Promise(function(){var O=(0,y.Z)((0,P.Z)().mark(function V(Y,Ce){var Xe,kt,lt;return(0,P.Z)().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return lt=function(){mr().clearTimeout(kt),Y(M)},Ct.next=3,M.restyle({setHideOnLeave:!1});case 3:Xe=$e(w,"network-request-failed"),kt=mr().setTimeout(function(){Ce(Xe)},Od.get()),M.ping(lt).then(lt,function(){Ce(Xe)});case 6:case"end":return Ct.stop()}},V)}));return function(V,Y){return O.apply(this,arguments)}}())}));case 6:case"end":return T.stop()}},b)})),nh.apply(this,arguments)}var Cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ly="http://localhost",pu=function(){function b(w){(0,J.Z)(this,b),this.window=w,this.associatedEvent=null}return(0,G.Z)(b,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(k){}}}]),b}();function zk(b,w,k){var E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,T=Math.max((window.screen.availHeight-_)/2,0).toString(),M=Math.max((window.screen.availWidth-E)/2,0).toString(),O="",V=Object.assign(Object.assign({},Cc),{width:E.toString(),height:_.toString(),top:T,left:M}),Y=(0,Ee.z$)().toLowerCase();k&&(O=Pt(Y)?"_blank":k),it(Y)&&(w=w||ly,V.scrollbars="yes");var Ce=Object.entries(V).reduce(function(kt,lt){var wt=(0,ye.Z)(lt,2),Ct=wt[0],Or=wt[1];return"".concat(kt).concat(Ct,"=").concat(Or,",")},"");if(ni(Y)&&"_self"!==O)return Tc(w||"",O),new pu(null);var Xe=window.open(w||"",O,Ce);Be(Xe,b,"popup-blocked");try{Xe.focus()}catch(kt){}return new pu(Xe)}function Tc(b,w){var k=document.createElement("a");k.href=b,k.target=w;var E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),k.dispatchEvent(E)}function oo(b,w,k,E,_,T){Be(b.config.authDomain,b,"auth-domain-config-required"),Be(b.config.apiKey,b,"invalid-api-key");var M={apiKey:b.config.apiKey,appName:b.name,authType:k,redirectUrl:E,v:Ae.SDK_VERSION,eventId:_};if(w instanceof Da){w.setDefaultLanguage(b.languageCode),M.providerId=w.providerId||"",(0,Ee.xb)(w.getCustomParameters())||(M.customParameters=JSON.stringify(w.getCustomParameters()));for(var O=0,V=Object.entries(T||{});O<V.length;O++){var Y=(0,ye.Z)(V[O],2);M[Y[0]]=Y[1]}}if(w instanceof Vi){var kt=w.getScopes().filter(function(Yn){return""!==Yn});kt.length>0&&(M.scopes=kt.join(","))}b.tenantId&&(M.tid=b.tenantId);for(var lt=M,wt=0,Ct=Object.keys(lt);wt<Ct.length;wt++){var Or=Ct[wt];void 0===lt[Or]&&delete lt[Or]}return"".concat(function ol(b){var w=b.config;return w.emulator?tn(w,"emulator/auth/handler"):"https://".concat(w.authDomain,"/").concat("__/auth/handler")}(b),"?").concat((0,Ee.xO)(lt).slice(1))}var Sc="webStorageSupport",rh=function(){function b(){(0,J.Z)(this,b),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pc,this._completeRedirectFn=z,this._overrideRedirectResult=Ec}return(0,G.Z)(b,[{key:"_openPopup",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_,T,M,O){var V,Y;return(0,P.Z)().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return rn(null===(V=this.eventManagers[_._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()"),Y=oo(_,T,M,Hr(),O),Xe.abrupt("return",zk(_,Y,Ra()));case 3:case"end":return Xe.stop()}},E,this)})),function k(E,_,T,M){return w.apply(this,arguments)})},{key:"_openRedirect",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_,T,M,O){return(0,P.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this._originValidation(_);case 2:return Jo(oo(_,T,M,Hr(),O)),Y.abrupt("return",new Promise(function(){}));case 4:case"end":return Y.stop()}},E,this)}));return function k(E,_,T,M){return w.apply(this,arguments)}}()},{key:"_initialize",value:function(k){var E=this,_=k._key();if(this.eventManagers[_]){var T=this.eventManagers[_],M=T.manager,O=T.promise;return M?Promise.resolve(M):(rn(O,"If manager is not set, promise should be"),O)}var V=this.initAndGetManager(k);return this.eventManagers[_]={promise:V},V.catch(function(){delete E.eventManagers[_]}),V}},{key:"initAndGetManager",value:function(){var w=(0,y.Z)((0,P.Z)().mark(function E(_){var T,M;return(0,P.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,th(_);case 2:return T=V.sent,M=new st(_),T.register("authEvent",function(Y){return Be(null==Y?void 0:Y.authEvent,_,"invalid-auth-event"),{status:M.onEvent(Y.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[_._key()]={manager:M},this.iframes[_._key()]=T,V.abrupt("return",M);case 8:case"end":return V.stop()}},E,this)}));return function k(E){return w.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(k,E){this.iframes[k._key()].send(Sc,{type:Sc},function(T){var M,O=null===(M=null==T?void 0:T[0])||void 0===M?void 0:M[Sc];void 0!==O&&E(!!O),we(k,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(k){var E=k._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Yt(b){return Sn.apply(this,arguments)}(k)),this.originValidationPromises[E]}},{key:"_shouldInitProactively",get:function(){return Cr()||ht()||Zn()}}]),b;var w}(),Bp=rh,ih=function(b){(0,R.Z)(k,b);var w=(0,j.Z)(k);function k(E){var _;return(0,J.Z)(this,k),(_=w.call(this,"phone")).credential=E,_}return(0,G.Z)(k,[{key:"_finalizeEnroll",value:function(_,T,M){return function Rs(b,w){return lr(b,"POST","/v2/accounts/mfaEnrollment:finalize",un(b,w))}(_,{idToken:T,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(_,T){return function $a(b,w){return lr(b,"POST","/v2/accounts/mfaSignIn:finalize",un(b,w))}(_,{mfaPendingCredential:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(_){return new k(_)}}]),k}(function(){function b(w){(0,J.Z)(this,b),this.factorId=w}return(0,G.Z)(b,[{key:"_process",value:function(k,E,_){switch(E.type){case"enroll":return this._finalizeEnroll(k,E.credential,_);case"signin":return this._finalizeSignIn(k,E.credential);default:return mt("unexpected MultiFactorSessionType")}}}]),b}()),Vp=function(){var b=function(){function w(){(0,J.Z)(this,w)}return(0,G.Z)(w,null,[{key:"assertion",value:function(E){return ih._fromCredential(E)}}]),w}();return b.FACTOR_ID="phone",b}(),vs="@firebase/auth",cy=function(){function b(w){(0,J.Z)(this,b),this.auth=w,this.internalListeners=new Map}return(0,G.Z)(b,[{key:"getUid",value:function(){var k;return this.assertAuthConfigured(),(null===(k=this.auth.currentUser)||void 0===k?void 0:k.uid)||null}},{key:"getToken",value:(w=(0,y.Z)((0,P.Z)().mark(function E(_){return(0,P.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return this.assertAuthConfigured(),O.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){O.next=5;break}return O.abrupt("return",null);case 5:return O.next=7,this.auth.currentUser.getIdToken(_);case 7:return O.abrupt("return",{accessToken:O.sent});case 9:case"end":return O.stop()}},E,this)})),function k(E){return w.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(k){if(this.assertAuthConfigured(),!this.internalListeners.has(k)){var E=this.auth.onIdTokenChanged(function(_){var T;k((null===(T=_)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(k,E),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(k){this.assertAuthConfigured();var E=this.internalListeners.get(k);!E||(this.internalListeners.delete(k),E(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),b;var w}();!function Nd(b){(0,Ae._registerComponent)(new Fe.wA("auth",function(w,k){var E=k.options,_=w.getProvider("app").getImmediate(),T=w.getProvider("heartbeat"),M=_.options,O=M.apiKey,V=M.authDomain;return function(Y,Ce){Be(O&&!O.includes(":"),"invalid-api-key",{appName:Y.name}),Be(!(null!=V&&V.includes(":")),"argument-error",{appName:Y.name});var Xe={apiKey:O,authDomain:V,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bi(b)},kt=new zt(Y,Ce,Xe);return function or(b,w){var k=(null==w?void 0:w.persistence)||[],E=(Array.isArray(k)?k:[k]).map(Wn);null!=w&&w.errorMap&&b._updateErrorMap(w.errorMap),b._initializeWithPersistence(E,null==w?void 0:w.popupRedirectResolver)}(kt,E),kt}(_,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(w,k,E){w.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new Fe.wA("auth-internal",function(w){var k=fn(w.getProvider("auth").getImmediate());return new cy(k)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)(vs,"0.20.7",function Kk(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Ae.registerVersion)(vs,"0.20.7","esm2017")}("Browser")},2090:function(St,He,U){U.d(He,{$s:function(){return sr},BH:function(){return je},DV:function(){return tn},Dv:function(){return fi},G6:function(){return we},GJ:function(){return Ia},L:function(){return Me},LL:function(){return rn},Pz:function(){return or},Rd:function(){return at},Sg:function(){return De},UG:function(){return tt},UI:function(){return xu},US:function(){return Ee},Wj:function(){return hi},Yr:function(){return ue},ZB:function(){return Ue},ZR:function(){return mt},b$:function(){return Ze},cI:function(){return Rr},dS:function(){return Ot},eu:function(){return pt},g5:function(){return G},gK:function(){return Qi},gQ:function(){return Pr},h$:function(){return Ae},hl:function(){return $e},hu:function(){return J},jU:function(){return Je},k$:function(){return ti},lb:function(){return Hn},m9:function(){return Rn},ne:function(){return Ca},p$:function(){return Fe},pd:function(){return Wr},r3:function(){return An},ru:function(){return At},tV:function(){return be},uI:function(){return Qe},ug:function(){return an},vZ:function(){return Yi},w1:function(){return $},w9:function(){return ei},xO:function(){return Ui},xb:function(){return pa},z$:function(){return Se},zI:function(){return It},zd:function(){return Si}});var ie=U(7762),pe=U(7685),A=U(7326),R=U(136),j=U(8486),se=U(5724),P=U(5671),ye=U(3144),J=function(_e,le){if(!_e)throw G(le)},G=function(_e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+_e)},Te=function(_e){for(var le=[],ve=0,Re=0;Re<_e.length;Re++){var Oe=_e.charCodeAt(Re);Oe<128?le[ve++]=Oe:Oe<2048?(le[ve++]=Oe>>6|192,le[ve++]=63&Oe|128):55296==(64512&Oe)&&Re+1<_e.length&&56320==(64512&_e.charCodeAt(Re+1))?(Oe=65536+((1023&Oe)<<10)+(1023&_e.charCodeAt(++Re)),le[ve++]=Oe>>18|240,le[ve++]=Oe>>12&63|128,le[ve++]=Oe>>6&63|128,le[ve++]=63&Oe|128):(le[ve++]=Oe>>12|224,le[ve++]=Oe>>6&63|128,le[ve++]=63&Oe|128)}return le},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(_e,le){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var ve=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,Re=[],Oe=0;Oe<_e.length;Oe+=3){var et=_e[Oe],dt=Oe+1<_e.length,Zt=dt?_e[Oe+1]:0,Vt=Oe+2<_e.length,Gt=Vt?_e[Oe+2]:0,he=(15&Zt)<<2|Gt>>6,ke=63&Gt;Vt||(ke=64,dt||(he=64)),Re.push(ve[et>>2],ve[(3&et)<<4|Zt>>4],ve[he],ve[ke])}return Re.join("")},encodeString:function(_e,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(_e):this.encodeByteArray(Te(_e),le)},decodeString:function(_e,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(_e):function(_e){for(var le=[],ve=0,Re=0;ve<_e.length;){var Oe=_e[ve++];if(Oe<128)le[Re++]=String.fromCharCode(Oe);else if(Oe>191&&Oe<224){var et=_e[ve++];le[Re++]=String.fromCharCode((31&Oe)<<6|63&et)}else if(Oe>239&&Oe<365){var Gt=((7&Oe)<<18|(63&_e[ve++])<<12|(63&_e[ve++])<<6|63&_e[ve++])-65536;le[Re++]=String.fromCharCode(55296+(Gt>>10)),le[Re++]=String.fromCharCode(56320+(1023&Gt))}else{var me=_e[ve++],Ie=_e[ve++];le[Re++]=String.fromCharCode((15&Oe)<<12|(63&me)<<6|63&Ie)}}return le.join("")}(this.decodeStringToByteArray(_e,le))},decodeStringToByteArray:function(_e,le){this.init_();for(var ve=le?this.charToByteMapWebSafe_:this.charToByteMap_,Re=[],Oe=0;Oe<_e.length;){var et=ve[_e.charAt(Oe++)],Zt=Oe<_e.length?ve[_e.charAt(Oe)]:0,Gt=++Oe<_e.length?ve[_e.charAt(Oe)]:64,Ie=++Oe<_e.length?ve[_e.charAt(Oe)]:64;if(++Oe,null==et||null==Zt||null==Gt||null==Ie)throw Error();Re.push(et<<2|Zt>>4),64!==Gt&&(Re.push(Zt<<4&240|Gt>>2),64!==Ie&&Re.push(Gt<<6&192|Ie))}return Re},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}},Ae=function(_e){var le=Te(_e);return Ee.encodeByteArray(le,!0)},Me=function(_e){return Ae(_e).replace(/\./g,"")},be=function(_e){try{return Ee.decodeString(_e,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function Fe(Ke){return Ue(void 0,Ke)}function Ue(Ke,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===Ke&&(Ke={});break;case Array:Ke=[];break;default:return _e}for(var ve in _e)!_e.hasOwnProperty(ve)||!Ge(ve)||(Ke[ve]=Ue(Ke[ve],_e[ve]));return Ke}function Ge(Ke){return"__proto__"!==Ke}var je=function(){function Ke(){var _e=this;(0,P.Z)(this,Ke),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(le,ve){_e.resolve=le,_e.reject=ve})}return(0,ye.Z)(Ke,[{key:"wrapCallback",value:function(le){var ve=this;return function(Re,Oe){Re?ve.reject(Re):ve.resolve(Oe),"function"==typeof le&&(ve.promise.catch(function(){}),1===le.length?le(Re):le(Re,Oe))}}}]),Ke}();function De(Ke,_e){if(Ke.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var ve=_e||"demo-project",Re=Ke.iat||0,Oe=Ke.sub||Ke.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var et=Object.assign({iss:"https://securetoken.google.com/".concat(ve),aud:ve,iat:Re,exp:Re+3600,auth_time:Re,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},Ke);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(et)),""].join(".")}function Se(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function tt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ke){return!1}}function Je(){return"object"==typeof self&&self.self===self}function At(){var Ke="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ke&&void 0!==Ke.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $(){var Ke=Se();return Ke.indexOf("MSIE ")>=0||Ke.indexOf("Trident/")>=0}function ue(){return!1}function we(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function pt(){return new Promise(function(Ke,_e){try{var le=!0,ve="validate-browser-context-for-indexeddb-analytics-module",Re=self.indexedDB.open(ve);Re.onsuccess=function(){Re.result.close(),le||self.indexedDB.deleteDatabase(ve),Ke(!0)},Re.onupgradeneeded=function(){le=!1},Re.onerror=function(){var Oe;_e((null===(Oe=Re.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(Oe){_e(Oe)}})}function It(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}function at(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var mt=function(Ke){(0,R.Z)(le,Ke);var _e=(0,j.Z)(le);function le(ve,Re,Oe){var et;return(0,P.Z)(this,le),(et=_e.call(this,Re)).code=ve,et.customData=Oe,et.name="FirebaseError",Object.setPrototypeOf((0,A.Z)(et),le.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,A.Z)(et),rn.prototype.create),et}return(0,ye.Z)(le)}((0,se.Z)(Error)),rn=function(){function Ke(_e,le,ve){(0,P.Z)(this,Ke),this.service=_e,this.serviceName=le,this.errors=ve}return(0,ye.Z)(Ke,[{key:"create",value:function(le){var ve=(arguments.length<=1?void 0:arguments[1])||{},Re="".concat(this.service,"/").concat(le),Oe=this.errors[le],et=Oe?Tn(Oe,ve):"Error",dt="".concat(this.serviceName,": ").concat(et," (").concat(Re,")."),Zt=new mt(Re,dt,ve);return Zt}}]),Ke}();function Tn(Ke,_e){return Ke.replace(Wn,function(le,ve){var Re=_e[ve];return null!=Re?String(Re):"<".concat(ve,"?>")})}var Wn=/\{\$([^}]+)}/g;function Rr(Ke){return JSON.parse(Ke)}function or(Ke){return JSON.stringify(Ke)}var Hr=function(_e){var le={},ve={},Re={},Oe="";try{var et=_e.split(".");le=Rr(be(et[0])||""),ve=Rr(be(et[1])||""),Oe=et[2],Re=ve.d||{},delete ve.d}catch(dt){}return{header:le,claims:ve,data:Re,signature:Oe}},ei=function(_e){var ve=Hr(_e).claims;return!!ve&&"object"==typeof ve&&ve.hasOwnProperty("iat")},Ia=function(_e){var le=Hr(_e).claims;return"object"==typeof le&&!0===le.admin};function An(Ke,_e){return Object.prototype.hasOwnProperty.call(Ke,_e)}function tn(Ke,_e){if(Object.prototype.hasOwnProperty.call(Ke,_e))return Ke[_e]}function pa(Ke){for(var _e in Ke)if(Object.prototype.hasOwnProperty.call(Ke,_e))return!1;return!0}function xu(Ke,_e,le){var ve={};for(var Re in Ke)Object.prototype.hasOwnProperty.call(Ke,Re)&&(ve[Re]=_e.call(le,Ke[Re],Re,Ke));return ve}function Yi(Ke,_e){if(Ke===_e)return!0;for(var le=Object.keys(Ke),ve=Object.keys(_e),Re=0,Oe=le;Re<Oe.length;Re++){var et=Oe[Re];if(!ve.includes(et))return!1;var dt=Ke[et],Zt=_e[et];if(un(dt)&&un(Zt)){if(!Yi(dt,Zt))return!1}else if(dt!==Zt)return!1}for(var Vt=0,Gt=ve;Vt<Gt.length;Vt++)if(!le.includes(Gt[Vt]))return!1;return!0}function un(Ke){return null!==Ke&&"object"==typeof Ke}function Ui(Ke){for(var _e=[],le=function(){var et=(0,pe.Z)(Re[ve],2),dt=et[0],Zt=et[1];Array.isArray(Zt)?Zt.forEach(function(Vt){_e.push(encodeURIComponent(dt)+"="+encodeURIComponent(Vt))}):_e.push(encodeURIComponent(dt)+"="+encodeURIComponent(Zt))},ve=0,Re=Object.entries(Ke);ve<Re.length;ve++)le();return _e.length?"&"+_e.join("&"):""}function Si(Ke){var _e={};return Ke.replace(/^\?/,"").split("&").forEach(function(ve){if(ve){var Re=ve.split("="),Oe=(0,pe.Z)(Re,2),dt=Oe[1];_e[decodeURIComponent(Oe[0])]=decodeURIComponent(dt)}}),_e}function Wr(Ke){var _e=Ke.indexOf("?");if(!_e)return"";var le=Ke.indexOf("#",_e);return Ke.substring(_e,le>0?le:void 0)}var Pr=function(){function Ke(){(0,P.Z)(this,Ke),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}return(0,ye.Z)(Ke,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(le,ve){ve||(ve=0);var Re=this.W_;if("string"==typeof le)for(var Oe=0;Oe<16;Oe++)Re[Oe]=le.charCodeAt(ve)<<24|le.charCodeAt(ve+1)<<16|le.charCodeAt(ve+2)<<8|le.charCodeAt(ve+3),ve+=4;else for(var et=0;et<16;et++)Re[et]=le[ve]<<24|le[ve+1]<<16|le[ve+2]<<8|le[ve+3],ve+=4;for(var dt=16;dt<80;dt++){var Zt=Re[dt-3]^Re[dt-8]^Re[dt-14]^Re[dt-16];Re[dt]=4294967295&(Zt<<1|Zt>>>31)}for(var ke,Le,Vt=this.chain_[0],Gt=this.chain_[1],me=this.chain_[2],Ie=this.chain_[3],he=this.chain_[4],vt=0;vt<80;vt++){vt<40?vt<20?(ke=Ie^Gt&(me^Ie),Le=1518500249):(ke=Gt^me^Ie,Le=1859775393):vt<60?(ke=Gt&me|Ie&(Gt|me),Le=2400959708):(ke=Gt^me^Ie,Le=3395469782);var it=(Vt<<5|Vt>>>27)+ke+he+Le+Re[vt]&4294967295;he=Ie,Ie=me,me=4294967295&(Gt<<30|Gt>>>2),Gt=Vt,Vt=it}this.chain_[0]=this.chain_[0]+Vt&4294967295,this.chain_[1]=this.chain_[1]+Gt&4294967295,this.chain_[2]=this.chain_[2]+me&4294967295,this.chain_[3]=this.chain_[3]+Ie&4294967295,this.chain_[4]=this.chain_[4]+he&4294967295}},{key:"update",value:function(le,ve){if(null!=le){void 0===ve&&(ve=le.length);for(var Re=ve-this.blockSize,Oe=0,et=this.buf_,dt=this.inbuf_;Oe<ve;){if(0===dt)for(;Oe<=Re;)this.compress_(le,Oe),Oe+=this.blockSize;if("string"==typeof le){for(;Oe<ve;)if(et[dt]=le.charCodeAt(Oe),++Oe,++dt===this.blockSize){this.compress_(et),dt=0;break}}else for(;Oe<ve;)if(et[dt]=le[Oe],++Oe,++dt===this.blockSize){this.compress_(et),dt=0;break}}this.inbuf_=dt,this.total_+=ve}}},{key:"digest",value:function(){var le=[],ve=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Re=this.blockSize-1;Re>=56;Re--)this.buf_[Re]=255&ve,ve/=256;this.compress_(this.buf_);for(var Oe=0,et=0;et<5;et++)for(var dt=24;dt>=0;dt-=8)le[Oe]=this.chain_[et]>>dt&255,++Oe;return le}}]),Ke}();function Ca(Ke,_e){var le=new Jn(Ke,_e);return le.subscribe.bind(le)}var Jn=function(){function Ke(_e,le){var ve=this;(0,P.Z)(this,Ke),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=le,this.task.then(function(){_e(ve)}).catch(function(Re){ve.error(Re)})}return(0,ye.Z)(Ke,[{key:"next",value:function(le){this.forEachObserver(function(ve){ve.next(le)})}},{key:"error",value:function(le){this.forEachObserver(function(ve){ve.error(le)}),this.close(le)}},{key:"complete",value:function(){this.forEachObserver(function(le){le.complete()}),this.close()}},{key:"subscribe",value:function(le,ve,Re){var et,Oe=this;if(void 0===le&&void 0===ve&&void 0===Re)throw new Error("Missing Observer.");et=function jn(Ke,_e){if("object"!=typeof Ke||null===Ke)return!1;var ve,le=(0,ie.Z)(_e);try{for(le.s();!(ve=le.n()).done;){var Re=ve.value;if(Re in Ke&&"function"==typeof Ke[Re])return!0}}catch(Oe){le.e(Oe)}finally{le.f()}return!1}(le,["next","error","complete"])?le:{next:le,error:ve,complete:Re},void 0===et.next&&(et.next=Gr),void 0===et.error&&(et.error=Gr),void 0===et.complete&&(et.complete=Gr);var dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Oe.finalError?et.error(Oe.finalError):et.complete()}catch(Zt){}}),this.observers.push(et),dt}},{key:"unsubscribeOne",value:function(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(le){if(!this.finalized)for(var ve=0;ve<this.observers.length;ve++)this.sendOne(ve,le)}},{key:"sendOne",value:function(le,ve){var Re=this;this.task.then(function(){if(void 0!==Re.observers&&void 0!==Re.observers[le])try{ve(Re.observers[le])}catch(Oe){"undefined"!=typeof console&&console.error&&console.error(Oe)}})}},{key:"close",value:function(le){var ve=this;this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(function(){ve.observers=void 0,ve.onNoObservers=void 0}))}}]),Ke}();function Gr(){}var fi=function(_e,le,ve,Re){var Oe;if(Re<le?Oe="at least "+le:Re>ve&&(Oe=0===ve?"none":"no more than "+ve),Oe)throw new Error(_e+" failed: Was called with "+Re+(1===Re?" argument.":" arguments.")+" Expects "+Oe+".")};function Qi(Ke,_e){return"".concat(Ke," failed: ").concat(_e," argument ")}function hi(Ke,_e,le,ve){if((!ve||le)&&"function"!=typeof le)throw new Error(Qi(Ke,_e)+"must be a valid function.")}function Hn(Ke,_e,le,ve){if((!ve||le)&&("object"!=typeof le||null===le))throw new Error(Qi(Ke,_e)+"must be a valid context object.")}var Ot=function(_e){for(var le=[],ve=0,Re=0;Re<_e.length;Re++){var Oe=_e.charCodeAt(Re);if(Oe>=55296&&Oe<=56319){var et=Oe-55296;Re++,J(Re<_e.length,"Surrogate pair missing trail surrogate."),Oe=65536+(et<<10)+(_e.charCodeAt(Re)-56320)}Oe<128?le[ve++]=Oe:Oe<2048?(le[ve++]=Oe>>6|192,le[ve++]=63&Oe|128):Oe<65536?(le[ve++]=Oe>>12|224,le[ve++]=Oe>>6&63|128,le[ve++]=63&Oe|128):(le[ve++]=Oe>>18|240,le[ve++]=Oe>>12&63|128,le[ve++]=Oe>>6&63|128,le[ve++]=63&Oe|128)}return le},an=function(_e){for(var le=0,ve=0;ve<_e.length;ve++){var Re=_e.charCodeAt(ve);Re<128?le++:Re<2048?le+=2:Re>=55296&&Re<=56319?(le+=4,ve++):le+=3}return le},ti=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(_e){var le=16*Math.random()|0;return("x"===_e?le:3&le|8).toString(16)})};function sr(Ke){var _e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,ve=_e*Math.pow(le,Ke),Re=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+Re)}function Rn(Ke){return Ke&&Ke._delegate?Ke._delegate:Ke}},546:function(St,He,U){var ie=U(3237),pe=U(1120),A=U(3144),R=U(5671),j=U(136),se=U(8486),P=U(7762),ye=U(7685),y=U(5e3),J=null;function G(){return J}var Ee=(0,A.Z)(function t(){(0,R.Z)(this,t)}),Ae=new y.OlP("DocumentToken"),Me=function(){var t=function(){function n(){(0,R.Z)(this,n)}return(0,A.Z)(n,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:function(){return function be(){return(0,y.LFG)(Ue)}()},providedIn:"platform"}),t}(),Fe=new y.OlP("Location Initialized"),Ue=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i){var a;return(0,R.Z)(this,r),(a=e.call(this))._doc=i,a._init(),a}return(0,A.Z)(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return G().getBaseHref(this._doc)}},{key:"onPopState",value:function(a){var u=G().getGlobalEventTarget(this._doc,"window");return u.addEventListener("popstate",a,!1),function(){return u.removeEventListener("popstate",a)}}},{key:"onHashChange",value:function(a){var u=G().getGlobalEventTarget(this._doc,"window");return u.addEventListener("hashchange",a,!1),function(){return u.removeEventListener("hashchange",a)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(a){this.location.pathname=a}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(a,u,c){Ge()?this._history.pushState(a,u,c):this.location.hash=c}},{key:"replaceState",value:function(a,u,c){Ge()?this._history.replaceState(a,u,c):this.location.hash=c}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(a)}},{key:"getState",value:function(){return this._history.state}}]),r}(Me);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ae))},t.\u0275prov=y.Yz7({token:t,factory:function(){return function je(){return new Ue((0,y.LFG)(Ae))}()},providedIn:"platform"}),t}();function Ge(){return!!window.history.pushState}function De(t,n){if(0==t.length)return n;if(0==n.length)return t;var e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function Se(t){var n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Qe(t){return t&&"?"!==t[0]?"?"+t:t}var tt=function(){var t=function(){function n(){(0,R.Z)(this,n)}return(0,A.Z)(n,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:function(){return(0,y.f3M)(At)},providedIn:"root"}),t}(),Je=new y.OlP("appBaseHref"),At=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i,a){var u,c,h,v;return(0,R.Z)(this,r),(u=e.call(this))._platformLocation=i,u._removeListenerFns=[],u._baseHref=null!==(v=null!==(c=null!=a?a:u._platformLocation.getBaseHrefFromDOM())&&void 0!==c?c:null===(h=(0,y.f3M)(Ae).location)||void 0===h?void 0:h.origin)&&void 0!==v?v:"",u}return(0,A.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(a){return De(this._baseHref,a)}},{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=this._platformLocation.pathname+Qe(this._platformLocation.search),c=this._platformLocation.hash;return c&&a?"".concat(u).concat(c):u}},{key:"pushState",value:function(a,u,c,h){var v=this.prepareExternalUrl(c+Qe(h));this._platformLocation.pushState(a,u,v)}},{key:"replaceState",value:function(a,u,c,h){var v=this.prepareExternalUrl(c+Qe(h));this._platformLocation.replaceState(a,u,v)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"historyGo",value:function(){var u,c,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(c=(u=this._platformLocation).historyGo)||void 0===c||c.call(u,a)}}]),r}(tt);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Me),y.LFG(Je,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Ze=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i,a){var u;return(0,R.Z)(this,r),(u=e.call(this))._platformLocation=i,u._baseHref="",u._removeListenerFns=[],null!=a&&(u._baseHref=a),u}return(0,A.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var u=this._platformLocation.hash;return null==u&&(u="#"),u.length>0?u.substring(1):u}},{key:"prepareExternalUrl",value:function(a){var u=De(this._baseHref,a);return u.length>0?"#"+u:u}},{key:"pushState",value:function(a,u,c,h){var v=this.prepareExternalUrl(c+Qe(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.pushState(a,u,v)}},{key:"replaceState",value:function(a,u,c,h){var v=this.prepareExternalUrl(c+Qe(h));0==v.length&&(v=this._platformLocation.pathname),this._platformLocation.replaceState(a,u,v)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"historyGo",value:function(){var u,c,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(c=(u=this._platformLocation).historyGo)||void 0===c||c.call(u,a)}}]),r}(tt);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Me),y.LFG(Je,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),oe=function(){var t=function(){function n(e){var r=this;(0,R.Z)(this,n),this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;var i=this._locationStrategy.getBaseHref();this._baseHref=Se(ue(i)),this._locationStrategy.onPopState(function(a){r._subject.emit({url:r.path(!0),pop:!0,state:a.state,type:a.type})})}return(0,A.Z)(n,[{key:"ngOnDestroy",value:function(){var r;null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeListeners=[]}},{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._locationStrategy.path(r))}},{key:"getState",value:function(){return this._locationStrategy.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+Qe(i))}},{key:"normalize",value:function(r){return n.stripTrailingSlash(function te(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,ue(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._locationStrategy.pushState(a,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Qe(i)),a)}},{key:"replaceState",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._locationStrategy.replaceState(a,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Qe(i)),a)}},{key:"forward",value:function(){this._locationStrategy.forward()}},{key:"back",value:function(){this._locationStrategy.back()}},{key:"historyGo",value:function(){var i,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(a=(i=this._locationStrategy).historyGo)||void 0===a||a.call(i,r)}},{key:"onUrlChange",value:function(r){var i=this;return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(a){i._notifyUrlChangeListeners(a.url,a.state)})),function(){var a,u=i._urlChangeListeners.indexOf(r);i._urlChangeListeners.splice(u,1),0===i._urlChangeListeners.length&&(null===(a=i._urlChangeSubscription)||void 0===a||a.unsubscribe(),i._urlChangeSubscription=null)}}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(a){return a(r,i)})}},{key:"subscribe",value:function(r,i,a){return this._subject.subscribe({next:r,error:i,complete:a})}}]),n}();return t.normalizeQueryParams=Qe,t.joinWithSlash=De,t.stripTrailingSlash=Se,t.\u0275fac=function(e){return new(e||t)(y.LFG(tt))},t.\u0275prov=y.Yz7({token:t,factory:function(){return function $(){return new oe((0,y.LFG)(tt))}()},providedIn:"root"}),t}();function ue(t){return t.replace(/\/index.html$/,"")}var Va=function(){var t=function(){function n(e,r){(0,R.Z)(this,n),this._viewContainer=e,this._context=new os,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return(0,A.Z)(n,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){vi("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){vi("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,i){return!0}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(y.s_b),y.Y36(y.Rgc))},t.\u0275dir=y.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t}(),os=(0,A.Z)(function t(){(0,R.Z)(this,t),this.$implicit=null,this.ngIf=null});function vi(t,n){if(n&&!n.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat((0,y.AaK)(n),"'."))}var $l=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({}),t}();function Uo(t){return"server"===t}var Hi=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275prov=(0,y.Yz7)({token:t,providedIn:"root",factory:function(){return new Lf((0,y.LFG)(Ae),window)}}),t}(),Lf=function(){function t(n,e){(0,R.Z)(this,t),this.document=n,this.window=e,this.offset=function(){return[0,0]}}return(0,A.Z)(t,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var r=function Yl(t,n){var e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow))for(var r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var u=a.getElementById(n)||a.querySelector('[name="'.concat(n,'"]'));if(u)return u}i=r.nextNode()}return null}(this.document,e);r&&(this.scrollToElement(r),r.focus())}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,a=r.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(i-u[0],a-u[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=xo(this.window.history)||xo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),t}();function xo(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var uu,fr=(0,A.Z)(function t(){(0,R.Z)(this,t)}),sc=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){var r;return(0,R.Z)(this,e),(r=n.apply(this,arguments)).supportsDOMEvents=!0,r}return(0,A.Z)(e)}(Ee),$o=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"onAndCancel",value:function(i,a,u){return i.addEventListener(a,u,!1),function(){i.removeEventListener(a,u,!1)}}},{key:"dispatchEvent",value:function(i,a){i.dispatchEvent(a)}},{key:"remove",value:function(i){i.parentNode&&i.parentNode.removeChild(i)}},{key:"createElement",value:function(i,a){return(a=a||this.getDefaultDocument()).createElement(i)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(i){return i.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(i){return i instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(i,a){return"window"===a?window:"document"===a?i:"body"===a?i.body:null}},{key:"getBaseHref",value:function(i){var a=function su(){return(Ds=Ds||document.querySelector("base"))?Ds.getAttribute("href"):null}();return null==a?null:function uc(t){(uu=uu||document.createElement("a")).setAttribute("href",t);var n=uu.pathname;return"/"===n.charAt(0)?n:"/".concat(n)}(a)}},{key:"resetBaseElement",value:function(){Ds=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(i){return function In(t,n){n=encodeURIComponent(n);var r,e=(0,P.Z)(t.split(";"));try{for(e.s();!(r=e.n()).done;){var i=r.value,a=i.indexOf("="),u=-1==a?[i,""]:[i.slice(0,a),i.slice(a+1)],c=(0,ye.Z)(u,2),v=c[1];if(c[0].trim()===n)return decodeURIComponent(v)}}catch(g){e.e(g)}finally{e.f()}return null}(document.cookie,i)}}],[{key:"makeCurrent",value:function(){!function Q(t){J||(J=t)}(new e)}}]),e}(sc),Ds=null,qo=new y.OlP("TRANSITION_ID"),kd=[{provide:y.ip1,useFactory:function qu(t,n,e){return function(){e.get(y.CZH).donePromise.then(function(){for(var r=G(),i=n.querySelectorAll('style[ng-transition="'.concat(t,'"]')),a=0;a<i.length;a++)r.remove(i[a])})}},deps:[qo,Ae,y.zs3],multi:!0}],Ss=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"addToWindow",value:function(e){y.dqk.getAngularTestability=function(i){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=e.findTestabilityInTree(i,a);if(null==u)throw new Error("Could not find testability for element.");return u},y.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},y.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(function(a){var u=y.dqk.getAllAngularTestabilities(),c=u.length,h=!1,v=function(I){h=h||I,0==--c&&a(h)};u.forEach(function(g){g.whenStable(v)})})}},{key:"findTestabilityInTree",value:function(e,r,i){if(null==r)return null;var a=e.getTestability(r);return null!=a?a:i?G().isShadowRoot(r)?this.findTestabilityInTree(e,r.host,!0):this.findTestabilityInTree(e,r.parentElement,!0):null}}]),t}(),Ur=function(){var t=function(){function n(){(0,R.Z)(this,n)}return(0,A.Z)(n,[{key:"build",value:function(){return new XMLHttpRequest}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),ga=new y.OlP("EventManagerPlugins"),zn=function(){var t=function(){function n(e,r){var i=this;(0,R.Z)(this,n),this._zone=r,this._eventNameToPlugin=new Map,e.forEach(function(a){return a.manager=i}),this._plugins=e.slice().reverse()}return(0,A.Z)(n,[{key:"addEventListener",value:function(r,i,a){return this._findPluginFor(i).addEventListener(r,i,a)}},{key:"addGlobalEventListener",value:function(r,i,a){return this._findPluginFor(i).addGlobalEventListener(r,i,a)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var i=this._eventNameToPlugin.get(r);if(i)return i;for(var a=this._plugins,u=0;u<a.length;u++){var c=a[u];if(c.supports(r))return this._eventNameToPlugin.set(r,c),c}throw new Error("No event manager plugin found for event ".concat(r))}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(ga),y.LFG(y.R0b))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),jf=function(){function t(n){(0,R.Z)(this,t),this._doc=n}return(0,A.Z)(t,[{key:"addGlobalEventListener",value:function(e,r,i){var a=G().getGlobalEventTarget(this._doc,e);if(!a)throw new Error("Unsupported event target ".concat(a," for event ").concat(r));return this.addEventListener(a,r,i)}}]),t}(),wd=function(){var t=function(){function n(){(0,R.Z)(this,n),this._stylesSet=new Set}return(0,A.Z)(n,[{key:"addStyles",value:function(r){var i=this,a=new Set;r.forEach(function(u){i._stylesSet.has(u)||(i._stylesSet.add(u),a.add(u))}),this.onStylesAdded(a)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),Yo=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i){var a;return(0,R.Z)(this,r),(a=e.call(this))._doc=i,a._hostNodes=new Map,a._hostNodes.set(i.head,[]),a}return(0,A.Z)(r,[{key:"_addStylesToHost",value:function(a,u,c){var h=this;a.forEach(function(v){var g=h._doc.createElement("style");g.textContent=v,c.push(u.appendChild(g))})}},{key:"addHost",value:function(a){var u=[];this._addStylesToHost(this._stylesSet,a,u),this._hostNodes.set(a,u)}},{key:"removeHost",value:function(a){var u=this._hostNodes.get(a);u&&u.forEach(oc),this._hostNodes.delete(a)}},{key:"onStylesAdded",value:function(a){var u=this;this._hostNodes.forEach(function(c,h){u._addStylesToHost(a,h,c)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(a){return a.forEach(oc)})}}]),r}(wd);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ae))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}();function oc(t){G().remove(t)}var bd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ed=/%COMP%/g,lc="_nghost-".concat("%COMP%"),Hf="_ngcontent-".concat("%COMP%");function Gi(t,n,e){for(var r=0;r<n.length;r++){var i=n[r];Array.isArray(i)?Gi(t,i,e):(i=i.replace(Ed,t),e.push(i))}return e}function gr(t){return function(n){if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}var fc=function(){var t=function(){function n(e,r,i){(0,R.Z)(this,n),this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Rs(e)}return(0,A.Z)(n,[{key:"createRenderer",value:function(r,i){if(!r||!i)return this.defaultRenderer;switch(i.encapsulation){case y.ifc.Emulated:var a=this.rendererByCompId.get(i.id);return a||(a=new Wf(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(r),a;case 1:case y.ifc.ShadowDom:return new dc(this.eventManager,this.sharedStylesHost,r,i);default:if(!this.rendererByCompId.has(i.id)){var u=Gi(i.id,i.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(zn),y.LFG(Yo),y.LFG(y.AFp))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),Rs=function(){function t(n){(0,R.Z)(this,t),this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}return(0,A.Z)(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,r){return r?document.createElementNS(bd[r]||r,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,r){(Xo(e)?e.content:e).appendChild(r)}},{key:"insertBefore",value:function(e,r,i){e&&(Xo(e)?e.content:e).insertBefore(r,i)}},{key:"removeChild",value:function(e,r){e&&e.removeChild(r)}},{key:"selectRootElement",value:function(e,r){var i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error('The selector "'.concat(e,'" did not match any elements'));return r||(i.textContent=""),i}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,r,i,a){if(a){r=a+":"+r;var u=bd[a];u?e.setAttributeNS(u,r,i):e.setAttribute(r,i)}else e.setAttribute(r,i)}},{key:"removeAttribute",value:function(e,r,i){if(i){var a=bd[i];a?e.removeAttributeNS(a,r):e.removeAttribute("".concat(i,":").concat(r))}else e.removeAttribute(r)}},{key:"addClass",value:function(e,r){e.classList.add(r)}},{key:"removeClass",value:function(e,r){e.classList.remove(r)}},{key:"setStyle",value:function(e,r,i,a){a&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(r,i,a&y.JOm.Important?"important":""):e.style[r]=i}},{key:"removeStyle",value:function(e,r,i){i&y.JOm.DashCase?e.style.removeProperty(r):e.style[r]=""}},{key:"setProperty",value:function(e,r,i){e[r]=i}},{key:"setValue",value:function(e,r){e.nodeValue=r}},{key:"listen",value:function(e,r,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,r,gr(i)):this.eventManager.addEventListener(e,r,gr(i))}}]),t}();function Xo(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}var Wf=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;(0,R.Z)(this,e),(c=n.call(this,r)).component=a;var h=Gi(u+"-"+a.id,a.styles,[]);return i.addStyles(h),c.contentAttr=function Id(t){return Hf.replace(Ed,t)}(u+"-"+a.id),c.hostAttr=function cc(t){return lc.replace(Ed,t)}(u+"-"+a.id),c}return(0,A.Z)(e,[{key:"applyToHost",value:function(i){(0,ie.Z)((0,pe.Z)(e.prototype),"setAttribute",this).call(this,i,this.hostAttr,"")}},{key:"createElement",value:function(i,a){var u=(0,ie.Z)((0,pe.Z)(e.prototype),"createElement",this).call(this,i,a);return(0,ie.Z)((0,pe.Z)(e.prototype),"setAttribute",this).call(this,u,this.contentAttr,""),u}}]),e}(Rs),dc=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;(0,R.Z)(this,e),(c=n.call(this,r)).sharedStylesHost=i,c.hostEl=a,c.shadowRoot=a.attachShadow({mode:"open"}),c.sharedStylesHost.addHost(c.shadowRoot);for(var h=Gi(u.id,u.styles,[]),v=0;v<h.length;v++){var g=document.createElement("style");g.textContent=h[v],c.shadowRoot.appendChild(g)}return c}return(0,A.Z)(e,[{key:"nodeOrShadowRoot",value:function(i){return i===this.hostEl?this.shadowRoot:i}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(i,a){return(0,ie.Z)((0,pe.Z)(e.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(i),a)}},{key:"insertBefore",value:function(i,a,u){return(0,ie.Z)((0,pe.Z)(e.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(i),a,u)}},{key:"removeChild",value:function(i,a){return(0,ie.Z)((0,pe.Z)(e.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(i),a)}},{key:"parentNode",value:function(i){return this.nodeOrShadowRoot((0,ie.Z)((0,pe.Z)(e.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(i)))}}]),e}(Rs),Yu=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i){return(0,R.Z)(this,r),e.call(this,i)}return(0,A.Z)(r,[{key:"supports",value:function(a){return!0}},{key:"addEventListener",value:function(a,u,c){var h=this;return a.addEventListener(u,c,!1),function(){return h.removeEventListener(a,u,c)}}},{key:"removeEventListener",value:function(a,u,c){return a.removeEventListener(u,c)}}]),r}(jf);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ae))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),vc=["alt","control","meta","shift"],Gf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ai={alt:function(n){return n.altKey},control:function(n){return n.ctrlKey},meta:function(n){return n.metaKey},shift:function(n){return n.shiftKey}},zf=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i){return(0,R.Z)(this,r),e.call(this,i)}return(0,A.Z)(r,[{key:"supports",value:function(a){return null!=r.parseEventName(a)}},{key:"addEventListener",value:function(a,u,c){var h=r.parseEventName(u),v=r.eventCallback(h.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return G().onAndCancel(a,h.domEventName,v)})}}],[{key:"parseEventName",value:function(a){var u=a.toLowerCase().split("."),c=u.shift();if(0===u.length||"keydown"!==c&&"keyup"!==c)return null;var h=r._normalizeKey(u.pop()),v="",g=u.indexOf("code");if(g>-1&&(u.splice(g,1),v="code."),vc.forEach(function(D){var L=u.indexOf(D);L>-1&&(u.splice(L,1),v+=D+".")}),v+=h,0!=u.length||0===h.length)return null;var I={};return I.domEventName=c,I.fullKey=v,I}},{key:"matchEventFullKeyCode",value:function(a,u){var c=Gf[a.key]||a.key,h="";return u.indexOf("code.")>-1&&(c=a.code,h="code."),!(null==c||!c)&&(" "===(c=c.toLowerCase())?c="space":"."===c&&(c="dot"),vc.forEach(function(v){v!==c&&(0,ai[v])(a)&&(h+=v+".")}),(h+=c)===u)}},{key:"eventCallback",value:function(a,u,c){return function(h){r.matchEventFullKeyCode(h,a)&&c.runGuarded(function(){return u(h)})}}},{key:"_normalizeKey",value:function(a){return"esc"===a?"escape":a}}]),r}(jf);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ae))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}(),Ju=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function Ra(){$o.makeCurrent()},multi:!0},{provide:Ae,useFactory:function mr(){return(0,y.RDi)(document),document},deps:[]}]),ma=new y.OlP(""),el=[{provide:y.rWj,useClass:Ss,deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],ou=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Td(){return new y.qLn},deps:[]},{provide:ga,useClass:Yu,multi:!0,deps:[Ae,y.R0b,y.Lbi]},{provide:ga,useClass:zf,multi:!0,deps:[Ae]},{provide:fc,useClass:fc,deps:[zn,Yo,y.AFp]},{provide:y.FYo,useExisting:fc},{provide:wd,useExisting:Yo},{provide:Yo,useClass:Yo,deps:[Ae]},{provide:zn,useClass:zn,deps:[ga,y.R0b]},{provide:fr,useClass:Ur,deps:[]},[]],eo=function(){var t=function(){function n(e){(0,R.Z)(this,n)}return(0,A.Z)(n,null,[{key:"withServerTransition",value:function(r){return{ngModule:n,providers:[{provide:y.AFp,useValue:r.appId},{provide:qo,useExisting:y.AFp},kd]}}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(ma,12))},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[].concat(ou,el),imports:[$l,y.hGG]}),t}(),Ms=function(){var t=function(){function n(e){(0,R.Z)(this,n),this._doc=e}return(0,A.Z)(n,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(r){this._doc.title=r||""}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ae))},t.\u0275prov=y.Yz7({token:t,factory:function(e){return e?new e:function tl(){return new Ms((0,y.LFG)(Ae))}()},providedIn:"root"}),t}();"undefined"!=typeof window&&window;var _c=U(7326),yi=U(4942),on=U(4902),Kn=U(8996),il=U(7669);function Dt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=(0,il.yG)(n);return(0,Kn.D)(n,r)}var na=U(7579),$r=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this))._value=r,i}return(0,A.Z)(e,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(i){var a=(0,ie.Z)((0,pe.Z)(e.prototype),"_subscribe",this).call(this,i);return!a.closed&&i.next(this._value),a}},{key:"getValue",value:function(){var u=this._value;if(this.hasError)throw this.thrownError;return this._throwIfClosed(),u}},{key:"next",value:function(i){(0,ie.Z)((0,pe.Z)(e.prototype),"next",this).call(this,this._value=i)}}]),e}(na.x),cs=(0,U(3888).d)(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}),dr=U(9751),ra=Array.isArray,ro=Object.getPrototypeOf,fu=Object.prototype,io=Object.keys;function al(t){if(1===t.length){var n=t[0];if(ra(n))return{args:n,keys:null};if(function Pd(t){return t&&"object"==typeof t&&ro(t)===fu}(n)){var e=io(n);return{args:e.map(function(r){return n[r]}),keys:e}}}return{args:t,keys:null}}var ya=U(4671),qt=U(4004),Md=Array.isArray;function _i(t){return(0,qt.U)(function(n){return function Xf(t,n){return Md(n)?t.apply(void 0,(0,on.Z)(n)):t(n)}(t,n)})}function hu(t,n){return t.reduce(function(e,r,i){return e[r]=n[i],e},{})}var ir=U(5403),Fp=U(9672);function ao(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=(0,il.yG)(n),i=(0,il.jO)(n),a=al(n),u=a.args,c=a.keys;if(0===u.length)return(0,Kn.D)([],r);var h=new dr.y(so(u,r,c?function(v){return hu(c,v)}:ya.y));return i?h.pipe(_i(i)):h}function so(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ya.y;return function(r){sl(n,function(){for(var i=t.length,a=new Array(i),u=i,c=i,h=function(I){sl(n,function(){var D=(0,Kn.D)(t[I],n),L=!1;D.subscribe((0,ir.x)(r,function(x){a[I]=x,L||(L=!0,c--),c||r.next(e(a.slice()))},function(){--u||r.complete()}))},r)},v=0;v<i;v++)h(v)},r)}}function sl(t,n,e){t?(0,Fp.f)(e,t,n):n()}var Ya=U(8189);function kc(){return(0,Ya.J)(1)}function Fs(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return kc()((0,Kn.D)(n,(0,il.yG)(n)))}var fs=U(8421);function wc(t){return new dr.y(function(n){(0,fs.Xf)(t()).subscribe(n)})}var Us=U(9635),Jf=U(576);function Qa(t,n){var e=(0,Jf.m)(t)?t:function(){return t},r=function(a){return a.error(e())};return new dr.y(n?function(i){return n.schedule(r,0,i)}:r)}var _a=U(515),ia=U(727),br=U(4482);function bc(){return(0,br.e)(function(t,n){var e=null;t._refCount++;var r=(0,ir.x)(n,void 0,void 0,void 0,function(){if(!t||t._refCount<=0||0<--t._refCount)e=null;else{var i=t._connection,a=e;e=null,i&&(!a||i===a)&&i.unsubscribe(),n.unsubscribe()}});t.subscribe(r),r.closed||(e=t.connect())})}var Ec=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).source=r,a.subjectFactory=i,a._subject=null,a._refCount=0,a._connection=null,(0,br.A)(r)&&(a.lift=r.lift),a}return(0,A.Z)(e,[{key:"_subscribe",value:function(i){return this.getSubject().subscribe(i)}},{key:"getSubject",value:function(){var i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"_teardown",value:function(){this._refCount=0;var i=this._connection;this._subject=this._connection=null,null==i||i.unsubscribe()}},{key:"connect",value:function(){var i=this,a=this._connection;if(!a){a=this._connection=new ia.w0;var u=this.getSubject();a.add(this.source.subscribe((0,ir.x)(u,void 0,function(){i._teardown(),u.complete()},function(c){i._teardown(),u.error(c)},function(){return i._teardown()}))),a.closed&&(this._connection=null,a=ia.w0.EMPTY)}return a}},{key:"refCount",value:function(){return bc()(this)}}]),e}(dr.y);function Bn(t,n){return(0,br.e)(function(e,r){var i=null,a=0,u=!1,c=function(){return u&&!i&&r.complete()};e.subscribe((0,ir.x)(r,function(h){null==i||i.unsubscribe();var v=0,g=a++;(0,fs.Xf)(t(h,g)).subscribe(i=(0,ir.x)(r,function(I){return r.next(n?n(h,I,g,v++):I)},function(){i=null,c()}))},function(){u=!0,c()}))})}function Pa(t){return t<=0?function(){return _a.E}:(0,br.e)(function(n,e){var r=0;n.subscribe((0,ir.x)(e,function(i){++r<=t&&(e.next(i),t<=r&&e.complete())}))})}function ki(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=(0,il.yG)(n);return(0,br.e)(function(i,a){(r?Fs(n,i,r):Fs(n,i)).subscribe(a)})}function ka(t,n){return(0,br.e)(function(e,r){var i=0;e.subscribe((0,ir.x)(r,function(a){return t.call(n,a,i++)&&r.next(a)}))})}var Dn=U(5577);function du(t){return(0,br.e)(function(n,e){var r=!1;n.subscribe((0,ir.x)(e,function(i){r=!0,e.next(i)},function(){r||e.next(t),e.complete()}))})}function Ic(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uo;return(0,br.e)(function(n,e){var r=!1;n.subscribe((0,ir.x)(e,function(i){r=!0,e.next(i)},function(){return r?e.complete():e.error(t())}))})}function uo(){return new cs}function zi(t,n){var e=arguments.length>=2;return function(r){return r.pipe(t?ka(function(i,a){return t(i,a,r)}):ya.y,Pa(1),e?du(n):Ic(function(){return new cs}))}}function N(t,n){return(0,Jf.m)(n)?(0,Dn.z)(t,n,1):(0,Dn.z)(t,1)}var Z=U(8505);function B(t){return(0,br.e)(function(n,e){var a,r=null,i=!1;r=n.subscribe((0,ir.x)(e,void 0,void 0,function(u){a=(0,fs.Xf)(t(u,B(t)(n))),r?(r.unsubscribe(),r=null,a.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(e))})}function H(t,n,e,r,i){return function(a,u){var c=e,h=n,v=0;a.subscribe((0,ir.x)(u,function(g){var I=v++;h=c?t(h,g,I):(c=!0,g),r&&u.next(h)},i&&function(){c&&u.next(h),u.complete()}))}}function z(t,n){return(0,br.e)(H(t,n,arguments.length>=2,!0))}function ee(t){return t<=0?function(){return _a.E}:(0,br.e)(function(n,e){var r=[];n.subscribe((0,ir.x)(e,function(i){r.push(i),t<r.length&&r.shift()},function(){var a,i=(0,P.Z)(r);try{for(i.s();!(a=i.n()).done;)e.next(a.value)}catch(c){i.e(c)}finally{i.f()}e.complete()},void 0,function(){r=null}))})}function fe(t,n){var e=arguments.length>=2;return function(r){return r.pipe(t?ka(function(i,a){return t(i,a,r)}):ya.y,ee(1),e?du(n):Ic(function(){return new cs}))}}function st(t){return(0,br.e)(function(n,e){try{n.subscribe(e)}finally{e.add(t)}})}var nt="primary",Ne=Symbol("RouteTitle"),Ut=function(){function t(n){(0,R.Z)(this,t),this.params=n||{}}return(0,A.Z)(t,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var r=this.params[e];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(e){if(this.has(e)){var r=this.params[e];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function kn(t){return new Ut(t)}function Wt(t,n,e){var r=e.path.split("/");if(r.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||r.length<t.length))return null;for(var i={},a=0;a<r.length;a++){var u=r[a],c=t[a];if(u.startsWith(":"))i[u.substring(1)]=c;else if(u!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jt(t,n){var e=t?Object.keys(t):void 0,r=n?Object.keys(n):void 0;if(!e||!r||e.length!=r.length)return!1;for(var i,a=0;a<e.length;a++)if(!Yt(t[i=e[a]],n[i]))return!1;return!0}function Yt(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;var e=(0,on.Z)(t).sort(),r=(0,on.Z)(n).sort();return e.every(function(i,a){return r[a]===i})}return t===n}function Sn(t){return Array.prototype.concat.apply([],t)}function wi(t){return t.length>0?t[t.length-1]:null}function Sr(t,n){for(var e in t)t.hasOwnProperty(e)&&n(t[e],e)}function $n(t){return(0,y.CqO)(t)?t:(0,y.QGY)(t)?(0,Kn.D)(Promise.resolve(t)):Dt(t)}var Od={exact:function ul(t,n,e){if(!pu(t.segments,n.segments)||!Cc(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children)if(!t.children[r]||!ul(t.children[r],n.children[r],e))return!1;return!0},subset:th},qn={exact:function Up(t,n){return Jt(t,n)},subset:function Gk(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(function(e){return Yt(t[e],n[e])})},ignored:function(){return!0}};function eh(t,n,e){return Od[e.paths](t.root,n.root,e.matrixParams)&&qn[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function th(t,n,e){return nh(t,n,n.segments,e)}function nh(t,n,e,r){if(t.segments.length>e.length){var i=t.segments.slice(0,e.length);return!(!pu(i,e)||n.hasChildren()||!Cc(i,e,r))}if(t.segments.length===e.length){if(!pu(t.segments,e)||!Cc(t.segments,e,r))return!1;for(var a in n.children)if(!t.children[a]||!th(t.children[a],n.children[a],r))return!1;return!0}var u=e.slice(0,t.segments.length),c=e.slice(t.segments.length);return!!(pu(t.segments,u)&&Cc(t.segments,u,r)&&t.children[nt])&&nh(t.children[nt],n,c,r)}function Cc(t,n,e){return n.every(function(r,i){return qn[e](t[i].parameters,r.parameters)})}var hs=function(){function t(n,e,r){(0,R.Z)(this,t),this.root=n,this.queryParams=e,this.fragment=r}return(0,A.Z)(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return xp.serialize(this)}}]),t}(),wn=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.segments=n,this.children=e,this.parent=null,Sr(e,function(i,a){return i.parent=r})}return(0,A.Z)(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return oo(this)}}]),t}(),ds=function(){function t(n,e){(0,R.Z)(this,t),this.path=n,this.parameters=e}return(0,A.Z)(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=kn(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return vs(this)}}]),t}();function pu(t,n){return t.length===n.length&&t.every(function(e,r){return e.path===n[r].path})}var Tc=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:function(){return new Dc},providedIn:"root"}),t}(),Dc=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"parse",value:function(e){var r=new E(e);return new hs(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(e){var r="/".concat(ol(e.root,!0)),i=function cy(t){var n=Object.keys(t).map(function(e){var r=t[e];return Array.isArray(r)?r.map(function(i){return"".concat(rh(e),"=").concat(rh(i))}).join("&"):"".concat(rh(e),"=").concat(rh(r))}).filter(function(e){return!!e});return n.length?"?".concat(n.join("&")):""}(e.queryParams),a="string"==typeof e.fragment?"#".concat(function Bp(t){return encodeURI(t)}(e.fragment)):"";return"".concat(r).concat(i).concat(a)}}]),t}(),xp=new Dc;function oo(t){return t.segments.map(function(n){return vs(n)}).join("/")}function ol(t,n){if(!t.hasChildren())return oo(t);if(n){var e=t.children[nt]?ol(t.children[nt],!1):"",r=[];return Sr(t.children,function(a,u){u!==nt&&r.push("".concat(u,":").concat(ol(a,!1)))}),r.length>0?"".concat(e,"(").concat(r.join("//"),")"):e}var i=function zk(t,n){var e=[];return Sr(t.children,function(r,i){i===nt&&(e=e.concat(n(r,i)))}),Sr(t.children,function(r,i){i!==nt&&(e=e.concat(n(r,i)))}),e}(t,function(a,u){return u===nt?[ol(t.children[nt],!1)]:["".concat(u,":").concat(ol(a,!1))]});return 1===Object.keys(t.children).length&&null!=t.children[nt]?"".concat(oo(t),"/").concat(i[0]):"".concat(oo(t),"/(").concat(i.join("//"),")")}function Sc(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rh(t){return Sc(t).replace(/%3B/gi,";")}function Zd(t){return Sc(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ih(t){return decodeURIComponent(t)}function Vp(t){return ih(t.replace(/\+/g,"%20"))}function vs(t){return"".concat(Zd(t.path)).concat(function ll(t){return Object.keys(t).map(function(n){return";".concat(Zd(n),"=").concat(Zd(t[n]))}).join("")}(t.parameters))}var Kk=/^[^\/()?;=#]+/;function Nd(t){var n=t.match(Kk);return n?n[0]:""}var NC=/^[^=?&#]+/,w=/^[^&#]+/,E=function(){function t(n){(0,R.Z)(this,t),this.url=n,this.remaining=n}return(0,A.Z)(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(r).length>0)&&(i[nt]=new wn(e,r)),i}},{key:"parseSegment",value:function(){var e=Nd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(e),new ds(ih(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var r=Nd(this.remaining);if(r){this.capture(r);var i="";if(this.consumeOptional("=")){var a=Nd(this.remaining);a&&this.capture(i=a)}e[ih(r)]=ih(i)}}},{key:"parseQueryParam",value:function(e){var r=function b(t){var n=t.match(NC);return n?n[0]:""}(this.remaining);if(r){this.capture(r);var i="";if(this.consumeOptional("=")){var a=function k(t){var n=t.match(w);return n?n[0]:""}(this.remaining);a&&this.capture(i=a)}var u=Vp(r),c=Vp(i);if(e.hasOwnProperty(u)){var h=e[u];Array.isArray(h)||(e[u]=h=[h]),h.push(c)}else e[u]=c}}},{key:"parseParens",value:function(e){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var i=Nd(this.remaining),a=this.remaining[i.length];if("/"!==a&&")"!==a&&";"!==a)throw new y.vHH(4010,!1);var u=void 0;i.indexOf(":")>-1?(u=i.slice(0,i.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=nt);var c=this.parseChildren();r[u]=1===Object.keys(c).length?c[nt]:new wn([],c),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new y.vHH(4011,!1)}}]),t}();function _(t){return t.segments.length>0?new wn([],(0,yi.Z)({},nt,t)):t}function T(t){for(var n={},e=0,r=Object.keys(t.children);e<r.length;e++){var i=r[e],u=T(t.children[i]);(u.segments.length>0||u.hasChildren())&&(n[i]=u)}return function M(t){if(1===t.numberOfChildren&&t.children[nt]){var n=t.children[nt];return new wn(t.segments.concat(n.segments),n.children)}return t}(new wn(t.segments,n))}function O(t){return t instanceof hs}var V=!1;function kt(t,n,e,r,i){var a;if(0===e.length)return Ct(n.root,n.root,n.root,r,i);var c=function Xa(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Yn(!0,0,t);var n=0,e=!1,r=t.reduce(function(i,a,u){if("object"==typeof a&&null!=a){if(a.outlets){var c={};return Sr(a.outlets,function(h,v){c[v]="string"==typeof h?h.split("/"):h}),[].concat((0,on.Z)(i),[{outlets:c}])}if(a.segmentPath)return[].concat((0,on.Z)(i),[a.segmentPath])}return"string"!=typeof a?[].concat((0,on.Z)(i),[a]):0===u?(a.split("/").forEach(function(h,v){0==v&&"."===h||(0==v&&""===h?e=!0:".."===h?n++:""!=h&&i.push(h))}),i):[].concat((0,on.Z)(i),[a])},[]);return new Yn(e,n,r)}(e);if(c.toRoot())return Ct(n.root,n.root,new wn([],{}),r,i);var v=function h(I){var D,L=function gu(t,n,e,r){return t.isAbsolute?new hn(n.root,!0,0):-1===r?new hn(e,e===n.root,0):function xs(t,n,e){for(var r=t,i=n,a=e;a>i;){if(a-=i,!(r=r.parent))throw new y.vHH(4005,V);i=r.segments.length}return new hn(r,!1,i-a)}(e,r+(lt(t.commands[0])?0:1),t.numberOfDoubleDots)}(c,n,null===(D=t.snapshot)||void 0===D?void 0:D._urlSegment,I),x=L.processChildren?cl(L.segmentGroup,L.index,c.commands):yr(L.segmentGroup,L.index,c.commands);return Ct(n.root,L.segmentGroup,x,r,i)}(null===(a=t.snapshot)||void 0===a?void 0:a._lastPathIndex);return v}function lt(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function wt(t){return"object"==typeof t&&null!=t&&t.outlets}function Ct(t,n,e,r,i){var a={};r&&Sr(r,function(h,v){a[v]=Array.isArray(h)?h.map(function(g){return"".concat(g)}):"".concat(h)});var c=_(T(t===n?e:Or(t,n,e)));return new hs(c,a,i)}function Or(t,n,e){var r={};return Sr(t.children,function(i,a){r[a]=i===n?e:Or(i,n,e)}),new wn(t.segments,r)}var Yn=function(){function t(n,e,r){if((0,R.Z)(this,t),this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=r,n&&r.length>0&&lt(r[0]))throw new y.vHH(4003,V);var i=r.find(wt);if(i&&i!==wi(r))throw new y.vHH(4004,V)}return(0,A.Z)(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}();var hn=(0,A.Z)(function t(n,e,r){(0,R.Z)(this,t),this.segmentGroup=n,this.processChildren=e,this.index=r});function yr(t,n,e){if(t||(t=new wn([],{})),0===t.segments.length&&t.hasChildren())return cl(t,n,e);var r=function fl(t,n,e){for(var r=0,i=n,a={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=e.length)return a;var u=t.segments[i],c=e[r];if(wt(c))break;var h="".concat(c),v=r<e.length-1?e[r+1]:null;if(i>0&&void 0===h)break;if(h&&v&&"object"==typeof v&&void 0===v.outlets){if(!qr(h,v,u))return a;r+=2}else{if(!qr(h,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,n,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var a=new wn(t.segments.slice(0,r.pathIndex),{});return a.children[nt]=new wn(t.segments.slice(r.pathIndex),t.children),cl(a,0,i)}return r.match&&0===i.length?new wn(t.segments,{}):r.match&&!t.hasChildren()?Ld(t,n,e):r.match?cl(t,0,i):Ld(t,n,e)}function cl(t,n,e){if(0===e.length)return new wn(t.segments,{});var r=function Ac(t){return wt(t[0])?t[0].outlets:(0,yi.Z)({},nt,t)}(e),i={};return Sr(r,function(a,u){"string"==typeof a&&(a=[a]),null!==a&&(i[u]=yr(t.children[u],n,a))}),Sr(t.children,function(a,u){void 0===r[u]&&(i[u]=a)}),new wn(t.segments,i)}function Ld(t,n,e){for(var r=t.segments.slice(0,n),i=0;i<e.length;){var a=e[i];if(wt(a)){var u=fy(a.outlets);return new wn(r,u)}if(0===i&&lt(e[0]))r.push(new ds(t.segments[n].path,$k(e[0]))),i++;else{var h=wt(a)?a.outlets[nt]:"".concat(a),v=i<e.length-1?e[i+1]:null;h&&v&&lt(v)?(r.push(new ds(h,$k(v))),i+=2):(r.push(new ds(h,{})),i++)}}return new wn(r,{})}function fy(t){var n={};return Sr(t,function(e,r){"string"==typeof e&&(e=[e]),null!==e&&(n[r]=Ld(new wn([],{}),0,e))}),n}function $k(t){var n={};return Sr(t,function(e,r){return n[r]="".concat(e)}),n}function qr(t,n,e){return t==e.path&&Jt(n,e.parameters)}var lo=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.id=n,this.url=e}),hy=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,R.Z)(this,e),(a=n.call(this,r,i)).type=0,a.navigationTrigger=u,a.restoredState=c,a}return(0,A.Z)(e,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}(lo),co=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this,r,i)).urlAfterRedirects=a,u.type=1,u}return(0,A.Z)(e,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),e}(lo),Fd=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).reason=a,c.code=u,c.type=2,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),e}(lo),qk=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).error=a,c.target=u,c.type=3,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),e}(lo),LC=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).urlAfterRedirects=a,c.state=u,c.type=4,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(lo),FC=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).urlAfterRedirects=a,c.state=u,c.type=7,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(lo),UC=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u,c){var h;return(0,R.Z)(this,e),(h=n.call(this,r,i)).urlAfterRedirects=a,h.state=u,h.shouldActivate=c,h.type=8,h}return(0,A.Z)(e,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),e}(lo),xC=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).urlAfterRedirects=a,c.state=u,c.type=5,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(lo),KR=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i)).urlAfterRedirects=a,c.state=u,c.type=6,c}return(0,A.Z)(e,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),e}(lo),$R=function(){function t(n){(0,R.Z)(this,t),this.route=n,this.type=9}return(0,A.Z)(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Ud=function(){function t(n){(0,R.Z)(this,t),this.route=n,this.type=10}return(0,A.Z)(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),dy=function(){function t(n){(0,R.Z)(this,t),this.snapshot=n,this.type=11}return(0,A.Z)(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Yk=function(){function t(n){(0,R.Z)(this,t),this.snapshot=n,this.type=12}return(0,A.Z)(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Qk=function(){function t(n){(0,R.Z)(this,t),this.snapshot=n,this.type=13}return(0,A.Z)(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Xk=function(){function t(n){(0,R.Z)(this,t),this.snapshot=n,this.type=14}return(0,A.Z)(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Jk=function(){function t(n,e,r){(0,R.Z)(this,t),this.routerEvent=n,this.position=e,this.anchor=r,this.type=15}return(0,A.Z)(t,[{key:"toString",value:function(){var e=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(e,"')")}}]),t}(),vy=function(){function t(n){(0,R.Z)(this,t),this._root=n}return(0,A.Z)(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var r=this.pathFromRoot(e);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(e){var r=xd(e,this._root);return r?r.children.map(function(i){return i.value}):[]}},{key:"firstChild",value:function(e){var r=xd(e,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(e){var r=tw(e,this._root);return r.length<2?[]:r[r.length-2].children.map(function(a){return a.value}).filter(function(a){return a!==e})}},{key:"pathFromRoot",value:function(e){return tw(e,this._root).map(function(r){return r.value})}}]),t}();function xd(t,n){if(t===n.value)return n;var r,e=(0,P.Z)(n.children);try{for(e.s();!(r=e.n()).done;){var a=xd(t,r.value);if(a)return a}}catch(u){e.e(u)}finally{e.f()}return null}function tw(t,n){if(t===n.value)return[n];var r,e=(0,P.Z)(n.children);try{for(e.s();!(r=e.n()).done;){var a=tw(t,r.value);if(a.length)return a.unshift(n),a}}catch(u){e.e(u)}finally{e.f()}return[]}var fo=function(){function t(n,e){(0,R.Z)(this,t),this.value=n,this.children=e}return(0,A.Z)(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function hl(t){var n={};return t&&t.children.forEach(function(e){return n[e.value.outlet]=e}),n}var py=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r)).snapshot=i,ah((0,_c.Z)(a),r),a}return(0,A.Z)(e,[{key:"toString",value:function(){return this.snapshot.toString()}}]),e}(vy);function gy(t,n){var e=function Rc(t,n){var u=new Wp([],{},{},"",{},nt,n,null,t.root,-1,{});return new Gp("",new fo(u,[]))}(t,n),r=new $r([new ds("",{})]),i=new $r({}),a=new $r({}),u=new $r({}),c=new $r(""),h=new Pc(r,i,u,c,a,nt,n,e.root);return h.snapshot=e.root,new py(new fo(h,[]),e)}var Pc=function(){function t(n,e,r,i,a,u,c,h){var v,g;(0,R.Z)(this,t),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=c,this.title=null!==(g=null===(v=this.data)||void 0===v?void 0:v.pipe((0,qt.U)(function(I){return I[Ne]})))&&void 0!==g?g:Dt(void 0),this._futureSnapshot=h}return(0,A.Z)(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,qt.U)(function(e){return kn(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,qt.U)(function(e){return kn(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function jp(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",e=t.pathFromRoot,r=0;if("always"!==n)for(r=e.length-1;r>=1;){var i=e[r],a=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return Hp(e.slice(r))}function Hp(t){return t.reduce(function(n,e){var r;return{params:Object.assign(Object.assign({},n.params),e.params),data:Object.assign(Object.assign({},n.data),e.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},e.data),n.resolve),null===(r=e.routeConfig)||void 0===r?void 0:r.data),e._resolvedData)}},{params:{},data:{},resolve:{}})}var Wp=function(){function t(n,e,r,i,a,u,c,h,v,g,I,D){var L;(0,R.Z)(this,t),this.url=n,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=c,this.title=null===(L=this.data)||void 0===L?void 0:L[Ne],this.routeConfig=h,this._urlSegment=v,this._lastPathIndex=g,this._correctedLastPathIndex=null!=D?D:g,this._resolve=I}return(0,A.Z)(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=kn(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=kn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var e=this.url.map(function(i){return i.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(e,"', path:'").concat(r,"')")}}]),t}(),Gp=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,i)).url=r,ah((0,_c.Z)(a),i),a}return(0,A.Z)(e,[{key:"toString",value:function(){return dl(this._root)}}]),e}(vy);function ah(t,n){n.value._routerState=t,n.children.forEach(function(e){return ah(t,e)})}function dl(t){var n=t.children.length>0?" { ".concat(t.children.map(dl).join(", ")," } "):"";return"".concat(t.value).concat(n)}function zp(t){if(t.snapshot){var n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Jt(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),Jt(n.params,e.params)||t.params.next(e.params),function Xt(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;++e)if(!Jt(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),Jt(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Bd(t,n){var e=Jt(t.params,n.params)&&function ly(t,n){return pu(t,n)&&t.every(function(e,r){return Jt(e.parameters,n[r].parameters)})}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||Bd(t.parent,n.parent))}function Vd(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){var r=e.value;r._futureSnapshot=n.value;var i=function nw(t,n,e){return n.children.map(function(r){var a,i=(0,P.Z)(e.children);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(t.shouldReuseRoute(r.value,u.value.snapshot))return Vd(t,r,u)}}catch(c){i.e(c)}finally{i.f()}return Vd(t,r)})}(t,n,e);return new fo(r,i)}if(t.shouldAttach(n.value)){var a=t.retrieve(n.value);if(null!==a){var u=a.route;return u.value._futureSnapshot=n.value,u.children=n.children.map(function(v){return Vd(t,v)}),u}}var c=function sh(t){return new Pc(new $r(t.url),new $r(t.params),new $r(t.queryParams),new $r(t.fragment),new $r(t.data),t.outlet,t.component,t)}(n.value),h=n.children.map(function(v){return Vd(t,v)});return new fo(c,h)}var my="ngNavigationCancelingError";function rw(t,n){var e=O(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=e.redirectTo,i=e.navigationBehaviorOptions,a=iw(!1,0,n);return a.url=r,a.navigationBehaviorOptions=i,a}function iw(t,n,e){var r=new Error("NavigationCancelingError: "+(t||""));return r[my]=!0,r.cancellationCode=n,e&&(r.url=e),r}function aw(t){return Kp(t)&&O(t.url)}function Kp(t){return t&&t[my]}var VC=(0,A.Z)(function t(){(0,R.Z)(this,t),this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new uh,this.attachRef=null}),uh=function(){var t=function(){function n(){(0,R.Z)(this,n),this.contexts=new Map}return(0,A.Z)(n,[{key:"onChildOutletCreated",value:function(r,i){var a=this.getOrCreateContext(r);a.outlet=i,this.contexts.set(r,a)}},{key:"onChildOutletDestroyed",value:function(r){var i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var r=this.contexts;return this.contexts=new Map,r}},{key:"onOutletReAttached",value:function(r){this.contexts=r}},{key:"getOrCreateContext",value:function(r){var i=this.getContext(r);return i||(i=new VC,this.contexts.set(r,i)),i}},{key:"getContext",value:function(r){return this.contexts.get(r)||null}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),$p=!1,qp=function(){var t=function(){function n(e,r,i,a,u){(0,R.Z)(this,n),this.parentContexts=e,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=i||nt,e.onChildOutletCreated(this.name,this)}return(0,A.Z)(n,[{key:"ngOnDestroy",value:function(){var r;(null===(r=this.parentContexts.getContext(this.name))||void 0===r?void 0:r.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new y.vHH(4012,$p);return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new y.vHH(4012,$p);return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new y.vHH(4012,$p);this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}},{key:"attach",value:function(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,i){if(this.isActivated)throw new y.vHH(4013,$p);this._activatedRoute=r;var a=this.location,c=r._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,v=new qR(r,h,a.injector);if(i&&function jC(t){return!!t.resolveComponentFactory}(i)){var g=i.resolveComponentFactory(c);this.activated=a.createComponent(g,a.length,v)}else this.activated=a.createComponent(c,{index:a.length,injector:v,environmentInjector:null!=i?i:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(uh),y.Y36(y.s_b),y.$8M("name"),y.Y36(y.sBO),y.Y36(y.lqb))},t.\u0275dir=y.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),t}(),qR=function(){function t(n,e,r){(0,R.Z)(this,t),this.route=n,this.childContexts=e,this.parent=r}return(0,A.Z)(t,[{key:"get",value:function(e,r){return e===Pc?this.route:e===uh?this.childContexts:this.parent.get(e,r)}}]),t}(),Mc=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=y.Xpm({type:t,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(e,r){1&e&&y._UZ(0,"router-outlet")},dependencies:[qp],encapsulation:2}),t}();function sw(t,n){var e;return t.providers&&!t._injector&&(t._injector=(0,y.MMx)(t.providers,n,"Route: ".concat(t.path))),null!==(e=t._injector)&&void 0!==e?e:n}function Xp(t){var n=t.children&&t.children.map(Xp),e=n?Object.assign(Object.assign({},t),{children:n}):Object.assign({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==nt&&(e.component=Mc),e}function Ja(t){return t.outlet||nt}function Jp(t,n){var e=t.filter(function(r){return Ja(r)===n});return e.push.apply(e,(0,on.Z)(t.filter(function(r){return Ja(r)!==n}))),e}function Hd(t){var n;if(!t)return null;if(null!==(n=t.routeConfig)&&void 0!==n&&n._injector)return t.routeConfig._injector;for(var e=t.parent;e;e=e.parent){var r=e.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}var yy=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.routeReuseStrategy=n,this.futureState=e,this.currState=r,this.forwardEvent=i}return(0,A.Z)(t,[{key:"activate",value:function(e){var r=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,i,e),zp(this.futureState.root),this.activateChildRoutes(r,i,e)}},{key:"deactivateChildRoutes",value:function(e,r,i){var a=this,u=hl(r);e.children.forEach(function(c){var h=c.value.outlet;a.deactivateRoutes(c,u[h],i),delete u[h]}),Sr(u,function(c,h){a.deactivateRouteAndItsChildren(c,i)})}},{key:"deactivateRoutes",value:function(e,r,i){var a=e.value,u=r?r.value:null;if(a===u)if(a.component){var c=i.getContext(a.outlet);c&&this.deactivateChildRoutes(e,r,c.children)}else this.deactivateChildRoutes(e,r,i);else u&&this.deactivateRouteAndItsChildren(r,i)}},{key:"deactivateRouteAndItsChildren",value:function(e,r){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,r):this.deactivateRouteAndOutlet(e,r)}},{key:"detachAndStoreRouteSubtree",value:function(e,r){for(var i=r.getContext(e.value.outlet),a=i&&e.value.component?i.children:r,u=hl(e),c=0,h=Object.keys(u);c<h.length;c++)this.deactivateRouteAndItsChildren(u[h[c]],a);if(i&&i.outlet){var g=i.outlet.detach(),I=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:g,route:e,contexts:I})}}},{key:"deactivateRouteAndOutlet",value:function(e,r){for(var i=r.getContext(e.value.outlet),a=i&&e.value.component?i.children:r,u=hl(e),c=0,h=Object.keys(u);c<h.length;c++)this.deactivateRouteAndItsChildren(u[h[c]],a);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}},{key:"activateChildRoutes",value:function(e,r,i){var a=this,u=hl(r);e.children.forEach(function(c){a.activateRoutes(c,u[c.value.outlet],i),a.forwardEvent(new Xk(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Yk(e.value.snapshot))}},{key:"activateRoutes",value:function(e,r,i){var a,u=e.value,c=r?r.value:null;if(zp(u),u===c)if(u.component){var h=i.getOrCreateContext(u.outlet);this.activateChildRoutes(e,r,h.children)}else this.activateChildRoutes(e,r,i);else if(u.component){var v=i.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){var g=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),v.children.onOutletReAttached(g.contexts),v.attachRef=g.componentRef,v.route=g.route.value,v.outlet&&v.outlet.attach(g.componentRef,g.route.value),zp(g.route.value),this.activateChildRoutes(e,null,v.children)}else{var I=Hd(u.snapshot),D=null!==(a=null==I?void 0:I.get(y._Vd))&&void 0!==a?a:null;v.attachRef=null,v.route=u,v.resolver=D,v.injector=I,v.outlet&&v.outlet.activateWith(u,v.injector),this.activateChildRoutes(e,null,v.children)}}else this.activateChildRoutes(e,null,i)}}]),t}(),KC=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.path=n,this.route=this.path[this.path.length-1]}),_y=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.component=n,this.route=e});function ky(t,n,e){var r=t._root;return eg(r,n?n._root:null,e,[r.value])}function Wd(t,n){var e=Symbol(),r=n.get(t,e);return r===e?"function"!=typeof t||(0,y.Z0I)(t)?n.get(t):t:r}function eg(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=hl(n);return t.children.forEach(function(u){XR(u,a[u.value.outlet],e,r.concat([u.value]),i),delete a[u.value.outlet]}),Sr(a,function(u,c){return Gd(u,e.getContext(c),i)}),i}function XR(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=t.value,u=n?n.value:null,c=e?e.getContext(t.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){var h=JR(u,a,a.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new KC(r)):(a.data=u.data,a._resolvedData=u._resolvedData),eg(t,n,a.component?c?c.children:null:e,r,i),h&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new _y(c.outlet.component,u))}else u&&Gd(n,c,i),i.canActivateChecks.push(new KC(r)),eg(t,null,a.component?c?c.children:null:e,r,i);return i}function JR(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!pu(t.url,n.url);case"pathParamsOrQueryParamsChange":return!pu(t.url,n.url)||!Jt(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bd(t,n)||!Jt(t.queryParams,n.queryParams);default:return!Bd(t,n)}}function Gd(t,n,e){var r=hl(t),i=t.value;Sr(r,function(a,u){Gd(a,i.component?n?n.children.getContext(u):null:n,e)}),e.canDeactivateChecks.push(new _y(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function oh(t){return"function"==typeof t}function Ey(t){return t instanceof cs||"EmptyError"===(null==t?void 0:t.name)}var tg=Symbol("INITIAL_VALUE");function lh(){return Bn(function(t){return ao(t.map(function(n){return n.pipe(Pa(1),ki(tg))})).pipe((0,qt.U)(function(n){var r,e=(0,P.Z)(n);try{for(e.s();!(r=e.n()).done;){var i=r.value;if(!0!==i){if(i===tg)return tg;if(!1===i||i instanceof hs)return i}}}catch(a){e.e(a)}finally{e.f()}return!0}),ka(function(n){return n!==tg}),Pa(1))})}function Cy(t){return(0,Us.z)((0,Z.b)(function(n){if(O(n))throw rw(0,n)}),(0,qt.U)(function(n){return!0===n}))}var Ty={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function es(t,n,e,r,i){var a=Kd(t,n,e);return a.matched?function nT(t,n,e,r){var i=n.canMatch;return i&&0!==i.length?Dt(i.map(function(u){var c=Wd(u,t);return $n(function $C(t){return t&&oh(t.canMatch)}(c)?c.canMatch(n,e):t.runInContext(function(){return c(n,e)}))})).pipe(lh(),Cy()):Dt(!0)}(r=sw(n,r),n,e).pipe((0,qt.U)(function(u){return!0===u?a:Object.assign({},Ty)})):Dt(a)}function Kd(t,n,e){var r;if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?Object.assign({},Ty):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};var a=(n.matcher||Wt)(e,t,n);if(!a)return Object.assign({},Ty);var u={};Sr(a.posParams,function(h,v){u[v]=h.path});var c=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:e.slice(a.consumed.length),parameters:c,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function $d(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(e.length>0&&qd(t,e,r)){var a=new wn(n,aa(t,n,r,new wn(e,t.children)));return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:[]}}if(0===e.length&&hw(t,e,r)){var u=new wn(t.segments,Dy(t,n,e,r,t.children,i));return u._sourceSegment=t,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:e}}var c=new wn(t.segments,t.children);return c._sourceSegment=t,c._segmentIndexShift=n.length,{segmentGroup:c,slicedSegments:e}}function Dy(t,n,e,r,i,a){var h,u={},c=(0,P.Z)(r);try{for(c.s();!(h=c.n()).done;){var v=h.value;if(ng(t,e,v)&&!i[Ja(v)]){var g=new wn([],{});g._sourceSegment=t,g._segmentIndexShift="legacy"===a?t.segments.length:n.length,u[Ja(v)]=g}}}catch(I){c.e(I)}finally{c.f()}return Object.assign(Object.assign({},i),u)}function aa(t,n,e,r){var i={};i[nt]=r,r._sourceSegment=t,r._segmentIndexShift=n.length;var u,a=(0,P.Z)(e);try{for(a.s();!(u=a.n()).done;){var c=u.value;if(""===c.path&&Ja(c)!==nt){var h=new wn([],{});h._sourceSegment=t,h._segmentIndexShift=n.length,i[Ja(c)]=h}}}catch(v){a.e(v)}finally{a.f()}return i}function qd(t,n,e){return e.some(function(r){return ng(t,n,r)&&Ja(r)!==nt})}function hw(t,n,e){return e.some(function(r){return ng(t,n,r)})}function ng(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function dw(t,n,e,r){return!!(Ja(t)===r||r!==nt&&ng(n,e,t))&&("**"===t.path||Kd(n,t,e).matched)}function Sy(t,n,e){return 0===n.length&&!t.children[e]}var rg=!1,Yd=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.segmentGroup=n||null}),vw=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.urlTree=n});function ch(t){return Qa(new Yd(t))}function pw(t){return Qa(new vw(t))}var sT=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.injector=n,this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}return(0,A.Z)(t,[{key:"apply",value:function(){var e=this,r=$d(this.urlTree.root,[],[],this.config).segmentGroup,i=new wn(r.segments,r.children);return this.expandSegmentGroup(this.injector,this.config,i,nt).pipe((0,qt.U)(function(c){return e.createUrlTree(T(c),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(B(function(c){if(c instanceof vw)return e.allowRedirects=!1,e.match(c.urlTree);throw c instanceof Yd?e.noMatchError(c):c}))}},{key:"match",value:function(e){var r=this;return this.expandSegmentGroup(this.injector,this.config,e.root,nt).pipe((0,qt.U)(function(u){return r.createUrlTree(T(u),e.queryParams,e.fragment)})).pipe(B(function(u){throw u instanceof Yd?r.noMatchError(u):u}))}},{key:"noMatchError",value:function(e){return new y.vHH(4002,rg)}},{key:"createUrlTree",value:function(e,r,i){var a=_(e);return new hs(a,r,i)}},{key:"expandSegmentGroup",value:function(e,r,i,a){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,r,i).pipe((0,qt.U)(function(u){return new wn([],u)})):this.expandSegment(e,i,r,i.segments,a,!0)}},{key:"expandChildren",value:function(e,r,i){for(var a=this,u=[],c=0,h=Object.keys(i.children);c<h.length;c++){var v=h[c];"primary"===v?u.unshift(v):u.push(v)}return(0,Kn.D)(u).pipe(N(function(g){var I=i.children[g],D=Jp(r,g);return a.expandSegmentGroup(e,D,I,g).pipe((0,qt.U)(function(L){return{segment:L,outlet:g}}))}),z(function(g,I){return g[I.outlet]=I.segment,g},{}),fe())}},{key:"expandSegment",value:function(e,r,i,a,u,c){var h=this;return(0,Kn.D)(i).pipe(N(function(v){return h.expandSegmentAgainstRoute(e,r,i,v,a,u,c).pipe(B(function(I){if(I instanceof Yd)return Dt(null);throw I}))}),zi(function(v){return!!v}),B(function(v,g){if(Ey(v))return Sy(r,a,u)?Dt(new wn([],{})):ch(r);throw v}))}},{key:"expandSegmentAgainstRoute",value:function(e,r,i,a,u,c,h){return dw(a,r,u,c)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,r,a,u,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,a,u,c):ch(r):ch(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,r,i,a,u,c){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,a,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,r,i,a,u,c)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,r,i,a){var u=this,c=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?pw(c):this.lineralizeSegments(i,c).pipe((0,Dn.z)(function(h){var v=new wn(h,{});return u.expandSegment(e,v,r,h,a,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,r,i,a,u,c){var h=this,v=Kd(r,a,u),I=v.consumedSegments,D=v.remainingSegments,L=v.positionalParamSegments;if(!v.matched)return ch(r);var x=this.applyRedirectCommands(I,a.redirectTo,L);return a.redirectTo.startsWith("/")?pw(x):this.lineralizeSegments(a,x).pipe((0,Dn.z)(function(K){return h.expandSegment(e,r,i,K.concat(D),c,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,r,i,a,u){var c=this;return"**"===i.path?(e=sw(i,e),i.loadChildren?(i._loadedRoutes?Dt({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,qt.U)(function(v){return i._loadedRoutes=v.routes,i._loadedInjector=v.injector,new wn(a,{})})):Dt(new wn(a,{}))):es(r,i,a,e).pipe(Bn(function(v){var L,I=v.consumedSegments,D=v.remainingSegments;return v.matched?(e=null!==(L=i._injector)&&void 0!==L?L:e,c.getChildConfig(e,i,a).pipe((0,Dn.z)(function(K){var ne,re=null!==(ne=K.injector)&&void 0!==ne?ne:e,Pe=K.routes,Ve=$d(r,I,D,Pe),Ye=Ve.segmentGroup,ze=Ve.slicedSegments,Tt=new wn(Ye.segments,Ye.children);if(0===ze.length&&Tt.hasChildren())return c.expandChildren(re,Pe,Tt).pipe((0,qt.U)(function(Kt){return new wn(I,Kt)}));if(0===Pe.length&&0===ze.length)return Dt(new wn(I,{}));var yt=Ja(i)===u;return c.expandSegment(re,Tt,Pe,ze,yt?nt:u,!0).pipe((0,qt.U)(function(Kt){return new wn(I.concat(Kt.segments),Kt.children)}))}))):ch(r)}))}},{key:"getChildConfig",value:function(e,r,i){var a=this;return r.children?Dt({routes:r.children,injector:e}):r.loadChildren?void 0!==r._loadedRoutes?Dt({routes:r._loadedRoutes,injector:r._loadedInjector}):function tT(t,n,e,r){var i=n.canLoad;return void 0===i||0===i.length?Dt(!0):Dt(i.map(function(u){var c=Wd(u,t);return $n(function uw(t){return t&&oh(t.canLoad)}(c)?c.canLoad(n,e):t.runInContext(function(){return c(n,e)}))})).pipe(lh(),Cy())}(e,r,i).pipe((0,Dn.z)(function(u){return u?a.configLoader.loadChildren(e,r).pipe((0,Z.b)(function(c){r._loadedRoutes=c.routes,r._loadedInjector=c.injector})):function iT(t){return Qa(iw(rg,3))}()})):Dt({routes:[],injector:e})}},{key:"lineralizeSegments",value:function(e,r){for(var i=[],a=r.root;;){if(i=i.concat(a.segments),0===a.numberOfChildren)return Dt(i);if(a.numberOfChildren>1||!a.children[nt])return Qa(new y.vHH(4e3,rg));a=a.children[nt]}}},{key:"applyRedirectCommands",value:function(e,r,i){return this.applyRedirectCreateUrlTree(r,this.urlSerializer.parse(r),e,i)}},{key:"applyRedirectCreateUrlTree",value:function(e,r,i,a){var u=this.createSegmentGroup(e,r.root,i,a);return new hs(u,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(e,r){var i={};return Sr(e,function(a,u){if("string"==typeof a&&a.startsWith(":")){var h=a.substring(1);i[u]=r[h]}else i[u]=a}),i}},{key:"createSegmentGroup",value:function(e,r,i,a){var u=this,c=this.createSegments(e,r.segments,i,a),h={};return Sr(r.children,function(v,g){h[g]=u.createSegmentGroup(e,v,i,a)}),new wn(c,h)}},{key:"createSegments",value:function(e,r,i,a){var u=this;return r.map(function(c){return c.path.startsWith(":")?u.findPosParam(e,c,a):u.findOrReturn(c,i)})}},{key:"findPosParam",value:function(e,r,i){var a=i[r.path.substring(1)];if(!a)throw new y.vHH(4001,rg);return a}},{key:"findOrReturn",value:function(e,r){var u,i=0,a=(0,P.Z)(r);try{for(a.s();!(u=a.n()).done;){var c=u.value;if(c.path===e.path)return r.splice(i),c;i++}}catch(h){a.e(h)}finally{a.f()}return e}}]),t}();var uT=(0,A.Z)(function t(){(0,R.Z)(this,t)});function oT(t){return new dr.y(function(n){return n.error(t)})}var t1=function(){function t(n,e,r,i,a,u,c,h){(0,R.Z)(this,t),this.injector=n,this.rootComponentType=e,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c,this.urlSerializer=h}return(0,A.Z)(t,[{key:"recognize",value:function(){var e=this,r=$d(this.urlTree.root,[],[],this.config.filter(function(i){return void 0===i.redirectTo}),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,r,nt).pipe((0,qt.U)(function(i){if(null===i)return null;var a=new Wp([],Object.freeze({}),Object.freeze(Object.assign({},e.urlTree.queryParams)),e.urlTree.fragment,{},nt,e.rootComponentType,null,e.urlTree.root,-1,{}),u=new fo(a,i),c=new Gp(e.url,u);return e.inheritParamsAndData(c._root),c}))}},{key:"inheritParamsAndData",value:function(e){var r=this,i=e.value,a=jp(i,this.paramsInheritanceStrategy);i.params=Object.freeze(a.params),i.data=Object.freeze(a.data),e.children.forEach(function(u){return r.inheritParamsAndData(u)})}},{key:"processSegmentGroup",value:function(e,r,i,a){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,r,i):this.processSegment(e,r,i,i.segments,a)}},{key:"processChildren",value:function(e,r,i){var a=this;return(0,Kn.D)(Object.keys(i.children)).pipe(N(function(u){var c=i.children[u],h=Jp(r,u);return a.processSegmentGroup(e,h,c,u)}),z(function(u,c){return u&&c?(u.push.apply(u,(0,on.Z)(c)),u):null}),function de(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,br.e)(function(e,r){var i=0;e.subscribe((0,ir.x)(r,function(a){var u=t(a,i++);(u||n)&&r.next(a),!u&&r.complete()}))})}(function(u){return null!==u}),du(null),fe(),(0,qt.U)(function(u){if(null===u)return null;var c=ig(u);return function gw(t){t.sort(function(n,e){return n.value.outlet===nt?-1:e.value.outlet===nt?1:n.value.outlet.localeCompare(e.value.outlet)})}(c),c}))}},{key:"processSegment",value:function(e,r,i,a,u){var c=this;return(0,Kn.D)(r).pipe(N(function(h){var v;return c.processSegmentAgainstRoute(null!==(v=h._injector)&&void 0!==v?v:e,h,i,a,u)}),zi(function(h){return!!h}),B(function(h){if(Ey(h))return Sy(i,a,u)?Dt([]):Dt(null);throw h}))}},{key:"processSegmentAgainstRoute",value:function(e,r,i,a,u){var h,v,g,c=this;if(r.redirectTo||!dw(r,i,a,u))return Dt(null);if("**"===r.path){var I=a.length>0?wi(a).parameters:{},D=Ry(i)+a.length;g=Dt({snapshot:new Wp(a,I,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hh(r),Ja(r),null!==(v=null!==(h=r.component)&&void 0!==h?h:r._loadedComponent)&&void 0!==v?v:null,r,mw(i),D,_w(r),D),consumedSegments:[],remainingSegments:[]})}else g=es(i,r,a,e).pipe((0,qt.U)(function(x){var Ve,Ye,ne=x.consumedSegments,re=x.remainingSegments,Pe=x.parameters;if(!x.matched)return null;var ze=Ry(i)+ne.length;return{snapshot:new Wp(ne,Pe,Object.freeze(Object.assign({},c.urlTree.queryParams)),c.urlTree.fragment,hh(r),Ja(r),null!==(Ye=null!==(Ve=r.component)&&void 0!==Ve?Ve:r._loadedComponent)&&void 0!==Ye?Ye:null,r,mw(i),ze,_w(r),ze),consumedSegments:ne,remainingSegments:re}}));return g.pipe(Bn(function(x){var K,ne;if(null===x)return Dt(null);var re=x.snapshot,Pe=x.consumedSegments,Ve=x.remainingSegments;e=null!==(K=r._injector)&&void 0!==K?K:e;var Ye=null!==(ne=r._loadedInjector)&&void 0!==ne?ne:e,ze=function n1(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(r),Tt=$d(i,Pe,Ve,ze.filter(function(Kt){return void 0===Kt.redirectTo}),c.relativeLinkResolution),Et=Tt.segmentGroup,yt=Tt.slicedSegments;if(0===yt.length&&Et.hasChildren())return c.processChildren(Ye,ze,Et).pipe((0,qt.U)(function(Kt){return null===Kt?null:[new fo(re,Kt)]}));if(0===ze.length&&0===yt.length)return Dt([new fo(re,[])]);var en=Ja(r)===u;return c.processSegment(Ye,ze,Et,yt,en?nt:u).pipe((0,qt.U)(function(Kt){return null===Kt?null:[new fo(re,Kt)]}))}))}}]),t}();function ig(t){var i,n=[],e=new Set,r=(0,P.Z)(t);try{var a=function(){var D=i.value;if(!function mu(t){var n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}(D))return n.push(D),"continue";var x,L=n.find(function(K){return D.value.routeConfig===K.value.routeConfig});void 0!==L?((x=L.children).push.apply(x,(0,on.Z)(D.children)),e.add(L)):n.push(D)};for(r.s();!(i=r.n()).done;)a()}catch(I){r.e(I)}finally{r.f()}var h,c=(0,P.Z)(e);try{for(c.s();!(h=c.n()).done;){var v=h.value,g=ig(v.children);n.push(new fo(v.value,g))}}catch(I){c.e(I)}finally{c.f()}return n.filter(function(I){return!e.has(I)})}function mw(t){for(var n=t;n._sourceSegment;)n=n._sourceSegment;return n}function Ry(t){for(var n,e,r=t,i=null!==(n=r._segmentIndexShift)&&void 0!==n?n:0;r._sourceSegment;)i+=null!==(e=(r=r._sourceSegment)._segmentIndexShift)&&void 0!==e?e:0;return i-1}function hh(t){return t.data||{}}function _w(t){return t.resolve||{}}function ag(t){return"string"==typeof t.title||null===t.title}function sg(t){return Bn(function(n){var e=t(n);return e?(0,Kn.D)(e).pipe((0,qt.U)(function(){return n})):Dt(n)})}var ww=function(){var t=function(){function n(){(0,R.Z)(this,n)}return(0,A.Z)(n,[{key:"buildTitle",value:function(r){for(var i,a,u=r.root;void 0!==u;)a=null!==(i=this.getResolvedTitleForRoute(u))&&void 0!==i?i:a,u=u.children.find(function(c){return c.outlet===nt});return a}},{key:"getResolvedTitleForRoute",value:function(r){return r.data[Ne]}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:function(){return(0,y.f3M)(ug)},providedIn:"root"}),t}(),ug=function(){var t=function(n){(0,j.Z)(r,n);var e=(0,se.Z)(r);function r(i){var a;return(0,R.Z)(this,r),(a=e.call(this)).title=i,a}return(0,A.Z)(r,[{key:"updateTitle",value:function(a){var u=this.buildTitle(a);void 0!==u&&this.title.setTitle(u)}}]),r}(ww);return t.\u0275fac=function(e){return new(e||t)(y.LFG(Ms))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),cT=(0,A.Z)(function t(){(0,R.Z)(this,t)}),fT=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,r){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,r){return e.routeConfig===r.routeConfig}}]),t}(),hT=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e)}(fT),og=new y.OlP("",{providedIn:"root",factory:function(){return{}}}),Qd=new y.OlP("ROUTES"),lg=function(){var t=function(){function n(e,r){(0,R.Z)(this,n),this.injector=e,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}return(0,A.Z)(n,[{key:"loadComponent",value:function(r){var i=this;if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Dt(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);var a=$n(r.loadComponent()).pipe((0,Z.b)(function(c){i.onLoadEndListener&&i.onLoadEndListener(r),r._loadedComponent=c}),st(function(){i.componentLoaders.delete(r)})),u=new Ec(a,function(){return new na.x}).pipe(bc());return this.componentLoaders.set(r,u),u}},{key:"loadChildren",value:function(r,i){var a=this;if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Dt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);var c=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,qt.U)(function(v){var g;return a.onLoadEndListener&&a.onLoadEndListener(i),{routes:(Array.isArray(v)?v:Sn((g=v.create(r).injector).get(Qd,[],y.XFs.Self|y.XFs.Optional))).map(Xp),injector:g}}),st(function(){a.childrenLoaders.delete(i)})),h=new Ec(c,function(){return new na.x}).pipe(bc());return this.childrenLoaders.set(i,h),h}},{key:"loadModuleFactoryOrRoutes",value:function(r){var i=this;return $n(r()).pipe((0,Dn.z)(function(a){return a instanceof y.YKP||Array.isArray(a)?Dt(a):(0,Kn.D)(i.compiler.compileModuleAsync(a))}))}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(y.zs3),y.LFG(y.Sil))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Zy=(0,A.Z)(function t(){(0,R.Z)(this,t)}),vT=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,r){return e}}]),t}();function bw(t){throw t}function Ew(t,n,e){return n.parse("/")}var Oc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Iw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Tw(){var t,n,e=(0,y.f3M)(Tc),r=(0,y.f3M)(uh),i=(0,y.f3M)(oe),a=(0,y.f3M)(y.zs3),u=(0,y.f3M)(y.Sil),c=null!==(t=(0,y.f3M)(Qd,{optional:!0}))&&void 0!==t?t:[],h=null!==(n=(0,y.f3M)(og,{optional:!0}))&&void 0!==n?n:{},v=(0,y.f3M)(ug),g=(0,y.f3M)(ww,{optional:!0}),I=(0,y.f3M)(Zy,{optional:!0}),D=(0,y.f3M)(cT,{optional:!0}),L=new Pi(null,e,r,i,a,u,Sn(c));return I&&(L.urlHandlingStrategy=I),D&&(L.routeReuseStrategy=D),L.titleStrategy=null!=g?g:v,function Cw(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(n.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(h,L),L}var Pi=function(){var t=function(){function n(e,r,i,a,u,c,h){var v=this;(0,R.Z)(this,n),this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new na.x,this.errorHandler=bw,this.malformedUriErrorHandler=Ew,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=function(){return Dt(void 0)},this.urlHandlingStrategy=new vT,this.routeReuseStrategy=new hT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(lg),this.configLoader.onLoadEndListener=function(x){return v.triggerEvent(new Ud(x))},this.configLoader.onLoadStartListener=function(x){return v.triggerEvent(new $R(x))},this.ngModule=u.get(y.h0i),this.console=u.get(y.c2e);var D=u.get(y.R0b);this.isNgZoneEnabled=D instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=function vu(){return new hs(new wn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gy(this.currentUrlTree,this.rootComponentType),this.transitions=new $r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return(0,A.Z)(n,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var i=this,a=this.events;return r.pipe(ka(function(u){return 0!==u.id}),(0,qt.U)(function(u){return Object.assign(Object.assign({},u),{extractedUrl:i.urlHandlingStrategy.extract(u.rawUrl)})}),Bn(function(u){var c=!1,h=!1;return Dt(u).pipe((0,Z.b)(function(v){i.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:i.lastSuccessfulNavigation?Object.assign(Object.assign({},i.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bn(function(v){var g=i.browserUrlTree.toString(),I=!i.navigated||v.extractedUrl.toString()!==g||g!==i.currentUrlTree.toString();if(("reload"===i.onSameUrlNavigation||I)&&i.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return Dw(v.source)&&(i.browserUrlTree=v.extractedUrl),Dt(v).pipe(Bn(function(ze){var Tt=i.transitions.getValue();return a.next(new hy(ze.id,i.serializeUrl(ze.extractedUrl),ze.source,ze.restoredState)),Tt!==i.transitions.getValue()?_a.E:Promise.resolve(ze)}),function fh(t,n,e,r){return Bn(function(i){return function aT(t,n,e,r,i){return new sT(t,n,e,r,i).apply()}(t,n,e,i.extractedUrl,r).pipe((0,qt.U)(function(a){return Object.assign(Object.assign({},i),{urlAfterRedirects:a})}))})}(i.ngModule.injector,i.configLoader,i.urlSerializer,i.config),(0,Z.b)(function(ze){i.currentNavigation=Object.assign(Object.assign({},i.currentNavigation),{finalUrl:ze.urlAfterRedirects}),u.urlAfterRedirects=ze.urlAfterRedirects}),function lT(t,n,e,r,i,a){return(0,Dn.z)(function(u){return function e1(t,n,e,r,i,a){return new t1(t,n,e,r,i,arguments.length>6&&void 0!==arguments[6]?arguments[6]:"emptyOnly",arguments.length>7&&void 0!==arguments[7]?arguments[7]:"legacy",a).recognize().pipe(Bn(function(h){return null===h?oT(new uT):Dt(h)}))}(t,n,e,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,qt.U)(function(c){return Object.assign(Object.assign({},u),{targetSnapshot:c})}))})}(i.ngModule.injector,i.rootComponentType,i.config,i.urlSerializer,i.paramsInheritanceStrategy,i.relativeLinkResolution),(0,Z.b)(function(ze){if(u.targetSnapshot=ze.targetSnapshot,"eager"===i.urlUpdateStrategy){if(!ze.extras.skipLocationChange){var Tt=i.urlHandlingStrategy.merge(ze.urlAfterRedirects,ze.rawUrl);i.setBrowserUrl(Tt,ze)}i.browserUrlTree=ze.urlAfterRedirects}var Et=new LC(ze.id,i.serializeUrl(ze.extractedUrl),i.serializeUrl(ze.urlAfterRedirects),ze.targetSnapshot);a.next(Et)}));if(I&&i.rawUrlTree&&i.urlHandlingStrategy.shouldProcessUrl(i.rawUrlTree)){var K=v.extractedUrl,ne=v.source,re=v.restoredState,Pe=v.extras,Ve=new hy(v.id,i.serializeUrl(K),ne,re);a.next(Ve);var Ye=gy(K,i.rootComponentType).snapshot;return Dt(u=Object.assign(Object.assign({},v),{targetSnapshot:Ye,urlAfterRedirects:K,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return i.rawUrlTree=v.rawUrl,v.resolve(null),_a.E}),(0,Z.b)(function(v){var g=new FC(v.id,i.serializeUrl(v.extractedUrl),i.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);i.triggerEvent(g)}),(0,qt.U)(function(v){return u=Object.assign(Object.assign({},v),{guards:ky(v.targetSnapshot,v.currentSnapshot,i.rootContexts)})}),function fw(t,n){return(0,Dn.z)(function(e){var r=e.targetSnapshot,i=e.currentSnapshot,a=e.guards,u=a.canActivateChecks,c=a.canDeactivateChecks;return 0===c.length&&0===u.length?Dt(Object.assign(Object.assign({},e),{guardsResult:!0})):function qC(t,n,e,r){return(0,Kn.D)(t).pipe((0,Dn.z)(function(i){return function eT(t,n,e,r,i){var a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!a||0===a.length)return Dt(!0);var u=a.map(function(c){var h,v=null!==(h=Hd(n))&&void 0!==h?h:i,g=Wd(c,v);return $n(function by(t){return t&&oh(t.canDeactivate)}(g)?g.canDeactivate(t,n,e,r):v.runInContext(function(){return g(t,n,e,r)})).pipe(zi())});return Dt(u).pipe(lh())}(i.component,i.route,e,n,r)}),zi(function(i){return!0!==i},!0))}(c,r,i,t).pipe((0,Dn.z)(function(h){return h&&function wy(t){return"boolean"==typeof t}(h)?function YC(t,n,e,r){return(0,Kn.D)(n).pipe(N(function(i){return Fs(function XC(t,n){return null!==t&&n&&n(new dy(t)),Dt(!0)}(i.route.parent,r),function QC(t,n){return null!==t&&n&&n(new Qk(t)),Dt(!0)}(i.route,r),function JC(t,n,e){var r=n[n.length-1],i=n.slice(0,n.length-1).reverse().map(function(u){return function QR(t){var n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(u)}).filter(function(u){return null!==u}),a=i.map(function(u){return wc(function(){var c=u.guards.map(function(h){var v,g=null!==(v=Hd(u.node))&&void 0!==v?v:e,I=Wd(h,g);return $n(function lw(t){return t&&oh(t.canActivateChild)}(I)?I.canActivateChild(r,t):g.runInContext(function(){return I(r,t)})).pipe(zi())});return Dt(c).pipe(lh())})});return Dt(a).pipe(lh())}(t,i.path,e),function Iy(t,n,e){var r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Dt(!0);var i=r.map(function(a){return wc(function(){var u,c=null!==(u=Hd(n))&&void 0!==u?u:e,h=Wd(a,c);return $n(function ow(t){return t&&oh(t.canActivate)}(h)?h.canActivate(n,t):c.runInContext(function(){return h(n,t)})).pipe(zi())})});return Dt(i).pipe(lh())}(t,i.route,e))}),zi(function(i){return!0!==i},!0))}(r,u,t,n):Dt(h)}),(0,qt.U)(function(h){return Object.assign(Object.assign({},e),{guardsResult:h})}))})}(i.ngModule.injector,function(v){return i.triggerEvent(v)}),(0,Z.b)(function(v){if(u.guardsResult=v.guardsResult,O(v.guardsResult))throw rw(0,v.guardsResult);var g=new UC(v.id,i.serializeUrl(v.extractedUrl),i.serializeUrl(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);i.triggerEvent(g)}),ka(function(v){return!!v.guardsResult||(i.restoreHistory(v),i.cancelNavigationTransition(v,"",3),!1)}),sg(function(v){if(v.guards.canActivateChecks.length)return Dt(v).pipe((0,Z.b)(function(g){var I=new xC(g.id,i.serializeUrl(g.extractedUrl),i.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);i.triggerEvent(I)}),Bn(function(g){var I=!1;return Dt(g).pipe(function Py(t,n){return(0,Dn.z)(function(e){var r=e.targetSnapshot,i=e.guards.canActivateChecks;if(!i.length)return Dt(e);var a=0;return(0,Kn.D)(i).pipe(N(function(u){return function My(t,n,e,r){var i=t.routeConfig,a=t._resolve;return void 0!==(null==i?void 0:i.title)&&!ag(i)&&(a[Ne]=i.title),function kw(t,n,e,r){var i=function r1(t){return[].concat((0,on.Z)(Object.keys(t)),(0,on.Z)(Object.getOwnPropertySymbols(t)))}(t);if(0===i.length)return Dt({});var a={};return(0,Kn.D)(i).pipe((0,Dn.z)(function(u){return function dh(t,n,e,r){var i,a=null!==(i=Hd(n))&&void 0!==i?i:r,u=Wd(t,a);return $n(u.resolve?u.resolve(n,e):a.runInContext(function(){return u(n,e)}))}(t[u],n,e,r).pipe(zi(),(0,Z.b)(function(c){a[u]=c}))}),ee(1),function qe(t){return(0,qt.U)(function(){return t})}(a),B(function(u){return Ey(u)?_a.E:Qa(u)}))}(a,t,n,r).pipe((0,qt.U)(function(u){return t._resolvedData=u,t.data=jp(t,e).resolve,i&&ag(i)&&(t.data[Ne]=i.title),null}))}(u.route,r,t,n)}),(0,Z.b)(function(){return a++}),ee(1),(0,Dn.z)(function(u){return a===i.length?Dt(e):_a.E}))})}(i.paramsInheritanceStrategy,i.ngModule.injector),(0,Z.b)({next:function(){return I=!0},complete:function(){I||(i.restoreHistory(g),i.cancelNavigationTransition(g,"",2))}}))}),(0,Z.b)(function(g){var I=new KR(g.id,i.serializeUrl(g.extractedUrl),i.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);i.triggerEvent(I)}))}),sg(function(v){return ao(function I(D){var L,x=[];(null===(L=D.routeConfig)||void 0===L?void 0:L.loadComponent)&&!D.routeConfig._loadedComponent&&x.push(i.configLoader.loadComponent(D.routeConfig).pipe((0,Z.b)(function(Pe){D.component=Pe}),(0,qt.U)(function(){})));var ne,K=(0,P.Z)(D.children);try{for(K.s();!(ne=K.n()).done;)x.push.apply(x,(0,on.Z)(I(ne.value)))}catch(Pe){K.e(Pe)}finally{K.f()}return x}(v.targetSnapshot.root)).pipe(du(),Pa(1))}),sg(function(){return i.afterPreactivation()}),(0,qt.U)(function(v){var g=function BC(t,n,e){var r=Vd(t,n._root,e?e._root:void 0);return new py(r,n)}(i.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return u=Object.assign(Object.assign({},v),{targetRouterState:g})}),(0,Z.b)(function(v){i.currentUrlTree=v.urlAfterRedirects,i.rawUrlTree=i.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl),i.routerState=v.targetRouterState,"deferred"===i.urlUpdateStrategy&&(v.extras.skipLocationChange||i.setBrowserUrl(i.rawUrlTree,v),i.browserUrlTree=v.urlAfterRedirects)}),function(n,e,r){return(0,qt.U)(function(i){return new yy(e,i.targetRouterState,i.currentRouterState,r).activate(n),i})}(i.rootContexts,i.routeReuseStrategy,function(v){return i.triggerEvent(v)}),(0,Z.b)({next:function(){c=!0},complete:function(){c=!0}}),st(function(){var v;c||h||i.cancelNavigationTransition(u,"",1),(null===(v=i.currentNavigation)||void 0===v?void 0:v.id)===u.id&&(i.currentNavigation=null)}),B(function(v){var g;if(h=!0,Kp(v)){aw(v)||(i.navigated=!0,i.restoreHistory(u,!0));var I=new Fd(u.id,i.serializeUrl(u.extractedUrl),v.message,v.cancellationCode);if(a.next(I),aw(v)){var D=i.urlHandlingStrategy.merge(v.url,i.rawUrlTree),L={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===i.urlUpdateStrategy||Dw(u.source)};i.scheduleNavigation(D,"imperative",null,L,{resolve:u.resolve,reject:u.reject,promise:u.promise})}else u.resolve(!1)}else{i.restoreHistory(u,!0);var x=new qk(u.id,i.serializeUrl(u.extractedUrl),v,null!==(g=u.targetSnapshot)&&void 0!==g?g:void 0);a.next(x);try{u.resolve(i.errorHandler(v))}catch(K){u.reject(K)}}return _a.E}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(i){var a="popstate"===i.type?"popstate":"hashchange";"popstate"===a&&setTimeout(function(){var u,c={replaceUrl:!0},h=null!==(u=i.state)&&void 0!==u&&u.navigationId?i.state:null;if(h){var v=Object.assign({},h);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(c.state=v)}var g=r.parseUrl(i.url);r.scheduleNavigation(g,a,h,c)},0)}))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){this.config=r.map(Xp),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.relativeTo,u=i.queryParams,c=i.fragment,h=i.queryParamsHandling,v=i.preserveFragment,g=a||this.routerState.root,I=v?this.currentUrlTree.fragment:c,D=null;switch(h){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=u||null}return null!==D&&(D=this.removeEmptyProps(D)),kt(g,this.currentUrlTree,r,D,null!=I?I:null)}},{key:"navigateByUrl",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},a=O(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,i)}},{key:"navigate",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return fg(r),this.navigateByUrl(this.createUrlTree(r,i),i)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var i;try{i=this.urlSerializer.parse(r)}catch(a){i=this.malformedUriErrorHandler(a,this.urlSerializer,r)}return i}},{key:"isActive",value:function(r,i){var a;if(a=!0===i?Object.assign({},Oc):!1===i?Object.assign({},Iw):i,O(r))return eh(this.currentUrlTree,r,a);var u=this.parseUrl(r);return eh(this.currentUrlTree,u,a)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(i,a){var u=r[a];return null!=u&&(i[a]=u),i},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(i){var a;r.navigated=!0,r.lastSuccessfulId=i.id,r.currentPageId=i.targetPageId,r.events.next(new co(i.id,r.serializeUrl(i.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,null===(a=r.titleStrategy)||void 0===a||a.updateTitle(r.routerState.snapshot),i.resolve(!0)},function(i){r.console.warn("Unhandled Navigation Error: ".concat(i))})}},{key:"scheduleNavigation",value:function(r,i,a,u,c){var h,v,g,I,D;if(this.disposed)return Promise.resolve(!1);c?(g=c.resolve,I=c.reject,D=c.promise):D=new Promise(function(ne,re){g=ne,I=re});var x,L=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),x=a&&a.\u0275routerPageId?a.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):x=0,this.setTransition({id:L,targetPageId:x,source:i,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:u,resolve:g,reject:I,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(function(ne){return Promise.reject(ne)})}},{key:"setBrowserUrl",value:function(r,i){var a=this.urlSerializer.serialize(r),u=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(a)||i.extras.replaceUrl?this.location.replaceState(a,"",u):this.location.go(a,"",u)}},{key:"restoreHistory",value:function(r){var a,u,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var c=this.currentPageId-r.targetPageId,h="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl);h&&0!==c?this.location.historyGo(c):this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,i,a){var u=new Fd(r.id,this.serializeUrl(r.extractedUrl),i,a);this.triggerEvent(u),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":i}:{navigationId:r}}}]),n}();return t.\u0275fac=function(e){y.$Z()},t.\u0275prov=y.Yz7({token:t,factory:function(){return Tw()},providedIn:"root"}),t}();function fg(t){for(var n=0;n<t.length;n++){if(null==t[n])throw new y.vHH(4008,false)}}function Dw(t){return"imperative"!==t}var vl=function(){var t=function(){function n(e,r,i,a,u){(0,R.Z)(this,n),this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new na.x,this.setTabIndexIfNotOnNativeEl("0")}return(0,A.Z)(n,[{key:"preserveFragment",get:function(){return this._preserveFragment},set:function(r){this._preserveFragment=(0,y.D6c)(r)}},{key:"skipLocationChange",get:function(){return this._skipLocationChange},set:function(r){this._skipLocationChange=(0,y.D6c)(r)}},{key:"replaceUrl",get:function(){return this._replaceUrl},set:function(r){this._replaceUrl=(0,y.D6c)(r)}},{key:"setTabIndexIfNotOnNativeEl",value:function(r){if(null==this.tabIndexAttribute){var i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,"tabindex",r):i.removeAttribute(a,"tabindex")}}},{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}},{key:"onClick",value:function(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}},{key:"urlTree",get:function(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(Pi),y.Y36(Pc),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},t.\u0275dir=y.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&y.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),t}(),Ly=(0,A.Z)(function t(){(0,R.Z)(this,t)}),Aw=function(){var t=function(){function n(e,r,i,a,u){(0,R.Z)(this,n),this.router=e,this.injector=i,this.preloadingStrategy=a,this.loader=u}return(0,A.Z)(n,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(ka(function(i){return i instanceof co}),N(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){return this.processRoutes(this.injector,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,i){var a,u,c,g,h=[],v=(0,P.Z)(i);try{for(v.s();!(g=v.n()).done;){var I=g.value;I.providers&&!I._injector&&(I._injector=(0,y.MMx)(I.providers,r,"Route: ".concat(I.path)));var D=null!==(a=I._injector)&&void 0!==a?a:r,L=null!==(u=I._loadedInjector)&&void 0!==u?u:D;I.loadChildren&&!I._loadedRoutes&&void 0===I.canLoad||I.loadComponent&&!I._loadedComponent?h.push(this.preloadConfig(D,I)):(I.children||I._loadedRoutes)&&h.push(this.processRoutes(L,null!==(c=I.children)&&void 0!==c?c:I._loadedRoutes))}}catch(x){v.e(x)}finally{v.f()}return(0,Kn.D)(h).pipe((0,Ya.J)())}},{key:"preloadConfig",value:function(r,i){var a=this;return this.preloadingStrategy.preload(i,function(){var c=(i.loadChildren&&void 0===i.canLoad?a.loader.loadChildren(r,i):Dt(null)).pipe((0,Dn.z)(function(v){var g;return null===v?Dt(void 0):(i._loadedRoutes=v.routes,i._loadedInjector=v.injector,a.processRoutes(null!==(g=v.injector)&&void 0!==g?g:r,v.routes))}));if(i.loadComponent&&!i._loadedComponent){var h=a.loader.loadComponent(i);return(0,Kn.D)([c,h]).pipe((0,Ya.J)())}return c})}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(Pi),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(Ly),y.LFG(lg))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Xd=new y.OlP(""),xy=function(){var t=function(){function n(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,R.Z)(this,n),this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}return(0,A.Z)(n,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(i){i instanceof hy?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=i.navigationTrigger,r.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof co&&(r.lastId=i.id,r.scheduleScrollEvent(i,r.router.parseUrl(i.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(i){i instanceof Jk&&(i.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,i){this.router.triggerEvent(new Jk(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),n}();return t.\u0275fac=function(e){y.$Z()},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac}),t}();function Zc(t,n){return{"\u0275kind":t,"\u0275providers":n}}function By(t){return[{provide:Qd,multi:!0,useValue:t}]}function Vy(){var t=(0,y.f3M)(y.zs3);return function(n){var e,r,i=t.get(y.z2F);if(n===i.components[0]){var a=t.get(Pi),u=t.get(vg);1===t.get(pg)&&a.initialNavigation(),null===(e=t.get(jy,null,y.XFs.Optional))||void 0===e||e.setUpPreloading(),null===(r=t.get(Xd,null,y.XFs.Optional))||void 0===r||r.init(),a.resetRootComponentType(i.componentTypes[0]),u.next(),u.complete()}}}var vg=new y.OlP("",{factory:function(){return new na.x}}),pg=new y.OlP("",{providedIn:"root",factory:function(){return 1}});var jy=new y.OlP("");function gT(t){return Zc(0,[{provide:jy,useExisting:Aw},{provide:Ly,useExisting:t}])}var Hy=new y.OlP("ROUTER_FORROOT_GUARD"),mT=[oe,{provide:Tc,useClass:Dc},{provide:Pi,useFactory:Tw},uh,{provide:Pc,useFactory:function Rw(t){return t.routerState.root},deps:[Pi]},lg];function yT(){return new y.PXZ("Router",Pi)}var Mw=function(){var t=function(){function n(e){(0,R.Z)(this,n)}return(0,A.Z)(n,null,[{key:"forRoot",value:function(r,i){return{ngModule:n,providers:[mT,[],By(r),{provide:Hy,useFactory:wT,deps:[[Pi,new y.FiY,new y.tp0]]},{provide:og,useValue:i||{}},null!=i&&i.useHash?{provide:tt,useClass:Ze}:{provide:tt,useClass:At},{provide:Xd,useFactory:function(){var n=(0,y.f3M)(Pi),e=(0,y.f3M)(Hi),r=(0,y.f3M)(og);return r.scrollOffset&&e.setOffset(r.scrollOffset),new xy(n,e,r)}},null!=i&&i.preloadingStrategy?gT(i.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:yT},null!=i&&i.initialNavigation?bT(i):[],[{provide:gn,useFactory:Vy},{provide:y.tb,multi:!0,useExisting:gn}]]}}},{key:"forChild",value:function(r){return{ngModule:n,providers:[By(r)]}}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(Hy,8))},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({imports:[Mc]}),t}();function wT(t){return"guarded"}function bT(t){return["disabled"===t.initialNavigation?Zc(3,[{provide:y.ip1,multi:!0,useFactory:function(){var e=(0,y.f3M)(Pi);return function(){e.setUpLocationChangeListener()}}},{provide:pg,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Zc(2,[{provide:pg,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:function(e){var r=e.get(Fe,Promise.resolve()),i=!1;return function(){return r.then(function(){return new Promise(function(u){var c=e.get(Pi),h=e.get(vg);(function a(u){e.get(Pi).events.pipe(ka(function(h){return h instanceof co||h instanceof Fd||h instanceof qk}),(0,qt.U)(function(h){return h instanceof co||!(!(h instanceof Fd)||0!==h.code&&1!==h.code)&&null}),ka(function(h){return null!==h}),Pa(1)).subscribe(function(){u()})})(function(){u(!0),i=!0}),c.afterPreactivation=function(){return u(!0),i||h.closed?Dt(void 0):h},c.initialNavigation()})})}}}]).\u0275providers:[]]}var gn=new y.OlP(""),Nw=U(7143),X=U(2090),Ki=U(9681),gs=U(1877),Bs=U(4859),gg=U(4986),yn=U(5813);function Wy(){return(0,br.e)(function(t,n){var e,r=!1;t.subscribe((0,ir.x)(n,function(i){var a=e;e=i,r&&n.next([a,i]),r=!0}))})}function IT(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ya.y;return t=null!=t?t:Lw,(0,br.e)(function(e,r){var i,a=!0;e.subscribe((0,ir.x)(r,function(u){var c=n(u);(a||!t(i,c))&&(a=!1,i=c,r.next(u))}))})}function Lw(t,n){return t===n}var $t,si=U(2011),Fw=(U(5881),U(5647)),Jd=U(3942),ce=U(4165),ut=U(5861),l1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pl={},Gy=Gy||{},dn=l1||self;function zy(){}function mg(t){var n=typeof t;return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function yu(t){var n=typeof t;return"object"==n&&null!=t||"function"==n}var yg="closure_uid_"+(1e9*Math.random()>>>0),Uw=0;function TT(t,n,e){return t.call.apply(t.bind,arguments)}function xw(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(n,i)}}return function(){return t.apply(n,arguments)}}function sa(t,n,e){return(sa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?TT:xw).apply(null,arguments)}function _g(t,n){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function $i(t,n){function e(){}e.prototype=n.prototype,t.X=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.Vb=function(r,i,a){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return n.prototype[i].apply(r,u)}}function Nc(){this.s=this.s,this.o=this.o}var Bw={};Nc.prototype.s=!1,Nc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function CT(t){return Object.prototype.hasOwnProperty.call(t,yg)&&t[yg]||(t[yg]=++Uw)}(this);delete Bw[t]}},Nc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Vw=Array.prototype.indexOf?function(t,n){return Array.prototype.indexOf.call(t,n,void 0)}:function(t,n){if("string"==typeof t)return"string"!=typeof n||1!=n.length?-1:t.indexOf(n,0);for(var e=0;e<t.length;e++)if(e in t&&t[e]===n)return e;return-1};function kg(t){var n=t.length;if(0<n){for(var e=Array(n),r=0;r<n;r++)e[r]=t[r];return e}return[]}function Ky(t,n){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(mg(r)){var i=t.length||0,a=r.length||0;t.length=i+a;for(var u=0;u<a;u++)t[i+u]=r[u]}else t.push(r)}}function Mi(t,n){this.type=t,this.g=this.target=n,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var c1=function(){if(!dn.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});try{dn.addEventListener("test",zy,n),dn.removeEventListener("test",zy,n)}catch(e){}return t}();function $y(t){return/^[\s\xa0]*$/.test(t)}var ST=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function jw(t,n){return t<n?-1:t>n?1:0}function ho(){var t=dn.navigator;return t&&(t=t.userAgent)?t:""}function Vs(t){return-1!=ho().indexOf(t)}function wg(t){return wg[" "](t),t}wg[" "]=zy;var gh,t,js=Vs("Opera"),Lc=Vs("Trident")||Vs("MSIE"),Hw=Vs("Edge"),ev=Hw||Lc,_u=Vs("Gecko")&&!(-1!=ho().toLowerCase().indexOf("webkit")&&!Vs("Edge"))&&!(Vs("Trident")||Vs("MSIE"))&&!Vs("Edge"),qy=-1!=ho().toLowerCase().indexOf("webkit")&&!Vs("Edge");function Yy(){var t=dn.document;return t?t.documentMode:void 0}e:{var Ww="",Eg=(t=ho(),_u?/rv:([^\);]+)(\)|;)/.exec(t):Hw?/Edge\/([\d\.]+)/.exec(t):Lc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):qy?/WebKit\/(\S+)/.exec(t):js?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(Eg&&(Ww=Eg?Eg[1]:""),Lc){var Gw=Yy();if(null!=Gw&&Gw>parseFloat(Ww)){gh=String(Gw);break e}}gh=Ww}var Ig={};var Qy=dn.document&&Lc&&(Yy()||parseInt(gh,10))||void 0;function Dg(t,n){if(Mi.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var e=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=n,n=t.relatedTarget){if(_u){e:{try{wg(n.nodeName);var i=!0;break e}catch(a){}i=!1}i||(n=null)}}else"mouseover"==e?n=t.fromElement:"mouseout"==e&&(n=t.toElement);this.relatedTarget=n,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:AT[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dg.X.h.call(this)}}$i(Dg,Mi);var AT={2:"touch",3:"pen",4:"mouse"};Dg.prototype.h=function(){Dg.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var nv="closure_listenable_"+(1e6*Math.random()|0),RT=0;function PT(t,n,e,r,i){this.listener=t,this.proxy=null,this.src=n,this.type=e,this.capture=!!r,this.ha=i,this.key=++RT,this.ba=this.ea=!1}function rv(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function zw(t,n,e){for(var r in t)n.call(e,t[r],r,t)}function Kw(t){var n={};for(var e in t)n[e]=t[e];return n}var MT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xy(t,n){for(var e,r,i=1;i<arguments.length;i++){for(e in r=arguments[i])t[e]=r[e];for(var a=0;a<MT.length;a++)e=MT[a],Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}}function iv(t){this.src=t,this.g={},this.h=0}function Jy(t,n){var e=n.type;if(e in t.g){var a,r=t.g[e],i=Vw(r,n);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(rv(n),0==t.g[e].length&&(delete t.g[e],t.h--))}}function av(t,n,e,r){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==n&&a.capture==!!e&&a.ha==r)return i}return-1}iv.prototype.add=function(t,n,e,r,i){var a=t.toString();(t=this.g[a])||(t=this.g[a]=[],this.h++);var u=av(t,n,r,i);return-1<u?(n=t[u],e||(n.ea=!1)):((n=new PT(n,this.src,a,!!r,i)).ea=e,t.push(n)),n};var $w="closure_lm_"+(1e6*Math.random()|0),qw={};function OT(t,n,e,r,i){if(r&&r.once)return NT(t,n,e,r,i);if(Array.isArray(n)){for(var a=0;a<n.length;a++)OT(t,n[a],e,r,i);return null}return e=e0(e),t&&t[nv]?t.N(n,e,yu(r)?!!r.capture:!!r,i):ZT(t,n,e,!1,r,i)}function ZT(t,n,e,r,i,a){if(!n)throw Error("Invalid event type");var u=yu(i)?!!i.capture:!!i,c=ku(t);if(c||(t[$w]=c=new iv(t)),(e=c.add(n,e,r,u,a)).proxy)return e;if(r=function f1(){var n=h1;return function t(e){return n.call(t.src,t.listener,e)}}(),e.proxy=r,r.src=t,r.listener=e,t.addEventListener)c1||(i=u),void 0===i&&(i=!1),t.addEventListener(n.toString(),r,i);else if(t.attachEvent)t.attachEvent(FT(n.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return e}function NT(t,n,e,r,i){if(Array.isArray(n)){for(var a=0;a<n.length;a++)NT(t,n[a],e,r,i);return null}return e=e0(e),t&&t[nv]?t.O(n,e,yu(r)?!!r.capture:!!r,i):ZT(t,n,e,!0,r,i)}function LT(t,n,e,r,i){if(Array.isArray(n))for(var a=0;a<n.length;a++)LT(t,n[a],e,r,i);else r=yu(r)?!!r.capture:!!r,e=e0(e),t&&t[nv]?(t=t.i,(n=String(n).toString())in t.g&&-1<(e=av(a=t.g[n],e,r,i))&&(rv(a[e]),Array.prototype.splice.call(a,e,1),0==a.length&&(delete t.g[n],t.h--))):t&&(t=ku(t))&&(n=t.g[n.toString()],t=-1,n&&(t=av(n,e,r,i)),(e=-1<t?n[t]:null)&&Yw(e))}function Yw(t){if("number"!=typeof t&&t&&!t.ba){var n=t.src;if(n&&n[nv])Jy(n.i,t);else{var e=t.type,r=t.proxy;n.removeEventListener?n.removeEventListener(e,r,t.capture):n.detachEvent?n.detachEvent(FT(e),r):n.addListener&&n.removeListener&&n.removeListener(r),(e=ku(n))?(Jy(e,t),0==e.h&&(e.src=null,n[$w]=null)):rv(t)}}}function FT(t){return t in qw?qw[t]:qw[t]="on"+t}function h1(t,n){if(t.ba)t=!0;else{n=new Dg(n,this);var e=t.listener,r=t.ha||t.src;t.ea&&Yw(t),t=e.call(r,n)}return t}function ku(t){return(t=t[$w])instanceof iv?t:null}var sv="__closure_events_fn_"+(1e9*Math.random()>>>0);function e0(t){return"function"==typeof t?t:(t[sv]||(t[sv]=function(n){return t.handleEvent(n)}),t[sv])}function bi(){Nc.call(this),this.i=new iv(this),this.P=this,this.I=null}function Ei(t,n){var e,r=t.I;if(r)for(e=[];r;r=r.I)e.push(r);if(t=t.P,r=n.type||n,"string"==typeof n)n=new Mi(n,t);else if(n instanceof Mi)n.target=n.target||t;else{var i=n;Xy(n=new Mi(r,t),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var u=n.g=e[a];i=uv(u,r,!0,n)&&i}if(i=uv(u=n.g=t,r,!0,n)&&i,i=uv(u,r,!1,n)&&i,e)for(a=0;a<e.length;a++)i=uv(u=n.g=e[a],r,!1,n)&&i}function uv(t,n,e,r){if(!(n=t.i.g[String(n)]))return!0;n=n.concat();for(var i=!0,a=0;a<n.length;++a){var u=n[a];if(u&&!u.ba&&u.capture==e){var c=u.listener,h=u.ha||u.src;u.ea&&Jy(t.i,u),i=!1!==c.call(h,r)&&i}}return i&&!r.defaultPrevented}$i(bi,Nc),bi.prototype[nv]=!0,bi.prototype.removeEventListener=function(t,n,e,r){LT(this,t,n,e,r)},bi.prototype.M=function(){if(bi.X.M.call(this),this.i){var n,t=this.i;for(n in t.g){for(var e=t.g[n],r=0;r<e.length;r++)rv(e[r]);delete t.g[n],t.h--}}this.I=null},bi.prototype.N=function(t,n,e,r){return this.i.add(String(t),n,!1,e,r)},bi.prototype.O=function(t,n,e,r){return this.i.add(String(t),n,!0,e,r)};var ov=dn.JSON.stringify;function UT(){var t=Fc,n=null;return t.g&&(n=t.g,t.g=t.g.next,t.g||(t.h=null),n.next=null),n}var r0,gl=function(){function t(){(0,R.Z)(this,t),this.h=this.g=null}return(0,A.Z)(t,[{key:"add",value:function(e,r){var i=t0.get();i.set(e,r),this.h?this.h.next=i:this.g=i,this.h=i}}]),t}(),t0=new(function(){function t(n,e){(0,R.Z)(this,t),this.i=n,this.j=e,this.h=0,this.g=null}return(0,A.Z)(t,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e}}]),t}())(function(){return new xT},function(t){return t.reset()}),xT=function(){function t(){(0,R.Z)(this,t),this.next=this.g=this.h=null}return(0,A.Z)(t,[{key:"set",value:function(e,r){this.h=e,this.g=r,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function BT(t){dn.setTimeout(function(){throw t},0)}function n0(t,n){r0||function VT(){var t=dn.Promise.resolve(void 0);r0=function(){t.then(a0)}}(),mh||(r0(),mh=!0),Fc.add(t,n)}var mh=!1,Fc=new gl;function a0(){for(var t;t=UT();){try{t.h.call(t.g)}catch(e){BT(e)}var n=t0;n.j(t),100>n.h&&(n.h++,t.next=n.g,n.g=t)}mh=!1}function vo(t,n){bi.call(this),this.h=t||1,this.g=n||dn,this.j=sa(this.kb,this),this.l=Date.now()}function lv(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function yh(t,n,e){if("function"==typeof t)e&&(t=sa(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=sa(t.handleEvent,t)}return 2147483647<Number(n)?-1:dn.setTimeout(t,n||0)}function s0(t){t.g=yh(function(){t.g=null,t.i&&(t.i=!1,s0(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}$i(vo,bi),($t=vo.prototype).ca=!1,$t.R=null,$t.kb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ei(this,"tick"),this.ca&&(lv(this),this.start()))}},$t.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$t.M=function(){vo.X.M.call(this),lv(this),delete this.g};var Qw=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).m=r,a.j=i,a.h=null,a.i=!1,a.g=null,a}return(0,A.Z)(e,[{key:"l",value:function(i){this.h=arguments,this.g?this.i=!0:s0(this)}},{key:"M",value:function(){(0,ie.Z)((0,pe.Z)(e.prototype),"M",this).call(this),this.g&&(dn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),e}(Nc);function Uc(t){Nc.call(this),this.h=t,this.g={}}$i(Uc,Nc);var Sg=[];function u0(t,n,e,r){Array.isArray(e)||(e&&(Sg[0]=e.toString()),e=Sg);for(var i=0;i<e.length;i++){var a=OT(n,e[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function Ag(t){zw(t.g,function(n,e){this.g.hasOwnProperty(e)&&Yw(n)},t),t.g={}}function Rg(){this.g=!0}function xc(t,n,e,r){t.info(function(){return"XMLHTTP TEXT ("+n+"): "+function Xw(t,n){if(!t.g)return n;if(!n)return null;try{var e=JSON.parse(n);if(e)for(t=0;t<e.length;t++)if(Array.isArray(e[t])){var r=e[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return ov(e)}catch(c){return n}}(t,e)+(r?" "+r:"")})}Uc.prototype.M=function(){Uc.X.M.call(this),Ag(this)},Uc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rg.prototype.Aa=function(){this.g=!1},Rg.prototype.info=function(){};var ml={},Jw=null;function ua(){return Jw=Jw||new bi}function o0(t){Mi.call(this,ml.Oa,t)}function cv(t){var n=ua();Ei(n,new o0(n,t))}function WT(t,n){Mi.call(this,ml.STAT_EVENT,t),this.stat=n}function wa(t){var n=ua();Ei(n,new WT(n,t))}function Pg(t,n){Mi.call(this,ml.Pa,t),this.size=n}function _h(t,n){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return dn.setTimeout(function(){t()},n)}ml.Oa="serverreachability",$i(o0,Mi),ml.STAT_EVENT="statevent",$i(WT,Mi),ml.Pa="timingevent",$i(Pg,Mi);var Mg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},eb={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function l0(){}function tb(){}l0.prototype.h=null;var Og,kh={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function f0(){Mi.call(this,"d")}function h0(){Mi.call(this,"c")}function fv(){}function hv(t,n,e,r){this.l=t,this.j=n,this.m=e,this.U=r||1,this.S=new Uc(this),this.O=d0,this.T=new vo(t=ev?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Hs}function Hs(){this.i=null,this.g="",this.h=!1}$i(f0,Mi),$i(h0,Mi),$i(fv,l0),fv.prototype.g=function(){return new XMLHttpRequest},fv.prototype.i=function(){return{}},Og=new fv;var d0=45e3,v0={},Zg={};function nb(t,n,e){t.K=1,t.v=kl(wu(n)),t.s=e,t.P=!0,p0(t,null)}function p0(t,n){t.F=Date.now(),Bc(t),t.A=wu(t.v);var e=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),fb(e.i,"t",r),t.C=0,e=t.l.H,t.h=new Hs,t.g=C0(t.l,e?n:null,!t.s),0<t.N&&(t.L=new Qw(sa(t.Ka,t,t.g),t.N)),u0(t.S,t.g,"readystatechange",t.hb),n=t.H?Kw(t.H):{},t.s?(t.u||(t.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,n)):(t.u="GET",t.g.da(t.A,t.u,null,n)),cv(1),function d1(t,n,e,r,i,a){t.info(function(){if(t.g)if(a)for(var u="",c=a.split("&"),h=0;h<c.length;h++){var v=c[h].split("=");if(1<v.length){var g=v[0];v=v[1];var I=g.split("_");u=2<=I.length&&"type"==I[1]?u+(g+"=")+v+"&":u+(g+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+n+"\n"+e+"\n"+u})}(t.j,t.u,t.A,t.m,t.U,t.s)}function rb(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function ib(t,n,e){for(var i,r=!0;!t.I&&t.C<e.length;){if((i=GT(t,e))==Zg){4==n&&(t.o=4,wa(14),r=!1),xc(t.j,t.m,null,"[Incomplete Response]");break}if(i==v0){t.o=4,wa(15),xc(t.j,t.m,e,"[Invalid Chunk]"),r=!1;break}xc(t.j,t.m,i,null),wh(t,i)}rb(t)&&i!=Zg&&i!=v0&&(t.h.g="",t.C=0),4!=n||0!=e.length||t.h.h||(t.o=1,wa(16),r=!1),t.i=t.i&&r,r?0<e.length&&!t.$&&(t.$=!0,(n=t.l).g==t&&n.$&&!n.K&&(n.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),bv(n),n.K=!0,wa(11))):(xc(t.j,t.m,e,"[Invalid Chunked Response]"),po(t),yl(t))}function GT(t,n){var e=t.C,r=n.indexOf("\n",e);return-1==r?Zg:(e=Number(n.substring(e,r)),isNaN(e)?v0:(r+=1)+e>n.length?Zg:(n=n.substr(r,e),t.C=r+e,n))}function Bc(t){t.V=Date.now()+t.O,ab(t,t.O)}function ab(t,n){if(null!=t.B)throw Error("WatchDog timer not null");t.B=_h(sa(t.fb,t),n)}function Ng(t){t.B&&(dn.clearTimeout(t.B),t.B=null)}function yl(t){0==t.l.G||t.I||Ev(t.l,t)}function po(t){Ng(t);var n=t.L;n&&"function"==typeof n.na&&n.na(),t.L=null,lv(t.T),Ag(t.S),t.g&&(n=t.g,t.g=null,n.abort(),n.na())}function wh(t,n){try{var e=t.l;if(0!=e.G&&(e.g==t||y0(e.h,t)))if(!t.J&&y0(e.h,t)&&3==e.G){try{var r=e.Fa.g.parse(n)}catch(ne){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<t.F))break e;qc(e),_v(e)}wv(e),wa(18)}}else e.Ba=i[1],0<e.Ba-e.T&&37500>i[2]&&e.L&&0==e.A&&!e.v&&(e.v=_h(sa(e.bb,e),6e3));if(1>=vb(e.h)&&e.ja){try{e.ja()}catch(ne){}e.ja=void 0}}else Yc(e,11)}else if((t.J||e.g==t)&&qc(e),!$y(n))for(i=e.Fa.g.parse(n),n=0;n<i.length;n++){var a=i[n];if(e.T=a[0],a=a[1],2==e.G)if("c"==a[0]){e.I=a[1],e.ka=a[2];var u=a[3];null!=u&&(e.ma=u,e.j.info("VER="+e.ma));var c=a[4];null!=c&&(e.Ca=c,e.j.info("SVER="+e.Ca));var h=a[5];null!=h&&"number"==typeof h&&0<h&&(e.J=r=1.5*h,e.j.info("backChannelRequestTimeoutMs_="+r)),r=e;var v=t.g;if(v){var g=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var I=r.h;I.g||-1==g.indexOf("spdy")&&-1==g.indexOf("quic")&&-1==g.indexOf("h2")||(I.j=I.l,I.g=new Set,I.h&&(_0(I,I.h),I.h=null))}if(r.D){var D=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.za=D,vr(r.F,r.D,D))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-t.F,e.j.info("Handshake RTT: "+e.P+"ms"));var L=t;if((r=e).sa=Gg(r,r.H?r.ka:null,r.V),L.J){pb(r.h,L);var x=L,K=r.J;K&&x.setTimeout(K),x.B&&(Ng(x),Bc(x)),r.g=L}else I0(r);0<e.i.length&&kv(e)}else"stop"!=a[0]&&"close"!=a[0]||Yc(e,7);else 3==e.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Yc(e,7):jg(e):"noop"!=a[0]&&e.l&&e.l.wa(a),e.A=0)}cv(4)}catch(ne){}}function zT(t,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(n,void 0);else if(mg(t)||"string"==typeof t)Array.prototype.forEach.call(t,n,void 0);else for(var e=function g0(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(mg(t)||"string"==typeof t){var n=[];t=t.length;for(var e=0;e<t;e++)n.push(e);return n}for(var r in n=[],e=0,t)n[e++]=r;return n}}}(t),r=function v1(t){if(t.W&&"function"==typeof t.W)return t.W();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(mg(t)){for(var n=[],e=t.length,r=0;r<e;r++)n.push(t[r]);return n}for(r in n=[],e=0,t)n[e++]=t[r];return n}(t),i=r.length,a=0;a<i;a++)n.call(void 0,r[a],e&&e[a],t)}($t=hv.prototype).setTimeout=function(t){this.O=t},$t.hb=function(t){t=t.target;var n=this.L;n&&3==Za(t)?n.l():this.Ka(t)},$t.Ka=function(t){try{if(t==this.g)e:{var n=Za(this.g),e=this.g.Ea(),r=this.g.aa();if(!(3>n)&&(3!=n||ev||this.g&&(this.h.h||this.g.fa()||k0(this.g)))){this.I||4!=n||7==e||cv(8==e||0>=r?3:2),Ng(this);var i=this.g.aa();this.Y=i;t:if(rb(this)){var a=k0(this.g);t="";var u=a.length,c=4==Za(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){po(this),yl(this);var h="";break t}this.h.i=new dn.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,t+=this.h.i.decode(a[e],{stream:c&&e==u-1});a.splice(0,u),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==i,function jT(t,n,e,r,i,a,u){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+n+"\n"+e+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,n,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var v,g=this.g;if((v=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$y(v)){var I=v;break t}}I=null}if(!(i=I)){this.i=!1,this.o=3,wa(12),po(this),yl(this);break e}xc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wh(this,i)}this.P?(ib(this,n,h),ev&&this.i&&3==n&&(u0(this.S,this.T,"tick",this.gb),this.T.start())):(xc(this.j,this.m,h,null),wh(this,h)),4==n&&po(this),this.i&&!this.I&&(4==n?Ev(this.l,this):(this.i=!1,Bc(this)))}else 400==i&&0<h.indexOf("Unknown SID")?(this.o=3,wa(12)):(this.o=0,wa(13)),po(this),yl(this)}}}catch(D){}},$t.gb=function(){if(this.g){var t=Za(this.g),n=this.g.fa();this.C<n.length&&(Ng(this),ib(this,t,n),this.i&&4!=t&&Bc(this))}},$t.cancel=function(){this.I=!0,po(this)},$t.fb=function(){this.B=null;var t=Date.now();0<=t-this.V?(function HT(t,n){t.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(cv(3),wa(17)),po(this),this.o=2,yl(this)):ab(this,this.V-t)};var m0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _l(t,n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof _l){this.h=void 0!==n?n:t.h,bh(this,t.j),this.s=t.s,this.g=t.g,ms(this,t.m),this.l=t.l,n=t.i;var e=new gv;e.i=n.i,n.g&&(e.g=new Map(n.g),e.h=n.h),dv(this,e),this.o=t.o}else t&&(e=String(t).match(m0))?(this.h=!!n,bh(this,e[1]||"",!0),this.s=vv(e[2]||""),this.g=vv(e[3]||"",!0),ms(this,e[4]),this.l=vv(e[5]||"",!0),dv(this,e[6]||"",!0),this.o=vv(e[7]||"")):(this.h=!!n,this.i=new gv(null,this.h))}function wu(t){return new _l(t)}function bh(t,n,e){t.j=e?vv(n,!0):n,t.j&&(t.j=t.j.replace(/:$/,""))}function ms(t,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);t.m=n}else t.m=null}function dv(t,n,e){n instanceof gv?(t.i=n,function hb(t,n){n&&!t.j&&(jc(t),t.i=null,t.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(lb(this,r),fb(this,i,e))},t)),t.j=n}(t.i,t.h)):(e||(n=Vc(n,$T)),t.i=new gv(n,t.h))}function vr(t,n,e){t.i.set(n,e)}function kl(t){return vr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vv(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vc(t,n,e){return"string"==typeof t?(t=encodeURI(t).replace(n,ub),e&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ub(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}_l.prototype.toString=function(){var t=[],n=this.j;n&&t.push(Vc(n,ob,!0),":");var e=this.g;return(e||"file"==n)&&(t.push("//"),(n=this.s)&&t.push(Vc(n,ob,!0),"@"),t.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&t.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&t.push("/"),t.push(Vc(e,"/"==e.charAt(0)?pv:KT,!0))),(e=this.i.toString())&&t.push("?",e),(e=this.o)&&t.push("#",Vc(e,p1)),t.join("")};var ob=/[#\/\?@]/g,KT=/[#\?:]/g,pv=/[#\?]/g,$T=/[#\?@]/g,p1=/#/g;function gv(t,n){this.h=this.g=null,this.i=t||null,this.j=!!n}function jc(t){t.g||(t.g=new Map,t.h=0,t.i&&function sb(t,n){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var r=t[e].indexOf("="),i=null;if(0<=r){var a=t[e].substring(0,r);i=t[e].substring(r+1)}else a=t[e];n(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(n,e){t.add(decodeURIComponent(n.replace(/\+/g," ")),e)}))}function lb(t,n){jc(t),n=Hc(t,n),t.g.has(n)&&(t.i=null,t.h-=t.g.get(n).length,t.g.delete(n))}function cb(t,n){return jc(t),n=Hc(t,n),t.g.has(n)}function fb(t,n,e){lb(t,n),0<e.length&&(t.i=null,t.g.set(Hc(t,n),kg(e)),t.h+=e.length)}function Hc(t,n){return n=String(n),t.j&&(n=n.toLowerCase()),n}($t=gv.prototype).add=function(t,n){jc(this),this.i=null,t=Hc(this,t);var e=this.g.get(t);return e||this.g.set(t,e=[]),e.push(n),this.h+=1,this},$t.forEach=function(t,n){jc(this),this.g.forEach(function(e,r){e.forEach(function(i){t.call(n,i,r,this)},this)},this)},$t.oa=function(){jc(this);for(var t=Array.from(this.g.values()),n=Array.from(this.g.keys()),e=[],r=0;r<n.length;r++)for(var i=t[r],a=0;a<i.length;a++)e.push(n[r]);return e},$t.W=function(t){jc(this);var n=[];if("string"==typeof t)cb(this,t)&&(n=n.concat(this.g.get(Hc(this,t))));else{t=Array.from(this.g.values());for(var e=0;e<t.length;e++)n=n.concat(t[e])}return n},$t.set=function(t,n){return jc(this),this.i=null,cb(this,t=Hc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[n]),this.h+=1,this},$t.get=function(t,n){return t&&0<(t=this.W(t)).length?String(t[0]):n},$t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],n=Array.from(this.g.keys()),e=0;e<n.length;e++){var r=n[e],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var u=i;""!==a[r]&&(u+="="+encodeURIComponent(String(a[r]))),t.push(u)}}return this.i=t.join("&")};var qT=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.h=n,this.g=e});function Lg(t){this.l=t||YT,t=dn.PerformanceNavigationTiming?0<(t=dn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(dn.g&&dn.g.Ga&&dn.g.Ga()&&dn.g.Ga().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var YT=10;function db(t){return!!t.h||!!t.g&&t.g.size>=t.j}function vb(t){return t.h?1:t.g?t.g.size:0}function y0(t,n){return t.h?t.h==n:!!t.g&&t.g.has(n)}function _0(t,n){t.g?t.g.add(n):t.h=n}function pb(t,n){t.h&&t.h==n?t.h=null:t.g&&t.g.has(n)&&t.g.delete(n)}function mv(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r,n=t.i,e=(0,P.Z)(t.g.values());try{for(e.s();!(r=e.n()).done;)n=n.concat(r.value.D)}catch(a){e.e(a)}finally{e.f()}return n}return kg(t.i)}function go(){}function g1(){this.g=new go}function yv(t,n,e){var r=e||"";try{zT(t,function(i,a){var u=i;yu(i)&&(u=ov(i)),n.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw n.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fg(t,n,e,r,i){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,i(r)}catch(a){}}function Wc(t){this.l=t.$b||null,this.j=t.ib||!1}function Ug(t,n){bi.call(this),this.D=t,this.u=n,this.m=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lg.prototype.cancel=function(){if(this.i=mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var n,t=(0,P.Z)(this.g.values());try{for(t.s();!(n=t.n()).done;)n.value.cancel()}catch(r){t.e(r)}finally{t.f()}this.g.clear()}},go.prototype.stringify=function(t){return dn.JSON.stringify(t,void 0)},go.prototype.parse=function(t){return dn.JSON.parse(t,void 0)},$i(Wc,l0),Wc.prototype.g=function(){return new Ug(this.l,this.j)},Wc.prototype.i=function(t){return function(){return t}}({}),$i(Ug,bi);var ys=0;function Eh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ga.bind(t))}function ui(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ws(t)}function Ws(t){t.onreadystatechange&&t.onreadystatechange.call(t)}($t=Ug.prototype).open=function(t,n){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=n,this.readyState=1,Ws(this)},$t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(n.body=t),(this.D||dn).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ga.bind(this))},$t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(function(){}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ui(this)),this.readyState=ys},$t.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==dn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Eh(this)}else t.text().then(this.Ua.bind(this),this.ga.bind(this))},$t.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var n=t.value?t.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!t.done}))&&(this.response=this.responseText+=n)}t.done?ui(this):Ws(this),3==this.readyState&&Eh(this)}},$t.Ua=function(t){this.g&&(this.response=this.responseText=t,ui(this))},$t.Ta=function(t){this.g&&(this.response=t,ui(this))},$t.ga=function(){this.g&&ui(this)},$t.setRequestHeader=function(t,n){this.v.append(t,n)},$t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},$t.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],n=this.h.entries(),e=n.next();!e.done;)t.push((e=e.value)[0]+": "+e[1]),e=n.next();return t.join("\r\n")},Object.defineProperty(Ug.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xg=dn.JSON.parse;function Qn(t){bi.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bg,this.K=this.L=!1}$i(Qn,bi);var Bg="",Ih=/^https?$/i,Ch=["POST","PUT"];function Gc(t,n){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=n,t.m=5,zc(t),mo(t)}function zc(t){t.D||(t.D=!0,Ei(t,"complete"),Ei(t,"error"))}function Kc(t){if(t.h&&void 0!==Gy&&(!t.C[1]||4!=Za(t)||2!=t.aa()))if(t.v&&4==Za(t))yh(t.Ha,0,t);else if(Ei(t,"readystatechange"),4==Za(t)){t.h=!1;try{var r,n=t.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}if(!(r=e)){var i;if(i=0===n){var a=String(t.H).match(m0)[1]||null;if(!a&&dn.self&&dn.self.location){var u=dn.self.location.protocol;a=u.substr(0,u.length-1)}i=!Ih.test(a?a.toLowerCase():"")}r=i}if(r)Ei(t,"complete"),Ei(t,"success");else{t.m=6;try{var c=2<Za(t)?t.g.statusText:""}catch(h){c=""}t.j=c+" ["+t.aa()+"]",zc(t)}}finally{mo(t)}}}function mo(t,n){if(t.g){$c(t);var e=t.g,r=t.C[0]?zy:null;t.g=null,t.C=null,n||Ei(t,"ready");try{e.onreadystatechange=r}catch(i){}}}function $c(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(dn.clearTimeout(t.A),t.A=null)}function Za(t){return t.g?t.g.readyState:0}function k0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Bg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(n){return null}}function w0(t){var n="";return zw(t,function(e,r){n+=r,n+=":",n+=e,n+="\r\n"}),n}function Vg(t,n,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=w0(e),"string"==typeof t?null!=e&&encodeURIComponent(String(e)):vr(t,n,e))}function Dh(t,n,e){return e&&e.internalChannelParams&&e.internalChannelParams[t]||n}function b0(t){this.Ca=0,this.i=[],this.j=new Rg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Dh("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Dh("baseRetryDelayMs",5e3,t),this.ab=Dh("retryDelaySeedMs",1e4,t),this.Za=Dh("forwardChannelMaxRetries",2,t),this.ta=Dh("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Yb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Lg(t&&t.concurrentRequestLimit),this.Fa=new g1,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=t&&t.Wb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function jg(t){if(E0(t),3==t.G){var n=t.U++,e=wu(t.F);vr(e,"SID",t.I),vr(e,"RID",n),vr(e,"TYPE","terminate"),Sh(t,e),(n=new hv(t,t.j,n,void 0)).K=2,n.v=kl(wu(e)),e=!1,dn.navigator&&dn.navigator.sendBeacon&&(e=dn.navigator.sendBeacon(n.v.toString(),"")),!e&&dn.Image&&((new Image).src=n.v,e=!0),e||(n.g=C0(n.l,null),n.g.da(n.v)),n.F=Date.now(),Bc(n)}Wg(t)}function _v(t){t.g&&(bv(t),t.g.cancel(),t.g=null)}function E0(t){_v(t),t.u&&(dn.clearTimeout(t.u),t.u=null),qc(t),t.h.cancel(),t.m&&("number"==typeof t.m&&dn.clearTimeout(t.m),t.m=null)}function kv(t){db(t.h)||t.m||(t.m=!0,n0(t.Ja,t),t.C=0)}function gb(t,n){var e;e=n?n.m:t.U++;var r=wu(t.F);vr(r,"SID",t.I),vr(r,"RID",e),vr(r,"AID",t.T),Sh(t,r),t.o&&t.s&&Vg(r,t.o,t.s),e=new hv(t,t.j,e,t.C+1),null===t.o&&(e.H=t.s),n&&(t.i=n.D.concat(t.i)),n=mb(t,e,1e3),e.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),_0(t.h,e),nb(e,r,n)}function Sh(t,n){t.ia&&zw(t.ia,function(e,r){vr(n,r,e)}),t.l&&zT({},function(e,r){vr(n,r,e)})}function mb(t,n,e){e=Math.min(t.i.length,e);var r=t.l?sa(t.l.Qa,t.l,t):null;e:for(var i=t.i,a=-1;;){var u=["count="+e];-1==a?0<e?u.push("ofs="+(a=i[0].h)):a=0:u.push("ofs="+a);for(var c=!0,h=0;h<e;h++){var v=i[h].h,g=i[h].g;if(0>(v-=a))a=Math.max(0,i[h].h-100),c=!1;else try{yv(g,u,"req"+v+"_")}catch(I){r&&r(g)}}if(c){r=u.join("&");break e}}return t=t.i.splice(0,e),n.D=t,r}function I0(t){t.g||t.u||(t.Z=1,n0(t.Ia,t),t.A=0)}function wv(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=_h(sa(t.Ia,t),Hg(t,t.A)),t.A++,0))}function bv(t){null!=t.B&&(dn.clearTimeout(t.B),t.B=null)}function yb(t){t.g=new hv(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var n=wu(t.sa);vr(n,"RID","rpc"),vr(n,"SID",t.I),vr(n,"CI",t.L?"0":"1"),vr(n,"AID",t.T),vr(n,"TYPE","xmlhttp"),Sh(t,n),t.o&&t.s&&Vg(n,t.o,t.s),t.J&&t.g.setTimeout(t.J);var e=t.g;t=t.ka,e.K=1,e.v=kl(wu(n)),e.s=null,e.P=!0,p0(e,t)}function qc(t){null!=t.v&&(dn.clearTimeout(t.v),t.v=null)}function Ev(t,n){var e=null;if(t.g==n){qc(t),bv(t),t.g=null;var r=2}else{if(!y0(t.h,n))return;e=n.D,pb(t.h,n),r=1}if(0!=t.G)if(t.pa=n.Y,n.i)if(1==r){e=n.s?n.s.length:0,n=Date.now()-n.F;var i=t.C;Ei(r=ua(),new Pg(r,e,n,i)),kv(t)}else I0(t);else if(3==(i=n.o)||0==i&&0<t.pa||!(1==r&&function XT(t,n){return!(vb(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=n.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Ya?0:t.Za)||(t.m=_h(sa(t.Ja,t,n),Hg(t,t.C)),t.C++,0)))}(t,n)||2==r&&wv(t)))switch(e&&0<e.length&&(n=t.h,n.i=n.i.concat(e)),i){case 1:Yc(t,5);break;case 4:Yc(t,10);break;case 3:Yc(t,6);break;default:Yc(t,2)}}function Hg(t,n){var e=t.Wa+Math.floor(Math.random()*t.ab);return t.l||(e*=2),e*n}function Yc(t,n){if(t.j.info("Error code "+n),2==n){var e=null;t.l&&(e=null);var r=sa(t.jb,t);e||(e=new _l("//www.google.com/images/cleardot.gif"),dn.location&&"http"==dn.location.protocol||bh(e,"https"),kl(e)),function QT(t,n){var e=new Rg;if(dn.Image){var r=new Image;r.onload=_g(Fg,e,r,"TestLoadImage: loaded",!0,n),r.onerror=_g(Fg,e,r,"TestLoadImage: error",!1,n),r.onabort=_g(Fg,e,r,"TestLoadImage: abort",!1,n),r.ontimeout=_g(Fg,e,r,"TestLoadImage: timeout",!1,n),dn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else n(!1)}(e.toString(),r)}else wa(2);t.G=0,t.l&&t.l.va(n),Wg(t),E0(t)}function Wg(t){if(t.G=0,t.la=[],t.l){var n=mv(t.h);(0!=n.length||0!=t.i.length)&&(Ky(t.la,n),Ky(t.la,t.i),t.h.i.length=0,kg(t.i),t.i.length=0),t.l.ua()}}function Gg(t,n,e){var r=e instanceof _l?wu(e):new _l(e,void 0);if(""!=r.g)n&&(r.g=n+"."+r.g),ms(r,r.m);else{var i=dn.location;r=i.protocol,n=n?n+"."+i.hostname:i.hostname,i=+i.port;var a=new _l(null,void 0);r&&bh(a,r),n&&(a.g=n),i&&ms(a,i),e&&(a.l=e),r=a}return n=t.za,(e=t.D)&&n&&vr(r,e,n),vr(r,"VER",t.ma),Sh(t,r),r}function C0(t,n,e){if(n&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Qn(e&&t.Da&&!t.ra?new Wc({ib:!0}):t.ra)).L=t.H,n}function T0(){}function Ah(){if(Lc&&!(10<=Number(Qy)))throw Error("Environmental error: no available transport.")}function Na(t,n){bi.call(this),this.g=new b0(n),this.l=t,this.h=n&&n.messageUrlParams||null,t=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(t?t["X-WebChannel-Content-Type"]=n.messageContentType:t={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(t?t["X-WebChannel-Client-Profile"]=n.ya:t={"X-WebChannel-Client-Profile":n.ya}),this.g.S=t,(t=n&&n.Xb)&&!$y(t)&&(this.g.o=t),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!$y(n)&&(this.g.D=n,null!==(t=this.h)&&n in t&&n in(t=this.h)&&delete t[n]),this.j=new Qc(this)}function D0(t){f0.call(this);var n=t.__sm__;if(n){e:{for(var e in n){t=e;break e}t=void 0}(this.i=t)&&(t=this.i,n=null!==n&&t in n?n[t]:void 0),this.data=n}else this.data=t}function zg(){h0.call(this),this.status=1}function Qc(t){this.g=t}($t=Qn.prototype).da=function(t,n,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);n=n?n.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Og.g(),this.C=function c0(t){return t.h||(t.h=t.i())}(this.u?this.u:Og),this.g.onreadystatechange=sa(this.Ha,this);try{this.F=!0,this.g.open(n,String(t),!0),this.F=!1}catch(L){return void Gc(this,L)}if(t=e||"",e=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)e.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var u,a=(0,P.Z)(r.keys());try{for(a.s();!(u=a.n()).done;){var c=u.value;e.set(c,r.get(c))}}catch(L){a.e(L)}finally{a.f()}}r=Array.from(e.keys()).find(function(L){return"content-type"==L.toLowerCase()}),i=dn.FormData&&t instanceof dn.FormData,!(0<=Vw(Ch,n))||r||i||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var v,h=(0,P.Z)(e);try{for(h.s();!(v=h.n()).done;){var g=(0,ye.Z)(v.value,2);this.g.setRequestHeader(g[0],g[1])}}catch(L){h.e(L)}finally{h.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$c(this),0<this.B&&((this.K=function Th(t){return Lc&&function Cg(){return function bg(t){var n=Ig;return Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=t(9)}(function(){for(var t=0,n=ST(String(gh)).split("."),e=ST("9").split("."),r=Math.max(n.length,e.length),i=0;0==t&&i<r;i++){var a=n[i]||"",u=e[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==a[0].length&&0==u[0].length)break;t=jw(0==a[1].length?0:parseInt(a[1],10),0==u[1].length?0:parseInt(u[1],10))||jw(0==a[2].length,0==u[2].length)||jw(a[2],u[2]),a=a[3],u=u[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sa(this.qa,this)):this.A=yh(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(L){Gc(this,L)}},$t.qa=function(){void 0!==Gy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},$t.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ei(this,"complete"),Ei(this,"abort"),mo(this))},$t.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mo(this,!0)),Qn.X.M.call(this)},$t.Ha=function(){this.s||(this.F||this.v||this.l?Kc(this):this.eb())},$t.eb=function(){Kc(this)},$t.aa=function(){try{return 2<Za(this)?this.g.status:-1}catch(t){return-1}},$t.fa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},$t.Ra=function(t){if(this.g){var n=this.g.responseText;return t&&0==n.indexOf(t)&&(n=n.substring(t.length)),xg(n)}},$t.Ea=function(){return this.m},$t.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},($t=b0.prototype).ma=8,$t.G=1,$t.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;var n=new hv(this,this.j,t,void 0),e=this.s;if(this.S&&(e?Xy(e=Kw(e),this.S):e=this.S),null!==this.o||this.N||(n.H=e,e=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=mb(this,n,r),vr(i=wu(this.F),"RID",t),vr(i,"CVER",22),this.D&&vr(i,"X-HTTP-Session-Id",this.D),Sh(this,i),e&&(this.N?r="headers="+encodeURIComponent(String(w0(e)))+"&"+r:this.o&&Vg(i,this.o,e)),_0(this.h,n),this.Xa&&vr(i,"TYPE","init"),this.O?(vr(i,"$req",r),vr(i,"SID","null"),n.Z=!0,nb(n,i,null)):nb(n,i,r),this.G=2}}else 3==this.G&&(t?gb(this,t):0==this.i.length||db(this.h)||gb(this))},$t.Ia=function(){if(this.u=null,yb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=_h(sa(this.cb,this),t)}},$t.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wa(10),_v(this),yb(this))},$t.bb=function(){null!=this.v&&(this.v=null,_v(this),wv(this),wa(19))},$t.jb=function(t){t?(this.j.info("Successfully pinged google.com"),wa(2)):(this.j.info("Failed to ping google.com"),wa(1))},($t=T0.prototype).xa=function(){},$t.wa=function(){},$t.va=function(){},$t.ua=function(){},$t.Qa=function(){},Ah.prototype.g=function(t,n){return new Na(t,n)},$i(Na,bi),Na.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,n=this.l,e=this.h||void 0;wa(0),t.V=n,t.ia=e||{},t.L=t.Y,t.F=Gg(t,null,t.V),kv(t)},Na.prototype.close=function(){jg(this.g)},Na.prototype.u=function(t){var n=this.g;if("string"==typeof t){var e={};e.__data__=t,t=e}else this.v&&((e={}).__data__=ov(t),t=e);n.i.push(new qT(n.$a++,t)),3==n.G&&kv(n)},Na.prototype.M=function(){this.g.l=null,delete this.j,jg(this.g),delete this.g,Na.X.M.call(this)},$i(D0,f0),$i(zg,h0),$i(Qc,T0),Qc.prototype.xa=function(){Ei(this.g,"a")},Qc.prototype.wa=function(t){Ei(this.g,new D0(t))},Qc.prototype.va=function(t){Ei(this.g,new zg(t))},Qc.prototype.ua=function(){Ei(this.g,"b")},Ah.prototype.createWebChannel=Ah.prototype.g,Na.prototype.send=Na.prototype.u,Na.prototype.open=Na.prototype.m,Na.prototype.close=Na.prototype.close,Mg.NO_ERROR=0,Mg.TIMEOUT=8,Mg.HTTP_ERROR=6,eb.COMPLETE="complete",tb.EventType=kh,kh.OPEN="a",kh.CLOSE="b",kh.ERROR="c",kh.MESSAGE="d",bi.prototype.listen=bi.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.Na,Qn.prototype.getLastErrorCode=Qn.prototype.Ea,Qn.prototype.getStatus=Qn.prototype.aa,Qn.prototype.getResponseJson=Qn.prototype.Ra,Qn.prototype.getResponseText=Qn.prototype.fa,Qn.prototype.send=Qn.prototype.da;var JT=pl.createWebChannelTransport=function(){return new Ah},_b=pl.getStatEventTarget=function(){return ua()},Kg=pl.ErrorCode=Mg,kb=pl.EventType=eb,eD=pl.Event=ml,wb=pl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},tD=pl.FetchXmlHttpFactory=Wc,$g=pl.WebChannel=tb,S0=pl.XhrIo=Qn,qg="@firebase/firestore",Ii=function(){function t(n){(0,R.Z)(this,t),this.uid=n}return(0,A.Z)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),t}();Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");var Xc="9.10.0",_s=new gs.Yd("@firebase/firestore");function Yg(){return _s.logLevel}function bt(t){if(_s.logLevel<=gs.in.DEBUG){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=e.map(Eb);_s.debug.apply(_s,["Firestore (".concat(Xc,"): ").concat(t)].concat((0,on.Z)(i)))}}function xr(t){if(_s.logLevel<=gs.in.ERROR){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=e.map(Eb);_s.error.apply(_s,["Firestore (".concat(Xc,"): ").concat(t)].concat((0,on.Z)(i)))}}function wl(t){if(_s.logLevel<=gs.in.WARN){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=e.map(Eb);_s.warn.apply(_s,["Firestore (".concat(Xc,"): ").concat(t)].concat((0,on.Z)(i)))}}function Eb(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",n="FIRESTORE (".concat(Xc,") INTERNAL ASSERTION FAILED: ")+t;throw xr(n),new Error(n)}function cn(t,n){t||jt()}function Mt(t,n){return t}var We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gt=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,i)).code=r,a.message=i,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return(0,A.Z)(e)}(X.ZR),Oi=(0,A.Z)(function t(){var n=this;(0,R.Z)(this,t),this.promise=new Promise(function(e,r){n.resolve=e,n.reject=r})}),Cb=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))}),Tb=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,r){e.enqueueRetryable(function(){return r(Ii.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),t}(),nD=function(){function t(n){(0,R.Z)(this,t),this.token=n,this.changeListener=null}return(0,A.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,r){var i=this;this.changeListener=r,e.enqueueRetryable(function(){return r(i.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),t}(),Db=function(){function t(n){(0,R.Z)(this,t),this.t=n,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,A.Z)(t,[{key:"start",value:function(e,r){var i=this,a=this.i,u=function(I){return i.i!==a?(a=i.i,r(I)):Promise.resolve()},c=new Oi;this.o=function(){i.i++,i.currentUser=i.u(),c.resolve(),c=new Oi,e.enqueueRetryable(function(){return u(i.currentUser)})};var h=function(){var I=c;e.enqueueRetryable((0,ut.Z)((0,ce.Z)().mark(function D(){return(0,ce.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,I.promise;case 2:return x.next=4,u(i.currentUser);case 4:case"end":return x.stop()}},D)})))},v=function(I){bt("FirebaseAuthCredentialsProvider","Auth detected"),i.auth=I,i.auth.addAuthTokenListener(i.o),h()};this.t.onInit(function(g){return v(g)}),setTimeout(function(){if(!i.auth){var g=i.t.getImmediate({optional:!0});g?v(g):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Oi)}},0),h()}},{key:"getToken",value:function(){var e=this,r=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(function(a){return e.i!==r?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):a?(cn("string"==typeof a.accessToken),new Cb(a.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return cn(null===e||"string"==typeof e),new Ii(e)}}]),t}(),Sb=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.h=n,this.l=e,this.m=r,this.g=i,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.p=new Map}return(0,A.Z)(t,[{key:"I",value:function(){return this.g?this.g():(cn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),t}(),Rh=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.h=n,this.l=e,this.m=r,this.g=i}return(0,A.Z)(t,[{key:"getToken",value:function(){return Promise.resolve(new Sb(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,r){e.enqueueRetryable(function(){return r(Ii.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),rD=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}),iD=function(){function t(n){(0,R.Z)(this,t),this.T=n,this.forceRefresh=!1,this.appCheck=null,this.A=null}return(0,A.Z)(t,[{key:"start",value:function(e,r){var i=this;this.o=function(c){e.enqueueRetryable(function(){return function(h){null!=h.error&&bt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(h.error.message));var v=h.token!==i.A;return i.A=h.token,bt("FirebaseAppCheckTokenProvider","Received ".concat(v?"new":"existing"," token.")),v?r(h.token):Promise.resolve()}(c)})};var u=function(h){bt("FirebaseAppCheckTokenProvider","AppCheck detected"),i.appCheck=h,i.appCheck.addTokenListener(i.o)};this.T.onInit(function(c){return u(c)}),setTimeout(function(){if(!i.appCheck){var c=i.T.getImmediate({optional:!0});c?u(c):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,r=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(r).then(function(i){return i?(cn("string"==typeof i.token),e.A=i.token,new rD(i.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();function sD(t){var n="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(t);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(e);else for(var r=0;r<t;r++)e[r]=Math.floor(256*Math.random());return e}var A0=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length,i="";i.length<20;)for(var a=sD(40),u=0;u<a.length;++u)i.length<20&&a[u]<r&&(i+=e.charAt(a[u]%e.length));return i}}]),t}();function mn(t,n){return t<n?-1:t>n?1:0}function Jc(t,n,e){return t.length===n.length&&t.every(function(r,i){return e(r,n[i])})}function R0(t){return t+"\0"}var ar=function(){function t(n,e){if((0,R.Z)(this,t),this.seconds=n,this.nanoseconds=e,e<0)throw new gt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new gt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(n<-62135596800)throw new gt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new gt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return(0,A.Z)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?mn(this.nanoseconds,e.nanoseconds):mn(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var r=Math.floor(e/1e3);return new t(r,Math.floor(1e6*(e-1e3*r)))}}]),t}(),vn=function(){function t(n){(0,R.Z)(this,t),this.timestamp=n}return(0,A.Z)(t,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new ar(0,0))}},{key:"max",value:function(){return new t(new ar(253402300799,999999999))}}]),t}(),Ab=function(){function t(n,e,r){(0,R.Z)(this,t),void 0===e?e=0:e>n.length&&jt(),void 0===r?r=n.length-e:r>n.length-e&&jt(),this.segments=n,this.offset=e,this.len=r}return(0,A.Z)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var r=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(i){r.push(i)}):r.push(e),this.construct(r)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}},{key:"forEach",value:function(e){for(var r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,r){for(var i=Math.min(e.length,r.length),a=0;a<i;a++){var u=e.get(a),c=r.get(a);if(u<c)return-1;if(u>c)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}]),t}(),_n=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"construct",value:function(i,a,u){return new e(i,a,u)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var i=[],a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];for(var h=0,v=u;h<v.length;h++){var g=v[h];if(g.indexOf("//")>=0)throw new gt(We.INVALID_ARGUMENT,"Invalid segment (".concat(g,"). Paths must not contain // in them."));i.push.apply(i,(0,on.Z)(g.split("/").filter(function(I){return I.length>0})))}return new e(i)}},{key:"emptyPath",value:function(){return new e([])}}]),e}(Ab),Gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_r=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"construct",value:function(i,a,u){return new e(i,a,u)}},{key:"canonicalString",value:function(){return this.toArray().map(function(i){return i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(i)||(i="`"+i+"`"),i}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(i){return Gs.test(i)}},{key:"keyField",value:function(){return new e(["__name__"])}},{key:"fromServerFormat",value:function(i){for(var a=[],u="",c=0,h=function(){if(0===u.length)throw new gt(We.INVALID_ARGUMENT,"Invalid field path (".concat(i,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));a.push(u),u=""},v=!1;c<i.length;){var g=i[c];if("\\"===g){if(c+1===i.length)throw new gt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+i);var I=i[c+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new gt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);u+=I,c+=2}else"`"===g?(v=!v,c++):"."!==g||v?(u+=g,c++):(h(),c++)}if(h(),v)throw new gt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new e(a)}},{key:"emptyPath",value:function(){return new e([])}}]),e}(Ab),Nt=function(){function t(n){(0,R.Z)(this,t),this.path=n}return(0,A.Z)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===_n.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(_n.fromString(e))}},{key:"fromName",value:function(e){return new t(_n.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(_n.emptyPath())}},{key:"comparator",value:function(e,r){return _n.comparator(e.path,r.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(e){return new t(new _n(e.slice()))}}]),t}(),Iv=(0,A.Z)(function t(n,e,r,i){(0,R.Z)(this,t),this.indexId=n,this.collectionGroup=e,this.fields=r,this.indexState=i});function P0(t){return t.fields.find(function(n){return 2===n.kind})}function ef(t){return t.fields.filter(function(n){return 2!==n.kind})}Iv.UNKNOWN_ID=-1;var Qg=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.fieldPath=n,this.kind=e}),tf=function(){function t(n,e){(0,R.Z)(this,t),this.sequenceNumber=n,this.offset=e}return(0,A.Z)(t,null,[{key:"empty",value:function(){return new t(0,bu.min())}}]),t}();function Rb(t,n){var e=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=vn.fromTimestamp(1e9===r?new ar(e+1,0):new ar(e,r));return new bu(i,Nt.empty(),n)}function O0(t){return new bu(t.readTime,t.key,-1)}var bu=function(){function t(n,e,r){(0,R.Z)(this,t),this.readTime=n,this.documentKey=e,this.largestBatchId=r}return(0,A.Z)(t,null,[{key:"min",value:function(){return new t(vn.min(),Nt.empty(),-1)}},{key:"max",value:function(){return new t(vn.max(),Nt.empty(),-1)}}]),t}();function Xg(t,n){var e=t.readTime.compareTo(n.readTime);return 0!==e||0!==(e=Nt.comparator(t.documentKey,n.documentKey))?e:mn(t.largestBatchId,n.largestBatchId)}var Z0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cv=function(){function t(){(0,R.Z)(this,t),this.onCommittedListeners=[]}return(0,A.Z)(t,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),t}();function bl(t){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,ut.Z)((0,ce.Z)().mark(function t(n){return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.code===We.FAILED_PRECONDITION&&n.message===Z0){r.next=2;break}throw n;case 2:bt("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return r.stop()}},t)})),Jg.apply(this,arguments)}var rt=function(){function t(n){var e=this;(0,R.Z)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(function(r){e.isDone=!0,e.result=r,e.nextCallback&&e.nextCallback(r)},function(r){e.isDone=!0,e.error=r,e.catchCallback&&e.catchCallback(r)})}return(0,A.Z)(t,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(e,r){var i=this;return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new t(function(a,u){i.nextCallback=function(c){i.wrapSuccess(e,c).next(a,u)},i.catchCallback=function(c){i.wrapFailure(r,c).next(a,u)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(r,i){e.next(r,i)})}},{key:"wrapUserFunction",value:function(e){try{var r=e();return r instanceof t?r:t.resolve(r)}catch(i){return t.reject(i)}}},{key:"wrapSuccess",value:function(e,r){return e?this.wrapUserFunction(function(){return e(r)}):t.resolve(r)}},{key:"wrapFailure",value:function(e,r){return e?this.wrapUserFunction(function(){return e(r)}):t.reject(r)}}],[{key:"resolve",value:function(e){return new t(function(r,i){r(e)})}},{key:"reject",value:function(e){return new t(function(r,i){i(e)})}},{key:"waitFor",value:function(e){return new t(function(r,i){var a=0,u=0,c=!1;e.forEach(function(h){++a,h.next(function(){++u,c&&u===a&&r()},function(v){return i(v)})}),c=!0,u===a&&r()})}},{key:"or",value:function(e){var a,r=t.resolve(!1),i=(0,P.Z)(e);try{var u=function(){var h=a.value;r=r.next(function(v){return v?t.resolve(v):h()})};for(i.s();!(a=i.n()).done;)u()}catch(c){i.e(c)}finally{i.f()}return r}},{key:"forEach",value:function(e,r){var i=this,a=[];return e.forEach(function(u,c){a.push(r.call(i,u,c))}),this.waitFor(a)}},{key:"mapArray",value:function(e,r){return new t(function(i,a){for(var u=e.length,c=new Array(u),h=0,v=function(D){var L=D;r(e[L]).next(function(x){c[L]=x,++h===u&&i(c)},function(x){return a(x)})},g=0;g<u;g++)v(g)})}},{key:"doWhile",value:function(e,r){return new t(function(i,a){!function c(){!0===e()?r().next(function(){c()},a):i()}()})}}]),t}(),em=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.action=n,this.transaction=e,this.aborted=!1,this.P=new Oi,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){e.error?r.P.reject(new Ph(n,e.error)):r.P.resolve()},this.transaction.onerror=function(i){var a=tm(i.target.error);r.P.reject(new Ph(n,a))}}return(0,A.Z)(t,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(bt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var r=this.transaction.objectStore(e);return new Mb(r)}}],[{key:"open",value:function(e,r,i,a){try{return new t(r,e.transaction(a,i))}catch(u){throw new Ph(r,u)}}}]),t}(),El=function(){function t(n,e,r){(0,R.Z)(this,t),this.name=n,this.version=e,this.S=r,12.2===t.D((0,X.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,A.Z)(t,[{key:"F",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(i){var a=this;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=this.db,c.t0){c.next=6;break}return bt("SimpleDb","Opening database:",this.name),c.next=5,new Promise(function(h,v){var g=indexedDB.open(a.name,a.version);g.onsuccess=function(I){h(I.target.result)},g.onblocked=function(){v(new Ph(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=function(I){var D=I.target.error;v("VersionError"===D.name?new gt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new gt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Ph(i,D))},g.onupgradeneeded=function(I){bt("SimpleDb",'Database "'+a.name+'" requires upgrade from version:',I.oldVersion),a.S.$(I.target.result,g.transaction,I.oldVersion,a.version).next(function(){bt("SimpleDb","Database upgrade to version "+a.version+" complete")})}});case 5:this.db=c.sent;case 6:return this.B&&(this.db.onversionchange=function(h){return a.B(h)}),c.abrupt("return",this.db);case 8:case"end":return c.stop()}},r,this)})),function e(r){return n.apply(this,arguments)})},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(r){return e(r)})}},{key:"runTransaction",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(i,a,u,c){var v,g,I,D,L,h=this;return(0,ce.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:v="readonly"===a,g=0;case 2:return++g,K.prev=3,K.delegateYield((0,ce.Z)().mark(function ne(){var re,Pe;return(0,ce.Z)().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,h.F(i);case 2:return h.db=Ye.sent,re=em.open(h.db,i,v?"readonly":"readwrite",u),(Pe=c(re).next(function(ze){return re.V(),ze}).catch(function(ze){return re.abort(ze),rt.reject(ze)}).toPromise()).catch(function(){}),Ye.next=7,re.v;case 7:return Ye.t0=Pe,Ye.abrupt("return",{v:Ye.t0});case 9:case"end":return Ye.stop()}},ne)})(),"t0",5);case 5:if("object"!=typeof(I=K.t0)){K.next=8;break}return K.abrupt("return",I.v);case 8:K.next=15;break;case 10:if(K.prev=10,K.t1=K.catch(3),bt("SimpleDb","Transaction failed with error:",(D=K.t1).message,"Retrying:",L="FirebaseError"!==D.name&&g<3),this.close(),L){K.next=15;break}return K.abrupt("return",Promise.reject(D));case 15:K.next=2;break;case 17:case"end":return K.stop()}},r,this,[[3,10]])}));return function e(r,i,a,u){return n.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return bt("SimpleDb","Removing database:",e),Il(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!(0,X.hl)())return!1;if(t.N())return!0;var e=(0,X.z$)(),r=t.D(e),i=0<r&&r<10,a=t.k(e),u=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||u)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}},{key:"O",value:function(e,r){return e.store(r)}},{key:"D",value:function(e){var r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(i)}},{key:"k",value:function(e){var r=e.match(/Android ([\d.]+)/i),i=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(i)}}]),t;var n}(),Pb=function(){function t(n){(0,R.Z)(this,t),this.U=n,this.q=!1,this.K=null}return(0,A.Z)(t,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Il(this.U.delete())}}]),t}(),Ph=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,We.UNAVAILABLE,"IndexedDB transaction '".concat(r,"' failed: ").concat(i))).name="IndexedDbTransactionError",a}return(0,A.Z)(e)}(gt);function yo(t){return"IndexedDbTransactionError"===t.name}var Mb=function(){function t(n){(0,R.Z)(this,t),this.store=n}return(0,A.Z)(t,[{key:"put",value:function(e,r){var i;return void 0!==r?(bt("SimpleDb","PUT",this.store.name,e,r),i=this.store.put(r,e)):(bt("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Il(i)}},{key:"add",value:function(e){return bt("SimpleDb","ADD",this.store.name,e,e),Il(this.store.add(e))}},{key:"get",value:function(e){var r=this;return Il(this.store.get(e)).next(function(i){return void 0===i&&(i=null),bt("SimpleDb","GET",r.store.name,e,i),i})}},{key:"delete",value:function(e){return bt("SimpleDb","DELETE",this.store.name,e),Il(this.store.delete(e))}},{key:"count",value:function(){return bt("SimpleDb","COUNT",this.store.name),Il(this.store.count())}},{key:"W",value:function(e,r){var i=this.options(e,r);if(i.index||"function"!=typeof this.store.getAll){var a=this.cursor(i),u=[];return this.H(a,function(h,v){u.push(v)}).next(function(){return u})}var c=this.store.getAll(i.range);return new rt(function(h,v){c.onerror=function(g){v(g.target.error)},c.onsuccess=function(g){h(g.target.result)}})}},{key:"J",value:function(e,r){var i=this.store.getAll(e,null===r?void 0:r);return new rt(function(a,u){i.onerror=function(c){u(c.target.error)},i.onsuccess=function(c){a(c.target.result)}})}},{key:"Y",value:function(e,r){bt("SimpleDb","DELETE ALL",this.store.name);var i=this.options(e,r);i.X=!1;var a=this.cursor(i);return this.H(a,function(u,c,h){return h.delete()})}},{key:"Z",value:function(e,r){var i;r?i=e:(i={},r=e);var a=this.cursor(i);return this.H(a,r)}},{key:"tt",value:function(e){var r=this.cursor({});return new rt(function(i,a){r.onerror=function(u){var c=tm(u.target.error);a(c)},r.onsuccess=function(u){var c=u.target.result;c?e(c.primaryKey,c.value).next(function(h){h?c.continue():i()}):i()}})}},{key:"H",value:function(e,r){var i=[];return new rt(function(a,u){e.onerror=function(c){u(c.target.error)},e.onsuccess=function(c){var h=c.target.result;if(h){var v=new Pb(h),g=r(h.primaryKey,h.value,v);if(g instanceof rt){var I=g.catch(function(D){return v.done(),rt.reject(D)});i.push(I)}v.isDone?a():null===v.G?h.continue():h.continue(v.G)}else a()}}).next(function(){return rt.waitFor(i)})}},{key:"options",value:function(e,r){var i;return void 0!==e&&("string"==typeof e?i=e:r=e),{index:i,range:r}}},{key:"cursor",value:function(e){var r="next";if(e.reverse&&(r="prev"),e.index){var i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,r):i.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}]),t}();function Il(t){return new rt(function(n,e){t.onsuccess=function(r){n(r.target.result)},t.onerror=function(r){var i=tm(r.target.error);e(i)}})}var N0=!1;function tm(t){var n=El.D((0,X.z$)());if(n>=12.2&&n<13){var e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){var r=new gt("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(e,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return N0||(N0=!0,setTimeout(function(){throw r},0)),r}}return t}var Ob=function(){function t(n,e){(0,R.Z)(this,t),this.asyncQueue=n,this.et=e,this.task=null}return(0,A.Z)(t,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var r=this;bt("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r.task=null,u.prev=1,u.t0=bt,u.t1="Documents written: ",u.next=6,r.et.st();case 6:u.t2=u.sent,u.t3=u.t1.concat.call(u.t1,u.t2),(0,u.t0)("IndexBackiller",u.t3),u.next=19;break;case 11:if(u.prev=11,u.t4=u.catch(1),!yo(u.t4)){u.next=17;break}bt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",u.t4),u.next=19;break;case 17:return u.next=19,bl(u.t4);case 19:return u.next=21,r.nt(6e4);case 21:case"end":return u.stop()}},i,null,[[1,11]])})))}}]),t}(),oD=function(){function t(n,e){(0,R.Z)(this,t),this.localStore=n,this.persistence=e}return(0,A.Z)(t,[{key:"st",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var a,i=this,u=arguments;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=u.length>0&&void 0!==u[0]?u[0]:50,h.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",function(v){return i.it(v,a)}));case 2:case"end":return h.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"it",value:function(e,r){var i=this,a=new Set,u=r,c=!0;return rt.doWhile(function(){return!0===c&&u>0},function(){return i.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(function(h){if(null!==h&&!a.has(h))return bt("IndexBackiller","Processing collection: ".concat(h)),i.rt(e,h,u).next(function(v){u-=v,a.add(h)});c=!1})}).next(function(){return r-u})}},{key:"rt",value:function(e,r,i){var a=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(function(u){return a.localStore.localDocuments.getNextDocuments(e,r,u,i).next(function(c){var h=c.changes;return a.localStore.indexManager.updateIndexEntries(e,h).next(function(){return a.ot(u,c)}).next(function(v){return bt("IndexBackiller","Updating offset: ".concat(v)),a.localStore.indexManager.updateCollectionGroup(e,r,v)}).next(function(){return h.size})})})}},{key:"ot",value:function(e,r){var i=e;return r.changes.forEach(function(a,u){var c=O0(u);Xg(c,i)>0&&(i=c)}),new bu(i.readTime,i.documentKey,Math.max(r.batchId,e.largestBatchId))}}]),t;var n}(),La=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.previousValue=n,e&&(e.sequenceNumberHandler=function(i){return r.ut(i)},this.ct=function(i){return e.writeSequenceNumber(i)})}return(0,A.Z)(t,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),t}();function Zb(t){var n=0;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function nf(t,n){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n(e,t[e])}function Nb(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}La.at=-1;var Ci=function(){function t(n,e){(0,R.Z)(this,t),this.comparator=n,this.root=e||Cl.EMPTY}return(0,A.Z)(t,[{key:"insert",value:function(e,r){return new t(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Cl.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cl.BLACK,null,null))}},{key:"get",value:function(e){for(var r=this.root;!r.isEmpty();){var i=this.comparator(e,r.key);if(0===i)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}},{key:"indexOf",value:function(e){for(var r=0,i=this.root;!i.isEmpty();){var a=this.comparator(e,i.key);if(0===a)return r+i.left.size;a<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(r,i){return e(r,i),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(r,i){return e.push("".concat(r,":").concat(i)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new nm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new nm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new nm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new nm(this.root,e,this.comparator,!0)}}]),t}(),nm=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.isReverse=i,this.nodeStack=[];for(var a=1;!n.isEmpty();)if(a=e?r(n.key,e):1,e&&i&&(a*=-1),a<0)n=this.isReverse?n.left:n.right;else{if(0===a){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return(0,A.Z)(t,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),t}(),Cl=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.key=n,this.value=e,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=a?a:t.EMPTY,this.size=this.left.size+1+this.right.size}return(0,A.Z)(t,[{key:"copy",value:function(e,r,i,a,u){return new t(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,r,i){var a=this,u=i(e,a.key);return(a=u<0?a.copy(null,null,null,a.left.insert(e,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,i))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,r){var i,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===r(e,a.key)){if(a.right.isEmpty())return t.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();var e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}]),t}();Cl.EMPTY=null,Cl.RED=!0,Cl.BLACK=!1,Cl.EMPTY=new(function(){function t(){(0,R.Z)(this,t),this.size=0}return(0,A.Z)(t,[{key:"key",get:function(){throw jt()}},{key:"value",get:function(){throw jt()}},{key:"color",get:function(){throw jt()}},{key:"left",get:function(){throw jt()}},{key:"right",get:function(){throw jt()}},{key:"copy",value:function(e,r,i,a,u){return this}},{key:"insert",value:function(e,r,i){return new Cl(e,r)}},{key:"remove",value:function(e,r){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var Er=function(){function t(n){(0,R.Z)(this,t),this.comparator=n,this.data=new Ci(this.comparator)}return(0,A.Z)(t,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(r,i){return e(r),!1})}},{key:"forEachInRange",value:function(e,r){for(var i=this.data.getIteratorFrom(e[0]);i.hasNext();){var a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}},{key:"forEachWhile",value:function(e,r){var i;for(i=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}},{key:"getIterator",value:function(){return new Lb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Lb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var r=this;return r.size<e.size&&(r=e,e=this),e.forEach(function(i){r=r.add(i)}),r}},{key:"isEqual",value:function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var r=this.data.getIterator(),i=e.data.getIterator();r.hasNext();){var a=r.getNext().key,u=i.getNext().key;if(0!==this.comparator(a,u))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(r){e.push(r)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(r){return e.push(r)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(e){var r=new t(this.comparator);return r.data=e,r}}]),t}(),Lb=function(){function t(n){(0,R.Z)(this,t),this.iter=n}return(0,A.Z)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();function Mh(t){return t.hasNext()?t.getNext():void 0}var Eu=function(){function t(n){(0,R.Z)(this,t),this.fields=n,n.sort(_r.comparator)}return(0,A.Z)(t,[{key:"unionWith",value:function(e){var a,r=new Er(_r.comparator),i=(0,P.Z)(this.fields);try{for(i.s();!(a=i.n()).done;)r=r.add(a.value)}catch(g){i.e(g)}finally{i.f()}var h,c=(0,P.Z)(e);try{for(c.s();!(h=c.n()).done;)r=r.add(h.value)}catch(g){c.e(g)}finally{c.f()}return new t(r.toArray())}},{key:"covers",value:function(e){var i,r=(0,P.Z)(this.fields);try{for(r.s();!(i=r.n()).done;)if(i.value.isPrefixOf(e))return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"isEqual",value:function(e){return Jc(this.fields,e.fields,function(r,i){return r.isEqual(i)})}}],[{key:"empty",value:function(){return new t([])}}]),t}(),oa=function(t){function n(e){(0,R.Z)(this,n),this.binaryString=e}return(0,A.Z)(n,[{key:t,value:function(){var r=this,i=0;return{next:function(){return i<r.binaryString.length?{value:r.binaryString.charCodeAt(i++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(r){for(var i=new Uint8Array(r.length),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return i}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(r){return mn(this.binaryString,r.binaryString)}},{key:"isEqual",value:function(r){return this.binaryString===r.binaryString}}],[{key:"fromBase64String",value:function(r){return new n(atob(r))}},{key:"fromUint8Array",value:function(r){return new n(function(a){for(var u="",c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u}(r))}}]),n}(Symbol.iterator);oa.EMPTY_BYTE_STRING=new oa("");var cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(t){if(cn(!!t),"string"==typeof t){var n=0,e=cD.exec(t);if(cn(!!e),e[1]){var r=e[1];r=(r+"000000000").substr(0,9),n=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}return{seconds:Br(t.seconds),nanos:Br(t.nanos)}}function Br(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function rf(t){return"string"==typeof t?oa.fromBase64String(t):oa.fromUint8Array(t)}function rm(t){var n,e;return"server_timestamp"===(null===(e=((null===(n=null==t?void 0:t.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function L0(t){var n=t.mapValue.fields.__previous_value__;return rm(n)?L0(n):n}function Oh(t){var n=Tl(t.mapValue.fields.__local_write_time__.timestampValue);return new ar(n.seconds,n.nanos)}var Fb=(0,A.Z)(function t(n,e,r,i,a,u,c,h){(0,R.Z)(this,t),this.databaseId=n,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.useFetchStreams=h}),Zh=function(){function t(n,e){(0,R.Z)(this,t),this.projectId=n,this.database=e||"(default)"}return(0,A.Z)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}();function Nh(t){return null==t}function Lh(t){return 0===t&&1/t==-1/0}function F0(t){return"number"==typeof t&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var _o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tv={nullValue:"NULL_VALUE"};function Dl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rm(t)?4:Ub(t)?9007199254740991:10:jt()}function la(t,n){if(t===n)return!0;var i,e=Dl(t);if(e!==Dl(n))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===n.booleanValue;case 4:return Oh(t).isEqual(Oh(n));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var a=Tl(r.timestampValue),u=Tl(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,n);case 5:return t.stringValue===n.stringValue;case 6:return i=n,rf(t.bytesValue).isEqual(rf(i.bytesValue));case 7:return t.referenceValue===n.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(t,n);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var a=Br(r.doubleValue),u=Br(i.doubleValue);return a===u?Lh(a)===Lh(u):isNaN(a)&&isNaN(u)}return!1}(t,n);case 9:return Jc(t.arrayValue.values||[],n.arrayValue.values||[],la);case 10:return function(r,i){var a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Zb(a)!==Zb(u))return!1;for(var c in a)if(a.hasOwnProperty(c)&&(void 0===u[c]||!la(a[c],u[c])))return!1;return!0}(t,n);default:return jt()}}function Dv(t,n){return void 0!==(t.values||[]).find(function(e){return la(e,n)})}function Sl(t,n){if(t===n)return 0;var i,a,u,c,e=Dl(t),r=Dl(n);if(e!==r)return mn(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return mn(t.booleanValue,n.booleanValue);case 2:return a=n,(u=Br((i=t).integerValue||i.doubleValue))<(c=Br(a.integerValue||a.doubleValue))?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1;case 3:return af(t.timestampValue,n.timestampValue);case 4:return af(Oh(t),Oh(n));case 5:return mn(t.stringValue,n.stringValue);case 6:return function(i,a){var u=rf(i),c=rf(a);return u.compareTo(c)}(t.bytesValue,n.bytesValue);case 7:return function(i,a){for(var u=i.split("/"),c=a.split("/"),h=0;h<u.length&&h<c.length;h++){var v=mn(u[h],c[h]);if(0!==v)return v}return mn(u.length,c.length)}(t.referenceValue,n.referenceValue);case 8:return function(i,a){var u=mn(Br(i.latitude),Br(a.latitude));return 0!==u?u:mn(Br(i.longitude),Br(a.longitude))}(t.geoPointValue,n.geoPointValue);case 9:return function(i,a){for(var u=i.values||[],c=a.values||[],h=0;h<u.length&&h<c.length;++h){var v=Sl(u[h],c[h]);if(v)return v}return mn(u.length,c.length)}(t.arrayValue,n.arrayValue);case 10:return function(i,a){if(i===_o.mapValue&&a===_o.mapValue)return 0;if(i===_o.mapValue)return 1;if(a===_o.mapValue)return-1;var u=i.fields||{},c=Object.keys(u),h=a.fields||{},v=Object.keys(h);c.sort(),v.sort();for(var g=0;g<c.length&&g<v.length;++g){var I=mn(c[g],v[g]);if(0!==I)return I;var D=Sl(u[c[g]],h[v[g]]);if(0!==D)return D}return mn(c.length,v.length)}(t.mapValue,n.mapValue);default:throw jt()}}function af(t,n){if("string"==typeof t&&"string"==typeof n&&t.length===n.length)return mn(t,n);var e=Tl(t),r=Tl(n),i=mn(e.seconds,r.seconds);return 0!==i?i:mn(e.nanos,r.nanos)}function Sv(t){return Av(t)}function Av(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(i=Tl(t.timestampValue),"time(".concat(i.seconds,",").concat(i.nanos,")")):"stringValue"in t?t.stringValue:"bytesValue"in t?rf(t.bytesValue).toBase64():"referenceValue"in t?Nt.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(r){var c,i="[",a=!0,u=(0,P.Z)(r.values||[]);try{for(u.s();!(c=u.n()).done;)a?a=!1:i+=",",i+=Av(c.value)}catch(v){u.e(v)}finally{u.f()}return i+"]"}(t.arrayValue):"mapValue"in t?function(r){var h,i=Object.keys(r.fields||{}).sort(),a="{",u=!0,c=(0,P.Z)(i);try{for(c.s();!(h=c.n()).done;){var v=h.value;u?u=!1:a+=",",a+="".concat(v,":").concat(Av(r.fields[v]))}}catch(g){c.e(g)}finally{c.f()}return a+"}"}(t.mapValue):jt();var i,n}function Fh(t,n){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(n.path.canonicalString())}}function im(t){return!!t&&"integerValue"in t}function Uh(t){return!!t&&"arrayValue"in t}function fD(t){return!!t&&"nullValue"in t}function sn(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function am(t){return!!t&&"mapValue"in t}function Rv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var n={mapValue:{fields:{}}};return nf(t.mapValue.fields,function(i,a){return n.mapValue.fields[i]=Rv(a)}),n}if(t.arrayValue){for(var e={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Rv(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Ub(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function xh(t){return"nullValue"in t?Tv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fh(Zh.empty(),Nt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:jt()}function hD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fh(Zh.empty(),Nt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?_o:jt()}function Pv(t,n){var e=Sl(t.value,n.value);return 0!==e?e:t.inclusive&&!n.inclusive?-1:!t.inclusive&&n.inclusive?1:0}function Mv(t,n){var e=Sl(t.value,n.value);return 0!==e?e:t.inclusive&&!n.inclusive?1:!t.inclusive&&n.inclusive?-1:0}var Nn=function(){function t(n){(0,R.Z)(this,t),this.value=n}return(0,A.Z)(t,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var r=this.value,i=0;i<e.length-1;++i)if(!am(r=(r.mapValue.fields||{})[e.get(i)]))return null;return(r=(r.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rv(r)}},{key:"setAll",value:function(e){var r=this,i=_r.emptyPath(),a={},u=[];e.forEach(function(h,v){if(!i.isImmediateParentOf(v)){var g=r.getFieldsMap(i);r.applyChanges(g,a,u),a={},u=[],i=v.popLast()}h?a[v.lastSegment()]=Rv(h):u.push(v.lastSegment())});var c=this.getFieldsMap(i);this.applyChanges(c,a,u)}},{key:"delete",value:function(e){var r=this.field(e.popLast());am(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return la(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(var i=0;i<e.length;++i){var a=r.mapValue.fields[e.get(i)];am(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=a),r=a}return r.mapValue.fields}},{key:"applyChanges",value:function(e,r,i){nf(r,function(h,v){return e[h]=v});var u,a=(0,P.Z)(i);try{for(a.s();!(u=a.n()).done;)delete e[u.value]}catch(h){a.e(h)}finally{a.f()}}},{key:"clone",value:function(){return new t(Rv(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function dD(t){var n=[];return nf(t.fields,function(e,r){var i=new _r([e]);if(am(r)){var a=dD(r.mapValue).fields;if(0===a.length)n.push(i);else{var c,u=(0,P.Z)(a);try{for(u.s();!(c=u.n()).done;)n.push(i.child(c.value))}catch(v){u.e(v)}finally{u.f()}}}else n.push(i)}),new Eu(n)}var oi=function(){function t(n,e,r,i,a,u){(0,R.Z)(this,t),this.key=n,this.documentType=e,this.version=r,this.readTime=i,this.data=a,this.documentState=u}return(0,A.Z)(t,[{key:"convertToFoundDocument",value:function(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=vn.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,vn.min(),vn.min(),Nn.empty(),0)}},{key:"newFoundDocument",value:function(e,r,i){return new t(e,1,r,vn.min(),i,0)}},{key:"newNoDocument",value:function(e,r){return new t(e,2,r,vn.min(),Nn.empty(),0)}},{key:"newUnknownDocument",value:function(e,r){return new t(e,3,r,vn.min(),Nn.empty(),2)}}]),t}(),xb=(0,A.Z)(function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,R.Z)(this,t),this.path=n,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=c,this.ht=null});function Bb(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new xb(t,n,e,r,i,a,u)}function Al(t){var n=Mt(t);if(null===n.ht){var e=n.path.canonicalString();null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(r){return(i=r).field.canonicalString()+i.op.toString()+Sv(i.value);var i}).join(","),e+="|ob:",e+=n.orderBy.map(function(r){return(i=r).field.canonicalString()+i.dir;var i}).join(","),Nh(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(function(r){return Sv(r)}).join(",")),n.endAt&&(e+="|ub:",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(function(r){return Sv(r)}).join(",")),n.ht=e}return n.ht}function Bh(t,n){if(t.limit!==n.limit||t.orderBy.length!==n.orderBy.length)return!1;for(var e=0;e<t.orderBy.length;e++)if(!yD(t.orderBy[e],n.orderBy[e]))return!1;if(t.filters.length!==n.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(a=n.filters[r]).op||!i.field.isEqual(a.field)||!la(i.value,a.value))return!1;var i,a;return t.collectionGroup===n.collectionGroup&&!!t.path.isEqual(n.path)&&!!$b(t.startAt,n.startAt)&&$b(t.endAt,n.endAt)}function Ov(t){return Nt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function sm(t,n){return t.filters.filter(function(e){return e instanceof Ti&&e.field.isEqual(n)})}function jb(t,n,e){var u,r=Tv,i=!0,a=(0,P.Z)(sm(t,n));try{for(a.s();!(u=a.n()).done;){var c=u.value,h=Tv,v=!0;switch(c.op){case"<":case"<=":h=xh(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,v=!1;break;case"!=":case"not-in":h=Tv}Pv({value:r,inclusive:i},{value:h,inclusive:v})<0&&(r=h,i=v)}}catch(D){a.e(D)}finally{a.f()}if(null!==e)for(var g=0;g<t.orderBy.length;++g)if(t.orderBy[g].field.isEqual(n)){var I=e.position[g];Pv({value:r,inclusive:i},{value:I,inclusive:e.inclusive})<0&&(r=I,i=e.inclusive);break}return{value:r,inclusive:i}}function Hb(t,n,e){var u,r=_o,i=!0,a=(0,P.Z)(sm(t,n));try{for(a.s();!(u=a.n()).done;){var c=u.value,h=_o,v=!0;switch(c.op){case">=":case">":h=hD(c.value),v=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,v=!1;break;case"!=":case"not-in":h=_o}Mv({value:r,inclusive:i},{value:h,inclusive:v})>0&&(r=h,i=v)}}catch(D){a.e(D)}finally{a.f()}if(null!==e)for(var g=0;g<t.orderBy.length;++g)if(t.orderBy[g].field.isEqual(n)){var I=e.position[g];Mv({value:r,inclusive:i},{value:I,inclusive:e.inclusive})>0&&(r=I,i=e.inclusive);break}return{value:r,inclusive:i}}var Ti=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).field=r,u.op=i,u.value=a,u}return(0,A.Z)(e,[{key:"matches",value:function(i){var a=i.data.field(this.field);return"!="===this.op?null!==a&&this.ft(Sl(a,this.value)):null!==a&&Dl(this.value)===Dl(a)&&this.ft(Sl(a,this.value))}},{key:"ft",value:function(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return 0===i;case"!=":return 0!==i;case">":return i>0;case">=":return i>=0;default:return jt()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(i,a,u){return i.isKeyField()?"in"===a||"not-in"===a?this.lt(i,a,u):new vD(i,a,u):"array-contains"===a?new Wb(i,u):"in"===a?new Gb(i,u):"not-in"===a?new zb(i,u):"array-contains-any"===a?new mD(i,u):new e(i,a,u)}},{key:"lt",value:function(i,a,u){return"in"===a?new pD(i,u):new gD(i,u)}}]),e}(function(){return(0,A.Z)(function t(){(0,R.Z)(this,t)})}()),vD=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this,r,i,a)).key=Nt.fromName(a.referenceValue),u}return(0,A.Z)(e,[{key:"matches",value:function(i){var a=Nt.comparator(i.key,this.key);return this.ft(a)}}]),e}(Ti),pD=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,"in",i)).keys=Zv(0,i),a}return(0,A.Z)(e,[{key:"matches",value:function(i){return this.keys.some(function(a){return a.isEqual(i.key)})}}]),e}(Ti),gD=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,"not-in",i)).keys=Zv(0,i),a}return(0,A.Z)(e,[{key:"matches",value:function(i){return!this.keys.some(function(a){return a.isEqual(i.key)})}}]),e}(Ti);function Zv(t,n){var e;return((null===(e=n.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(r){return Nt.fromName(r.referenceValue)})}var Wb=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){return(0,R.Z)(this,e),n.call(this,r,"array-contains",i)}return(0,A.Z)(e,[{key:"matches",value:function(i){var a=i.data.field(this.field);return Uh(a)&&Dv(a.arrayValue,this.value)}}]),e}(Ti),Gb=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){return(0,R.Z)(this,e),n.call(this,r,"in",i)}return(0,A.Z)(e,[{key:"matches",value:function(i){var a=i.data.field(this.field);return null!==a&&Dv(this.value.arrayValue,a)}}]),e}(Ti),zb=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){return(0,R.Z)(this,e),n.call(this,r,"not-in",i)}return(0,A.Z)(e,[{key:"matches",value:function(i){if(Dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var a=i.data.field(this.field);return null!==a&&!Dv(this.value.arrayValue,a)}}]),e}(Ti),mD=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){return(0,R.Z)(this,e),n.call(this,r,"array-contains-any",i)}return(0,A.Z)(e,[{key:"matches",value:function(i){var a=this,u=i.data.field(this.field);return!(!Uh(u)||!u.arrayValue.values)&&u.arrayValue.values.some(function(c){return Dv(a.value.arrayValue,c)})}}]),e}(Ti),ks=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.position=n,this.inclusive=e}),Iu=(0,A.Z)(function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,R.Z)(this,t),this.field=n,this.dir=e});function yD(t,n){return t.dir===n.dir&&t.field.isEqual(n.field)}function Kb(t,n,e){for(var r=0,i=0;i<t.position.length;i++){var a=n[i],u=t.position[i];if(r=a.field.isKeyField()?Nt.comparator(Nt.fromName(u.referenceValue),e.key):Sl(u,e.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $b(t,n){if(null===t)return null===n;if(null===n||t.inclusive!==n.inclusive||t.position.length!==n.position.length)return!1;for(var e=0;e<t.position.length;e++)if(!la(t.position[e],n.position[e]))return!1;return!0}var Cu=(0,A.Z)(function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,R.Z)(this,t),this.path=n,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=c,this.endAt=h,this._t=null,this.wt=null});function U0(t,n,e,r,i,a,u,c){return new Cu(t,n,e,r,i,a,u,c)}function sf(t){return new Cu(t)}function qb(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function um(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function x0(t){var e,n=(0,P.Z)(t.filters);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function B0(t){return null!==t.collectionGroup}function Nv(t){var n=Mt(t);if(null===n._t){n._t=[];var e=x0(n),r=um(n);if(null!==e&&null===r)e.isKeyField()||n._t.push(new Iu(e)),n._t.push(new Iu(_r.keyField(),"asc"));else{var u,i=!1,a=(0,P.Z)(n.explicitOrderBy);try{for(a.s();!(u=a.n()).done;){var c=u.value;n._t.push(c),c.field.isKeyField()&&(i=!0)}}catch(v){a.e(v)}finally{a.f()}if(!i){var h=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n._t.push(new Iu(_r.keyField(),h))}}}return n._t}function ts(t){var n=Mt(t);if(!n.wt)if("F"===n.limitType)n.wt=Bb(n.path,n.collectionGroup,Nv(n),n.filters,n.limit,n.startAt,n.endAt);else{var i,e=[],r=(0,P.Z)(Nv(n));try{for(r.s();!(i=r.n()).done;){var a=i.value;e.push(new Iu(a.field,"desc"===a.dir?"asc":"desc"))}}catch(v){r.e(v)}finally{r.f()}var c=n.endAt?new ks(n.endAt.position,n.endAt.inclusive):null,h=n.startAt?new ks(n.startAt.position,n.startAt.inclusive):null;n.wt=Bb(n.path,n.collectionGroup,e,n.filters,n.limit,c,h)}return n.wt}function V0(t,n,e){return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),n,e,t.startAt,t.endAt)}function om(t,n){return Bh(ts(t),ts(n))&&t.limitType===n.limitType}function j0(t){return"".concat(Al(ts(t)),"|lt:").concat(t.limitType)}function Vh(t){return"Query(target=".concat(function Vb(t){var n=t.path.canonicalString();return null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: [".concat(t.filters.map(function(e){return"".concat((r=e).field.canonicalString()," ").concat(r.op," ").concat(Sv(r.value));var r}).join(", "),"]")),Nh(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: [".concat(t.orderBy.map(function(e){return"".concat((r=e).field.canonicalString()," (").concat(r.dir,")");var r}).join(", "),"]")),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return Sv(e)}).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return Sv(e)}).join(",")),"Target(".concat(n,")")}(ts(t)),"; limitType=").concat(t.limitType,")")}function H0(t,n){return n.isFoundDocument()&&(i=(r=n).key.path,null!==(e=t).collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):Nt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i))&&function(e,r){var a,i=(0,P.Z)(e.explicitOrderBy);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(!u.field.isKeyField()&&null===r.data.field(u.field))return!1}}catch(c){i.e(c)}finally{i.f()}return!0}(t,n)&&function(e,r){var a,i=(0,P.Z)(e.filters);try{for(i.s();!(a=i.n()).done;)if(!a.value.matches(r))return!1}catch(c){i.e(c)}finally{i.f()}return!0}(t,n)&&function(e,r){return!(e.startAt&&!function(i,a,u){var c=Kb(i,a,u);return i.inclusive?c<=0:c<0}(e.startAt,Nv(e),r)||e.endAt&&!function(i,a,u){var c=Kb(i,a,u);return i.inclusive?c>=0:c>0}(e.endAt,Nv(e),r))}(t,n);var e,r,i}function Yb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W0(t){return function(n,e){var a,r=!1,i=(0,P.Z)(Nv(t));try{for(i.s();!(a=i.n()).done;){var u=a.value,c=Lv(u,n,e);if(0!==c)return c;r=r||u.field.isKeyField()}}catch(h){i.e(h)}finally{i.f()}return 0}}function Lv(t,n,e){var i,u,c,h,r=t.field.isKeyField()?Nt.comparator(n.key,e.key):(u=e,c=n.data.field(i=t.field),h=u.data.field(i),null!==c&&null!==h?Sl(c,h):jt());switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return jt()}}function Qb(t,n){if(t.gt){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(n)?"-0":n}}function Xb(t){return{integerValue:""+t}}function Jb(t,n){return F0(n)?Xb(n):Qb(t,n)}var lm=(0,A.Z)(function t(){(0,R.Z)(this,t),this._=void 0});function _D(t,n,e){return t instanceof jh?(a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=e).seconds,nanos:r.nanoseconds}}}},(i=n)&&(a.fields.__previous_value__=i),{mapValue:a}):t instanceof zs?nE(t,n):t instanceof Rl?rE(t,n):function(r,i){var a=tE(r,i),u=iE(a)+iE(r.yt);return im(a)&&im(r.yt)?Xb(u):Qb(r.It,u)}(t,n);var r,i,a}function eE(t,n,e){return t instanceof zs?nE(t,n):t instanceof Rl?rE(t,n):e}function tE(t,n){return t instanceof uf?im(e=n)||(r=e)&&"doubleValue"in r?n:{integerValue:0}:null;var r,e}var jh=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e)}(lm),zs=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).elements=r,i}return(0,A.Z)(e)}(lm);function nE(t,n){var i,e=G0(n),r=(0,P.Z)(t.elements);try{var a=function(){var c=i.value;e.some(function(h){return la(h,c)})||e.push(c)};for(r.s();!(i=r.n()).done;)a()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:e}}}var Rl=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).elements=r,i}return(0,A.Z)(e)}(lm);function rE(t,n){var i,e=G0(n),r=(0,P.Z)(t.elements);try{var a=function(){var c=i.value;e=e.filter(function(h){return!la(h,c)})};for(r.s();!(i=r.n()).done;)a()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:e}}}var uf=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).It=r,a.yt=i,a}return(0,A.Z)(e)}(lm);function iE(t){return Br(t.integerValue||t.doubleValue)}function G0(t){return Uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fv=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.field=n,this.transform=e}),kD=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.version=n,this.transformResults=e}),Yr=function(){function t(n,e){(0,R.Z)(this,t),this.updateTime=n,this.exists=e}return(0,A.Z)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function Uv(t,n){return void 0!==t.updateTime?n.isFoundDocument()&&n.version.isEqual(t.updateTime):void 0===t.exists||t.exists===n.isFoundDocument()}var cm=(0,A.Z)(function t(){(0,R.Z)(this,t)});function aE(t,n){if(!t.hasLocalMutations||n&&0===n.fields.length)return null;if(null===n)return t.isNoDocument()?new Wh(t.key,Yr.none()):new Hh(t.key,t.data,Yr.none());var u,e=t.data,r=Nn.empty(),i=new Er(_r.comparator),a=(0,P.Z)(n.fields);try{for(a.s();!(u=a.n()).done;){var c=u.value;if(!i.has(c)){var h=e.field(c);null===h&&c.length>1&&(c=c.popLast(),h=e.field(c)),null===h?r.delete(c):r.set(c,h),i=i.add(c)}}}catch(v){a.e(v)}finally{a.f()}return new ko(t.key,r,new Eu(i.toArray()),Yr.none())}function wD(t,n,e){var r,i,a,u,c;t instanceof Hh?(i=n,a=e,u=(r=t).value.clone(),c=uE(r.fieldTransforms,i,a.transformResults),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()):t instanceof ko?function(r,i,a){if(Uv(r.precondition,i)){var u=uE(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(sE(r)),c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}else i.convertToUnknownDocument(a.version)}(t,n,e):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,n,e)}function lf(t,n,e,r){return t instanceof Hh?function(i,a,u,c){if(!Uv(i.precondition,a))return u;var h=i.value.clone(),v=oE(i.fieldTransforms,c,a);return h.setAll(v),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,n,e,r):t instanceof ko?function(i,a,u,c){if(!Uv(i.precondition,a))return u;var h=oE(i.fieldTransforms,c,a),v=a.data;return v.setAll(sE(i)),v.setAll(h),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(function(g){return g.field}))}(t,n,e,r):(u=e,Uv(t.precondition,a=n)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function bD(t,n){var i,e=null,r=(0,P.Z)(t.fieldTransforms);try{for(r.s();!(i=r.n()).done;){var a=i.value,u=n.data.field(a.field),c=tE(a.transform,u||null);null!=c&&(null===e&&(e=Nn.empty()),e.set(a.field,c))}}catch(h){r.e(h)}finally{r.f()}return e||null}function K0(t,n){return t.type===n.type&&!!t.key.isEqual(n.key)&&!!t.precondition.isEqual(n.precondition)&&(r=n.fieldTransforms,!!(void 0===(e=t.fieldTransforms)&&void 0===r||e&&r&&Jc(e,r,function(i,a){return function z0(t,n){return t.field.isEqual(n.field)&&(r=n.transform,(e=t.transform)instanceof zs&&r instanceof zs||e instanceof Rl&&r instanceof Rl?Jc(e.elements,r.elements,la):e instanceof uf&&r instanceof uf?la(e.yt,r.yt):e instanceof jh&&r instanceof jh);var e,r}(i,a)})))&&(0===t.type?t.value.isEqual(n.value):1!==t.type||t.data.isEqual(n.data)&&t.fieldMask.isEqual(n.fieldMask));var e,r}var Hh=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,R.Z)(this,e),(u=n.call(this)).key=r,u.value=i,u.precondition=a,u.fieldTransforms=c,u.type=0,u}return(0,A.Z)(e,[{key:"getFieldMask",value:function(){return null}}]),e}(cm),ko=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,R.Z)(this,e),(c=n.call(this)).key=r,c.data=i,c.fieldMask=a,c.precondition=u,c.fieldTransforms=h,c.type=1,c}return(0,A.Z)(e,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),e}(cm);function sE(t){var n=new Map;return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);n.set(e,r)}}),n}function uE(t,n,e){var r=new Map;cn(t.length===e.length);for(var i=0;i<e.length;i++){var a=t[i],u=a.transform,c=n.data.field(a.field);r.set(a.field,eE(u,c,e[i]))}return r}function oE(t,n,e){var a,r=new Map,i=(0,P.Z)(t);try{for(i.s();!(a=i.n()).done;){var u=a.value,c=u.transform,h=e.data.field(u.field);r.set(u.field,_D(c,h,n))}}catch(v){i.e(v)}finally{i.f()}return r}var Qr,Ln,Wh=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).key=r,a.precondition=i,a.type=2,a.fieldTransforms=[],a}return(0,A.Z)(e,[{key:"getFieldMask",value:function(){return null}}]),e}(cm),$0=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).key=r,a.precondition=i,a.type=3,a.fieldTransforms=[],a}return(0,A.Z)(e,[{key:"getFieldMask",value:function(){return null}}]),e}(cm),ED=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.count=n});function lE(t){switch(t){default:return jt();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function cE(t){if(void 0===t)return xr("GRPC error has no .code"),We.UNKNOWN;switch(t){case Qr.OK:return We.OK;case Qr.CANCELLED:return We.CANCELLED;case Qr.UNKNOWN:return We.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return We.INTERNAL;case Qr.UNAVAILABLE:return We.UNAVAILABLE;case Qr.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Qr.NOT_FOUND:return We.NOT_FOUND;case Qr.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Qr.ABORTED:return We.ABORTED;case Qr.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Qr.DATA_LOSS:return We.DATA_LOSS;default:return jt()}}(Ln=Qr||(Qr={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";var wo=function(){function t(n,e){(0,R.Z)(this,t),this.mapKeyFn=n,this.equalsFn=e,this.inner={},this.innerSize=0}return(0,A.Z)(t,[{key:"get",value:function(e){var r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){var u,a=(0,P.Z)(i);try{for(a.s();!(u=a.n()).done;){var c=(0,ye.Z)(u.value,2),v=c[1];if(this.equalsFn(c[0],e))return v}}catch(g){a.e(g)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,r){var i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,r]],void this.innerSize++;for(var u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,r]);a.push([e,r]),this.innerSize++}},{key:"delete",value:function(e){var r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return!1;for(var a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[r]:i.splice(a,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){nf(this.inner,function(r,i){var u,a=(0,P.Z)(i);try{for(a.s();!(u=a.n()).done;){var c=(0,ye.Z)(u.value,2);e(c[0],c[1])}}catch(g){a.e(g)}finally{a.f()}})}},{key:"isEmpty",value:function(){return Nb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),ID=new Ci(Nt.comparator);function Fa(){return ID}var fE=new Ci(Nt.comparator);function cf(){for(var t=fE,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];for(var i=0,a=e;i<a.length;i++){var u=a[i];t=t.insert(u.key,u)}return t}function fm(t){var n=fE;return t.forEach(function(e,r){return n=n.insert(e,r.overlayedDocument)}),n}function Ks(){return xv()}function hm(){return xv()}function xv(){return new wo(function(t){return t.toString()},function(t,n){return t.isEqual(n)})}var CD=new Ci(Nt.comparator),q0=new Er(Nt.comparator);function bn(){for(var t=q0,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];for(var i=0,a=e;i<a.length;i++){var u=a[i];t=t.add(u)}return t}var TD=new Er(mn);function bo(){return TD}var dm=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.snapshotVersion=n,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,A.Z)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,r){var i=new Map;return i.set(e,Y0.createSynthesizedTargetChangeForCurrentChange(e,r)),new t(vn.min(),i,bo(),Fa(),bn())}}]),t}(),Y0=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.resumeToken=n,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,A.Z)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,r){return new t(oa.EMPTY_BYTE_STRING,r,bn(),bn(),bn())}}]),t}(),Q0=(0,A.Z)(function t(n,e,r,i){(0,R.Z)(this,t),this.Tt=n,this.removedTargetIds=e,this.key=r,this.Et=i}),X0=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.targetId=n,this.At=e}),vm=(0,A.Z)(function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oa.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,R.Z)(this,t),this.state=n,this.targetIds=e,this.resumeToken=r,this.cause=i}),hE=function(){function t(){(0,R.Z)(this,t),this.Rt=0,this.bt=e_(),this.Pt=oa.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return(0,A.Z)(t,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=bn(),r=bn(),i=bn();return this.bt.forEach(function(a,u){switch(u){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:i=i.add(a);break;default:jt()}}),new Y0(this.Pt,this.vt,e,r,i)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=e_()}},{key:"kt",value:function(e,r){this.Vt=!0,this.bt=this.bt.insert(e,r)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),t}(),J0=function(){function t(n){(0,R.Z)(this,t),this.Bt=n,this.Lt=new Map,this.Ut=Fa(),this.qt=dE(),this.Kt=new Er(mn)}return(0,A.Z)(t,[{key:"Gt",value:function(e){var i,r=(0,P.Z)(e.Tt);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.Et&&e.Et.isFoundDocument()?this.Qt(a,e.Et):this.jt(a,e.key,e.Et)}}catch(v){r.e(v)}finally{r.f()}var c,u=(0,P.Z)(e.removedTargetIds);try{for(u.s();!(c=u.n()).done;)this.jt(c.value,e.key,e.Et)}catch(v){u.e(v)}finally{u.f()}}},{key:"Wt",value:function(e){var r=this;this.forEachTarget(e,function(i){var a=r.zt(i);switch(e.state){case 0:r.Ht(i)&&a.Ct(e.resumeToken);break;case 1:a.Ft(),a.St||a.Nt(),a.Ct(e.resumeToken);break;case 2:a.Ft(),a.St||r.removeTarget(i);break;case 3:r.Ht(i)&&(a.$t(),a.Ct(e.resumeToken));break;case 4:r.Ht(i)&&(r.Jt(i),a.Ct(e.resumeToken));break;default:jt()}})}},{key:"forEachTarget",value:function(e,r){var i=this;e.targetIds.length>0?e.targetIds.forEach(r):this.Lt.forEach(function(a,u){i.Ht(u)&&r(u)})}},{key:"Yt",value:function(e){var r=e.targetId,i=e.At.count,a=this.Xt(r);if(a){var u=a.target;if(Ov(u))if(0===i){var c=new Nt(u.path);this.jt(r,c,oi.newNoDocument(c,vn.min()))}else cn(1===i);else this.Zt(r)!==i&&(this.Jt(r),this.Kt=this.Kt.add(r))}}},{key:"te",value:function(e){var r=this,i=new Map;this.Lt.forEach(function(c,h){var v=r.Xt(h);if(v){if(c.current&&Ov(v.target)){var g=new Nt(v.target.path);null!==r.Ut.get(g)||r.ee(h,g)||r.jt(h,g,oi.newNoDocument(g,e))}c.Dt&&(i.set(h,c.xt()),c.Nt())}});var a=bn();this.qt.forEach(function(c,h){var v=!0;h.forEachWhile(function(g){var I=r.Xt(g);return!I||2===I.purpose||(v=!1,!1)}),v&&(a=a.add(c))}),this.Ut.forEach(function(c,h){return h.setReadTime(e)});var u=new dm(e,i,this.Kt,this.Ut,a);return this.Ut=Fa(),this.qt=dE(),this.Kt=new Er(mn),u}},{key:"Qt",value:function(e,r){if(this.Ht(e)){var i=this.ee(e,r.key)?2:0;this.zt(e).kt(r.key,i),this.Ut=this.Ut.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ne(r.key).add(e))}}},{key:"jt",value:function(e,r,i){if(this.Ht(e)){var a=this.zt(e);this.ee(e,r)?a.kt(r,1):a.Mt(r),this.qt=this.qt.insert(r,this.ne(r).delete(e)),i&&(this.Ut=this.Ut.insert(r,i))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var r=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var r=this.Lt.get(e);return r||(r=new hE,this.Lt.set(e,r)),r}},{key:"ne",value:function(e){var r=this.qt.get(e);return r||(r=new Er(mn),this.qt=this.qt.insert(e,r)),r}},{key:"Ht",value:function(e){var r=null!==this.Xt(e);return r||bt("WatchChangeAggregator","Detected inactive target",e),r}},{key:"Xt",value:function(e){var r=this.Lt.get(e);return r&&r.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var r=this;this.Lt.set(e,new hE),this.Bt.getRemoteKeysForTarget(e).forEach(function(i){r.jt(e,i,null)})}},{key:"ee",value:function(e,r){return this.Bt.getRemoteKeysForTarget(e).has(r)}}]),t}();function dE(){return new Ci(Nt.comparator)}function e_(){return new Ci(Nt.comparator)}var DD={asc:"ASCENDING",desc:"DESCENDING"},SD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AD=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.databaseId=n,this.gt=e});function Gh(t,n){return t.gt?"".concat(new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+n.nanoseconds).slice(-9),"Z"):{seconds:""+n.seconds,nanos:n.nanoseconds}}function vE(t,n){return t.gt?n.toBase64():n.toUint8Array()}function m1(t,n){return Gh(t,n.toTimestamp())}function Zi(t){return cn(!!t),vn.fromTimestamp((e=Tl(t),new ar(e.seconds,e.nanos)));var e}function t_(t,n){return(e=t,new _n(["projects",e.projectId,"databases",e.database])).child("documents").child(n).canonicalString();var e}function RD(t){var n=_n.fromString(t);return cn(IE(n)),n}function zh(t,n){return t_(t.databaseId,n.path)}function Eo(t,n){var e=RD(n);if(e.get(1)!==t.databaseId.projectId)throw new gt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new gt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new Nt(PD(e))}function n_(t,n){return t_(t.databaseId,n)}function pE(t){var n=RD(t);return 4===n.length?_n.emptyPath():PD(n)}function Bv(t){return new _n(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PD(t){return cn(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function MD(t,n,e){return{name:zh(t,n),fields:e.value.mapValue.fields}}function gE(t,n,e){var r=Eo(t,n.name),i=Zi(n.updateTime),a=new Nn({mapValue:{fields:n.fields}}),u=oi.newFoundDocument(r,i,a);return e&&u.setHasCommittedMutations(),e?u.setHasCommittedMutations():u}function OD(t,n){return"found"in n?function(e,r){cn(!!r.found);var i=Eo(e,r.found.name),a=Zi(r.found.updateTime),u=new Nn({mapValue:{fields:r.found.fields}});return oi.newFoundDocument(i,a,u)}(t,n):"missing"in n?function(e,r){cn(!!r.missing),cn(!!r.readTime);var i=Eo(e,r.missing),a=Zi(r.readTime);return oi.newNoDocument(i,a)}(t,n):jt()}function Vv(t,n){var e,i;if(n instanceof Hh)e={update:MD(t,n.key,n.value)};else if(n instanceof Wh)e={delete:zh(t,n.key)};else if(n instanceof ko)e={update:MD(t,n.key,n.data),updateMask:EE(n.fieldMask)};else{if(!(n instanceof $0))return jt();e={verify:zh(t,n.key)}}return n.fieldTransforms.length>0&&(e.updateTransforms=n.fieldTransforms.map(function(r){return function(i,a){var u=a.transform;if(u instanceof jh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof zs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Rl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof uf)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw jt()}(0,r)})),n.precondition.isNone||(e.currentDocument=void 0!==(i=n.precondition).updateTime?{updateTime:m1(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:jt()),e}function r_(t,n){var v,e=n.currentDocument?void 0!==(v=n.currentDocument).updateTime?Yr.updateTime(Zi(v.updateTime)):void 0!==v.exists?Yr.exists(v.exists):Yr.none():Yr.none(),r=n.updateTransforms?n.updateTransforms.map(function(v){return function(g,I){var D=null;"setToServerValue"in I?(cn("REQUEST_TIME"===I.setToServerValue),D=new jh):"appendMissingElements"in I?D=new zs(I.appendMissingElements.values||[]):"removeAllFromArray"in I?D=new Rl(I.removeAllFromArray.values||[]):"increment"in I?D=new uf(g,I.increment):jt();var K=_r.fromServerFormat(I.fieldPath);return new Fv(K,D)}(t,v)}):[];if(n.update){var i=Eo(t,n.update.name),a=new Nn({mapValue:{fields:n.update.fields}});if(n.updateMask){var u=function(v){return new Eu((v.fieldPaths||[]).map(function(I){return _r.fromServerFormat(I)}))}(n.updateMask);return new ko(i,a,u,e,r)}return new Hh(i,a,e,r)}if(n.delete){var c=Eo(t,n.delete);return new Wh(c,e)}if(n.verify){var h=Eo(t,n.verify);return new $0(h,e)}return jt()}function mE(t,n){return{documents:[n_(t,n.path)]}}function yE(t,n){var e={structuredQuery:{}},r=n.path;null!==n.collectionGroup?(e.parent=n_(t,r),e.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(e.parent=n_(t,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(h){if(0!==h.length){var v=h.map(function(g){return function(I){if("=="===I.op){if(sn(I.value))return{unaryFilter:{field:ff(I.field),op:"IS_NAN"}};if(fD(I.value))return{unaryFilter:{field:ff(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(sn(I.value))return{unaryFilter:{field:ff(I.field),op:"IS_NOT_NAN"}};if(fD(I.value))return{unaryFilter:{field:ff(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ff(I.field),op:jv(I.op),value:I.value}}}(g)});return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}}(n.filters);i&&(e.structuredQuery.where=i);var a=function(h){if(0!==h.length)return h.map(function(v){return{field:ff((g=v).field),direction:FD(g.dir)};var g})}(n.orderBy);a&&(e.structuredQuery.orderBy=a);var c,v,h,u=(v=n.limit,t.gt||Nh(v)?v:{value:v});return null!==u&&(e.structuredQuery.limit=u),n.startAt&&(e.structuredQuery.startAt={before:(c=n.startAt).inclusive,values:c.position}),n.endAt&&(e.structuredQuery.endAt={before:!(h=n.endAt).inclusive,values:h.position}),e}function _E(t){var n=pE(t.parent),e=t.structuredQuery,r=e.from?e.from.length:0,i=null;if(r>0){cn(1===r);var a=e.from[0];a.allDescendants?i=a.collectionId:n=n.child(a.collectionId)}var u=[];e.where&&(u=kE(e.where));var c=[];e.orderBy&&(c=e.orderBy.map(function(I){return new Iu(hf((D=I).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));var I,D,h=null;e.limit&&(h=Nh(D="object"==typeof(I=e.limit)?I.value:I)?null:D);var v=null;e.startAt&&(v=function(I){return new ks(I.values||[],!!I.before)}(e.startAt));var g=null;return e.endAt&&(g=function(I){return new ks(I.values||[],!I.before)}(e.endAt)),U0(n,i,c,u,h,"F",v,g)}function kE(t){return t?void 0!==t.unaryFilter?[bE(t)]:void 0!==t.fieldFilter?[wE(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(n){return kE(n)}).reduce(function(n,e){return n.concat(e)}):jt():[]}function FD(t){return DD[t]}function jv(t){return SD[t]}function ff(t){return{fieldPath:t.canonicalString()}}function hf(t){return _r.fromServerFormat(t.fieldPath)}function wE(t){return Ti.create(hf(t.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(t.fieldFilter.op),t.fieldFilter.value)}function bE(t){switch(t.unaryFilter.op){case"IS_NAN":var n=hf(t.unaryFilter.field);return Ti.create(n,"==",{doubleValue:NaN});case"IS_NULL":var e=hf(t.unaryFilter.field);return Ti.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=hf(t.unaryFilter.field);return Ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=hf(t.unaryFilter.field);return Ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}function EE(t){var n=[];return t.fields.forEach(function(e){return n.push(e.canonicalString())}),{fieldPaths:n}}function IE(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ba(t){for(var n="",e=0;e<t.length;e++)n.length>0&&(n=CE(n)),n=y1(t.get(e),n);return CE(n)}function y1(t,n){for(var e=n,r=t.length,i=0;i<r;i++){var a=t.charAt(i);switch(a){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=a}}return e}function CE(t){return t+"\x01\x01"}function Tu(t){var n=t.length;if(cn(n>=2),2===n)return cn("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),_n.emptyPath();for(var e=n-2,r=[],i="",a=0;a<n;){var u=t.indexOf("\x01",a);switch((u<0||u>e)&&jt(),t.charAt(u+1)){case"\x01":var c=t.substring(a,u),h=void 0;0===i.length?h=c:(h=i+=c,i=""),r.push(h);break;case"\x10":i+=t.substring(a,u),i+="\0";break;case"\x11":i+=t.substring(a,u+1);break;default:jt()}a=u+2}return new _n(r)}var TE=["userId","batchId"];function pm(t,n){return[t,ba(n)]}function DE(t,n,e){return[t,ba(n),e]}var Hv={},UD=["prefixPath","collectionGroup","readTime","documentId"],i_=["prefixPath","collectionGroup","documentId"],Du=["collectionGroup","readTime","prefixPath","documentId"],xD=["canonicalId","targetId"],BD=["targetId","path"],Wv=["path","targetId"],VD=["collectionId","parent"],jD=["indexId","uid"],HD=["uid","sequenceNumber"],gm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mm=["indexId","uid","orderedDocumentKey"],WD=["userId","collectionPath","documentId"],GD=["userId","collectionPath","largestBatchId"],SE=["userId","collectionGroup","largestBatchId"],a_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),s_=[].concat((0,on.Z)(a_),["documentOverlays"]),u_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],AE=u_,zD=[].concat(AE,["indexConfiguration","indexState","indexEntries"]),RE=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).ie=r,a.currentSequenceNumber=i,a}return(0,A.Z)(e)}(Cv);function Ni(t,n){var e=Mt(t);return El.O(e.ie,n)}var o_=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.batchId=n,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}return(0,A.Z)(t,[{key:"applyToRemoteDocument",value:function(e,r){for(var i=r.mutationResults,a=0;a<this.mutations.length;a++){var u=this.mutations[a];u.key.isEqual(e.key)&&wD(u,e,i[a])}}},{key:"applyToLocalView",value:function(e,r){var a,i=(0,P.Z)(this.baseMutations);try{for(i.s();!(a=i.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(r=lf(u,e,r,this.localWriteTime))}}catch(g){i.e(g)}finally{i.f()}var h,c=(0,P.Z)(this.mutations);try{for(c.s();!(h=c.n()).done;){var v=h.value;v.key.isEqual(e.key)&&(r=lf(v,e,r,this.localWriteTime))}}catch(g){c.e(g)}finally{c.f()}return r}},{key:"applyToLocalDocumentSet",value:function(e,r){var i=this,a=hm();return this.mutations.forEach(function(u){var c=e.get(u.key),h=c.overlayedDocument,v=i.applyToLocalView(h,c.mutatedFields),g=aE(h,v=r.has(u.key)?null:v);null!==g&&a.set(u.key,g),h.isValidDocument()||h.convertToNoDocument(vn.min())}),a}},{key:"keys",value:function(){return this.mutations.reduce(function(e,r){return e.add(r.key)},bn())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,function(r,i){return K0(r,i)})&&Jc(this.baseMutations,e.baseMutations,function(r,i){return K0(r,i)})}}]),t}(),PE=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.batch=n,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}return(0,A.Z)(t,null,[{key:"from",value:function(e,r,i){cn(e.mutations.length===i.length);for(var a=CD,u=e.mutations,c=0;c<u.length;c++)a=a.insert(u[c].key,i[c].version);return new t(e,r,i,a)}}]),t}(),l_=function(){function t(n,e){(0,R.Z)(this,t),this.largestBatchId=n,this.mutation=e}return(0,A.Z)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),ym=function(){function t(n,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vn.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vn.min(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:oa.EMPTY_BYTE_STRING;(0,R.Z)(this,t),this.target=n,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return(0,A.Z)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,r){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),ME=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.re=n});function OE(t,n){var i,a,e=n.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:_m(n.readTime),hasCommittedMutations:n.hasCommittedMutations};if(n.isFoundDocument())r.document={name:zh(i=t.re,(a=n).key),fields:a.data.value.mapValue.fields,updateTime:Gh(i,a.version.toTimestamp())};else if(n.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Pl(n.version)};else{if(!n.isUnknownDocument())return jt();r.unknownDocument={path:e.path.toArray(),version:Pl(n.version)}}return r}function _m(t){var n=t.toTimestamp();return[n.seconds,n.nanoseconds]}function Pl(t){var n=t.toTimestamp();return{seconds:n.seconds,nanoseconds:n.nanoseconds}}function Io(t){var n=new ar(t.seconds,t.nanoseconds);return vn.fromTimestamp(n)}function Ml(t,n){for(var e=(n.baseMutations||[]).map(function(h){return r_(t.re,h)}),r=0;r<n.mutations.length-1;++r)r+1<n.mutations.length&&void 0!==n.mutations[r+1].transform&&(n.mutations[r].updateTransforms=n.mutations[r+1].transform.fieldTransforms,n.mutations.splice(r+1,1),++r);var u=n.mutations.map(function(h){return r_(t.re,h)}),c=ar.fromMillis(n.localWriteTimeMs);return new o_(n.batchId,c,e,u)}function Gv(t){var r,i,n=Io(t.readTime),e=void 0!==t.lastLimboFreeSnapshotVersion?Io(t.lastLimboFreeSnapshotVersion):vn.min();return void 0!==t.query.documents?(cn(1===(i=t.query).documents.length),r=ts(sf(pE(i.documents[0])))):r=ts(_E(t.query)),new ym(r,t.targetId,0,t.lastListenSequenceNumber,n,e,oa.fromBase64String(t.resumeToken))}function c_(t,n){var i,e=Pl(n.snapshotVersion),r=Pl(n.lastLimboFreeSnapshotVersion);i=Ov(n.target)?mE(t.re,n.target):yE(t.re,n.target);var a=n.resumeToken.toBase64();return{targetId:n.targetId,canonicalId:Al(n.target),readTime:e,resumeToken:a,lastListenSequenceNumber:n.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function km(t){var n=_E({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?V0(n,n.limit,"L"):n}function f_(t,n){return new l_(n.largestBatchId,r_(t.re,n.overlayMutation))}function h_(t,n){var e=n.path.lastSegment();return[t,ba(n.path.popLast()),e]}function d_(t,n,e,r){return{indexId:t,uid:n.uid||"",sequenceNumber:e,readTime:Pl(r.readTime),documentKey:ba(r.documentKey.path),largestBatchId:r.largestBatchId}}var $D=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"getBundleMetadata",value:function(e,r){return v_(e).get(r).next(function(i){if(i)return{id:(a=i).bundleId,createTime:Io(a.createTime),version:a.version};var a})}},{key:"saveBundleMetadata",value:function(e,r){return v_(e).put({bundleId:(i=r).id,createTime:Pl(Zi(i.createTime)),version:i.version});var i}},{key:"getNamedQuery",value:function(e,r){return ZE(e).get(r).next(function(i){if(i)return{name:(a=i).name,query:km(a.bundledQuery),readTime:Io(a.readTime)};var a})}},{key:"saveNamedQuery",value:function(e,r){return ZE(e).put({name:(i=r).name,readTime:Pl(Zi(i.readTime)),bundledQuery:i.bundledQuery});var i}}]),t}();function v_(t){return Ni(t,"bundles")}function ZE(t){return Ni(t,"namedQueries")}var ca=function(){function t(n,e){(0,R.Z)(this,t),this.It=n,this.userId=e}return(0,A.Z)(t,[{key:"getOverlay",value:function(e,r){var i=this;return Su(e).get(h_(this.userId,r)).next(function(a){return a?f_(i.It,a):null})}},{key:"getOverlays",value:function(e,r){var i=this,a=Ks();return rt.forEach(r,function(u){return i.getOverlay(e,u).next(function(c){null!==c&&a.set(u,c)})}).next(function(){return a})}},{key:"saveOverlays",value:function(e,r,i){var a=this,u=[];return i.forEach(function(c,h){var v=new l_(r,h);u.push(a.ue(e,v))}),rt.waitFor(u)}},{key:"removeOverlaysForBatchId",value:function(e,r,i){var a=this,u=new Set;r.forEach(function(h){return u.add(ba(h.getCollectionPath()))});var c=[];return u.forEach(function(h){var v=IDBKeyRange.bound([a.userId,h,i],[a.userId,h,i+1],!1,!0);c.push(Su(e).Y("collectionPathOverlayIndex",v))}),rt.waitFor(c)}},{key:"getOverlaysForCollection",value:function(e,r,i){var a=this,u=Ks(),c=ba(r),h=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Su(e).W("collectionPathOverlayIndex",h).next(function(v){var I,g=(0,P.Z)(v);try{for(g.s();!(I=g.n()).done;){var L=f_(a.It,I.value);u.set(L.getKey(),L)}}catch(x){g.e(x)}finally{g.f()}return u})}},{key:"getOverlaysForCollectionGroup",value:function(e,r,i,a){var h,u=this,c=Ks(),v=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Su(e).Z({index:"collectionGroupOverlayIndex",range:v},function(g,I,D){var L=f_(u.It,I);c.size()<a||L.largestBatchId===h?(c.set(L.getKey(),L),h=L.largestBatchId):D.done()}).next(function(){return c})}},{key:"ue",value:function(e,r){return Su(e).put((i=this.It,c=h_(a=this.userId,(u=r).mutation.key),{userId:a,collectionPath:(h=(0,ye.Z)(c,3))[1],documentId:h[2],collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vv(i.re,u.mutation)}));var i,a,u,c,h}}],[{key:"oe",value:function(e,r){return new t(e,r.uid||"")}}]),t}();function Su(t){return Ni(t,"documentOverlays")}var df=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"ce",value:function(e,r){this.ae(e,r),r.he()}},{key:"ae",value:function(e,r){if("nullValue"in e)this.le(r,5);else if("booleanValue"in e)this.le(r,10),r.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(r,15),r.fe(Br(e.integerValue));else if("doubleValue"in e){var i=Br(e.doubleValue);isNaN(i)?this.le(r,13):(this.le(r,15),Lh(i)?r.fe(0):r.fe(i))}else if("timestampValue"in e){var a=e.timestampValue;this.le(r,20),"string"==typeof a?r.de(a):(r.de("".concat(a.seconds||"")),r.fe(a.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,r),this.we(r);else if("bytesValue"in e)this.le(r,30),r.me(rf(e.bytesValue)),this.we(r);else if("referenceValue"in e)this.ge(e.referenceValue,r);else if("geoPointValue"in e){var u=e.geoPointValue;this.le(r,45),r.fe(u.latitude||0),r.fe(u.longitude||0)}else"mapValue"in e?Ub(e)?this.le(r,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,r),this.we(r)):"arrayValue"in e?(this.pe(e.arrayValue,r),this.we(r)):jt()}},{key:"_e",value:function(e,r){this.le(r,25),this.Ie(e,r)}},{key:"Ie",value:function(e,r){r.de(e)}},{key:"ye",value:function(e,r){var i=e.fields||{};this.le(r,55);for(var a=0,u=Object.keys(i);a<u.length;a++){var c=u[a];this._e(c,r),this.ae(i[c],r)}}},{key:"pe",value:function(e,r){var i=e.values||[];this.le(r,50);var u,a=(0,P.Z)(i);try{for(a.s();!(u=a.n()).done;)this.ae(u.value,r)}catch(h){a.e(h)}finally{a.f()}}},{key:"ge",value:function(e,r){var i=this;this.le(r,37),Nt.fromName(e).path.forEach(function(a){i.le(r,60),i.Ie(a,r)})}},{key:"le",value:function(e,r){e.fe(r)}},{key:"we",value:function(e){e.fe(2)}}]),t}();function qD(t){if(0===t)return 8;var n=0;return t>>4==0&&(n+=4,t<<=4),t>>6==0&&(n+=2,t<<=2),t>>7==0&&(n+=1),n}function YD(t){var n=64-function(e){for(var r=0,i=0;i<8;++i){var a=qD(255&e[i]);if(r+=a,8!==a)break}return r}(t);return Math.ceil(n/8)}df.Te=new df;var _1=function(){function t(){(0,R.Z)(this,t),this.buffer=new Uint8Array(1024),this.position=0}return(0,A.Z)(t,[{key:"Ee",value:function(e){for(var r=e[Symbol.iterator](),i=r.next();!i.done;)this.Ae(i.value),i=r.next();this.Re()}},{key:"be",value:function(e){for(var r=e[Symbol.iterator](),i=r.next();!i.done;)this.Pe(i.value),i=r.next();this.ve()}},{key:"Ve",value:function(e){var i,r=(0,P.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value,u=a.charCodeAt(0);if(u<128)this.Ae(u);else if(u<2048)this.Ae(960|u>>>6),this.Ae(128|63&u);else if(a<"\ud800"||"\udbff"<a)this.Ae(480|u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u);else{var c=a.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}}catch(h){r.e(h)}finally{r.f()}this.Re()}},{key:"Se",value:function(e){var i,r=(0,P.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value,u=a.charCodeAt(0);if(u<128)this.Pe(u);else if(u<2048)this.Pe(960|u>>>6),this.Pe(128|63&u);else if(a<"\ud800"||"\udbff"<a)this.Pe(480|u>>>12),this.Pe(128|63&u>>>6),this.Pe(128|63&u);else{var c=a.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}}catch(h){r.e(h)}finally{r.f()}this.ve()}},{key:"De",value:function(e){var r=this.Ce(e),i=YD(r);this.xe(1+i),this.buffer[this.position++]=255&i;for(var a=r.length-i;a<r.length;++a)this.buffer[this.position++]=255&r[a]}},{key:"Ne",value:function(e){var r=this.Ce(e),i=YD(r);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(var a=r.length-i;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var u,c,r=(u=e,(c=new DataView(new ArrayBuffer(8))).setFloat64(0,u,!1),new Uint8Array(c.buffer)),i=0!=(128&r[0]);r[0]^=i?255:128;for(var a=1;a<r.length;++a)r[a]^=i?255:0;return r}},{key:"Ae",value:function(e){var r=255&e;0===r?(this.Me(0),this.Me(255)):255===r?(this.Me(255),this.Me(0)):this.Me(r)}},{key:"Pe",value:function(e){var r=255&e;0===r?(this.Fe(0),this.Fe(255)):255===r?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var r=e+this.position;if(!(r<=this.buffer.length)){var i=2*this.buffer.length;i<r&&(i=r);var a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}}]),t}(),NE=function(){function t(n){(0,R.Z)(this,t),this.Be=n}return(0,A.Z)(t,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),t}(),LE=function(){function t(n){(0,R.Z)(this,t),this.Be=n}return(0,A.Z)(t,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),t}(),Co=function(){function t(){(0,R.Z)(this,t),this.Be=new _1,this.Le=new NE(this.Be),this.Ue=new LE(this.Be)}return(0,A.Z)(t,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),t}(),zv=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.indexId=n,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}return(0,A.Z)(t,[{key:"Ke",value:function(){var e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(r);return i.set(this.directionalValue,0),r!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}}]),t}();function To(t,n){var e=t.indexId-n.indexId;return 0!==e||0!==(e=FE(t.arrayValue,n.arrayValue))||0!==(e=FE(t.directionalValue,n.directionalValue))?e:Nt.comparator(t.documentKey,n.documentKey)}function FE(t,n){for(var e=0;e<t.length&&e<n.length;++e){var r=t[e]-n[e];if(0!==r)return r}return t.length-n.length}var UE=function(){function t(n){(0,R.Z)(this,t),this.collectionId=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment(),this.Ge=n.orderBy,this.Qe=[];var r,e=(0,P.Z)(n.filters);try{for(e.s();!(r=e.n()).done;){var a=r.value;a.dt()?this.je=a:this.Qe.push(a)}}catch(u){e.e(u)}finally{e.f()}}return(0,A.Z)(t,[{key:"We",value:function(e){var r=P0(e);if(void 0!==r&&!this.ze(r))return!1;for(var i=ef(e),a=0,u=0;a<i.length&&this.ze(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.je){var c=i[a];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++a}for(;a<i.length;++a)if(u>=this.Ge.length||!this.Je(this.Ge[u++],i[a]))return!1;return!0}},{key:"ze",value:function(e){var i,r=(0,P.Z)(this.Qe);try{for(r.s();!(i=r.n()).done;)if(this.He(i.value,e))return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"He",value:function(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}},{key:"Je",value:function(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}]),t}(),QD=function(){function t(){(0,R.Z)(this,t),this.Ye=new p_}return(0,A.Z)(t,[{key:"addToCollectionParentIndex",value:function(e,r){return this.Ye.add(r),rt.resolve()}},{key:"getCollectionParents",value:function(e,r){return rt.resolve(this.Ye.getEntries(r))}},{key:"addFieldIndex",value:function(e,r){return rt.resolve()}},{key:"deleteFieldIndex",value:function(e,r){return rt.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,r){return rt.resolve(null)}},{key:"getIndexType",value:function(e,r){return rt.resolve(0)}},{key:"getFieldIndexes",value:function(e,r){return rt.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return rt.resolve(null)}},{key:"getMinOffset",value:function(e,r){return rt.resolve(bu.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,r){return rt.resolve(bu.min())}},{key:"updateCollectionGroup",value:function(e,r,i){return rt.resolve()}},{key:"updateIndexEntries",value:function(e,r){return rt.resolve()}}]),t}(),p_=function(){function t(){(0,R.Z)(this,t),this.index={}}return(0,A.Z)(t,[{key:"add",value:function(e){var r=e.lastSegment(),i=e.popLast(),a=this.index[r]||new Er(_n.comparator),u=!a.has(i);return this.index[r]=a.add(i),u}},{key:"has",value:function(e){var r=e.lastSegment(),i=e.popLast(),a=this.index[r];return a&&a.has(i)}},{key:"getEntries",value:function(e){return(this.index[e]||new Er(_n.comparator)).toArray()}}]),t}(),wm=new Uint8Array(0),g_=function(){function t(n,e){(0,R.Z)(this,t),this.user=n,this.databaseId=e,this.Xe=new p_,this.Ze=new wo(function(r){return Al(r)},function(r,i){return Bh(r,i)}),this.uid=n.uid||""}return(0,A.Z)(t,[{key:"addToCollectionParentIndex",value:function(e,r){var i=this;if(!this.Xe.has(r)){var a=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(function(){i.Xe.add(r)});var c={collectionId:a,parent:ba(u)};return m_(e).put(c)}return rt.resolve()}},{key:"getCollectionParents",value:function(e,r){var i=[],a=IDBKeyRange.bound([r,""],[R0(r),""],!1,!0);return m_(e).W(a).next(function(u){var h,c=(0,P.Z)(u);try{for(c.s();!(h=c.n()).done;){var v=h.value;if(v.collectionId!==r)break;i.push(Tu(v.parent))}}catch(g){c.e(g)}finally{c.f()}return i})}},{key:"addFieldIndex",value:function(e,r){var v,i=this,a=vf(e),u={indexId:(v=r).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(function(g){return[g.fieldPath.canonicalString(),g.kind]})};delete u.indexId;var c=a.add(u);if(r.indexState){var h=pf(e);return c.next(function(v){h.put(d_(v,i.user,r.indexState.sequenceNumber,r.indexState.offset))})}return c.next()}},{key:"deleteFieldIndex",value:function(e,r){var i=vf(e),a=pf(e),u=Kh(e);return i.delete(r.indexId).next(function(){return a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))}).next(function(){return u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,r){var i=this,a=Kh(e),u=!0,c=new Map;return rt.forEach(this.tn(r),function(h){return i.en(e,h).next(function(v){u&&(u=!!v),c.set(h,v)})}).next(function(){if(u){var h=bn(),v=[];return rt.forEach(c,function(g,I){var D;bt("IndexedDbIndexManager","Using index ".concat((D=g,"id=".concat(D.indexId,"|cg=").concat(D.collectionGroup,"|f=").concat(D.fields.map(function(ze){return"".concat(ze.fieldPath,":").concat(ze.kind)}).join(",")))," to execute ").concat(Al(r)));var L=function(ze,Tt){var Et=P0(Tt);if(void 0===Et)return null;var en,yt=(0,P.Z)(sm(ze,Et.fieldPath));try{for(yt.s();!(en=yt.n()).done;){var Kt=en.value;switch(Kt.op){case"array-contains-any":return Kt.value.arrayValue.values||[];case"array-contains":return[Kt.value]}}}catch(Xn){yt.e(Xn)}finally{yt.f()}return null}(I,g),x=function(ze,Tt){var en,Et=new Map,yt=(0,P.Z)(ef(Tt));try{for(yt.s();!(en=yt.n()).done;){var li,Kt=en.value,Xn=(0,P.Z)(sm(ze,Kt.fieldPath));try{for(Xn.s();!(li=Xn.n()).done;){var Hl=li.value;switch(Hl.op){case"==":case"in":Et.set(Kt.fieldPath.canonicalString(),Hl.value);break;case"not-in":case"!=":return Et.set(Kt.fieldPath.canonicalString(),Hl.value),Array.from(Et.values())}}}catch(Hk){Xn.e(Hk)}finally{Xn.f()}}}catch(Hk){yt.e(Hk)}finally{yt.f()}return null}(I,g),K=function(ze,Tt){var Kt,Et=[],yt=!0,en=(0,P.Z)(ef(Tt));try{for(en.s();!(Kt=en.n()).done;){var Xn=Kt.value,li=0===Xn.kind?jb(ze,Xn.fieldPath,ze.startAt):Hb(ze,Xn.fieldPath,ze.startAt);Et.push(li.value),yt&&(yt=li.inclusive)}}catch(Hl){en.e(Hl)}finally{en.f()}return new ks(Et,yt)}(I,g),ne=function(ze,Tt){var Kt,Et=[],yt=!0,en=(0,P.Z)(ef(Tt));try{for(en.s();!(Kt=en.n()).done;){var Xn=Kt.value,li=0===Xn.kind?Hb(ze,Xn.fieldPath,ze.endAt):jb(ze,Xn.fieldPath,ze.endAt);Et.push(li.value),yt&&(yt=li.inclusive)}}catch(Hl){en.e(Hl)}finally{en.f()}return new ks(Et,yt)}(I,g),re=i.nn(g,I,K),Pe=i.nn(g,I,ne),Ve=i.sn(g,I,x),Ye=i.rn(g.indexId,L,re,K.inclusive,Pe,ne.inclusive,Ve);return rt.forEach(Ye,function(ze){return a.J(ze,r.limit).next(function(Tt){Tt.forEach(function(Et){var yt=Nt.fromSegments(Et.documentKey);h.has(yt)||(h=h.add(yt),v.push(yt))})})})}).next(function(){return v})}return rt.resolve(null)})}},{key:"tn",value:function(e){var r=this.Ze.get(e);return r||(this.Ze.set(e,r=[e]),r)}},{key:"rn",value:function(e,r,i,a,u,c,h){for(var v=this,g=(null!=r?r.length:1)*Math.max(i.length,u.length),I=g/(null!=r?r.length:1),D=[],L=function(ne){var re=r?v.on(r[ne/I]):wm,Pe=v.un(e,re,i[ne%I],a),Ve=v.cn(e,re,u[ne%I],c),Ye=h.map(function(ze){return v.un(e,re,ze,!0)});D.push.apply(D,(0,on.Z)(v.createRange(Pe,Ve,Ye)))},x=0;x<g;++x)L(x);return D}},{key:"un",value:function(e,r,i,a){var u=new zv(e,Nt.empty(),r,i);return a?u:u.Ke()}},{key:"cn",value:function(e,r,i,a){var u=new zv(e,Nt.empty(),r,i);return a?u.Ke():u}},{key:"en",value:function(e,r){var i=new UE(r),a=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(function(u){var v,c=null,h=(0,P.Z)(u);try{for(h.s();!(v=h.n()).done;){var g=v.value;i.We(g)&&(!c||g.fields.length>c.fields.length)&&(c=g)}}catch(I){h.e(I)}finally{h.f()}return c})}},{key:"getIndexType",value:function(e,r){var i=this,a=2;return rt.forEach(this.tn(r),function(u){return i.en(e,u).next(function(c){c?0!==a&&c.fields.length<function(h){var D,v=new Er(_r.comparator),g=!1,I=(0,P.Z)(h.filters);try{for(I.s();!(D=I.n()).done;){var x=D.value;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?g=!0:v=v.add(x.field))}}catch(Pe){I.e(Pe)}finally{I.f()}var ne,K=(0,P.Z)(h.orderBy);try{for(K.s();!(ne=K.n()).done;){var re=ne.value;re.field.isKeyField()||(v=v.add(re.field))}}catch(Pe){K.e(Pe)}finally{K.f()}return v.size+(g?1:0)}(u)&&(a=1):a=0})}).next(function(){return a})}},{key:"an",value:function(e,r){var u,i=new Co,a=(0,P.Z)(ef(e));try{for(a.s();!(u=a.n()).done;){var c=u.value,h=r.data.field(c.fieldPath);if(null==h)return null;var v=i.qe(c.kind);df.Te.ce(h,v)}}catch(g){a.e(g)}finally{a.f()}return i.$e()}},{key:"on",value:function(e){var r=new Co;return df.Te.ce(e,r.qe(0)),r.$e()}},{key:"hn",value:function(e,r){var u,i=new Co;return df.Te.ce(Fh(this.databaseId,r),i.qe(0===(u=ef(e)).length?0:u[u.length-1].kind)),i.$e()}},{key:"sn",value:function(e,r,i){if(null===i)return[];var a=[];a.push(new Co);var h,u=0,c=(0,P.Z)(ef(e));try{for(c.s();!(h=c.n()).done;){var D,v=h.value,g=i[u++],I=(0,P.Z)(a);try{for(I.s();!(D=I.n()).done;){var L=D.value;if(this.ln(r,v.fieldPath)&&Uh(g))a=this.fn(a,v,g);else{var x=L.qe(v.kind);df.Te.ce(g,x)}}}catch(K){I.e(K)}finally{I.f()}}}catch(K){c.e(K)}finally{c.f()}return this.dn(a)}},{key:"nn",value:function(e,r,i){return this.sn(e,r,i.position)}},{key:"dn",value:function(e){for(var r=[],i=0;i<e.length;++i)r[i]=e[i].$e();return r}},{key:"fn",value:function(e,r,i){var h,a=(0,on.Z)(e),u=[],c=(0,P.Z)(i.arrayValue.values||[]);try{for(c.s();!(h=c.n()).done;){var I,v=h.value,g=(0,P.Z)(a);try{for(g.s();!(I=g.n()).done;){var D=I.value,L=new Co;L.seed(D.$e()),df.Te.ce(v,L.qe(r.kind)),u.push(L)}}catch(x){g.e(x)}finally{g.f()}}}catch(x){c.e(x)}finally{c.f()}return u}},{key:"ln",value:function(e,r){return!!e.filters.find(function(i){return i instanceof Ti&&i.field.isEqual(r)&&("in"===i.op||"not-in"===i.op)})}},{key:"getFieldIndexes",value:function(e,r){var i=this,a=vf(e),u=pf(e);return(r?a.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):a.W()).next(function(c){var h=[];return rt.forEach(c,function(v){return u.get([v.indexId,i.uid]).next(function(g){var I,D,L,x;h.push((I=v,L=(D=g)?new tf(D.sequenceNumber,new bu(Io(D.readTime),new Nt(Tu(D.documentKey)),D.largestBatchId)):tf.empty(),x=I.fields.map(function(K){var ne=(0,ye.Z)(K,2),Pe=ne[1];return new Qg(_r.fromServerFormat(ne[0]),Pe)}),new Iv(I.indexId,I.collectionGroup,x,L)))})}).next(function(){return h})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(r){return 0===r.length?null:(r.sort(function(i,a){var u=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==u?u:mn(i.collectionGroup,a.collectionGroup)}),r[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,r,i){var a=this,u=vf(e),c=pf(e);return this._n(e).next(function(h){return u.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(function(v){return rt.forEach(v,function(g){return c.put(d_(g.indexId,a.user,h,i))})})})}},{key:"updateIndexEntries",value:function(e,r){var i=this,a=new Map;return rt.forEach(r,function(u,c){var h=a.get(u.collectionGroup);return(h?rt.resolve(h):i.getFieldIndexes(e,u.collectionGroup)).next(function(v){return a.set(u.collectionGroup,v),rt.forEach(v,function(g){return i.wn(e,u,g).next(function(I){var D=i.mn(c,g);return I.isEqual(D)?rt.resolve():i.gn(e,c,g,I,D)})})})})}},{key:"yn",value:function(e,r,i,a){return Kh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(i,r.key),documentKey:r.key.path.toArray()})}},{key:"pn",value:function(e,r,i,a){return Kh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(i,r.key),r.key.path.toArray()])}},{key:"wn",value:function(e,r,i){var a=Kh(e),u=new Er(To);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,r)])},function(c,h){u=u.add(new zv(i.indexId,r,h.arrayValue,h.directionalValue))}).next(function(){return u})}},{key:"mn",value:function(e,r){var i=new Er(To),a=this.an(r,e);if(null==a)return i;var u=P0(r);if(null!=u){var c=e.data.field(u.fieldPath);if(Uh(c)){var v,h=(0,P.Z)(c.arrayValue.values||[]);try{for(h.s();!(v=h.n()).done;)i=i.add(new zv(r.indexId,e.key,this.on(v.value),a))}catch(I){h.e(I)}finally{h.f()}}}else i=i.add(new zv(r.indexId,e.key,wm,a));return i}},{key:"gn",value:function(e,r,i,a,u){var c=this;bt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);var h=[];return function(v,g,I,D,L){for(var x=v.getIterator(),K=g.getIterator(),ne=Mh(x),re=Mh(K);ne||re;){var Pe=!1,Ve=!1;if(ne&&re){var Ye=I(ne,re);Ye<0?Ve=!0:Ye>0&&(Pe=!0)}else null!=ne?Ve=!0:Pe=!0;Pe?(D(re),re=Mh(K)):Ve?(L(ne),ne=Mh(x)):(ne=Mh(x),re=Mh(K))}}(a,u,To,function(v){h.push(c.yn(e,r,i,v))},function(v){h.push(c.pn(e,r,i,v))}),rt.waitFor(h)}},{key:"_n",value:function(e){var r=1;return pf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(i,a,u){u.done(),r=a.sequenceNumber+1}).next(function(){return r})}},{key:"createRange",value:function(e,r,i){i=i.sort(function(L,x){return To(L,x)}).filter(function(L,x,K){return!x||0!==To(L,K[x-1])});var a=[];a.push(e);var c,u=(0,P.Z)(i);try{for(u.s();!(c=u.n()).done;){var h=c.value,v=To(h,e),g=To(h,r);if(0===v)a[0]=e.Ke();else if(v>0&&g<0)a.push(h),a.push(h.Ke());else if(g>0)break}}catch(L){u.e(L)}finally{u.f()}a.push(r);for(var I=[],D=0;D<a.length;D+=2)I.push(IDBKeyRange.bound([a[D].indexId,this.uid,a[D].arrayValue,a[D].directionalValue,wm,[]],[a[D+1].indexId,this.uid,a[D+1].arrayValue,a[D+1].directionalValue,wm,[]]));return I}},{key:"getMinOffsetFromCollectionGroup",value:function(e,r){return this.getFieldIndexes(e,r).next(XD)}},{key:"getMinOffset",value:function(e,r){var i=this;return rt.mapArray(this.tn(r),function(a){return i.en(e,a).next(function(u){return u||jt()})}).next(XD)}}]),t}();function m_(t){return Ni(t,"collectionParents")}function Kh(t){return Ni(t,"indexEntries")}function vf(t){return Ni(t,"indexConfiguration")}function pf(t){return Ni(t,"indexState")}function XD(t){cn(0!==t.length);for(var n=t[0].indexState.offset,e=n.largestBatchId,r=1;r<t.length;r++){var i=t[r].indexState.offset;Xg(i,n)<0&&(n=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new bu(n.readTime,n.documentKey,e)}var y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Au=function(){function t(n,e,r){(0,R.Z)(this,t),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}return(0,A.Z)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();function __(t,n,e){var r=t.store("mutations"),i=t.store("documentMutations"),a=[],u=IDBKeyRange.only(e.batchId),c=0,h=r.Z({range:u},function(x,K,ne){return c++,ne.delete()});a.push(h.next(function(){cn(1===c)}));var I,v=[],g=(0,P.Z)(e.mutations);try{for(g.s();!(I=g.n()).done;){var D=I.value,L=DE(n,D.key.path,e.batchId);a.push(i.delete(L)),v.push(D.key)}}catch(x){g.e(x)}finally{g.f()}return rt.waitFor(a).next(function(){return v})}function Do(t){if(!t)return 0;var n;if(t.document)n=t.document;else if(t.unknownDocument)n=t.unknownDocument;else{if(!t.noDocument)throw jt();n=t.noDocument}return JSON.stringify(n).length}Au.DEFAULT_COLLECTION_PERCENTILE=10,Au.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Au.DEFAULT=new Au(41943040,Au.DEFAULT_COLLECTION_PERCENTILE,Au.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Au.DISABLED=new Au(-1,0,0);var xE=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.userId=n,this.It=e,this.indexManager=r,this.referenceDelegate=i,this.In={}}return(0,A.Z)(t,[{key:"checkEmpty",value:function(e){var r=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ru(e).Z({index:"userMutationsIndex",range:i},function(a,u,c){r=!1,c.done()}).next(function(){return r})}},{key:"addMutationBatch",value:function(e,r,i,a){var u=this,c=Kv(e),h=Ru(e);return h.add({}).next(function(v){cn("number"==typeof v);var K,Pe,Ve,Ye,ze,Tt,g=new o_(v,r,i,a),I=(Pe=u.It,Ve=u.userId,ze=(Ye=g).baseMutations.map(function(Et){return Vv(Pe.re,Et)}),Tt=Ye.mutations.map(function(Et){return Vv(Pe.re,Et)}),{userId:Ve,batchId:Ye.batchId,localWriteTimeMs:Ye.localWriteTime.toMillis(),baseMutations:ze,mutations:Tt}),D=[],L=new Er(function(Pe,Ve){return mn(Pe.canonicalString(),Ve.canonicalString())}),x=(0,P.Z)(a);try{for(x.s();!(K=x.n()).done;){var ne=K.value,re=DE(u.userId,ne.key.path,v);L=L.add(ne.key.path.popLast()),D.push(h.put(I)),D.push(c.put(re,Hv))}}catch(Pe){x.e(Pe)}finally{x.f()}return L.forEach(function(Pe){D.push(u.indexManager.addToCollectionParentIndex(e,Pe))}),e.addOnCommittedListener(function(){u.In[v]=g.keys()}),rt.waitFor(D).next(function(){return g})})}},{key:"lookupMutationBatch",value:function(e,r){var i=this;return Ru(e).get(r).next(function(a){return a?(cn(a.userId===i.userId),Ml(i.It,a)):null})}},{key:"Tn",value:function(e,r){var i=this;return this.In[r]?rt.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(function(a){if(a){var u=a.keys();return i.In[r]=u,u}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,r){var i=this,a=r+1,u=IDBKeyRange.lowerBound([this.userId,a]),c=null;return Ru(e).Z({index:"userMutationsIndex",range:u},function(h,v,g){v.userId===i.userId&&(cn(v.batchId>=a),c=Ml(i.It,v)),g.done()}).next(function(){return c})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Ru(e).Z({index:"userMutationsIndex",range:r,reverse:!0},function(a,u,c){i=u.batchId,c.done()}).next(function(){return i})}},{key:"getAllMutationBatches",value:function(e){var r=this,i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ru(e).W("userMutationsIndex",i).next(function(a){return a.map(function(u){return Ml(r.It,u)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,r){var i=this,a=pm(this.userId,r.path),u=IDBKeyRange.lowerBound(a),c=[];return Kv(e).Z({range:u},function(h,v,g){var I=(0,ye.Z)(h,3),D=I[0],x=I[2],K=Tu(I[1]);if(D===i.userId&&r.path.isEqual(K))return Ru(e).get(x).next(function(ne){if(!ne)throw jt();cn(ne.userId===i.userId),c.push(Ml(i.It,ne))});g.done()}).next(function(){return c})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,r){var i=this,a=new Er(mn),u=[];return r.forEach(function(c){var h=pm(i.userId,c.path),v=IDBKeyRange.lowerBound(h),g=Kv(e).Z({range:v},function(I,D,L){var x=(0,ye.Z)(I,3),K=x[0],re=x[2],Pe=Tu(x[1]);K===i.userId&&c.path.isEqual(Pe)?a=a.add(re):L.done()});u.push(g)}),rt.waitFor(u).next(function(){return i.En(e,a)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,r){var i=this,a=r.path,u=a.length+1,c=pm(this.userId,a),h=IDBKeyRange.lowerBound(c),v=new Er(mn);return Kv(e).Z({range:h},function(g,I,D){var L=(0,ye.Z)(g,3),x=L[0],ne=L[2],re=Tu(L[1]);x===i.userId&&a.isPrefixOf(re)?re.length===u&&(v=v.add(ne)):D.done()}).next(function(){return i.En(e,v)})}},{key:"En",value:function(e,r){var i=this,a=[],u=[];return r.forEach(function(c){u.push(Ru(e).get(c).next(function(h){if(null===h)throw jt();cn(h.userId===i.userId),a.push(Ml(i.It,h))}))}),rt.waitFor(u).next(function(){return a})}},{key:"removeMutationBatch",value:function(e,r){var i=this;return __(e.ie,this.userId,r).next(function(a){return e.addOnCommittedListener(function(){i.An(r.batchId)}),rt.forEach(a,function(u){return i.referenceDelegate.markPotentiallyOrphaned(e,u)})})}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var r=this;return this.checkEmpty(e).next(function(i){if(!i)return rt.resolve();var a=IDBKeyRange.lowerBound([r.userId]),u=[];return Kv(e).Z({range:a},function(c,h,v){if(c[0]===r.userId){var g=Tu(c[1]);u.push(g)}else v.done()}).next(function(){cn(0===u.length)})})}},{key:"containsKey",value:function(e,r){return k_(e,this.userId,r)}},{key:"Rn",value:function(e){var r=this;return BE(e).get(this.userId).next(function(i){return i||{userId:r.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"oe",value:function(e,r,i,a){return cn(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",r,i,a)}}]),t}();function k_(t,n,e){var r=pm(n,e.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return Kv(t).Z({range:a,X:!0},function(c,h,v){var g=(0,ye.Z)(c,3);g[0]===n&&g[1]===i&&(u=!0),v.done()}).next(function(){return u})}function Ru(t){return Ni(t,"mutations")}function Kv(t){return Ni(t,"documentMutations")}function BE(t){return Ni(t,"mutationQueues")}var w_=function(){function t(n){(0,R.Z)(this,t),this.bn=n}return(0,A.Z)(t,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new t(0)}},{key:"vn",value:function(){return new t(-1)}}]),t}(),JD=function(){function t(n,e){(0,R.Z)(this,t),this.referenceDelegate=n,this.It=e}return(0,A.Z)(t,[{key:"allocateTargetId",value:function(e){var r=this;return this.Vn(e).next(function(i){var a=new w_(i.highestTargetId);return i.highestTargetId=a.next(),r.Sn(e,i).next(function(){return i.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next(function(r){return vn.fromTimestamp(new ar(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next(function(r){return r.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,r,i){var a=this;return this.Vn(e).next(function(u){return u.highestListenSequenceNumber=r,i&&(u.lastRemoteSnapshotVersion=i.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),a.Sn(e,u)})}},{key:"addTargetData",value:function(e,r){var i=this;return this.Dn(e,r).next(function(){return i.Vn(e).next(function(a){return a.targetCount+=1,i.Cn(r,a),i.Sn(e,a)})})}},{key:"updateTargetData",value:function(e,r){return this.Dn(e,r)}},{key:"removeTargetData",value:function(e,r){var i=this;return this.removeMatchingKeysForTargetId(e,r.targetId).next(function(){return $h(e).delete(r.targetId)}).next(function(){return i.Vn(e)}).next(function(a){return cn(a.targetCount>0),a.targetCount-=1,i.Sn(e,a)})}},{key:"removeTargets",value:function(e,r,i){var a=this,u=0,c=[];return $h(e).Z(function(h,v){var g=Gv(v);g.sequenceNumber<=r&&null===i.get(g.targetId)&&(u++,c.push(a.removeTargetData(e,g)))}).next(function(){return rt.waitFor(c)}).next(function(){return u})}},{key:"forEachTarget",value:function(e,r){return $h(e).Z(function(i,a){var u=Gv(a);r(u)})}},{key:"Vn",value:function(e){return VE(e).get("targetGlobalKey").next(function(r){return cn(null!==r),r})}},{key:"Sn",value:function(e,r){return VE(e).put("targetGlobalKey",r)}},{key:"Dn",value:function(e,r){return $h(e).put(c_(this.It,r))}},{key:"Cn",value:function(e,r){var i=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,i=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}},{key:"getTargetCount",value:function(e){return this.Vn(e).next(function(r){return r.targetCount})}},{key:"getTargetData",value:function(e,r){var i=Al(r),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),u=null;return $h(e).Z({range:a,index:"queryTargetsIndex"},function(c,h,v){var g=Gv(h);Bh(r,g.target)&&(u=g,v.done())}).next(function(){return u})}},{key:"addMatchingKeys",value:function(e,r,i){var a=this,u=[],c=So(e);return r.forEach(function(h){var v=ba(h.path);u.push(c.put({targetId:i,path:v})),u.push(a.referenceDelegate.addReference(e,i,h))}),rt.waitFor(u)}},{key:"removeMatchingKeys",value:function(e,r,i){var a=this,u=So(e);return rt.forEach(r,function(c){var h=ba(c.path);return rt.waitFor([u.delete([i,h]),a.referenceDelegate.removeReference(e,i,c)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,r){var i=So(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return i.delete(a)}},{key:"getMatchingKeysForTargetId",value:function(e,r){var i=IDBKeyRange.bound([r],[r+1],!1,!0),a=So(e),u=bn();return a.Z({range:i,X:!0},function(c,h,v){var g=Tu(c[1]),I=new Nt(g);u=u.add(I)}).next(function(){return u})}},{key:"containsKey",value:function(e,r){var i=ba(r.path),a=IDBKeyRange.bound([i],[R0(i)],!1,!0),u=0;return So(e).Z({index:"documentTargetsIndex",X:!0,range:a},function(c,h,v){0!==(0,ye.Z)(c,2)[0]&&(u++,v.done())}).next(function(){return u>0})}},{key:"se",value:function(e,r){return $h(e).get(r).next(function(i){return i?Gv(i):null})}}]),t}();function $h(t){return Ni(t,"targets")}function VE(t){return Ni(t,"targetGlobal")}function So(t){return Ni(t,"targetDocuments")}function b_(t,n){var e=(0,ye.Z)(t,2),r=e[0],i=e[1],a=(0,ye.Z)(n,2),c=a[1],h=mn(r,a[0]);return 0===h?mn(i,c):h}var eS=function(){function t(n){(0,R.Z)(this,t),this.xn=n,this.buffer=new Er(b_),this.Nn=0}return(0,A.Z)(t,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{var i=this.buffer.last();b_(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),t}(),jE=function(){function t(n,e,r){(0,R.Z)(this,t),this.garbageCollector=n,this.asyncQueue=e,this.localStore=r,this.On=null}return(0,A.Z)(t,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var r=this;bt("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r.On=null,u.prev=1,u.next=4,r.localStore.collectGarbage(r.garbageCollector);case 4:u.next=14;break;case 6:if(u.prev=6,u.t0=u.catch(1),!yo(u.t0)){u.next=12;break}bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u.t0),u.next=14;break;case 12:return u.next=14,bl(u.t0);case 14:return u.next=16,r.Fn(3e5);case 16:case"end":return u.stop()}},i,null,[[1,6]])})))}}]),t}(),HE=function(){function t(n,e){(0,R.Z)(this,t),this.$n=n,this.params=e}return(0,A.Z)(t,[{key:"calculateTargetCount",value:function(e,r){return this.$n.Bn(e).next(function(i){return Math.floor(r/100*i)})}},{key:"nthSequenceNumber",value:function(e,r){var i=this;if(0===r)return rt.resolve(La.at);var a=new eS(r);return this.$n.forEachTarget(e,function(u){return a.Mn(u.sequenceNumber)}).next(function(){return i.$n.Ln(e,function(u){return a.Mn(u)})}).next(function(){return a.maxValue})}},{key:"removeTargets",value:function(e,r,i){return this.$n.removeTargets(e,r,i)}},{key:"removeOrphanedDocuments",value:function(e,r){return this.$n.removeOrphanedDocuments(e,r)}},{key:"collect",value:function(e,r){var i=this;return-1===this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(y_)):this.getCacheSize(e).next(function(a){return a<i.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(a," is lower than threshold ").concat(i.params.cacheSizeCollectionThreshold)),y_):i.Un(e,r)})}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,r){var a,u,c,h,v,g,I,i=this,D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(L){return L>i.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(i.params.maximumSequenceNumbersToCollect," from ").concat(L)),u=i.params.maximumSequenceNumbersToCollect):u=L,h=Date.now(),i.nthSequenceNumber(e,u)}).next(function(L){return a=L,v=Date.now(),i.removeTargets(e,a,r)}).next(function(L){return c=L,g=Date.now(),i.removeOrphanedDocuments(e,a)}).next(function(L){return I=Date.now(),Yg()<=gs.in.DEBUG&&bt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(h-D,"ms\n\tDetermined least recently used ").concat(u," in ")+(v-h)+"ms\n"+"\tRemoved ".concat(c," targets in ")+(g-v)+"ms\n"+"\tRemoved ".concat(L," documents in ")+(I-g)+"ms\n"+"Total Duration: ".concat(I-D,"ms")),rt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:L})})}}]),t}(),tS=function(){function t(n,e){(0,R.Z)(this,t),this.db=n,this.garbageCollector=new HE(this,e)}return(0,A.Z)(t,[{key:"Bn",value:function(e){var r=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(function(i){return r.next(function(a){return i+a})})}},{key:"qn",value:function(e){var r=0;return this.Ln(e,function(i){r++}).next(function(){return r})}},{key:"forEachTarget",value:function(e,r){return this.db.getTargetCache().forEachTarget(e,r)}},{key:"Ln",value:function(e,r){return this.Kn(e,function(i,a){return r(a)})}},{key:"addReference",value:function(e,r,i){return bm(e,i)}},{key:"removeReference",value:function(e,r,i){return bm(e,i)}},{key:"removeTargets",value:function(e,r,i){return this.db.getTargetCache().removeTargets(e,r,i)}},{key:"markPotentiallyOrphaned",value:function(e,r){return bm(e,r)}},{key:"Gn",value:function(e,r){return a=r,u=!1,BE(i=e).tt(function(c){return k_(i,c,a).next(function(h){return h&&(u=!0),rt.resolve(!h)})}).next(function(){return u});var i,a,u}},{key:"removeOrphanedDocuments",value:function(e,r){var i=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],c=0;return this.Kn(e,function(h,v){if(v<=r){var g=i.Gn(e,h).next(function(I){if(!I)return c++,a.getEntry(e,h).next(function(){return a.removeEntry(h,vn.min()),So(e).delete([0,ba(h.path)])})});u.push(g)}}).next(function(){return rt.waitFor(u)}).next(function(){return a.apply(e)}).next(function(){return c})}},{key:"removeTarget",value:function(e,r){var i=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}},{key:"updateLimboDocument",value:function(e,r){return bm(e,r)}},{key:"Kn",value:function(e,r){var a,i=So(e),u=La.at;return i.Z({index:"documentTargetsIndex"},function(c,h){var v=(0,ye.Z)(c,2),D=h.path,L=h.sequenceNumber;0===v[0]?(u!==La.at&&r(new Nt(Tu(a)),u),u=L,a=D):u=La.at}).next(function(){u!==La.at&&r(new Nt(Tu(a)),u)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),t}();function bm(t,n){return So(t).put((r=t.currentSequenceNumber,{targetId:0,path:ba(n.path),sequenceNumber:r}));var r}var E_=function(){function t(){(0,R.Z)(this,t),this.changes=new wo(function(n){return n.toString()},function(n,e){return n.isEqual(e)}),this.changesApplied=!1}return(0,A.Z)(t,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,r){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(r))}},{key:"getEntry",value:function(e,r){this.assertNotApplied();var i=this.changes.get(r);return void 0!==i?rt.resolve(i):this.getFromCache(e,r)}},{key:"getEntries",value:function(e,r){return this.getAllFromCache(e,r)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),t}(),nS=function(){function t(n){(0,R.Z)(this,t),this.It=n}return(0,A.Z)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,r,i){return Ol(e).put(i)}},{key:"removeEntry",value:function(e,r,i){return Ol(e).delete((u=i,[(c=r.path.toArray()).slice(0,c.length-2),c[c.length-2],_m(u),c[c.length-1]]));var u,c}},{key:"updateMetadata",value:function(e,r){var i=this;return this.getMetadata(e).next(function(a){return a.byteSize+=r,i.Qn(e,a)})}},{key:"getEntry",value:function(e,r){var i=this,a=oi.newInvalidDocument(r);return Ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($v(r))},function(u,c){a=i.jn(r,c)}).next(function(){return a})}},{key:"Wn",value:function(e,r){var i=this,a={size:0,document:oi.newInvalidDocument(r)};return Ol(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($v(r))},function(u,c){a={document:i.jn(r,c),size:Do(c)}}).next(function(){return a})}},{key:"getEntries",value:function(e,r){var i=this,a=Fa();return this.zn(e,r,function(u,c){var h=i.jn(u,c);a=a.insert(u,h)}).next(function(){return a})}},{key:"Hn",value:function(e,r){var i=this,a=Fa(),u=new Ci(Nt.comparator);return this.zn(e,r,function(c,h){var v=i.jn(c,h);a=a.insert(c,v),u=u.insert(c,Do(h))}).next(function(){return{documents:a,Jn:u}})}},{key:"zn",value:function(e,r,i){if(r.isEmpty())return rt.resolve();var a=new Er(rS);r.forEach(function(v){return a=a.add(v)});var u=IDBKeyRange.bound($v(a.first()),$v(a.last())),c=a.getIterator(),h=c.getNext();return Ol(e).Z({index:"documentKeyIndex",range:u},function(v,g,I){for(var D=Nt.fromSegments([].concat((0,on.Z)(g.prefixPath),[g.collectionGroup,g.documentId]));h&&rS(h,D)<0;)i(h,null),h=c.getNext();h&&h.isEqual(D)&&(i(h,g),h=c.hasNext()?c.getNext():null),h?I.j($v(h)):I.done()}).next(function(){for(;h;)i(h,null),h=c.hasNext()?c.getNext():null})}},{key:"getAllFromCollection",value:function(e,r,i){var a=this,u=[r.popLast().toArray(),r.lastSegment(),_m(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ol(e).W(IDBKeyRange.bound(u,c,!0)).next(function(h){var I,v=Fa(),g=(0,P.Z)(h);try{for(g.s();!(I=g.n()).done;){var D=I.value,L=a.jn(Nt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);v=v.insert(L.key,L)}}catch(x){g.e(x)}finally{g.f()}return v})}},{key:"getAllFromCollectionGroup",value:function(e,r,i,a){var u=this,c=Fa(),h=GE(r,i),v=GE(r,bu.max());return Ol(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,v,!0)},function(g,I,D){var L=u.jn(Nt.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);(c=c.insert(L.key,L)).size===a&&D.done()}).next(function(){return c})}},{key:"newChangeBuffer",value:function(e){return new WE(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(r){return r.byteSize})}},{key:"getMetadata",value:function(e){return C_(e).get("remoteDocumentGlobalKey").next(function(r){return cn(!!r),r})}},{key:"Qn",value:function(e,r){return C_(e).put("remoteDocumentGlobalKey",r)}},{key:"jn",value:function(e,r){if(r){var i=function KD(t,n){var e,c,h;if(n.document)e=gE(t.re,n.document,!!n.hasCommittedMutations);else if(n.noDocument){var r=Nt.fromSegments(n.noDocument.path),i=Io(n.noDocument.readTime);e=oi.newNoDocument(r,i),n.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!n.unknownDocument)return jt();var a=Nt.fromSegments(n.unknownDocument.path),u=Io(n.unknownDocument.version);e=oi.newUnknownDocument(a,u)}return n.readTime&&e.setReadTime((h=new ar((c=n.readTime)[0],c[1]),vn.fromTimestamp(h))),e}(this.It,r);if(!i.isNoDocument()||!i.version.isEqual(vn.min()))return i}return oi.newInvalidDocument(e)}}]),t}();function I_(t){return new nS(t)}var WE=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).Yn=r,a.trackRemovals=i,a.Xn=new wo(function(u){return u.toString()},function(u,c){return u.isEqual(c)}),a}return(0,A.Z)(e,[{key:"applyChanges",value:function(i){var a=this,u=[],c=0,h=new Er(function(v,g){return mn(v.canonicalString(),g.canonicalString())});return this.changes.forEach(function(v,g){var I=a.Xn.get(v);if(u.push(a.Yn.removeEntry(i,v,I.readTime)),g.isValidDocument()){var D=OE(a.Yn.It,g);h=h.add(v.path.popLast());var L=Do(D);c+=L-I.size,u.push(a.Yn.addEntry(i,v,D))}else if(c-=I.size,a.trackRemovals){var x=OE(a.Yn.It,g.convertToNoDocument(vn.min()));u.push(a.Yn.addEntry(i,v,x))}}),h.forEach(function(v){u.push(a.Yn.indexManager.addToCollectionParentIndex(i,v))}),u.push(this.Yn.updateMetadata(i,c)),rt.waitFor(u)}},{key:"getFromCache",value:function(i,a){var u=this;return this.Yn.Wn(i,a).next(function(c){return u.Xn.set(a,{size:c.size,readTime:c.document.readTime}),c.document})}},{key:"getAllFromCache",value:function(i,a){var u=this;return this.Yn.Hn(i,a).next(function(c){var h=c.documents;return c.Jn.forEach(function(g,I){u.Xn.set(g,{size:I,readTime:h.get(g).readTime})}),h})}}]),e}(E_);function C_(t){return Ni(t,"remoteDocumentGlobal")}function Ol(t){return Ni(t,"remoteDocumentsV14")}function $v(t){var n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],n[n.length-1]]}function GE(t,n){var e=n.documentKey.path.toArray();return[t,_m(n.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function rS(t,n){for(var e=t.path.toArray(),r=n.path.toArray(),i=0,a=0;a<e.length-2&&a<r.length-2;++a)if(i=mn(e[a],r[a]))return i;return(i=mn(e.length,r.length))||(i=mn(e[e.length-2],r[r.length-2]))||mn(e[e.length-1],r[r.length-1])}var zE=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.overlayedDocument=n,this.mutatedFields=e}),iS=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.remoteDocumentCache=n,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}return(0,A.Z)(t,[{key:"getDocument",value:function(e,r){var i=this,a=null;return this.documentOverlayCache.getOverlay(e,r).next(function(u){return i.getBaseDocument(e,r,a=u)}).next(function(u){return null!==a&&lf(a.mutation,u,Eu.empty(),ar.now()),u})}},{key:"getDocuments",value:function(e,r){var i=this;return this.remoteDocumentCache.getEntries(e,r).next(function(a){return i.getLocalViewOfDocuments(e,a,bn()).next(function(){return a})})}},{key:"getLocalViewOfDocuments",value:function(e,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bn(),u=Ks();return this.populateOverlays(e,u,r).next(function(){return i.computeViews(e,r,u,a).next(function(c){var h=cf();return c.forEach(function(v,g){h=h.insert(v,g.overlayedDocument)}),h})})}},{key:"getOverlayedDocuments",value:function(e,r){var i=this,a=Ks();return this.populateOverlays(e,a,r).next(function(){return i.computeViews(e,r,a,bn())})}},{key:"populateOverlays",value:function(e,r,i){var a=[];return i.forEach(function(u){r.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(function(u){u.forEach(function(c,h){r.set(c,h)})})}},{key:"computeViews",value:function(e,r,i,a){var u=Fa(),c=xv(),h=xv();return r.forEach(function(v,g){var I=i.get(g.key);a.has(g.key)&&(void 0===I||I.mutation instanceof ko)?u=u.insert(g.key,g):void 0!==I&&(c.set(g.key,I.mutation.getFieldMask()),lf(I.mutation,g,I.mutation.getFieldMask(),ar.now()))}),this.recalculateAndSaveOverlays(e,u).next(function(v){return v.forEach(function(g,I){return c.set(g,I)}),r.forEach(function(g,I){var D;return h.set(g,new zE(I,null!==(D=c.get(g))&&void 0!==D?D:null))}),h})}},{key:"recalculateAndSaveOverlays",value:function(e,r){var i=this,a=xv(),u=new Ci(function(h,v){return h-v}),c=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(function(h){var g,v=(0,P.Z)(h);try{var I=function(){var L=g.value;L.keys().forEach(function(x){var K=r.get(x);if(null!==K){var ne=a.get(x)||Eu.empty();ne=L.applyToLocalView(K,ne),a.set(x,ne);var re=(u.get(L.batchId)||bn()).add(x);u=u.insert(L.batchId,re)}})};for(v.s();!(g=v.n()).done;)I()}catch(D){v.e(D)}finally{v.f()}}).next(function(){for(var h=[],v=u.getReverseIterator(),g=function(){var D=v.getNext(),L=D.key,x=D.value,K=hm();x.forEach(function(ne){if(!c.has(ne)){var re=aE(r.get(ne),a.get(ne));null!==re&&K.set(ne,re),c=c.add(ne)}}),h.push(i.documentOverlayCache.saveOverlays(e,L,K))};v.hasNext();)g();return rt.waitFor(h)}).next(function(){return a})}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,r){var i=this;return this.remoteDocumentCache.getEntries(e,r).next(function(a){return i.recalculateAndSaveOverlays(e,a)})}},{key:"getDocumentsMatchingQuery",value:function(e,r,i){return Nt.isDocumentKey((a=r).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):B0(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i):this.getDocumentsMatchingCollectionQuery(e,r,i);var a}},{key:"getNextDocuments",value:function(e,r,i,a){var u=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,a).next(function(c){var h=a-c.size>0?u.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,a-c.size):rt.resolve(Ks()),v=-1,g=c;return h.next(function(I){return rt.forEach(I,function(D,L){return v<L.largestBatchId&&(v=L.largestBatchId),c.get(D)?rt.resolve():u.getBaseDocument(e,D,L).next(function(x){g=g.insert(D,x)})}).next(function(){return u.populateOverlays(e,I,c)}).next(function(){return u.computeViews(e,g,I,bn())}).next(function(D){return{batchId:v,changes:fm(D)}})})})}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,r){return this.getDocument(e,new Nt(r)).next(function(i){var a=cf();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,r,i){var a=this,u=r.collectionGroup,c=cf();return this.indexManager.getCollectionParents(e,u).next(function(h){return rt.forEach(h,function(v){var I,D,g=(I=r,D=v.child(u),new Cu(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));return a.getDocumentsMatchingCollectionQuery(e,g,i).next(function(I){I.forEach(function(D,L){c=c.insert(D,L)})})}).next(function(){return c})})}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,r,i){var u,a=this;return this.remoteDocumentCache.getAllFromCollection(e,r.path,i).next(function(c){return u=c,a.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId)}).next(function(c){c.forEach(function(v,g){var I=g.getKey();null===u.get(I)&&(u=u.insert(I,oi.newInvalidDocument(I)))});var h=cf();return u.forEach(function(v,g){var I=c.get(v);void 0!==I&&lf(I.mutation,g,Eu.empty(),ar.now()),H0(r,g)&&(h=h.insert(v,g))}),h})}},{key:"getBaseDocument",value:function(e,r,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,r):rt.resolve(oi.newInvalidDocument(r))}}]),t}(),k1=function(){function t(n){(0,R.Z)(this,t),this.It=n,this.Zn=new Map,this.ts=new Map}return(0,A.Z)(t,[{key:"getBundleMetadata",value:function(e,r){return rt.resolve(this.Zn.get(r))}},{key:"saveBundleMetadata",value:function(e,r){var i;return this.Zn.set(r.id,{id:(i=r).id,version:i.version,createTime:Zi(i.createTime)}),rt.resolve()}},{key:"getNamedQuery",value:function(e,r){return rt.resolve(this.ts.get(r))}},{key:"saveNamedQuery",value:function(e,r){return this.ts.set(r.name,{name:(i=r).name,query:km(i.bundledQuery),readTime:Zi(i.readTime)}),rt.resolve();var i}}]),t}(),w1=function(){function t(){(0,R.Z)(this,t),this.overlays=new Ci(Nt.comparator),this.es=new Map}return(0,A.Z)(t,[{key:"getOverlay",value:function(e,r){return rt.resolve(this.overlays.get(r))}},{key:"getOverlays",value:function(e,r){var i=this,a=Ks();return rt.forEach(r,function(u){return i.getOverlay(e,u).next(function(c){null!==c&&a.set(u,c)})}).next(function(){return a})}},{key:"saveOverlays",value:function(e,r,i){var a=this;return i.forEach(function(u,c){a.ue(e,r,c)}),rt.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,r,i){var a=this,u=this.es.get(i);return void 0!==u&&(u.forEach(function(c){return a.overlays=a.overlays.remove(c)}),this.es.delete(i)),rt.resolve()}},{key:"getOverlaysForCollection",value:function(e,r,i){for(var a=Ks(),u=r.length+1,c=new Nt(r.child("")),h=this.overlays.getIteratorFrom(c);h.hasNext();){var v=h.getNext().value,g=v.getKey();if(!r.isPrefixOf(g.path))break;g.path.length===u&&v.largestBatchId>i&&a.set(v.getKey(),v)}return rt.resolve(a)}},{key:"getOverlaysForCollectionGroup",value:function(e,r,i,a){for(var u=new Ci(function(D,L){return D-L}),c=this.overlays.getIterator();c.hasNext();){var h=c.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>i){var v=u.get(h.largestBatchId);null===v&&(v=Ks(),u=u.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}for(var g=Ks(),I=u.getIterator();I.hasNext()&&(I.getNext().value.forEach(function(D,L){return g.set(D,L)}),!(g.size()>=a)););return rt.resolve(g)}},{key:"ue",value:function(e,r,i){var a=this.overlays.get(i.key);if(null!==a){var u=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new l_(r,i));var c=this.es.get(r);void 0===c&&(c=bn(),this.es.set(r,c)),this.es.set(r,c.add(i.key))}}]),t}(),KE=function(){function t(){(0,R.Z)(this,t),this.ns=new Er(qi.ss),this.rs=new Er(qi.os)}return(0,A.Z)(t,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,r){var i=new qi(e,r);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}},{key:"us",value:function(e,r){var i=this;e.forEach(function(a){return i.addReference(a,r)})}},{key:"removeReference",value:function(e,r){this.cs(new qi(e,r))}},{key:"hs",value:function(e,r){var i=this;e.forEach(function(a){return i.removeReference(a,r)})}},{key:"ls",value:function(e){var r=this,i=new Nt(new _n([])),a=new qi(i,e),u=new qi(i,e+1),c=[];return this.rs.forEachInRange([a,u],function(h){r.cs(h),c.push(h.key)}),c}},{key:"fs",value:function(){var e=this;this.ns.forEach(function(r){return e.cs(r)})}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var r=new Nt(new _n([])),i=new qi(r,e),a=new qi(r,e+1),u=bn();return this.rs.forEachInRange([i,a],function(c){u=u.add(c.key)}),u}},{key:"containsKey",value:function(e){var r=new qi(e,0),i=this.ns.firstAfterOrEqual(r);return null!==i&&e.isEqual(i.key)}}]),t}(),qi=function(){function t(n,e){(0,R.Z)(this,t),this.key=n,this._s=e}return(0,A.Z)(t,null,[{key:"ss",value:function(e,r){return Nt.comparator(e.key,r.key)||mn(e._s,r._s)}},{key:"os",value:function(e,r){return mn(e._s,r._s)||Nt.comparator(e.key,r.key)}}]),t}(),b1=function(){function t(n,e){(0,R.Z)(this,t),this.indexManager=n,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Er(qi.ss)}return(0,A.Z)(t,[{key:"checkEmpty",value:function(e){return rt.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,r,i,a){var u=this.ws;this.ws++;var c=new o_(u,r,i,a);this.mutationQueue.push(c);var v,h=(0,P.Z)(a);try{for(h.s();!(v=h.n()).done;){var g=v.value;this.gs=this.gs.add(new qi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast())}}catch(I){h.e(I)}finally{h.f()}return rt.resolve(c)}},{key:"lookupMutationBatch",value:function(e,r){return rt.resolve(this.ys(r))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,r){var a=this.ps(r+1),u=a<0?0:a;return rt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return rt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return rt.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,r){var i=this,a=new qi(r,0),u=new qi(r,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([a,u],function(h){var v=i.ys(h._s);c.push(v)}),rt.resolve(c)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,r){var i=this,a=new Er(mn);return r.forEach(function(u){var c=new qi(u,0),h=new qi(u,Number.POSITIVE_INFINITY);i.gs.forEachInRange([c,h],function(v){a=a.add(v._s)})}),rt.resolve(this.Is(a))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,r){var i=r.path,a=i.length+1,u=i;Nt.isDocumentKey(u)||(u=u.child(""));var c=new qi(new Nt(u),0),h=new Er(mn);return this.gs.forEachWhile(function(v){var g=v.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(h=h.add(v._s)),!0)},c),rt.resolve(this.Is(h))}},{key:"Is",value:function(e){var r=this,i=[];return e.forEach(function(a){var u=r.ys(a);null!==u&&i.push(u)}),i}},{key:"removeMutationBatch",value:function(e,r){var i=this;cn(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();var a=this.gs;return rt.forEach(r.mutations,function(u){var c=new qi(u.key,r.batchId);return a=a.delete(c),i.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(function(){i.gs=a})}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,r){var i=new qi(r,0),a=this.gs.firstAfterOrEqual(i);return rt.resolve(r.isEqual(a&&a.key))}},{key:"performConsistencyCheck",value:function(e){return rt.resolve()}},{key:"Ts",value:function(e,r){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}]),t}(),E1=function(){function t(n){(0,R.Z)(this,t),this.Es=n,this.docs=new Ci(Nt.comparator),this.size=0}return(0,A.Z)(t,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,r){var i=r.key,a=this.docs.get(i),u=a?a.size:0,c=this.Es(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}},{key:"removeEntry",value:function(e){var r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}},{key:"getEntry",value:function(e,r){var i=this.docs.get(r);return rt.resolve(i?i.document.mutableCopy():oi.newInvalidDocument(r))}},{key:"getEntries",value:function(e,r){var i=this,a=Fa();return r.forEach(function(u){var c=i.docs.get(u);a=a.insert(u,c?c.document.mutableCopy():oi.newInvalidDocument(u))}),rt.resolve(a)}},{key:"getAllFromCollection",value:function(e,r,i){for(var a=Fa(),u=new Nt(r.child("")),c=this.docs.getIteratorFrom(u);c.hasNext();){var h=c.getNext(),v=h.key,g=h.value.document;if(!r.isPrefixOf(v.path))break;v.path.length>r.length+1||Xg(O0(g),i)<=0||(a=a.insert(g.key,g.mutableCopy()))}return rt.resolve(a)}},{key:"getAllFromCollectionGroup",value:function(e,r,i,a){jt()}},{key:"As",value:function(e,r){return rt.forEach(this.docs,function(i){return r(i)})}},{key:"newChangeBuffer",value:function(e){return new I1(this)}},{key:"getSize",value:function(e){return rt.resolve(this.size)}}]),t}(),I1=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).Yn=r,i}return(0,A.Z)(e,[{key:"applyChanges",value:function(i){var a=this,u=[];return this.changes.forEach(function(c,h){h.isValidDocument()?u.push(a.Yn.addEntry(i,h)):a.Yn.removeEntry(c)}),rt.waitFor(u)}},{key:"getFromCache",value:function(i,a){return this.Yn.getEntry(i,a)}},{key:"getAllFromCache",value:function(i,a){return this.Yn.getEntries(i,a)}}]),e}(E_),Em=function(){function t(n){(0,R.Z)(this,t),this.persistence=n,this.Rs=new wo(function(e){return Al(e)},Bh),this.lastRemoteSnapshotVersion=vn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new KE,this.targetCount=0,this.vs=w_.Pn()}return(0,A.Z)(t,[{key:"forEachTarget",value:function(e,r){return this.Rs.forEach(function(i,a){return r(a)}),rt.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return rt.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return rt.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),rt.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.bs&&(this.bs=r),rt.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var r=e.targetId;r>this.highestTargetId&&(this.vs=new w_(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,r){return this.Dn(r),this.targetCount+=1,rt.resolve()}},{key:"updateTargetData",value:function(e,r){return this.Dn(r),rt.resolve()}},{key:"removeTargetData",value:function(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,rt.resolve()}},{key:"removeTargets",value:function(e,r,i){var a=this,u=0,c=[];return this.Rs.forEach(function(h,v){v.sequenceNumber<=r&&null===i.get(v.targetId)&&(a.Rs.delete(h),c.push(a.removeMatchingKeysForTargetId(e,v.targetId)),u++)}),rt.waitFor(c).next(function(){return u})}},{key:"getTargetCount",value:function(e){return rt.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,r){var i=this.Rs.get(r)||null;return rt.resolve(i)}},{key:"addMatchingKeys",value:function(e,r,i){return this.Ps.us(r,i),rt.resolve()}},{key:"removeMatchingKeys",value:function(e,r,i){this.Ps.hs(r,i);var a=this.persistence.referenceDelegate,u=[];return a&&r.forEach(function(c){u.push(a.markPotentiallyOrphaned(e,c))}),rt.waitFor(u)}},{key:"removeMatchingKeysForTargetId",value:function(e,r){return this.Ps.ls(r),rt.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,r){var i=this.Ps.ds(r);return rt.resolve(i)}},{key:"containsKey",value:function(e,r){return rt.resolve(this.Ps.containsKey(r))}}]),t}(),aS=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.Vs={},this.overlays={},this.Ss=new La(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=n(this),this.Cs=new Em(this),this.indexManager=new QD,this.remoteDocumentCache=new E1(function(i){return r.referenceDelegate.xs(i)}),this.It=new ME(e),this.Ns=new k1(this.It)}return(0,A.Z)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var r=this.overlays[e.toKey()];return r||(r=new w1,this.overlays[e.toKey()]=r),r}},{key:"getMutationQueue",value:function(e,r){var i=this.Vs[e.toKey()];return i||(i=new b1(r,this.referenceDelegate),this.Vs[e.toKey()]=i),i}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,r,i){var a=this;bt("MemoryPersistence","Starting transaction:",e);var u=new $E(this.Ss.next());return this.referenceDelegate.ks(),i(u).next(function(c){return a.referenceDelegate.Ms(u).next(function(){return c})}).toPromise().then(function(c){return u.raiseOnCommittedEvent(),c})}},{key:"Os",value:function(e,r){return rt.or(Object.values(this.Vs).map(function(i){return function(){return i.containsKey(e,r)}}))}}]),t}(),$E=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).currentSequenceNumber=r,i}return(0,A.Z)(e)}(Cv),qv=function(){function t(n){(0,R.Z)(this,t),this.persistence=n,this.Fs=new KE,this.$s=null}return(0,A.Z)(t,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw jt()}},{key:"addReference",value:function(e,r,i){return this.Fs.addReference(i,r),this.Ls.delete(i.toString()),rt.resolve()}},{key:"removeReference",value:function(e,r,i){return this.Fs.removeReference(i,r),this.Ls.add(i.toString()),rt.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,r){return this.Ls.add(r.toString()),rt.resolve()}},{key:"removeTarget",value:function(e,r){var i=this;this.Fs.ls(r.targetId).forEach(function(u){return i.Ls.add(u.toString())});var a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,r.targetId).next(function(u){u.forEach(function(c){return i.Ls.add(c.toString())})}).next(function(){return a.removeTargetData(e,r)})}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Ls,function(a){var u=Nt.fromPath(a);return r.Us(e,u).next(function(c){c||i.removeEntry(u,vn.min())})}).next(function(){return r.$s=null,i.apply(e)})}},{key:"updateLimboDocument",value:function(e,r){var i=this;return this.Us(e,r).next(function(a){a?i.Ls.delete(r.toString()):i.Ls.add(r.toString())})}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,r){var i=this;return rt.or([function(){return rt.resolve(i.Fs.containsKey(r))},function(){return i.persistence.getTargetCache().containsKey(e,r)},function(){return i.persistence.Os(e,r)}])}}],[{key:"Bs",value:function(e){return new t(e)}}]),t}(),qE=function(){function t(n){(0,R.Z)(this,t),this.It=n}return(0,A.Z)(t,[{key:"$",value:function(e,r,i,a){var v,u=this,c=new em("createOrUpgrade",r);i<1&&a>=1&&(e.createObjectStore("owner"),(v=e).createObjectStore("mutationQueues",{keyPath:"userId"}),v.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TE,{unique:!0}),v.createObjectStore("documentMutations"),T_(e),function(v){v.createObjectStore("remoteDocuments")}(e));var h=rt.resolve();return i<3&&a>=3&&(0!==i&&(function(v){v.deleteObjectStore("targetDocuments"),v.deleteObjectStore("targets"),v.deleteObjectStore("targetGlobal")}(e),T_(e)),h=h.next(function(){return function(v){var g=v.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vn.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",I)}(c)})),i<4&&a>=4&&(0!==i&&(h=h.next(function(){return function(v,g){return g.store("mutations").W().next(function(I){v.deleteObjectStore("mutations"),v.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TE,{unique:!0});var D=g.store("mutations"),L=I.map(function(x){return D.put(x)});return rt.waitFor(L)})}(e,c)})),h=h.next(function(){!function(v){v.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(h=h.next(function(){return u.qs(c)})),i<6&&a>=6&&(h=h.next(function(){return function(v){v.createObjectStore("remoteDocumentGlobal")}(e),u.Ks(c)})),i<7&&a>=7&&(h=h.next(function(){return u.Gs(c)})),i<8&&a>=8&&(h=h.next(function(){return u.Qs(e,c)})),i<9&&a>=9&&(h=h.next(function(){!function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(h=h.next(function(){return u.js(c)})),i<11&&a>=11&&(h=h.next(function(){(function(v){v.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(v){v.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(h=h.next(function(){!function(v){var g=v.createObjectStore("documentOverlays",{keyPath:WD});g.createIndex("collectionPathOverlayIndex",GD,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",SE,{unique:!1})}(e)})),i<13&&a>=13&&(h=h.next(function(){return function(v){var g=v.createObjectStore("remoteDocumentsV14",{keyPath:UD});g.createIndex("documentKeyIndex",i_),g.createIndex("collectionGroupIndex",Du)}(e)}).next(function(){return u.Ws(e,c)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),i<14&&a>=14&&(h=h.next(function(){return u.zs(e,c)})),i<15&&a>=15&&(h=h.next(function(){return function(v){v.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),v.createObjectStore("indexState",{keyPath:jD}).createIndex("sequenceNumberIndex",HD,{unique:!1}),v.createObjectStore("indexEntries",{keyPath:gm}).createIndex("documentKeyIndex",mm,{unique:!1})}(e)})),h}},{key:"Ks",value:function(e){var r=0;return e.store("remoteDocuments").Z(function(i,a){r+=Do(a)}).next(function(){var i={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}},{key:"qs",value:function(e){var r=this,i=e.store("mutationQueues"),a=e.store("mutations");return i.W().next(function(u){return rt.forEach(u,function(c){var h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return a.W("userMutationsIndex",h).next(function(v){return rt.forEach(v,function(g){cn(g.userId===c.userId);var I=Ml(r.It,g);return __(e,c.userId,I).next(function(){})})})})})}},{key:"Gs",value:function(e){var r=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(a){var u=[];return i.Z(function(c,h){var v=new _n(c),g=[0,ba(v)];u.push(r.get(g).next(function(I){return I?rt.resolve():r.put({targetId:0,path:ba(v),sequenceNumber:a.highestListenSequenceNumber})}))}).next(function(){return rt.waitFor(u)})})}},{key:"Qs",value:function(e,r){e.createObjectStore("collectionParents",{keyPath:VD});var i=r.store("collectionParents"),a=new p_,u=function(h){if(a.add(h)){var v=h.lastSegment(),g=h.popLast();return i.put({collectionId:v,parent:ba(g)})}};return r.store("remoteDocuments").Z({X:!0},function(c,h){var v=new _n(c);return u(v.popLast())}).next(function(){return r.store("documentMutations").Z({X:!0},function(c,h){var L=Tu((0,ye.Z)(c,3)[1]);return u(L.popLast())})})}},{key:"js",value:function(e){var r=this,i=e.store("targets");return i.Z(function(a,u){var c=Gv(u),h=c_(r.It,c);return i.put(h)})}},{key:"Ws",value:function(e,r){var i=r.store("remoteDocuments"),a=[];return i.Z(function(u,c){var g,h=r.store("remoteDocumentsV14"),v=(g=c,g.document?new Nt(_n.fromString(g.document.name).popFirst(5)):g.noDocument?Nt.fromSegments(g.noDocument.path):g.unknownDocument?Nt.fromSegments(g.unknownDocument.path):jt()).path.toArray(),I={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(h.put(I))}).next(function(){return rt.waitFor(a)})}},{key:"zs",value:function(e,r){var i=this,a=r.store("mutations"),u=I_(this.It),c=new aS(qv.Bs,this.It.re);return a.W().next(function(h){var v=new Map;return h.forEach(function(g){var I,D=null!==(I=v.get(g.userId))&&void 0!==I?I:bn();Ml(i.It,g).keys().forEach(function(L){return D=D.add(L)}),v.set(g.userId,D)}),rt.forEach(v,function(g,I){var D=new Ii(I),L=ca.oe(i.It,D),x=c.getIndexManager(D),K=xE.oe(D,i.It,x,c.referenceDelegate);return new iS(u,K,L,x).recalculateAndSaveOverlaysForDocumentKeys(new RE(r,La.at),g).next()})})}}]),t}();function T_(t){t.createObjectStore("targetDocuments",{keyPath:BD}).createIndex("documentTargetsIndex",Wv,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xD,{unique:!0}),t.createObjectStore("targetGlobal")}var YE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",D_=function(){function t(n,e,r,i,a,u,c,h,v,g){var I=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if((0,R.Z)(this,t),this.allowTabSynchronization=n,this.persistenceKey=e,this.clientId=r,this.Hs=a,this.window=u,this.document=c,this.Js=v,this.Ys=g,this.Xs=I,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(D){return Promise.resolve()},!t.C())throw new gt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tS(this,i),this.ii=e+"main",this.It=new ME(h),this.ri=new El(this.ii,this.Xs,new qE(this.It)),this.Cs=new JD(this.referenceDelegate,this.It),this.remoteDocumentCache=I_(this.It),this.Ns=new $D,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===g&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,A.Z)(t,[{key:"start",value:function(){var e=this;return this.ui().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gt(We.FAILED_PRECONDITION,YE);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return e.Cs.getHighestSequenceNumber(r)})}).then(function(r){e.Ss=new La(r,e.Js)}).then(function(){e.Ds=!0}).catch(function(r){return e.ri&&e.ri.close(),Promise.reject(r)})}},{key:"li",value:function(e){var r=this;return this.si=function(){var i=(0,ut.Z)((0,ce.Z)().mark(function a(u){return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!r.started){h.next=2;break}return h.abrupt("return",e(u));case 2:case"end":return h.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var r=(0,ut.Z)((0,ce.Z)().mark(function i(a){return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=null===a.newVersion,!c.t0){c.next=4;break}return c.next=4,e();case 4:case"end":return c.stop()}},i)}));return function(i){return r.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.t0=r.started,!u.t0){u.next=4;break}return u.next=4,r.ui();case 4:case"end":return u.stop()}},i)}))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return Im(r).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.fi(r).next(function(i){i||(e.isPrimary=!1,e.Hs.enqueueRetryable(function(){return e.si(!1)}))})}).next(function(){return e.di(r)}).next(function(i){return e.isPrimary&&!i?e._i(r).next(function(){return!1}):!!i&&e.wi(r).next(function(){return!0})})}).catch(function(r){if(yo(r))return bt("IndexedDbPersistence","Failed to extend owner lease: ",r),e.isPrimary;if(!e.allowTabSynchronization)throw r;return bt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){e.isPrimary!==r&&e.Hs.enqueueRetryable(function(){return e.si(r)}),e.isPrimary=r})}},{key:"fi",value:function(e){var r=this;return qh(e).get("owner").next(function(i){return rt.resolve(r.mi(i))})}},{key:"gi",value:function(e){return Im(e).delete(this.clientId)}},{key:"yi",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var a,u,c,i=this;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){g.next=6;break}return this.ni=Date.now(),g.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(I){var D=Ni(I,"clientMetadata");return D.W().next(function(L){var x=i.Ii(L,18e5),K=L.filter(function(ne){return-1===x.indexOf(ne)});return rt.forEach(K,function(ne){return D.delete(ne.clientId)}).next(function(){return K})})}).catch(function(){return[]});case 4:if(a=g.sent,this.oi){u=(0,P.Z)(a);try{for(u.s();!(c=u.n()).done;)this.oi.removeItem(this.Ti(c.value.clientId))}catch(I){u.e(I)}finally{u.f()}}case 6:case"end":return g.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.ui().then(function(){return e.yi()}).then(function(){return e.hi()})})}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var r=this;return this.Ys?rt.resolve(!0):qh(e).get("owner").next(function(i){if(null!==i&&r.pi(i.leaseTimestampMs,5e3)&&!r.Ei(i.ownerId)){if(r.mi(i)&&r.networkEnabled)return!0;if(!r.mi(i)){if(!i.allowTabSynchronization)throw new gt(We.FAILED_PRECONDITION,YE);return!1}}return!(!r.networkEnabled||!r.inForeground)||Im(e).W().next(function(a){return void 0===r.Ii(a,5e3).find(function(u){return!(r.clientId===u.clientId||!(!r.networkEnabled&&u.networkEnabled||!r.inForeground&&u.inForeground&&r.networkEnabled===u.networkEnabled))})})}).next(function(i){return r.isPrimary!==i&&bt("IndexedDbPersistence","Client ".concat(i?"is":"is not"," eligible for a primary lease.")),i})}},{key:"shutdown",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i=this;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),u.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(c){var h=new RE(c,La.at);return i._i(h).next(function(){return i.gi(h)})});case 7:this.ri.close(),this.Pi();case 9:case"end":return u.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"Ii",value:function(e,r){var i=this;return e.filter(function(a){return i.pi(a.updateTimeMs,r)&&!i.Ei(a.clientId)})}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(r){return Im(r).W().next(function(i){return e.Ii(i,18e5).map(function(a){return a.clientId})})})}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,r){return xE.oe(e,this.It,r,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new g_(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ca.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,r,i){var a=this;bt("IndexedDbPersistence","Starting transaction:",e);var h,v,u="readonly"===r?"readonly":"readwrite",c=15===(h=this.Xs)?zD:14===h?AE:13===h?u_:12===h?s_:11===h?a_:void jt();return this.ri.runTransaction(e,u,c,function(g){return v=new RE(g,a.Ss?a.Ss.next():La.at),"readwrite-primary"===r?a.fi(v).next(function(I){return!!I||a.di(v)}).next(function(I){if(!I)throw xr("Failed to obtain primary lease for action '".concat(e,"'.")),a.isPrimary=!1,a.Hs.enqueueRetryable(function(){return a.si(!1)}),new gt(We.FAILED_PRECONDITION,Z0);return i(v)}).next(function(I){return a.wi(v).next(function(){return I})}):a.Vi(v).next(function(){return i(v)})}).then(function(g){return v.raiseOnCommittedEvent(),g})}},{key:"Vi",value:function(e){var r=this;return qh(e).get("owner").next(function(i){if(null!==i&&r.pi(i.leaseTimestampMs,5e3)&&!r.Ei(i.ownerId)&&!r.mi(i)&&!(r.Ys||r.allowTabSynchronization&&i.allowTabSynchronization))throw new gt(We.FAILED_PRECONDITION,YE)})}},{key:"wi",value:function(e){var r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qh(e).put("owner",r)}},{key:"_i",value:function(e){var r=this,i=qh(e);return i.get("owner").next(function(a){return r.mi(a)?(bt("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):rt.resolve()})}},{key:"pi",value:function(e,r){var i=Date.now();return!(e<i-r||e>i&&(xr("Detected an update time that is in the future: ".concat(e," > ").concat(i)),1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()})},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var r,e=this;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Zs=function(){e.Ai(),(0,X.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&e.Hs.enterRestrictedMode(!0),e.Hs.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var r;try{var i=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return bt("IndexedDbPersistence","Client '".concat(e,"' ").concat(i?"is":"is not"," zombied in LocalStorage")),i}catch(a){return xr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return El.C()}}]),t;var n}();function qh(t){return Ni(t,"owner")}function Im(t){return Ni(t,"clientMetadata")}function Cm(t,n){var e=t.projectId;return t.isDefaultDatabase||(e+="."+t.database),"firestore/"+n+"/"+e+"/"}var C1=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.targetId=n,this.fromCache=e,this.Si=r,this.Di=i}return(0,A.Z)(t,null,[{key:"Ci",value:function(e,r){var c,i=bn(),a=bn(),u=(0,P.Z)(r.docChanges);try{for(u.s();!(c=u.n()).done;){var h=c.value;switch(h.type){case 0:i=i.add(h.doc.key);break;case 1:a=a.add(h.doc.key)}}}catch(v){u.e(v)}finally{u.f()}return new t(e,r.fromCache,i,a)}}]),t}(),sS=function(){function t(){(0,R.Z)(this,t),this.xi=!1}return(0,A.Z)(t,[{key:"initialize",value:function(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,r,i,a){var u=this;return this.ki(e,r).next(function(c){return c||u.Mi(e,r,a,i)}).next(function(c){return c||u.Oi(e,r)})}},{key:"ki",value:function(e,r){var i=this;if(qb(r))return rt.resolve(null);var a=ts(r);return this.indexManager.getIndexType(e,a).next(function(u){return 0===u?null:(null!==r.limit&&1===u&&(r=V0(r,null,"F"),a=ts(r)),i.indexManager.getDocumentsMatchingTarget(e,a).next(function(c){var h=bn.apply(void 0,(0,on.Z)(c));return i.Ni.getDocuments(e,h).next(function(v){return i.indexManager.getMinOffset(e,a).next(function(g){var I=i.Fi(r,v);return i.$i(r,I,h,g.readTime)?i.ki(e,V0(r,null,"F")):i.Bi(e,I,r,g)})})}))})}},{key:"Mi",value:function(e,r,i,a){var u=this;return qb(r)||a.isEqual(vn.min())?this.Oi(e,r):this.Ni.getDocuments(e,i).next(function(c){var h=u.Fi(r,c);return u.$i(r,h,i,a)?u.Oi(e,r):(Yg()<=gs.in.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Vh(r)),u.Bi(e,h,r,Rb(a,-1)))})}},{key:"Fi",value:function(e,r){var i=new Er(W0(e));return r.forEach(function(a,u){H0(e,u)&&(i=i.add(u))}),i}},{key:"$i",value:function(e,r,i,a){if(null===e.limit)return!1;if(i.size!==r.size)return!0;var u="F"===e.limitType?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}},{key:"Oi",value:function(e,r){return Yg()<=gs.in.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",Vh(r)),this.Ni.getDocumentsMatchingQuery(e,r,bu.min())}},{key:"Bi",value:function(e,r,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(function(u){return r.forEach(function(c){u=u.insert(c.key,c)}),u})}}]),t}(),uS=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.persistence=n,this.Li=e,this.It=i,this.Ui=new Ci(mn),this.qi=new wo(function(a){return Al(a)},Bh),this.Ki=new Map,this.Gi=n.getRemoteDocumentCache(),this.Cs=n.getTargetCache(),this.Ns=n.getBundleCache(),this.Qi(r)}return(0,A.Z)(t,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iS(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(i){return e.collect(i,r.Ui)})}}]),t}();function QE(t,n,e,r){return new uS(t,n,e,r)}function Yv(t,n){return S_.apply(this,arguments)}function S_(){return S_=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=Mt(n),a.next=3,r.persistence.runTransaction("Handle user change","readonly",function(u){var c;return r.mutationQueue.getAllMutationBatches(u).next(function(h){return c=h,r.Qi(e),r.mutationQueue.getAllMutationBatches(u)}).next(function(h){var L,v=[],g=[],I=bn(),D=(0,P.Z)(c);try{for(D.s();!(L=D.n()).done;){var x=L.value;v.push(x.batchId);var ne,K=(0,P.Z)(x.mutations);try{for(K.s();!(ne=K.n()).done;)I=I.add(ne.value.key)}catch(yt){K.e(yt)}finally{K.f()}}}catch(yt){D.e(yt)}finally{D.f()}var Ve,Pe=(0,P.Z)(h);try{for(Pe.s();!(Ve=Pe.n()).done;){var Ye=Ve.value;g.push(Ye.batchId);var Tt,ze=(0,P.Z)(Ye.mutations);try{for(ze.s();!(Tt=ze.n()).done;)I=I.add(Tt.value.key)}catch(yt){ze.e(yt)}finally{ze.f()}}}catch(yt){Pe.e(yt)}finally{Pe.f()}return r.localDocuments.getDocuments(u,I).next(function(yt){return{ji:yt,removedBatchIds:v,addedBatchIds:g}})})});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},t)})),S_.apply(this,arguments)}function T1(t,n){var e=Mt(t);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var u,c,h,v,g,I,D,i=n.batch.keys(),a=e.Gi.newChangeBuffer({trackRemovals:!0});return(u=e,c=r,h=n,v=a,g=h.batch,I=g.keys(),D=rt.resolve(),I.forEach(function(L){D=D.next(function(){return v.getEntry(c,L)}).next(function(x){var K=h.docVersions.get(L);cn(null!==K),x.version.compareTo(K)<0&&(g.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),v.addEntry(x)))})}),D.next(function(){return u.mutationQueue.removeMutationBatch(c,g)})).next(function(){return a.apply(r)}).next(function(){return e.mutationQueue.performConsistencyCheck(r)}).next(function(){return e.documentOverlayCache.removeOverlaysForBatchId(r,i,n.batch.batchId)}).next(function(){return e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){for(var c=bn(),h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(n))}).next(function(){return e.localDocuments.getDocuments(r,i)})})}function oS(t){var n=Mt(t);return n.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return n.Cs.getLastRemoteSnapshotVersion(e)})}function D1(t,n){var e=Mt(t),r=n.snapshotVersion,i=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",function(a){var u=e.Gi.newChangeBuffer({trackRemovals:!0});i=e.Ui;var c=[];n.targetChanges.forEach(function(I,D){var K,ne,re,L=i.get(D);if(L){c.push(e.Cs.removeMatchingKeys(a,I.removedDocuments,D).next(function(){return e.Cs.addMatchingKeys(a,I.addedDocuments,D)}));var x=L.withSequenceNumber(a.currentSequenceNumber);n.targetMismatches.has(D)?x=x.withResumeToken(oa.EMPTY_BYTE_STRING,vn.min()).withLastLimboFreeSnapshotVersion(vn.min()):I.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(I.resumeToken,r)),i=i.insert(D,x),ne=x,re=I,(0===(K=L).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&c.push(e.Cs.updateTargetData(a,x))}});var h=Fa(),v=bn();if(n.documentUpdates.forEach(function(I){n.resolvedLimboDocuments.has(I)&&c.push(e.persistence.referenceDelegate.updateLimboDocument(a,I))}),c.push(XE(a,u,n.documentUpdates).next(function(I){h=I.Wi,v=I.zi})),!r.isEqual(vn.min())){var g=e.Cs.getLastRemoteSnapshotVersion(a).next(function(I){return e.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r)});c.push(g)}return rt.waitFor(c).next(function(){return u.apply(a)}).next(function(){return e.localDocuments.getLocalViewOfDocuments(a,h,v)}).next(function(){return h})}).then(function(a){return e.Ui=i,a})}function XE(t,n,e){var r=bn(),i=bn();return e.forEach(function(a){return r=r.add(a)}),n.getEntries(t,r).next(function(a){var u=Fa();return e.forEach(function(c,h){var v=a.get(c);h.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(vn.min())?(n.removeEntry(c,h.readTime),u=u.insert(c,h)):!v.isValidDocument()||h.version.compareTo(v.version)>0||0===h.version.compareTo(v.version)&&v.hasPendingWrites?(n.addEntry(h),u=u.insert(c,h)):bt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",h.version)}),{Wi:u,zi:i}})}function lS(t,n){var e=Mt(t);return e.persistence.runTransaction("Get next mutation batch","readonly",function(r){return void 0===n&&(n=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,n)})}function Yh(t,n){var e=Mt(t);return e.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return e.Cs.getTargetData(r,n).next(function(a){return a?rt.resolve(i=a):e.Cs.allocateTargetId(r).next(function(u){return i=new ym(n,u,0,r.currentSequenceNumber),e.Cs.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=e.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(r.targetId,r),e.qi.set(n,r.targetId)),r})}function Qv(t,n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i=Mt(n),a=i.Ui.get(e),u=r?"readwrite":"readwrite-primary",h.prev=1,h.t0=r,h.t0){h.next=6;break}return h.next=6,i.persistence.runTransaction("Release target",u,function(v){return i.persistence.referenceDelegate.removeTarget(v,a)});case 6:h.next=13;break;case 8:if(h.prev=8,h.t1=h.catch(1),yo(h.t1)){h.next=12;break}throw h.t1;case 12:bt("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(h.t1));case 13:i.Ui=i.Ui.remove(e),i.qi.delete(a.target);case 14:case"end":return h.stop()}},t,null,[[1,8]])})),A_.apply(this,arguments)}function Xv(t,n,e){var r=Mt(t),i=vn.min(),a=bn();return r.persistence.runTransaction("Execute query","readonly",function(u){return(c=r,h=u,v=ts(n),g=Mt(c),I=g.qi.get(v),void 0!==I?rt.resolve(g.Ui.get(I)):g.Cs.getTargetData(h,v)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,c.targetId).next(function(h){a=h})}).next(function(){return r.Li.getDocumentsMatchingQuery(u,n,e?i:vn.min(),e?a:bn())}).next(function(c){return ws(r,Yb(n),c),{documents:c,Hi:a}});var c,h,v,g,I})}function R_(t,n){var e=Mt(t),r=Mt(e.Cs),i=e.Ui.get(n);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",function(a){return r.se(a,n).next(function(u){return u?u.target:null})})}function cS(t,n){var e=Mt(t),r=e.Ki.get(n)||vn.min();return e.persistence.runTransaction("Get new document changes","readonly",function(i){return e.Gi.getAllFromCollectionGroup(i,n,Rb(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(i){return ws(e,n,i),i})}function ws(t,n,e){var r=vn.min();e.forEach(function(i,a){a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ki.set(n,r)}function fS(t,n,e,r){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r,i){var a,u,c,h,v,g,I,D,L,x;return(0,ce.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:a=Mt(n),u=bn(),c=Fa(),h=(0,P.Z)(r);try{for(h.s();!(v=h.n()).done;)I=e.Ji((g=v.value).metadata.name),g.document&&(u=u.add(I)),(D=e.Yi(g)).setReadTime(e.Xi(g.metadata.readTime)),c=c.insert(I,D)}catch(re){h.e(re)}finally{h.f()}return L=a.Gi.newChangeBuffer({trackRemovals:!0}),ne.next=7,Yh(a,ts(sf(_n.fromString("__bundle__/docs/".concat(re=i)))));case 7:return x=ne.sent,ne.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(re){return XE(re,L,c).next(function(Pe){return L.apply(re),Pe}).next(function(Pe){return a.Cs.removeMatchingKeysForTargetId(re,x.targetId).next(function(){return a.Cs.addMatchingKeys(re,u,x.targetId)}).next(function(){return a.localDocuments.getLocalViewOfDocuments(re,Pe.Wi,Pe.zi)}).next(function(){return Pe.Wi})})}));case 9:case"end":return ne.stop()}var re},t)})),Jv.apply(this,arguments)}function hS(t,n){return $s.apply(this,arguments)}function $s(){return $s=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u=arguments;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:bn(),h.next=3,Yh(n,ts(km(e.bundledQuery)));case 3:return i=h.sent,a=Mt(n),h.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(v){var g=Zi(e.readTime);if(i.snapshotVersion.compareTo(g)>=0)return a.Ns.saveNamedQuery(v,e);var I=i.withResumeToken(oa.EMPTY_BYTE_STRING,g);return a.Ui=a.Ui.insert(I.targetId,I),a.Cs.updateTargetData(v,I).next(function(){return a.Cs.removeMatchingKeysForTargetId(v,i.targetId)}).next(function(){return a.Cs.addMatchingKeys(v,r,i.targetId)}).next(function(){return a.Ns.saveNamedQuery(v,e)})}));case 6:case"end":return h.stop()}},t)})),$s.apply(this,arguments)}function JE(t,n){return"firestore_clients_".concat(t,"_").concat(n)}function Tm(t,n,e){var r="firestore_mutations_".concat(t,"_").concat(e);return n.isAuthenticated()&&(r+="_".concat(n.uid)),r}function P_(t,n){return"firestore_targets_".concat(t,"_").concat(n)}var eI=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.user=n,this.batchId=e,this.state=r,this.error=i}return(0,A.Z)(t,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(e,r,i){var u,a=JSON.parse(i),c="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return c&&a.error&&(c="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(u=new gt(a.error.code,a.error.message)),c?new t(e,r,a.state,u):(xr("SharedClientState","Failed to parse mutation state for ID '".concat(r,"': ").concat(i)),null)}}]),t}(),ep=function(){function t(n,e,r){(0,R.Z)(this,t),this.targetId=n,this.state=e,this.error=r}return(0,A.Z)(t,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(e,r){var a,i=JSON.parse(r),u="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new gt(i.error.code,i.error.message)),u?new t(e,i.state,a):(xr("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(r)),null)}}]),t}(),M_=function(){function t(n,e){(0,R.Z)(this,t),this.clientId=n,this.activeTargetIds=e}return(0,A.Z)(t,null,[{key:"Zi",value:function(e,r){for(var i=JSON.parse(r),a="object"==typeof i&&i.activeTargetIds instanceof Array,u=bo(),c=0;a&&c<i.activeTargetIds.length;++c)a=F0(i.activeTargetIds[c]),u=u.add(i.activeTargetIds[c]);return a?new t(e,u):(xr("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(r)),null)}}]),t}(),tI=function(){function t(n,e){(0,R.Z)(this,t),this.clientId=n,this.onlineState=e}return(0,A.Z)(t,null,[{key:"Zi",value:function(e){var r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new t(r.clientId,r.onlineState):(xr("SharedClientState","Failed to parse online state: ".concat(e)),null)}}]),t}(),O_=function(){function t(){(0,R.Z)(this,t),this.activeTargetIds=bo()}return(0,A.Z)(t,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),t}(),Dm=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.window=n,this.Hs=e,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ci(mn),this.started=!1,this.cr=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=JE(this.persistenceKey,this.sr),this.hr="firestore_sequence_number_".concat(this.persistenceKey),this.ur=this.ur.insert(this.sr,new O_),this.lr=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.wr="firestore_online_state_".concat(this.persistenceKey),this.mr=function(c){return"firestore_bundle_loaded_v2_".concat(c)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return(0,A.Z)(t,[{key:"start",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var u,c,h,v,g,I,D,L,x,i=this;return(0,ce.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,this.syncEngine.vi();case 2:u=(0,P.Z)(re.sent),re.prev=4,u.s();case 6:if((c=u.n()).done){re.next=14;break}if((h=c.value)!==this.sr){re.next=10;break}return re.abrupt("continue",12);case 10:(v=this.getItem(JE(this.persistenceKey,h)))&&(g=M_.Zi(h,v))&&(this.ur=this.ur.insert(g.clientId,g));case 12:re.next=6;break;case 14:re.next=19;break;case 16:re.prev=16,re.t0=re.catch(4),u.e(re.t0);case 19:return re.prev=19,u.f(),re.finish(19);case 22:this.gr(),(I=this.storage.getItem(this.wr))&&(D=this.yr(I))&&this.pr(D),L=(0,P.Z)(this.cr);try{for(L.s();!(x=L.n()).done;)this.rr(x.value)}catch(Pe){L.e(Pe)}finally{L.f()}this.cr=[],this.window.addEventListener("pagehide",function(){return i.shutdown()}),this.started=!0;case 28:case"end":return re.stop()}},r,this,[[4,16,19,22]])})),function e(){return n.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var r=!1;return this.ur.forEach(function(i,a){a.activeTargetIds.has(e)&&(r=!0)}),r}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,r,i){this.Tr(e,r,i),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var r="not-current";if(this.isActiveQueryTarget(e)){var i=this.storage.getItem(P_(this.persistenceKey,e));if(i){var a=ep.Zi(e,i);a&&(r=a.state)}}return this.Ar.er(e),this.gr(),r}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(P_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,r,i){this.Rr(e,r,i)}},{key:"handleUserChange",value:function(e,r,i){var a=this;r.forEach(function(u){a.Er(u)}),this.currentUser=e,i.forEach(function(u){a.addPendingMutation(u)})}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var r=this.storage.getItem(e);return bt("SharedClientState","READ",e,r),r}},{key:"setItem",value:function(e,r){bt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}},{key:"removeItem",value:function(e){bt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var r=this,i=e;if(i.storageArea===this.storage){if(bt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ut.Z)((0,ce.Z)().mark(function a(){var u,c,h,v,g,I,D;return(0,ce.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!r.started){x.next=43;break}if(null===i.key){x.next=41;break}if(!r.lr.test(i.key)){x.next=11;break}if(null!=i.newValue){x.next=6;break}return u=r.vr(i.key),x.abrupt("return",r.Vr(u,null));case 6:if(!(c=r.Sr(i.key,i.newValue))){x.next=9;break}return x.abrupt("return",r.Vr(c.clientId,c));case 9:x.next=41;break;case 11:if(!r.dr.test(i.key)){x.next=18;break}if(null===i.newValue){x.next=16;break}if(!(h=r.Dr(i.key,i.newValue))){x.next=16;break}return x.abrupt("return",r.Cr(h));case 16:x.next=41;break;case 18:if(!r._r.test(i.key)){x.next=25;break}if(null===i.newValue){x.next=23;break}if(!(v=r.Nr(i.key,i.newValue))){x.next=23;break}return x.abrupt("return",r.kr(v));case 23:x.next=41;break;case 25:if(i.key!==r.wr){x.next=32;break}if(null===i.newValue){x.next=30;break}if(!(g=r.yr(i.newValue))){x.next=30;break}return x.abrupt("return",r.pr(g));case 30:x.next=41;break;case 32:if(i.key!==r.hr){x.next=37;break}(I=function(K){var ne=La.at;if(null!=K)try{var re=JSON.parse(K);cn("number"==typeof re),ne=re}catch(Pe){xr("SharedClientState","Failed to read sequence number from WebStorage",Pe)}return ne}(i.newValue))!==La.at&&r.sequenceNumberHandler(I),x.next=41;break;case 37:if(i.key!==r.mr){x.next=41;break}return D=r.Mr(i.newValue),x.next=41,Promise.all(D.map(function(K){return r.syncEngine.Or(K)}));case 41:x.next=44;break;case 43:r.cr.push(i);case 44:case"end":return x.stop()}},a)})))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,r,i){var a=new eI(this.currentUser,e,r,i),u=Tm(this.persistenceKey,this.currentUser,e);this.setItem(u,a.tr())}},{key:"Er",value:function(e){var r=Tm(this.persistenceKey,this.currentUser,e);this.removeItem(r)}},{key:"br",value:function(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}},{key:"Rr",value:function(e,r,i){var a=P_(this.persistenceKey,e),u=new ep(e,r,i);this.setItem(a,u.tr())}},{key:"Pr",value:function(e){var r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}},{key:"vr",value:function(e){var r=this.lr.exec(e);return r?r[1]:null}},{key:"Sr",value:function(e,r){var i=this.vr(e);return M_.Zi(i,r)}},{key:"Dr",value:function(e,r){var i=this.dr.exec(e),a=Number(i[1]);return eI.Zi(new Ii(void 0!==i[2]?i[2]:null),a,r)}},{key:"Nr",value:function(e,r){var i=this._r.exec(e),a=Number(i[1]);return ep.Zi(a,r)}},{key:"yr",value:function(e){return tI.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(i){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i.user.uid!==this.currentUser.uid){u.next=2;break}return u.abrupt("return",this.syncEngine.Fr(i.batchId,i.state,i.error));case 2:bt("SharedClientState","Ignoring mutation for non-active user ".concat(i.user.uid));case 3:case"end":return u.stop()}},r,this)}));return function e(r){return n.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,r){var i=this,a=r?this.ur.insert(e,r):this.ur.remove(e),u=this.Ir(this.ur),c=this.Ir(a),h=[],v=[];return c.forEach(function(g){u.has(g)||h.push(g)}),u.forEach(function(g){c.has(g)||v.push(g)}),this.syncEngine.Br(h,v).then(function(){i.ur=a})}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var r=bo();return e.forEach(function(i,a){r=r.unionWith(a.activeTargetIds)}),r}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),t;var n}(),Z_=function(){function t(){(0,R.Z)(this,t),this.Lr=new O_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,A.Z)(t,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,r,i){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,r,i){this.Ur[e]=r}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new O_,Promise.resolve()}},{key:"handleUserChange",value:function(e,r,i){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),t}(),dS=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),t}(),N_=function(){function t(){var n=this;(0,R.Z)(this,t),this.Kr=function(){return n.Gr()},this.Qr=function(){return n.jr()},this.Wr=[],this.zr()}return(0,A.Z)(t,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var r,e=(0,P.Z)(this.Wr);try{for(e.s();!(r=e.n()).done;)(0,r.value)(0)}catch(a){e.e(a)}finally{e.f()}}},{key:"jr",value:function(){bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var r,e=(0,P.Z)(this.Wr);try{for(e.s();!(r=e.n()).done;)(0,r.value)(1)}catch(a){e.e(a)}finally{e.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),vS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},tp=function(){function t(n){(0,R.Z)(this,t),this.Hr=n.Hr,this.Jr=n.Jr}return(0,A.Z)(t,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),t}(),Pu=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this,r)).forceLongPolling=r.forceLongPolling,i.autoDetectLongPolling=r.autoDetectLongPolling,i.useFetchStreams=r.useFetchStreams,i}return(0,A.Z)(e,[{key:"lo",value:function(i,a,u,c){return new Promise(function(h,v){var g=new S0;g.listenOnce(kb.COMPLETE,function(){try{switch(g.getLastErrorCode()){case Kg.NO_ERROR:var D=g.getResponseJson();bt("Connection","XHR received:",JSON.stringify(D)),h(D);break;case Kg.TIMEOUT:bt("Connection",'RPC "'+i+'" timed out'),v(new gt(We.DEADLINE_EXCEEDED,"Request time out"));break;case Kg.HTTP_ERROR:var L=g.getStatus();if(bt("Connection",'RPC "'+i+'" failed with status:',L,"response text:",g.getResponseText()),L>0){var x=g.getResponseJson().error;if(x&&x.status&&x.message){var K=(re=x.status.toLowerCase().replace(/_/g,"-"),Object.values(We).indexOf(re)>=0?re:We.UNKNOWN);v(new gt(K,x.message))}else v(new gt(We.UNKNOWN,"Server responded with status "+g.getStatus()))}else v(new gt(We.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{bt("Connection",'RPC "'+i+'" completed.')}var re});var I=JSON.stringify(c);g.send(a,"POST",I,u,15)})}},{key:"_o",value:function(i,a,u){var c=[this.oo,"/","google.firestore.v1.Firestore","/",i,"/channel"],h=JT(),v=_b(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new tD({})),this.ho(g.initMessageHeaders,a,u),g.encodeInitMessageHeaders=!0;var I=c.join("");bt("Connection","Creating WebChannel: "+I,g);var D=h.createWebChannel(I,g),L=!1,x=!1,K=new tp({Hr:function(Pe){x?bt("Connection","Not sending because WebChannel is closed:",Pe):(L||(bt("Connection","Opening WebChannel transport."),D.open(),L=!0),bt("Connection","WebChannel sending:",Pe),D.send(Pe))},Jr:function(){return D.close()}}),ne=function(Pe,Ve,Ye){Pe.listen(Ve,function(ze){try{Ye(ze)}catch(Tt){setTimeout(function(){throw Tt},0)}})};return ne(D,$g.EventType.OPEN,function(){x||bt("Connection","WebChannel transport opened.")}),ne(D,$g.EventType.CLOSE,function(){x||(x=!0,bt("Connection","WebChannel transport closed"),K.io())}),ne(D,$g.EventType.ERROR,function(re){x||(x=!0,wl("Connection","WebChannel transport errored:",re),K.io(new gt(We.UNAVAILABLE,"The operation could not be completed")))}),ne(D,$g.EventType.MESSAGE,function(re){var Pe;if(!x){var Ve=re.data[0];cn(!!Ve);var ze=Ve.error||(null===(Pe=Ve[0])||void 0===Pe?void 0:Pe.error);if(ze){bt("Connection","WebChannel received error:",ze);var Tt=ze.status,Et=function(en){var Kt=Qr[en];if(void 0!==Kt)return cE(Kt)}(Tt),yt=ze.message;void 0===Et&&(Et=We.INTERNAL,yt="Unknown error status: "+Tt+" with message "+ze.message),x=!0,K.io(new gt(Et,yt)),D.close()}else bt("Connection","WebChannel received:",Ve),K.ro(Ve)}}),ne(v,eD.STAT_EVENT,function(re){re.stat===wb.PROXY?bt("Connection","Detected buffering proxy"):re.stat===wb.NOPROXY&&bt("Connection","Detected no buffering proxy")}),setTimeout(function(){K.so()},0),K}}]),e}(function(){function t(n){(0,R.Z)(this,t),this.databaseInfo=n,this.databaseId=n.databaseId,this.oo=(n.ssl?"https":"http")+"://"+n.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,A.Z)(t,[{key:"co",value:function(e,r,i,a,u){var c=this.ao(e,r);bt("RestConnection","Sending: ",c,i);var h={};return this.ho(h,a,u),this.lo(e,c,h,i).then(function(v){return bt("RestConnection","Received: ",v),v},function(v){throw wl("RestConnection","".concat(e," failed with error: "),v,"url: ",c,"request:",i),v})}},{key:"fo",value:function(e,r,i,a,u,c){return this.co(e,r,i,a,u)}},{key:"ho",value:function(e,r,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(function(a,u){return e[u]=a}),i&&i.headers.forEach(function(a,u){return e[u]=a})}},{key:"ao",value:function(e,r){var i=vS[e];return"".concat(this.oo,"/v1/").concat(r,":").concat(i)}}]),t}());function L_(){return"undefined"!=typeof window?window:null}function Qh(){return"undefined"!=typeof document?document:null}function ns(t){return new AD(t,!0)}var F_=function(){function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,R.Z)(this,t),this.Hs=n,this.timerId=e,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return(0,A.Z)(t,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var r=this;this.cancel();var i=Math.floor(this.po+this.Ro()),a=Math.max(0,Date.now()-this.To),u=Math.max(0,i-a);u>0&&bt("ExponentialBackoff","Backing off for ".concat(u," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(i," ms, last attempt: ").concat(a," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,u,function(){return r.To=Date.now(),e()}),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),t}(),pS=function(){function t(n,e,r,i,a,u,c,h){(0,R.Z)(this,t),this.Hs=n,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new F_(n,e)}return(0,A.Z)(t,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.t0=this.No(),!a.t0){a.next=4;break}return a.next=4,this.close(0);case 4:case"end":return a.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,function(){return e.$o()}))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.ko()){a.next=2;break}return a.abrupt("return",this.close(0));case 2:case"end":return a.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(i,a){return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==i?this.xo.reset():a&&a.code===We.RESOURCE_EXHAUSTED?(xr(a.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):a&&a.code===We.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=i,c.next=9,this.listener.Zr(a);case 9:case"end":return c.stop()}},r,this)}));return function e(r,i){return n.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var r=this.Ko(this.So),i=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(a){var u=(0,ye.Z)(a,2);e.So===i&&e.Go(u[0],u[1])},function(a){r(function(){var u=new gt(We.UNKNOWN,"Fetching auth token failed: "+a.message);return e.Qo(u)})})}},{key:"Go",value:function(e,r){var i=this,a=this.Ko(this.So);this.stream=this.jo(e,r),this.stream.Yr(function(){a(function(){return i.state=2,i.Co=i.Hs.enqueueAfterDelay(i.vo,1e4,function(){return i.ko()&&(i.state=3),Promise.resolve()}),i.listener.Yr()})}),this.stream.Zr(function(u){a(function(){return i.Qo(u)})}),this.stream.onMessage(function(u){a(function(){return i.onMessage(u)})})}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.state=0,e.start();case 1:case"end":return a.stop()}},r)})))}},{key:"Qo",value:function(e){return bt("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var r=this;return function(i){r.Hs.enqueueAndForget(function(){return r.So===e?i():(bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),t;var n}(),gS=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u,c,h){var v;return(0,R.Z)(this,e),(v=n.call(this,r,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,u,h)).It=c,v}return(0,A.Z)(e,[{key:"jo",value:function(i,a){return this.Vo._o("Listen",i,a)}},{key:"onMessage",value:function(i){this.xo.reset();var a=function ZD(t,n){var e,Xn;if("targetChange"in n){var r="NO_CHANGE"===(Xn=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Xn?1:"REMOVE"===Xn?2:"CURRENT"===Xn?3:"RESET"===Xn?4:jt(),i=n.targetChange.targetIds||[],a=function(Xn,li){return Xn.gt?(cn(void 0===li||"string"==typeof li),oa.fromBase64String(li||"")):(cn(void 0===li||li instanceof Uint8Array),oa.fromUint8Array(li||new Uint8Array))}(t,n.targetChange.resumeToken),u=n.targetChange.cause,c=u&&function(Xn){var li=void 0===Xn.code?We.UNKNOWN:cE(Xn.code);return new gt(li,Xn.message||"")}(u);e=new vm(r,i,a,c||null)}else if("documentChange"in n){var h=n.documentChange,v=Eo(t,h.document.name),g=Zi(h.document.updateTime),I=new Nn({mapValue:{fields:h.document.fields}}),D=oi.newFoundDocument(v,g,I);e=new Q0(h.targetIds||[],h.removedTargetIds||[],D.key,D)}else if("documentDelete"in n){var K=n.documentDelete,ne=Eo(t,K.document),re=K.readTime?Zi(K.readTime):vn.min(),Pe=oi.newNoDocument(ne,re);e=new Q0([],K.removedTargetIds||[],Pe.key,Pe)}else if("documentRemove"in n){var Ye=n.documentRemove,ze=Eo(t,Ye.document);e=new Q0([],Ye.removedTargetIds||[],ze,null)}else{if(!("filter"in n))return jt();var Et=n.filter,en=new ED(Et.count||0);e=new X0(Et.targetId,en)}return e}(this.It,i),u=function(c){if(!("targetChange"in c))return vn.min();var h=c.targetChange;return h.targetIds&&h.targetIds.length?vn.min():h.readTime?Zi(h.readTime):vn.min()}(i);return this.listener.Wo(a,u)}},{key:"zo",value:function(i){var c,h,v,g,a={};a.database=Bv(this.It),a.addTarget=(c=this.It,(v=Ov(g=(h=i).target)?{documents:mE(c,g)}:{query:yE(c,g)}).targetId=h.targetId,h.resumeToken.approximateByteSize()>0?v.resumeToken=vE(c,h.resumeToken):h.snapshotVersion.compareTo(vn.min())>0&&(v.readTime=Gh(c,h.snapshotVersion.toTimestamp())),v);var u=function LD(t,n){var e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jt()}}(0,n.purpose);return null==e?null:{"goog-listen-tags":e}}(0,i);u&&(a.labels=u),this.Bo(a)}},{key:"Ho",value:function(i){var a={};a.database=Bv(this.It),a.removeTarget=i,this.Bo(a)}}]),e}(pS),mS=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u,c,h){var v;return(0,R.Z)(this,e),(v=n.call(this,r,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,u,h)).It=c,v.Jo=!1,v}return(0,A.Z)(e,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,(0,ie.Z)((0,pe.Z)(e.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(i,a){return this.Vo._o("Write",i,a)}},{key:"onMessage",value:function(i){if(cn(!!i.streamToken),this.lastStreamToken=i.streamToken,this.Jo){this.xo.reset();var a=function ND(t,n){return t&&t.length>0?(cn(void 0!==n),t.map(function(e){return i=n,(a=Zi((r=e).updateTime?r.updateTime:i)).isEqual(vn.min())&&(a=Zi(i)),new kD(a,r.transformResults||[]);var r,i,a})):[]}(i.writeResults,i.commitTime),u=Zi(i.commitTime);return this.listener.Zo(u,a)}return cn(!i.writeResults||0===i.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var i={};i.database=Bv(this.It),this.Bo(i)}},{key:"Xo",value:function(i){var a=this,u={streamToken:this.lastStreamToken,writes:i.map(function(c){return Vv(a.It,c)})};this.Bo(u)}}]),e}(pS),yS=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this)).authCredentials=r,c.appCheckCredentials=i,c.Vo=a,c.It=u,c.nu=!1,c}return(0,A.Z)(e,[{key:"su",value:function(){if(this.nu)throw new gt(We.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(i,a,u){var c=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(h){var v=(0,ye.Z)(h,2);return c.Vo.co(i,a,u,v[0],v[1])}).catch(function(h){throw"FirebaseError"===h.name?(h.code===We.UNAUTHENTICATED&&(c.authCredentials.invalidateToken(),c.appCheckCredentials.invalidateToken()),h):new gt(We.UNKNOWN,h.toString())})}},{key:"fo",value:function(i,a,u,c){var h=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(v){var g=(0,ye.Z)(v,2);return h.Vo.fo(i,a,u,g[0],g[1],c)}).catch(function(v){throw"FirebaseError"===v.name?(v.code===We.UNAUTHENTICATED&&(h.authCredentials.invalidateToken(),h.appCheckCredentials.invalidateToken()),v):new gt(We.UNKNOWN,v.toString())})}},{key:"terminate",value:function(){this.nu=!0}}]),e}(function(){return(0,A.Z)(function t(){(0,R.Z)(this,t)})}()),_S=function(){function t(n,e){(0,R.Z)(this,t),this.asyncQueue=n,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return(0,A.Z)(t,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var r="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(xr(r),this.ou=!1):bt("OnlineStateTracker",r)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),t}(),nI=(0,A.Z)(function t(n,e,r,i,a){var u=this;(0,R.Z)(this,t),this.localStore=n,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(function(c){r.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function h(){return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(g.t0=Ao(u),!g.t0){g.next=5;break}return bt("RemoteStore","Restarting streams for network reachability change."),g.next=5,function(){var I=(0,ut.Z)((0,ce.Z)().mark(function D(L){var x;return(0,ce.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return(x=Mt(L))._u.add(4),ne.next=4,Xh(x);case 4:return x.gu.set("Unknown"),x._u.delete(4),ne.next=8,Sm(x);case 8:case"end":return ne.stop()}},D)}));return function(D){return I.apply(this,arguments)}}()(u);case 5:case"end":return g.stop()}},h)})))}),this.gu=new _S(r,i)});function Sm(t){return Am.apply(this,arguments)}function Am(){return Am=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Ao(n)){u.next=18;break}e=(0,P.Z)(n.wu),u.prev=2,e.s();case 4:if((r=e.n()).done){u.next=10;break}return i=r.value,u.next=8,i(!0);case 8:u.next=4;break;case 10:u.next=15;break;case 12:u.prev=12,u.t0=u.catch(2),e.e(u.t0);case 15:return u.prev=15,e.f(),u.finish(15);case 18:case"end":return u.stop()}},t,null,[[2,12,15,18]])})),Am.apply(this,arguments)}function Xh(t){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=(0,P.Z)(n.wu),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=9;break}return i=r.value,u.next=7,i(!1);case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),e.e(u.t0);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},t,null,[[1,11,14,17]])})),Rm.apply(this,arguments)}function U_(t,n){var e=Mt(t);e.du.has(n.targetId)||(e.du.set(n.targetId,n),Om(e)?Mm(e):ap(e).ko()&&Pm(e,n))}function gf(t,n){var e=Mt(t),r=ap(e);e.du.delete(n),r.ko()&&x_(e,n),0===e.du.size&&(r.ko()?r.Fo():Ao(e)&&e.gu.set("Unknown"))}function Pm(t,n){t.yu.Ot(n.targetId),ap(t).zo(n)}function x_(t,n){t.yu.Ot(n),ap(t).Ho(n)}function Mm(t){t.yu=new J0({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},se:function(e){return t.du.get(e)||null}}),ap(t).start(),t.gu.uu()}function Om(t){return Ao(t)&&!ap(t).No()&&t.du.size>0}function Ao(t){return 0===Mt(t)._u.size}function np(t){t.yu=void 0}function Zm(t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,ut.Z)((0,ce.Z)().mark(function t(n){return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.du.forEach(function(i,a){Pm(n,i)});case 1:case"end":return r.stop()}},t)})),Nm.apply(this,arguments)}function kS(t,n){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){return(0,ce.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:np(n),Om(n)?(n.gu.hu(e),Mm(n)):n.gu.set("Unknown");case 1:case"end":return i.stop()}},t)})),Lm.apply(this,arguments)}function rI(t,n,e){return B_.apply(this,arguments)}function B_(){return B_=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n.gu.set("Online"),!(e instanceof vm&&2===e.state&&e.cause)){u.next=13;break}return u.prev=1,u.next=4,function(){var c=(0,ut.Z)((0,ce.Z)().mark(function h(v,g){var I,D,L,x;return(0,ce.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:I=g.cause,D=(0,P.Z)(g.targetIds),ne.prev=2,D.s();case 4:if((L=D.n()).done){ne.next=14;break}if(ne.t0=v.du.has(x=L.value),!ne.t0){ne.next=12;break}return ne.next=10,v.remoteSyncer.rejectListen(x,I);case 10:v.du.delete(x),v.yu.removeTarget(x);case 12:ne.next=4;break;case 14:ne.next=19;break;case 16:ne.prev=16,ne.t1=ne.catch(2),D.e(ne.t1);case 19:return ne.prev=19,D.f(),ne.finish(19);case 22:case"end":return ne.stop()}},h,null,[[2,16,19,22]])}));return function(h,v){return c.apply(this,arguments)}}()(n,e);case 4:u.next=11;break;case 6:return u.prev=6,u.t0=u.catch(1),bt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),u.t0),u.next=11,Fm(n,u.t0);case 11:case 22:u.next=29;break;case 13:if(e instanceof Q0?n.yu.Gt(e):e instanceof X0?n.yu.Yt(e):n.yu.Wt(e),r.isEqual(vn.min())){u.next=29;break}return u.prev=14,u.next=17,oS(n.localStore);case 17:if(u.t1=r.compareTo(u.sent)>=0,!u.t1){u.next=22;break}return u.next=22,function(c,h){var v=c.yu.te(h);return v.targetChanges.forEach(function(g,I){if(g.resumeToken.approximateByteSize()>0){var D=c.du.get(I);D&&c.du.set(I,D.withResumeToken(g.resumeToken,h))}}),v.targetMismatches.forEach(function(g){var I=c.du.get(g);if(I){c.du.set(g,I.withResumeToken(oa.EMPTY_BYTE_STRING,I.snapshotVersion)),x_(c,g);var D=new ym(I.target,g,1,I.sequenceNumber);Pm(c,D)}}),c.remoteSyncer.applyRemoteEvent(v)}(n,r);case 24:return u.prev=24,u.t2=u.catch(14),bt("RemoteStore","Failed to raise snapshot:",u.t2),u.next=29,Fm(n,u.t2);case 29:case"end":return u.stop()}},t,null,[[1,6],[14,24]])})),B_.apply(this,arguments)}function Fm(t,n,e){return iI.apply(this,arguments)}function iI(){return iI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(yo(e)){a.next=2;break}throw e;case 2:return n._u.add(1),a.next=5,Xh(n);case 5:n.gu.set("Offline"),r||(r=function(){return oS(n.localStore)}),n.asyncQueue.enqueueRetryable((0,ut.Z)((0,ce.Z)().mark(function u(){return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return bt("RemoteStore","Retrying IndexedDB access"),h.next=3,r();case 3:return n._u.delete(1),h.next=6,Sm(n);case 6:case"end":return h.stop()}},u)})));case 8:case"end":return a.stop()}},t)})),iI.apply(this,arguments)}function wS(t,n){return n().catch(function(e){return Fm(t,e,n)})}function mf(t){return V_.apply(this,arguments)}function V_(){return V_=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r,i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=Mt(n),r=Mu(e),i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;case 2:if(!bS(e)){c.next=19;break}return c.prev=3,c.next=6,lS(e.localStore,i);case 6:if(null!==(a=c.sent)){c.next=10;break}return 0===e.fu.length&&r.Fo(),c.abrupt("break",19);case 10:i=a.batchId,ES(e,a),c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(3),c.next=17,Fm(e,c.t0);case 17:c.next=2;break;case 19:IS(e)&&CS(e);case 20:case"end":return c.stop()}},t,null,[[3,13]])})),V_.apply(this,arguments)}function bS(t){return Ao(t)&&t.fu.length<10}function ES(t,n){t.fu.push(n);var e=Mu(t);e.ko()&&e.Yo&&e.Xo(n.mutations)}function IS(t){return Ao(t)&&!Mu(t).No()&&t.fu.length>0}function CS(t){Mu(t).start()}function S1(t){return aI.apply(this,arguments)}function aI(){return aI=(0,ut.Z)((0,ce.Z)().mark(function t(n){return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Mu(n).eu();case 1:case"end":return r.stop()}},t)})),aI.apply(this,arguments)}function A1(t){return j_.apply(this,arguments)}function j_(){return j_=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r,i;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=Mu(n),r=(0,P.Z)(n.fu);try{for(r.s();!(i=r.n()).done;)e.Xo(i.value.mutations)}catch(h){r.e(h)}finally{r.f()}case 3:case"end":return c.stop()}},t)})),j_.apply(this,arguments)}function H_(t,n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=n.fu.shift(),a=PE.from(i,e,r),c.next=3,wS(n,function(){return n.remoteSyncer.applySuccessfulWrite(a)});case 3:return c.next=5,mf(n);case 5:case"end":return c.stop()}},t)})),sI.apply(this,arguments)}function TS(t,n){return uI.apply(this,arguments)}function uI(){return uI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){return(0,ce.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.t0=e&&Mu(n).Yo,!i.t0){i.next=4;break}return i.next=4,function(){var a=(0,ut.Z)((0,ce.Z)().mark(function u(c,h){var v,g;return(0,ce.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!lE(g=h.code)||g===We.ABORTED){D.next=7;break}return v=c.fu.shift(),Mu(c).Oo(),D.next=5,wS(c,function(){return c.remoteSyncer.rejectFailedWrite(v.batchId,h)});case 5:return D.next=7,mf(c);case 7:case"end":return D.stop()}},u)}));return function(u,c){return a.apply(this,arguments)}}()(n,e);case 4:IS(n)&&CS(n);case 5:case"end":return i.stop()}},t)})),uI.apply(this,arguments)}function Zl(t,n){return Um.apply(this,arguments)}function Um(){return Um=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return(r=Mt(n)).asyncQueue.verifyOperationInProgress(),bt("RemoteStore","RemoteStore received new credentials"),i=Ao(r),r._u.add(3),u.next=6,Xh(r);case 6:return i&&r.gu.set("Unknown"),u.next=9,r.remoteSyncer.handleCredentialChange(e);case 9:return r._u.delete(3),u.next=12,Sm(r);case 12:case"end":return u.stop()}},t)})),Um.apply(this,arguments)}function rp(t,n){return ip.apply(this,arguments)}function ip(){return ip=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=Mt(n),!e){a.next=7;break}return r._u.delete(2),a.next=5,Sm(r);case 5:a.next=13;break;case 7:if(a.t0=e,a.t0){a.next=13;break}return r._u.add(2),a.next=12,Xh(r);case 12:r.gu.set("Unknown");case 13:case"end":return a.stop()}},t)})),ip.apply(this,arguments)}function ap(t){return t.pu||(t.pu=(n=t.datastore,e=t.asyncQueue,r={Yr:Zm.bind(null,t),Zr:kS.bind(null,t),Wo:rI.bind(null,t)},(i=Mt(n)).su(),new gS(e,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)),t.wu.push(function(){var n=(0,ut.Z)((0,ce.Z)().mark(function e(r){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!r){a.next=4;break}t.pu.Oo(),Om(t)?Mm(t):t.gu.set("Unknown"),a.next=7;break;case 4:return a.next=6,t.pu.stop();case 6:np(t);case 7:case"end":return a.stop()}},e)}));return function(e){return n.apply(this,arguments)}}())),t.pu;var n,e,r,i}function Mu(t){return t.Iu||(t.Iu=(n=t.datastore,e=t.asyncQueue,r={Yr:S1.bind(null,t),Zr:TS.bind(null,t),tu:A1.bind(null,t),Zo:H_.bind(null,t)},(i=Mt(n)).su(),new mS(e,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)),t.wu.push(function(){var n=(0,ut.Z)((0,ce.Z)().mark(function e(r){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!r){a.next=6;break}return t.Iu.Oo(),a.next=4,mf(t);case 4:a.next=9;break;case 6:return a.next=8,t.Iu.stop();case 8:t.fu.length>0&&(bt("RemoteStore","Stopping write stream with ".concat(t.fu.length," pending writes")),t.fu=[]);case 9:case"end":return a.stop()}},e)}));return function(e){return n.apply(this,arguments)}}())),t.Iu;var n,e,r,i}var W_=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.asyncQueue=n,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return(0,A.Z)(t,[{key:"start",value:function(e){var r=this;this.timerHandle=setTimeout(function(){return r.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(r){return e.deferred.resolve(r)})):Promise.resolve()})}},{key:"clearTimeout",value:function(n){function e(){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(e,r,i,a,u){var h=new t(e,r,Date.now()+i,a,u);return h.start(i),h}}]),t}();function yf(t,n){if(xr("AsyncQueue","".concat(n,": ").concat(t)),yo(t))return new gt(We.UNAVAILABLE,"".concat(n,": ").concat(t));throw t}var DS=function(){function t(n){(0,R.Z)(this,t),this.comparator=n?function(e,r){return n(e,r)||Nt.comparator(e.key,r.key)}:function(e,r){return Nt.comparator(e.key,r.key)},this.keyedMap=cf(),this.sortedSet=new Ci(this.comparator)}return(0,A.Z)(t,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(r,i){return e(r),!1})}},{key:"add",value:function(e){var r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();r.hasNext();){var a=r.getNext().key,u=i.getNext().key;if(!a.isEqual(u))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(r){e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(e,r){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),SS=function(){function t(){(0,R.Z)(this,t),this.Tu=new Ci(Nt.comparator)}return(0,A.Z)(t,[{key:"track",value:function(e){var r=e.doc.key,i=this.Tu.get(r);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(r,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(r,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(r):1===e.type&&2===i.type?this.Tu=this.Tu.insert(r,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):jt():this.Tu=this.Tu.insert(r,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal(function(r,i){e.push(i)}),e}}]),t}(),G_=function(){function t(n,e,r,i,a,u,c,h){(0,R.Z)(this,t),this.query=n,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=h}return(0,A.Z)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(r[a].type!==i[a].type||!r[a].doc.isEqual(i[a].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,r,i,a){var u=[];return r.forEach(function(c){u.push({type:0,doc:c})}),new t(e,r,DS.emptySet(r),u,i,a,!0,!1)}}]),t}(),R1=(0,A.Z)(function t(){(0,R.Z)(this,t),this.Au=void 0,this.listeners=[]}),oI=(0,A.Z)(function t(){(0,R.Z)(this,t),this.queries=new wo(function(n){return j0(n)},om),this.onlineState="Unknown",this.Ru=new Set});function z_(t,n){return K_.apply(this,arguments)}function K_(){return K_=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u,c;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r=Mt(n),a=!1,(u=r.queries.get(i=e.query))||(a=!0,u=new R1),!a){v.next=13;break}return v.prev=3,v.next=6,r.onListen(i);case 6:u.Au=v.sent,v.next=13;break;case 9:return v.prev=9,v.t0=v.catch(3),c=yf(v.t0,"Initialization of query '".concat(Vh(e.query),"' failed")),v.abrupt("return",void e.onError(c));case 13:r.queries.set(i,u),u.listeners.push(e),e.bu(r.onlineState),u.Au&&e.Pu(u.Au)&&xm(r);case 14:case"end":return v.stop()}},t,null,[[3,9]])})),K_.apply(this,arguments)}function $_(t,n){return q_.apply(this,arguments)}function q_(){return q_=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u,c;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r=Mt(n),a=!1,(u=r.queries.get(i=e.query))&&(c=u.listeners.indexOf(e))>=0&&(u.listeners.splice(c,1),a=0===u.listeners.length),!a){v.next=6;break}return v.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return v.stop()}},t)})),q_.apply(this,arguments)}function lI(t,n){var a,e=Mt(t),r=!1,i=(0,P.Z)(n);try{for(i.s();!(a=i.n()).done;){var u=a.value,h=e.queries.get(u.query);if(h){var g,v=(0,P.Z)(h.listeners);try{for(v.s();!(g=v.n()).done;)g.value.Pu(u)&&(r=!0)}catch(D){v.e(D)}finally{v.f()}h.Au=u}}}catch(D){i.e(D)}finally{i.f()}r&&xm(e)}function cI(t,n,e){var r=Mt(t),i=r.queries.get(n);if(i){var u,a=(0,P.Z)(i.listeners);try{for(a.s();!(u=a.n()).done;)u.value.onError(e)}catch(h){a.e(h)}finally{a.f()}}r.queries.delete(n)}function xm(t){t.Ru.forEach(function(n){n.next()})}var Y_=function(){function t(n,e,r){(0,R.Z)(this,t),this.query=n,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return(0,A.Z)(t,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var a,r=[],i=(0,P.Z)(e.docChanges);try{for(i.s();!(a=i.n()).done;){var u=a.value;3!==u.type&&r.push(u)}}catch(h){i.e(h)}finally{i.f()}e=new G_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var c=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),c=!0):this.Cu(e,this.onlineState)&&(this.xu(e),c=!0),this.Su=e,c}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var r=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),r=!0),r}},{key:"Cu",value:function(e,r){return!e.fromCache||!(this.options.Nu&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}},{key:"Du",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),t}(),AS=function(){function t(n,e){(0,R.Z)(this,t),this.payload=n,this.byteLength=e}return(0,A.Z)(t,[{key:"ku",value:function(){return"metadata"in this.payload}}]),t}(),Q_=function(){function t(n){(0,R.Z)(this,t),this.It=n}return(0,A.Z)(t,[{key:"Ji",value:function(e){return Eo(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?gE(this.It,e.document,!1):oi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Zi(e)}}]),t}(),X_=function(){function t(n,e,r){(0,R.Z)(this,t),this.Mu=n,this.localStore=e,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RS(n)}return(0,A.Z)(t,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var r=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r;var i=_n.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var u,r=new Map,i=new Q_(this.It),a=(0,P.Z)(e);try{for(a.s();!(u=a.n()).done;){var c=u.value;if(c.metadata.queries){var g,h=i.Ji(c.metadata.name),v=(0,P.Z)(c.metadata.queries);try{for(v.s();!(g=v.n()).done;){var I=g.value,D=(r.get(I)||bn()).add(h);r.set(I,D)}}catch(L){v.e(L)}finally{v.f()}}}}catch(L){a.e(L)}finally{a.f()}return r}},{key:"complete",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i,a,u,c,h;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,fS(this.localStore,new Q_(this.It),this.documents,this.Mu.id);case 2:i=g.sent,a=this.Fu(this.documents),u=(0,P.Z)(this.queries),g.prev=5,u.s();case 7:if((c=u.n()).done){g.next=13;break}return h=c.value,g.next=11,hS(this.localStore,h,a.get(h.name));case 11:g.next=7;break;case 13:g.next=18;break;case 15:g.prev=15,g.t0=g.catch(5),u.e(g.t0);case 18:return g.prev=18,u.f(),g.finish(18);case 21:return g.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:i}));case 22:case"end":return g.stop()}},r,this,[[5,15,18,21]])})),function e(){return n.apply(this,arguments)})}]),t;var n}();function RS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var J_=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.key=n}),Bm=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.key=n}),fI=function(){function t(n,e){(0,R.Z)(this,t),this.query=n,this.Lu=e,this.Uu=null,this.current=!1,this.qu=bn(),this.mutatedKeys=bn(),this.Ku=W0(n),this.Gu=new DS(this.Ku)}return(0,A.Z)(t,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,r){var i=this,a=r?r.Wu:new SS,u=r?r.Gu:this.Gu,c=r?r.mutatedKeys:this.mutatedKeys,h=u,v=!1,g="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,I="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(function(L,x){var K=u.get(L),ne=H0(i.query,x)?x:null,re=!!K&&i.mutatedKeys.has(K.key),Pe=!!ne&&(ne.hasLocalMutations||i.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations),Ve=!1;K&&ne?K.data.isEqual(ne.data)?re!==Pe&&(a.track({type:3,doc:ne}),Ve=!0):i.zu(K,ne)||(a.track({type:2,doc:ne}),Ve=!0,(g&&i.Ku(ne,g)>0||I&&i.Ku(ne,I)<0)&&(v=!0)):!K&&ne?(a.track({type:0,doc:ne}),Ve=!0):K&&!ne&&(a.track({type:1,doc:K}),Ve=!0,(g||I)&&(v=!0)),Ve&&(ne?(h=h.add(ne),c=Pe?c.add(L):c.delete(L)):(h=h.delete(L),c=c.delete(L)))}),null!==this.query.limit)for(;h.size>this.query.limit;){var D="F"===this.query.limitType?h.last():h.first();h=h.delete(D.key),c=c.delete(D.key),a.track({type:1,doc:D})}return{Gu:h,Wu:a,$i:v,mutatedKeys:c}}},{key:"zu",value:function(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}},{key:"applyChanges",value:function(e,r,i){var a=this,u=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var c=e.Wu.Eu();c.sort(function(I,D){return x=D.type,(K=function(re){switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}})(I.type)-K(x)||a.Ku(I.doc,D.doc);var x,K}),this.Hu(i);var h=r?this.Ju():[],v=0===this.qu.size&&this.current?1:0,g=v!==this.Uu;return this.Uu=v,0!==c.length||g?{snapshot:new G_(this.query,e.Gu,u,c,e.mutatedKeys,0===v,g,!1),Yu:h}:{Yu:h}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new SS,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var r=this;e&&(e.addedDocuments.forEach(function(i){return r.Lu=r.Lu.add(i)}),e.modifiedDocuments.forEach(function(i){}),e.removedDocuments.forEach(function(i){return r.Lu=r.Lu.delete(i)}),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var r=this.qu;this.qu=bn(),this.Gu.forEach(function(a){e.Xu(a.key)&&(e.qu=e.qu.add(a.key))});var i=[];return r.forEach(function(a){e.qu.has(a)||i.push(new Bm(a))}),this.qu.forEach(function(a){r.has(a)||i.push(new J_(a))}),i}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=bn();var r=this.ju(e.documents);return this.applyChanges(r,!0)}},{key:"tc",value:function(){return G_.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),t}(),PS=(0,A.Z)(function t(n,e,r){(0,R.Z)(this,t),this.query=n,this.targetId=e,this.view=r}),P1=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.key=n,this.ec=!1}),M1=function(){function t(n,e,r,i,a,u){(0,R.Z)(this,t),this.localStore=n,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new wo(function(c){return j0(c)},om),this.ic=new Map,this.rc=new Set,this.oc=new Ci(Nt.comparator),this.uc=new Map,this.cc=new KE,this.ac={},this.hc=new Map,this.lc=w_.vn(),this.onlineState="Unknown",this.fc=void 0}return(0,A.Z)(t,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),t}();function MS(t,n){return ek.apply(this,arguments)}function ek(){return ek=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u,c,h;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(r=op(n),!(u=r.sc.get(e))){g.next=6;break}r.sharedClientState.addLocalQueryTarget(i=u.targetId),a=u.view.tc(),g.next=15;break;case 6:return g.next=8,Yh(r.localStore,ts(e));case 8:return c=g.sent,r.isPrimaryClient&&U_(r.remoteStore,c),h=r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.targetId,g.next=14,tk(r,e,i,"current"===h);case 14:a=g.sent;case 15:return g.abrupt("return",a);case 16:case"end":return g.stop()}},t)})),ek.apply(this,arguments)}function tk(t,n,e,r){return hI.apply(this,arguments)}function hI(){return hI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r,i){var a,u,c,h,v,g;return(0,ce.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return n.dc=function(L,x,K){return(ne=(0,ut.Z)((0,ce.Z)().mark(function re(Pe,Ve,Ye,ze){var Tt,Et,yt;return(0,ce.Z)().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:if(Tt=Ve.view.ju(Ye),Kt.t0=Tt.$i,!Kt.t0){Kt.next=6;break}return Kt.next=5,Xv(Pe.localStore,Ve.query,!1).then(function(Xn){return Ve.view.ju(Xn.documents,Tt)});case 5:Tt=Kt.sent;case 6:return Et=ze&&ze.targetChanges.get(Ve.targetId),yt=Ve.view.applyChanges(Tt,Pe.isPrimaryClient,Et),Kt.abrupt("return",(S(Pe,Ve.targetId,yt.Yu),yt.snapshot));case 8:case"end":return Kt.stop()}},re)})),function(re,Pe,Ve,Ye){return ne.apply(this,arguments)})(n,L,x,K);var ne},D.next=3,Xv(n.localStore,e,!0);case 3:return u=new fI(e,(a=D.sent).Hi),c=u.ju(a.documents),h=Y0.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,h),S(n,r,v.Yu),g=new PS(e,r,u),D.abrupt("return",(n.sc.set(e,g),n.ic.has(r)?n.ic.get(r).push(e):n.ic.set(r,[e]),v.snapshot));case 11:case"end":return D.stop()}},t)})),hI.apply(this,arguments)}function O1(t,n){return dI.apply(this,arguments)}function dI(){return dI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=Mt(n),i=r.sc.get(e),!((a=r.ic.get(i.targetId)).length>1)){c.next=3;break}return c.abrupt("return",(r.ic.set(i.targetId,a.filter(function(h){return!om(h,e)})),void r.sc.delete(e)));case 3:if(!r.isPrimaryClient){c.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),c.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),c.t0){c.next=9;break}return c.next=9,Qv(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),gf(r.remoteStore,i.targetId),m(r,i.targetId)}).catch(bl);case 9:c.next=14;break;case 11:return m(r,i.targetId),c.next=14,Qv(r.localStore,i.targetId,!0);case 14:case"end":return c.stop()}},t)})),dI.apply(this,arguments)}function Z1(t,n,e){return vI.apply(this,arguments)}function vI(){return vI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return i=ZS(n),h.prev=1,h.next=4,function(v,g){var x,K,I=Mt(v),D=ar.now(),L=g.reduce(function(ne,re){return ne.add(re.key)},bn());return I.persistence.runTransaction("Locally write mutations","readwrite",function(ne){var re=Fa(),Pe=bn();return I.Gi.getEntries(ne,L).next(function(Ve){(re=Ve).forEach(function(Ye,ze){ze.isValidDocument()||(Pe=Pe.add(Ye))})}).next(function(){return I.localDocuments.getOverlayedDocuments(ne,re)}).next(function(Ve){x=Ve;var Tt,Ye=[],ze=(0,P.Z)(g);try{for(ze.s();!(Tt=ze.n()).done;){var Et=Tt.value,yt=bD(Et,x.get(Et.key).overlayedDocument);null!=yt&&Ye.push(new ko(Et.key,yt,dD(yt.value.mapValue),Yr.exists(!0)))}}catch(en){ze.e(en)}finally{ze.f()}return I.mutationQueue.addMutationBatch(ne,D,Ye,g)}).next(function(Ve){K=Ve;var Ye=Ve.applyToLocalDocumentSet(x,Pe);return I.documentOverlayCache.saveOverlays(ne,Ve.batchId,Ye)})}).then(function(){return{batchId:K.batchId,changes:fm(x)}})}(i.localStore,e);case 4:return i.sharedClientState.addPendingMutation((a=h.sent).batchId),g=a.batchId,I=r,D=void 0,(D=(v=i).ac[v.currentUser.toKey()])||(D=new Ci(mn)),D=D.insert(g,I),v.ac[v.currentUser.toKey()]=D,h.next=9,q(i,a.changes);case 9:return h.next=11,mf(i.remoteStore);case 11:h.next=17;break;case 13:h.prev=13,h.t0=h.catch(1),u=yf(h.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return h.stop()}var v,g,I,D},t,null,[[1,13]])})),vI.apply(this,arguments)}function pI(t,n){return gI.apply(this,arguments)}function gI(){return gI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=Mt(n),u.prev=1,u.next=4,D1(r.localStore,e);case 4:return i=u.sent,e.targetChanges.forEach(function(c,h){var v=r.uc.get(h);v&&(cn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.ec=!0:c.modifiedDocuments.size>0?cn(v.ec):c.removedDocuments.size>0&&(cn(v.ec),v.ec=!1))}),u.next=8,q(r,i,e);case 8:u.next=14;break;case 10:return u.prev=10,u.t0=u.catch(1),u.next=14,bl(u.t0);case 14:case"end":return u.stop()}},t,null,[[1,10]])})),gI.apply(this,arguments)}function OS(t,n,e){var r=Mt(t);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){var i=[];r.sc.forEach(function(a,u){var c=u.view.bu(n);c.snapshot&&i.push(c.snapshot)}),function(a,u){var c=Mt(a);c.onlineState=u;var h=!1;c.queries.forEach(function(v,g){var D,I=(0,P.Z)(g.listeners);try{for(I.s();!(D=I.n()).done;)D.value.bu(u)&&(h=!0)}catch(x){I.e(x)}finally{I.f()}}),h&&xm(c)}(r.eventManager,n),i.length&&r.nc.Wo(i),r.onlineState=n,r.isPrimaryClient&&r.sharedClientState.setOnlineState(n)}}function N1(t,n,e){return mI.apply(this,arguments)}function mI(){return mI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u,c,h,v;return(0,ce.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((i=Mt(n)).sharedClientState.updateQueryState(e,"rejected",r),a=i.uc.get(e),!(u=a&&a.key)){I.next=14;break}return c=(c=new Ci(Nt.comparator)).insert(u,oi.newNoDocument(u,vn.min())),h=bn().add(u),v=new dm(vn.min(),new Map,new Er(mn),c,h),I.next=9,pI(i,v);case 9:i.oc=i.oc.remove(u),i.uc.delete(e),W(i),I.next=16;break;case 14:return I.next=16,Qv(i.localStore,e,!1).then(function(){return m(i,e,r)}).catch(bl);case 16:case"end":return I.stop()}},t)})),mI.apply(this,arguments)}function L1(t,n){return yI.apply(this,arguments)}function yI(){return yI=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=Mt(n),i=e.batch.batchId,c.prev=1,c.next=4,T1(r.localStore,e);case 4:return a=c.sent,p(r,i,null),d(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),c.next=10,q(r,a);case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,bl(c.t0);case 16:case"end":return c.stop()}},t,null,[[1,12]])})),yI.apply(this,arguments)}function s(t,n,e){return o.apply(this,arguments)}function o(){return o=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=Mt(n),c.prev=1,c.next=4,function(h,v){var g=Mt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",function(I){var D;return g.mutationQueue.lookupMutationBatch(I,v).next(function(L){return cn(null!==L),D=L.keys(),g.mutationQueue.removeMutationBatch(I,L)}).next(function(){return g.mutationQueue.performConsistencyCheck(I)}).next(function(){return g.documentOverlayCache.removeOverlaysForBatchId(I,D,v)}).next(function(){return g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,D)}).next(function(){return g.localDocuments.getDocuments(I,D)})})}(i.localStore,e);case 4:return a=c.sent,p(i,e,r),d(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),c.next=10,q(i,a);case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,bl(c.t0);case 16:case"end":return c.stop()}},t,null,[[1,12]])})),o.apply(this,arguments)}function l(t,n){return f.apply(this,arguments)}function f(){return f=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return Ao((r=Mt(n)).remoteStore)||bt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),h.prev=2,h.next=5,function(v){var g=Mt(v);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(I){return g.mutationQueue.getHighestUnacknowledgedBatchId(I)})}(r.localStore);case 5:if(-1!==(i=h.sent)){h.next=8;break}return h.abrupt("return",void e.resolve());case 8:(a=r.hc.get(i)||[]).push(e),r.hc.set(i,a),h.next=16;break;case 12:h.prev=12,h.t0=h.catch(2),u=yf(h.t0,"Initialization of waitForPendingWrites() operation failed"),e.reject(u);case 16:case"end":return h.stop()}},t,null,[[2,12]])})),f.apply(this,arguments)}function d(t,n){(t.hc.get(n)||[]).forEach(function(e){e.resolve()}),t.hc.delete(n)}function p(t,n,e){var r=Mt(t),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(n);a&&(e?a.reject(e):a.resolve(),i=i.remove(n)),r.ac[r.currentUser.toKey()]=i}}function m(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(n);var i,r=(0,P.Z)(t.ic.get(n));try{for(r.s();!(i=r.n()).done;){var a=i.value;t.sc.delete(a),e&&t.nc._c(a,e)}}catch(u){r.e(u)}finally{r.f()}t.ic.delete(n),t.isPrimaryClient&&t.cc.ls(n).forEach(function(u){t.cc.containsKey(u)||C(t,u)})}function C(t,n){t.rc.delete(n.path.canonicalString());var e=t.oc.get(n);null!==e&&(gf(t.remoteStore,e),t.oc=t.oc.remove(n),t.uc.delete(e),W(t))}function S(t,n,e){var i,r=(0,P.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;a instanceof J_?(t.cc.addReference(a.key,n),F(t,a)):a instanceof Bm?(bt("SyncEngine","Document no longer in limbo: "+a.key),t.cc.removeReference(a.key,n),t.cc.containsKey(a.key)||C(t,a.key)):jt()}}catch(u){r.e(u)}finally{r.f()}}function F(t,n){var e=n.key,r=e.path.canonicalString();t.oc.get(e)||t.rc.has(r)||(bt("SyncEngine","New document in limbo: "+e),t.rc.add(r),W(t))}function W(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){var n=t.rc.values().next().value;t.rc.delete(n);var e=new Nt(_n.fromString(n)),r=t.lc.next();t.uc.set(r,new P1(e)),t.oc=t.oc.insert(e,r),U_(t.remoteStore,new ym(ts(sf(e.path)),r,2,La.at))}}function q(t,n,e){return ae.apply(this,arguments)}function ae(){return ae=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u,c;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i=Mt(n),a=[],u=[],c=[],v.t0=i.sc.isEmpty(),v.t0){v.next=9;break}return i.sc.forEach(function(g,I){c.push(i.dc(I,e,r).then(function(D){if(D){i.isPrimaryClient&&i.sharedClientState.updateQueryState(I.targetId,D.fromCache?"not-current":"current"),a.push(D);var L=C1.Ci(I.targetId,D);u.push(L)}}))}),v.next=6,Promise.all(c);case 6:return i.nc.Wo(a),v.next=9,function(){var g=(0,ut.Z)((0,ce.Z)().mark(function I(D,L){var x,K,ne,re,Pe,Ve,ze;return(0,ce.Z)().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return x=Mt(D),Et.prev=1,Et.next=4,x.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(yt){return rt.forEach(L,function(en){return rt.forEach(en.Si,function(Kt){return x.persistence.referenceDelegate.addReference(yt,en.targetId,Kt)}).next(function(){return rt.forEach(en.Di,function(Kt){return x.persistence.referenceDelegate.removeReference(yt,en.targetId,Kt)})})})});case 4:Et.next=11;break;case 6:if(Et.prev=6,Et.t0=Et.catch(1),yo(Et.t0)){Et.next=10;break}throw Et.t0;case 10:bt("LocalStore","Failed to update sequence numbers: "+Et.t0);case 11:K=(0,P.Z)(L);try{for(K.s();!(ne=K.n()).done;)Pe=(re=ne.value).targetId,re.fromCache||(Ve=x.Ui.get(Pe),ze=Ve.withLastLimboFreeSnapshotVersion(Ve.snapshotVersion),x.Ui=x.Ui.insert(Pe,ze))}catch(yt){K.e(yt)}finally{K.f()}case 13:case"end":return Et.stop()}},I,null,[[1,6]])}));return function(I,D){return g.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return v.stop()}},t)})),ae.apply(this,arguments)}function ge(t,n){return xe.apply(this,arguments)}function xe(){return xe=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((r=Mt(n)).currentUser.isEqual(e)){u.next=11;break}return bt("SyncEngine","User change. New user:",e.toKey()),u.next=5,Yv(r.localStore,e);case 5:return i=u.sent,r.currentUser=e,(c=r).hc.forEach(function(v){v.forEach(function(g){g.reject(new gt(We.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.hc.clear(),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),u.next=11,q(r,i.ji);case 11:case"end":return u.stop()}var c},t)})),xe.apply(this,arguments)}function ot(t,n){var e=Mt(t),r=e.uc.get(n);if(r&&r.ec)return bn().add(r.key);var i=bn(),a=e.ic.get(n);if(!a)return i;var c,u=(0,P.Z)(a);try{for(u.s();!(c=u.n()).done;){var v=e.sc.get(c.value);i=i.unionWith(v.view.Qu)}}catch(g){u.e(g)}finally{u.f()}return i}function _t(t,n){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=Mt(n),c.next=3,Xv(r.localStore,e.query,!0);case 3:return a=e.view.Zu(c.sent),c.abrupt("return",(r.isPrimaryClient&&S(r,e.targetId,a.Yu),a));case 6:case"end":return c.stop()}},t)})),Rt.apply(this,arguments)}function Lt(t,n){return ct.apply(this,arguments)}function ct(){return ct=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=Mt(n),a.abrupt("return",cS(r.localStore,e).then(function(u){return q(r,u)}));case 2:case"end":return a.stop()}},t)})),ct.apply(this,arguments)}function nn(t,n,e,r){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r,i){var a,u;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=Mt(n),h.next=3,function(v,g){var I=Mt(v),D=Mt(I.mutationQueue);return I.persistence.runTransaction("Lookup mutation documents","readonly",function(L){return D.Tn(L,g).next(function(x){return x?I.localDocuments.getDocuments(L,x):rt.resolve(null)})})}(a.localStore,e);case 3:if(null===(u=h.sent)){h.next=15;break}if("pending"!==r){h.next=10;break}return h.next=8,mf(a.remoteStore);case 8:h.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(p(a,e,i||null),d(a,e),g=e,Mt(Mt(a.localStore).mutationQueue).An(g)):jt();case 11:return h.next=13,q(a,u);case 13:h.next=16;break;case 15:bt("SyncEngine","Cannot apply mutation batch with id: "+e);case 16:case"end":return h.stop()}var g},t)})),Pn.apply(this,arguments)}function Un(t,n){return Di.apply(this,arguments)}function Di(){return Di=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u,c,v,g;return(0,ce.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(op(r=Mt(n)),ZS(r),!0!==e||!0===r.fc){D.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),D.next=5,fa(r,i.toArray());case 5:return a=D.sent,r.fc=!0,D.next=9,rp(r.remoteStore,!0);case 9:u=(0,P.Z)(a);try{for(u.s();!(c=u.n()).done;)U_(r.remoteStore,c.value)}catch(L){u.e(L)}finally{u.f()}D.next=25;break;case 13:if(!1!==e||!1===r.fc){D.next=25;break}return v=[],g=Promise.resolve(),r.ic.forEach(function(L,x){r.sharedClientState.isLocalQueryTarget(x)?v.push(x):g=g.then(function(){return m(r,x),Qv(r.localStore,x,!0)}),gf(r.remoteStore,x)}),D.next=19,g;case 19:return D.next=21,fa(r,v);case 21:return function(L){var x=Mt(L);x.uc.forEach(function(K,ne){gf(x.remoteStore,ne)}),x.cc.fs(),x.uc=new Map,x.oc=new Ci(Nt.comparator)}(r),r.fc=!1,D.next=25,rp(r.remoteStore,!1);case 25:case"end":return D.stop()}},t)})),Di.apply(this,arguments)}function fa(t,n,e){return Ea.apply(this,arguments)}function Ea(){return Ea=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u,c,h,v,g,I,D,L,K,ne,re;return(0,ce.Z)().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:i=Mt(n),a=[],u=[],c=(0,P.Z)(e),Ve.prev=2,c.s();case 4:if((h=c.n()).done){Ve.next=45;break}if(g=void 0,!(I=i.ic.get(v=h.value))||0===I.length){Ve.next=34;break}return Ve.next=11,Yh(i.localStore,ts(I[0]));case 11:g=Ve.sent,D=(0,P.Z)(I),Ve.prev=13,D.s();case 15:if((L=D.n()).done){Ve.next=24;break}return K=i.sc.get(L.value),Ve.next=20,_t(i,K);case 20:(ne=Ve.sent).snapshot&&u.push(ne.snapshot);case 22:Ve.next=15;break;case 24:Ve.next=29;break;case 26:Ve.prev=26,Ve.t0=Ve.catch(13),D.e(Ve.t0);case 29:return Ve.prev=29,D.f(),Ve.finish(29);case 32:Ve.next=42;break;case 34:return Ve.next=36,R_(i.localStore,v);case 36:return re=Ve.sent,Ve.next=39,Yh(i.localStore,re);case 39:return g=Ve.sent,Ve.next=42,tk(i,Ro(re),v,!1);case 42:a.push(g);case 43:Ve.next=4;break;case 45:Ve.next=50;break;case 47:Ve.prev=47,Ve.t1=Ve.catch(2),c.e(Ve.t1);case 50:return Ve.prev=50,c.f(),Ve.finish(50);case 53:return Ve.abrupt("return",(i.nc.Wo(u),a));case 54:case"end":return Ve.stop()}},t,null,[[2,47,50,53],[13,26,29,32]])})),Ea.apply(this,arguments)}function Ro(t){return U0(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sp(t){var n=Mt(t);return Mt(Mt(n.localStore).persistence).vi()}function up(t,n,e,r){return _f.apply(this,arguments)}function _f(){return _f=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r,i){var a,u,c,h;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(a=Mt(n)).fc){g.next=3;break}return g.abrupt("return",void bt("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.ic.get(e))&&u.length>0)){g.next=20;break}g.t0=r,g.next="current"===g.t0||"not-current"===g.t0?8:"rejected"===g.t0?15:19;break;case 8:return g.next=10,cS(a.localStore,Yb(u[0]));case 10:return c=g.sent,h=dm.createSynthesizedRemoteEventForCurrentChange(e,"current"===r),g.next=14,q(a,c,h);case 14:return g.abrupt("break",20);case 15:return g.next=17,Qv(a.localStore,e,!0);case 17:return m(a,e,i),g.abrupt("break",20);case 19:jt();case 20:case"end":return g.stop()}},t)})),_f.apply(this,arguments)}function Jh(t,n,e){return kf.apply(this,arguments)}function kf(){return kf=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u,c,h,v,g,I,D;return(0,ce.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(i=op(n)).fc){x.next=45;break}a=(0,P.Z)(e),x.prev=3,a.s();case 5:if((u=a.n()).done){x.next=21;break}if(!i.ic.has(c=u.value)){x.next=10;break}return bt("SyncEngine","Adding an already active target "+c),x.abrupt("continue",19);case 10:return x.next=12,R_(i.localStore,c);case 12:return h=x.sent,x.next=15,Yh(i.localStore,h);case 15:return v=x.sent,x.next=18,tk(i,Ro(h),v.targetId,!1);case 18:U_(i.remoteStore,v);case 19:x.next=5;break;case 21:x.next=26;break;case 23:x.prev=23,x.t0=x.catch(3),a.e(x.t0);case 26:return x.prev=26,a.f(),x.finish(26);case 29:g=(0,P.Z)(r),x.prev=30,D=(0,ce.Z)().mark(function K(){var ne;return(0,ce.Z)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Pe.t0=i.ic.has(ne=I.value),!Pe.t0){Pe.next=5;break}return Pe.next=5,Qv(i.localStore,ne,!1).then(function(){gf(i.remoteStore,ne),m(i,ne)}).catch(bl);case 5:case"end":return Pe.stop()}},K)}),g.s();case 33:if((I=g.n()).done){x.next=37;break}return x.delegateYield(D(),"t1",35);case 35:x.next=33;break;case 37:x.next=42;break;case 39:x.prev=39,x.t2=x.catch(30),g.e(x.t2);case 42:return x.prev=42,g.f(),x.finish(42);case 45:case"end":return x.stop()}},t,null,[[3,23,26,29],[30,39,42,45]])})),kf.apply(this,arguments)}function op(t){var n=Mt(t);return n.remoteStore.remoteSyncer.applyRemoteEvent=pI.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=ot.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=N1.bind(null,n),n.nc.Wo=lI.bind(null,n.eventManager),n.nc._c=cI.bind(null,n.eventManager),n}function ZS(t){var n=Mt(t);return n.remoteStore.remoteSyncer.applySuccessfulWrite=L1.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=s.bind(null,n),n}function kN(t,n,e){var i,r=Mt(t);(i=(0,ut.Z)((0,ce.Z)().mark(function a(u,c,h){var v,g,I,D,L;return(0,ce.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,c.getMetadata();case 3:return v=K.sent,K.next=6,function(ne,re){var Pe=Mt(ne),Ve=Zi(re.createTime);return Pe.persistence.runTransaction("hasNewerBundle","readonly",function(Ye){return Pe.Ns.getBundleMetadata(Ye,re.id)}).then(function(Ye){return!!Ye&&Ye.createTime.compareTo(Ve)>=0})}(u.localStore,v);case 6:if(!K.sent){K.next=11;break}return K.next=9,c.close();case 9:return h._completeWith({taskState:"Success",documentsLoaded:(ne=v).totalDocuments,bytesLoaded:ne.totalBytes,totalDocuments:ne.totalDocuments,totalBytes:ne.totalBytes}),K.abrupt("return",Promise.resolve(new Set));case 11:return h._updateProgress(RS(v)),g=new X_(v,u.localStore,c.It),K.next=15,c.wc();case 15:I=K.sent;case 16:if(!I){K.next=26;break}return K.next=19,g.Ou(I);case 19:return(D=K.sent)&&h._updateProgress(D),K.next=23,c.wc();case 23:I=K.sent;case 24:K.next=16;break;case 26:return K.next=28,g.complete();case 28:return L=K.sent,K.next=31,q(u,L.Bu,void 0);case 31:return K.next=33,function(ne,re){var Pe=Mt(ne);return Pe.persistence.runTransaction("Save bundle","readwrite",function(Ve){return Pe.Ns.saveBundleMetadata(Ve,re)})}(u.localStore,v);case 33:return h._completeWith(L.progress),K.abrupt("return",Promise.resolve(L.$u));case 37:return K.prev=37,K.t0=K.catch(0),K.abrupt("return",(wl("SyncEngine","Loading bundle failed with ".concat(K.t0)),h._failWith(K.t0),Promise.resolve(new Set)));case 40:case"end":return K.stop()}var ne},a,null,[[0,37]])})),function(a,u,c){return i.apply(this,arguments)})(r,n,e).then(function(i){r.sharedClientState.notifyBundleLoaded(i)})}var F1=function(){function t(){(0,R.Z)(this,t),this.synchronizeTabs=!1}return(0,A.Z)(t,[{key:"initialize",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(i){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.It=ns(i.databaseInfo.databaseId),this.sharedClientState=this.mc(i),this.persistence=this.gc(i),u.next=5,this.persistence.start();case 5:this.localStore=this.yc(i),this.gcScheduler=this.Ic(i,this.localStore),this.indexBackfillerScheduler=this.Tc(i,this.localStore);case 8:case"end":return u.stop()}},r,this)})),function e(r){return n.apply(this,arguments)})},{key:"Ic",value:function(e,r){return null}},{key:"Tc",value:function(e,r){return null}},{key:"yc",value:function(e){return QE(this.persistence,new sS,e.initialUser,this.It)}},{key:"gc",value:function(e){return new aS(qv.Bs,this.It)}},{key:"mc",value:function(e){return new Z_}},{key:"terminate",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),a.next=3,this.sharedClientState.shutdown();case 3:return a.next=5,this.persistence.shutdown();case 5:case"end":return a.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()}]),t;var n}(),U1=function(t){(0,j.Z)(e,t);var r,n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).Ec=r,u.cacheSizeBytes=i,u.forceOwnership=a,u.synchronizeTabs=!1,u}return(0,A.Z)(e,[{key:"initialize",value:(r=(0,ut.Z)((0,ce.Z)().mark(function a(u){var c=this;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,ie.Z)((0,pe.Z)(e.prototype),"initialize",this).call(this,u);case 2:return v.next=4,this.Ec.initialize(this,u);case 4:return v.next=6,ZS(this.Ec.syncEngine);case 6:return v.next=8,mf(this.Ec.remoteStore);case 8:return v.next=10,this.persistence.li(function(){return c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()});case 10:case"end":return v.stop()}},a,this)})),function i(a){return r.apply(this,arguments)})},{key:"yc",value:function(i){return QE(this.persistence,new sS,i.initialUser,this.It)}},{key:"Ic",value:function(i,a){return new jE(this.persistence.referenceDelegate.garbageCollector,i.asyncQueue,a)}},{key:"Tc",value:function(i,a){var u=new oD(a,this.persistence);return new Ob(i.asyncQueue,u)}},{key:"gc",value:function(i){var a=Cm(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Au.withCacheSize(this.cacheSizeBytes):Au.DEFAULT;return new D_(this.synchronizeTabs,a,i.clientId,u,i.asyncQueue,L_(),Qh(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(i){return new Z_}}]),e}(F1),wN=function(t){(0,j.Z)(e,t);var r,n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,i,!1)).Ec=r,a.cacheSizeBytes=i,a.synchronizeTabs=!0,a}return(0,A.Z)(e,[{key:"initialize",value:(r=(0,ut.Z)((0,ce.Z)().mark(function a(u){var h,c=this;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,ie.Z)((0,pe.Z)(e.prototype),"initialize",this).call(this,u);case 2:if(h=this.Ec.syncEngine,g.t0=this.sharedClientState instanceof Dm,!g.t0){g.next=8;break}return this.sharedClientState.syncEngine={Fr:nn.bind(null,h),$r:up.bind(null,h),Br:Jh.bind(null,h),vi:sp.bind(null,h),Or:Lt.bind(null,h)},g.next=8,this.sharedClientState.start();case 8:return g.next=10,this.persistence.li(function(){var I=(0,ut.Z)((0,ce.Z)().mark(function D(L){return(0,ce.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,Un(c.Ec.syncEngine,L);case 2:c.gcScheduler&&(L&&!c.gcScheduler.started?c.gcScheduler.start():L||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(L&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():L||c.indexBackfillerScheduler.stop());case 4:case"end":return K.stop()}},D)}));return function(D){return I.apply(this,arguments)}}());case 10:case"end":return g.stop()}},a,this)})),function i(a){return r.apply(this,arguments)})},{key:"mc",value:function(i){var a=L_();if(!Dm.C(a))throw new gt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var u=Cm(i.databaseInfo.databaseId,i.databaseInfo.persistenceKey);return new Dm(a,i.asyncQueue,u,i.clientId,i.initialUser)}}]),e}(U1),NS=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"initialize",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(i,a){var u=this;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(h.t0=this.localStore,h.t0){h.next=12;break}return this.localStore=i.localStore,this.sharedClientState=i.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!i.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(v){return OS(u.syncEngine,v,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ge.bind(null,this.syncEngine),h.next=12,rp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return h.stop()}},r,this)})),function e(r,i){return n.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new oI}},{key:"createDatastore",value:function(e){var r=ns(e.databaseInfo.databaseId),i=new Pu(e.databaseInfo);return new yS(e.authCredentials,e.appCheckCredentials,i,r)}},{key:"createRemoteStore",value:function(e){var i,a,u,c,h,r=this;return i=this.localStore,a=this.datastore,u=e.asyncQueue,c=function(g){return OS(r.syncEngine,g,0)},h=N_.C()?new N_:new dS,new nI(i,a,u,c,h)}},{key:"createSyncEngine",value:function(e,r){return g=r,I=new M1(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions),g&&(I.fc=!0),I;var g,I}},{key:"terminate",value:function(){return(e=(0,ut.Z)((0,ce.Z)().mark(function r(i){var a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=Mt(i),bt("RemoteStore","RemoteStore shutting down."),a._u.add(5),c.next=5,Xh(a);case 5:a.mu.shutdown(),a.gu.set("Unknown");case 7:case"end":return c.stop()}},r)})),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}]),t;var n}();function x1(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,e=0;return{read:function(){return(0,ut.Z)((0,ce.Z)().mark(function i(){var a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(e<t.byteLength)){c.next=3;break}return a={value:t.slice(e,e+n),done:!1},c.abrupt("return",(e+=n,a));case 3:return c.abrupt("return",{done:!0});case 4:case"end":return c.stop()}},i)}))()},cancel:function(){return(0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},i)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var _I=function(){function t(n){(0,R.Z)(this,t),this.observer=n,this.muted=!1}return(0,A.Z)(t,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,r){var i=this;this.muted||setTimeout(function(){i.muted||e(r)},0)}}]),t}(),bN=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.bc=n,this.It=e,this.metadata=new Oi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(function(i){i&&i.ku()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==i?void 0:i.payload))))},function(i){return r.metadata.reject(i)})}return(0,A.Z)(t,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.metadata.promise);case 1:case"end":return a.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"wc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getMetadata();case 2:return a.abrupt("return",this.vc());case 3:case"end":return a.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"vc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i,a,u;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.Vc();case 2:if(null!==(i=v.sent)){v.next=5;break}return v.abrupt("return",null);case 5:return a=this.Pc.decode(i),u=Number(a),isNaN(u)&&this.Sc("length string (".concat(a,") is not valid number")),v.next=9,this.Dc(u);case 9:return v.abrupt("return",new AS(JSON.parse(v.sent),i.length+u));case 11:case"end":return v.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Vc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.Cc()<0)){c.next=7;break}return c.next=3,this.xc();case 3:if(!c.sent){c.next=5;break}return c.abrupt("break",7);case 5:c.next=0;break;case 7:if(0!==this.buffer.length){c.next=9;break}return c.abrupt("return",null);case 9:return(i=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),a=this.buffer.slice(0,i),c.abrupt("return",(this.buffer=this.buffer.slice(i),a));case 13:case"end":return c.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"Dc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(i){var a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.buffer.length<i)){c.next=8;break}return c.next=3,this.xc();case 3:if(c.t0=c.sent,!c.t0){c.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:c.next=0;break;case 8:return a=this.Pc.decode(this.buffer.slice(0,i)),c.abrupt("return",(this.buffer=this.buffer.slice(i),a));case 10:case"end":return c.stop()}},r,this)}));return function e(r){return n.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.bc.read();case 2:return(i=c.sent).done||((a=new Uint8Array(this.buffer.length+i.value.length)).set(this.buffer),a.set(i.value,this.buffer.length),this.buffer=a),c.abrupt("return",i.done);case 5:case"end":return c.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()}]),t;var n}(),EN=function(){function t(n){(0,R.Z)(this,t),this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,A.Z)(t,[{key:"lookup",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(i){var u,a=this;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){h.next=2;break}throw new gt(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return h.next=4,function(){var v=(0,ut.Z)((0,ce.Z)().mark(function g(I,D){var L,x,K,ne,re,Pe;return(0,ce.Z)().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return L=Mt(I),x=Bv(L.It)+"/documents",K={documents:D.map(function(ze){return zh(L.It,ze)})},Ye.next=5,L.fo("BatchGetDocuments",x,K,D.length);case 5:return ne=Ye.sent,re=new Map,ne.forEach(function(ze){var Tt=OD(L.It,ze);re.set(Tt.key.toString(),Tt)}),Pe=[],Ye.abrupt("return",(D.forEach(function(ze){var Tt=re.get(ze.toString());cn(!!Tt),Pe.push(Tt)}),Pe));case 10:case"end":return Ye.stop()}},g)}));return function(g,I){return v.apply(this,arguments)}}()(this.datastore,i);case 4:return h.abrupt("return",((u=h.sent).forEach(function(v){return a.recordVersion(v)}),u));case 6:case"end":return h.stop()}},r,this)})),function e(r){return n.apply(this,arguments)})},{key:"set",value:function(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var a,i=this;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){c.next=2;break}throw this.lastWriteError;case 2:return a=this.readVersions,this.mutations.forEach(function(h){a.delete(h.key.toString())}),a.forEach(function(h,v){var g=Nt.fromPath(v);i.mutations.push(new $0(g,i.precondition(g)))}),c.next=7,function(){var h=(0,ut.Z)((0,ce.Z)().mark(function v(g,I){var D,L,x;return(0,ce.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return D=Mt(g),L=Bv(D.It)+"/documents",x={writes:I.map(function(re){return Vv(D.It,re)})},ne.next=3,D.co("Commit",L,x);case 3:case"end":return ne.stop()}},v)}));return function(v,g){return h.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return c.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw jt();r=vn.min()}var i=this.readVersions.get(e.key.toString());if(i){if(!r.isEqual(i))throw new gt(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}},{key:"precondition",value:function(e){var r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(vn.min())?Yr.exists(!1):Yr.updateTime(r):Yr.none()}},{key:"preconditionForUpdate",value:function(e){var r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(vn.min()))throw new gt(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yr.updateTime(r)}return Yr.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),t;var n}(),IN=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.asyncQueue=n,this.datastore=e,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new F_(this.asyncQueue,"transaction_retry")}return(0,A.Z)(t,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao((0,ut.Z)((0,ce.Z)().mark(function r(){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i=new EN(e.datastore),(a=e.Mc(i))&&a.then(function(h){e.asyncQueue.enqueueAndForget(function(){return i.commit().then(function(){e.deferred.resolve(h)}).catch(function(v){e.Oc(v)})})}).catch(function(h){e.Oc(h)});case 2:case"end":return c.stop()}},r)})))}},{key:"Mc",value:function(e){try{var r=this.updateFunction(e);return!Nh(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}},{key:"Oc",value:function(e){var r=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(function(){return r.kc(),Promise.resolve()})):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var r=e.code;return"aborted"===r||"failed-precondition"===r||!lE(r)}return!1}}]),t}(),CN=function(){function t(n,e,r,i){var a=this;(0,R.Z)(this,t),this.authCredentials=n,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=A0.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var u=(0,ut.Z)((0,ce.Z)().mark(function c(h){return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return bt("FirestoreClient","Received user=",h.uid),g.next=3,a.authCredentialListener(h);case 3:a.user=h;case 4:case"end":return g.stop()}},c)}));return function(c){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(u){return bt("FirestoreClient","Received new app check token=",u),a.appCheckCredentialListener(u,a.user)})}return(0,A.Z)(t,[{key:"getConfiguration",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return a.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new gt(We.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var r=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)((0,ce.Z)().mark(function i(){var a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,c.t0=e.onlineComponents,!c.t0){c.next=5;break}return c.next=5,e.onlineComponents.terminate();case 5:if(c.t1=e.offlineComponents,!c.t1){c.next=9;break}return c.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve(),c.next=18;break;case 14:c.prev=14,c.t2=c.catch(0),a=yf(c.t2,"Failed to shutdown persistence"),r.reject(a);case 18:case"end":return c.stop()}},i,null,[[0,14]])}))),r.promise}}]),t;var n}();function B1(t,n){return LS.apply(this,arguments)}function LS(){return LS=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n.asyncQueue.verifyOperationInProgress(),bt("FirestoreClient","Initializing OfflineComponentProvider"),u.next=3,n.getConfiguration();case 3:return r=u.sent,u.next=6,e.initialize(r);case 6:i=r.initialUser,n.setCredentialChangeListener(function(){var c=(0,ut.Z)((0,ce.Z)().mark(function h(v){return(0,ce.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(I.t0=i.isEqual(v),I.t0){I.next=5;break}return I.next=4,Yv(e.localStore,v);case 4:i=v;case 5:case"end":return I.stop()}},h)}));return function(h){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(function(){return n.terminate()}),n.offlineComponents=e;case 8:case"end":return u.stop()}},t)})),LS.apply(this,arguments)}function V1(t,n){return FS.apply(this,arguments)}function FS(){return FS=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n.asyncQueue.verifyOperationInProgress(),u.next=3,US(n);case 3:return r=u.sent,bt("FirestoreClient","Initializing OnlineComponentProvider"),u.next=7,n.getConfiguration();case 7:return i=u.sent,u.next=10,e.initialize(r,i);case 10:n.setCredentialChangeListener(function(c){return Zl(e.remoteStore,c)}),n.setAppCheckTokenChangeListener(function(c,h){return Zl(e.remoteStore,h)}),n.onlineComponents=e;case 13:case"end":return u.stop()}},t)})),FS.apply(this,arguments)}function US(t){return xS.apply(this,arguments)}function xS(){return xS=(0,ut.Z)((0,ce.Z)().mark(function t(n){return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.offlineComponents,r.t0){r.next=5;break}return bt("FirestoreClient","Using default OfflineComponentProvider"),r.next=5,B1(n,new F1);case 5:return r.abrupt("return",n.offlineComponents);case 6:case"end":return r.stop()}},t)})),xS.apply(this,arguments)}function kI(t){return BS.apply(this,arguments)}function BS(){return BS=(0,ut.Z)((0,ce.Z)().mark(function t(n){return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.onlineComponents,r.t0){r.next=5;break}return bt("FirestoreClient","Using default OnlineComponentProvider"),r.next=5,V1(n,new NS);case 5:return r.abrupt("return",n.onlineComponents);case 6:case"end":return r.stop()}},t)})),BS.apply(this,arguments)}function j1(t){return US(t).then(function(n){return n.persistence})}function wI(t){return US(t).then(function(n){return n.localStore})}function H1(t){return kI(t).then(function(n){return n.remoteStore})}function VS(t){return kI(t).then(function(n){return n.syncEngine})}function Vm(t){return jS.apply(this,arguments)}function jS(){return jS=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,kI(n);case 2:return a.abrupt("return",((r=(e=a.sent).eventManager).onListen=MS.bind(null,e.syncEngine),r.onUnlisten=O1.bind(null,e.syncEngine),r));case 5:case"end":return a.stop()}},t)})),jS.apply(this,arguments)}function W1(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Oi;return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(c,h,v,g,I){var D=new _I({next:function(K){h.enqueueAndForget(function(){return $_(c,L)});var ne=K.docs.has(v);!ne&&K.fromCache?I.reject(new gt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):ne&&K.fromCache&&g&&"server"===g.source?I.reject(new gt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(K)},error:function(K){return I.reject(K)}}),L=new Y_(sf(v.path),D,{includeMetadataChanges:!0,Nu:!0});return z_(c,L)},u.next=3,Vm(t);case 3:return u.t1=u.sent,u.t2=t.asyncQueue,u.t3=n,u.t4=e,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},i)}))),r.promise}function G1(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Oi;return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(c,h,v,g,I){var D=new _I({next:function(K){h.enqueueAndForget(function(){return $_(c,L)}),K.fromCache&&"server"===g.source?I.reject(new gt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(K)},error:function(K){return I.reject(K)}}),L=new Y_(v,D,{includeMetadataChanges:!0,Nu:!0});return z_(c,L)},u.next=3,Vm(t);case 3:return u.t1=u.sent,u.t2=t.asyncQueue,u.t3=n,u.t4=e,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},i)}))),r.promise}var z1=new Map;function HS(t,n,e){if(!e)throw new gt(We.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(n,"."))}function K1(t,n,e,r){if(!0===n&&!0===r)throw new gt(We.INVALID_ARGUMENT,"".concat(t," and ").concat(e," cannot be used together."))}function $1(t){if(!Nt.isDocumentKey(t))throw new gt(We.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function q1(t){if(Nt.isDocumentKey(t))throw new gt(We.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function bI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var n=(e=t).constructor?e.constructor.name:null;return n?"a custom ".concat(n," object"):"an object"}var e;return"function"==typeof t?"a function":jt()}function Vn(t,n){if("_delegate"in t&&(t=t._delegate),!(t instanceof n)){if(n.name===t.constructor.name)throw new gt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var e=bI(t);throw new gt(We.INVALID_ARGUMENT,"Expected type '".concat(n.name,"', but it was: ").concat(e))}return t}function Y1(t,n){if(n<=0)throw new gt(We.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(n,"."))}var Q1=function(){function t(n){var e;if((0,R.Z)(this,t),void 0===n.host){if(void 0!==n.ssl)throw new gt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(e=n.ssl)||void 0===e||e;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new gt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,K1("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}return(0,A.Z)(t,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),t}(),nk=function(){function t(n,e,r,i){(0,R.Z)(this,t),this._authCredentials=n,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q1({}),this._settingsFrozen=!1}return(0,A.Z)(t,[{key:"app",get:function(){if(!this._app)throw new gt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new gt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q1(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Tb;switch(r.type){case"gapi":return new Rh(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new gt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return(r=z1.get(this))&&(bt("ComponentProvider","Removing Datastore"),z1.delete(this),r.terminate()),Promise.resolve();var r}}]),t}();function ZN(t,n,e){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(t=Vn(t,nk))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==n&&wl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:"".concat(n,":").concat(e),ssl:!1})),r.mockUserToken){var u,c;if("string"==typeof r.mockUserToken)u=r.mockUserToken,c=Ii.MOCK_USER;else{u=(0,X.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new gt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ii(h)}t._authCredentials=new nD(new Cb(u,c))}}var Xr=function(){function t(n,e,r){(0,R.Z)(this,t),this.converter=e,this._key=r,this.type="document",this.firestore=n}return(0,A.Z)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ed(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),bs=function(){function t(n,e,r){(0,R.Z)(this,t),this.converter=e,this._query=r,this.type="query",this.firestore=n}return(0,A.Z)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),ed=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this,r,i,sf(a)))._path=a,u.type="collection",u}return(0,A.Z)(e,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var i=this._path.popLast();return i.isEmpty()?null:new Xr(this.firestore,null,new Nt(i))}},{key:"withConverter",value:function(i){return new e(this.firestore,i,this._path)}}]),e}(bs);function X1(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];if(t=(0,X.m9)(t),HS("collection","path",n),t instanceof nk){var a=_n.fromString.apply(_n,[n].concat(r));return q1(a),new ed(t,null,a)}if(!(t instanceof Xr||t instanceof ed))throw new gt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=t._path.child(_n.fromString.apply(_n,[n].concat(r)));return q1(u),new ed(t.firestore,null,u)}function EI(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];if(t=(0,X.m9)(t),1===arguments.length&&(n=A0.R()),HS("doc","path",n),t instanceof nk){var a=_n.fromString.apply(_n,[n].concat(r));return $1(a),new Xr(t,null,new Nt(a))}if(!(t instanceof Xr||t instanceof ed))throw new gt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=t._path.child(_n.fromString.apply(_n,[n].concat(r)));return $1(u),new Xr(t.firestore,t instanceof ed?t.converter:null,new Nt(u))}function J1(t,n){return t=(0,X.m9)(t),n=(0,X.m9)(n),(t instanceof Xr||t instanceof ed)&&(n instanceof Xr||n instanceof ed)&&t.firestore===n.firestore&&t.path===n.path&&t.converter===n.converter}function eP(t,n){return t=(0,X.m9)(t),n=(0,X.m9)(n),t instanceof bs&&n instanceof bs&&t.firestore===n.firestore&&om(t._query,n._query)&&t.converter===n.converter}var LN=function(){function t(){var n=this;(0,R.Z)(this,t),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new F_(this,"async_queue_retry"),this.jc=function(){var r=Qh();r&&bt("AsyncQueue","Visibility state changed to "+r.visibilityState),n.xo.bo()};var e=Qh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}return(0,A.Z)(t,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var r=Qh();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var r=this;if(this.Wc(),this.Lc)return new Promise(function(){});var i=new Oi;return this.zc(function(){return r.Lc&&r.Gc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)}).then(function(){return i.promise})}},{key:"enqueueRetryable",value:function(e){var r=this;this.enqueueAndForget(function(){return r.Bc.push(e),r.Hc()})}},{key:"Hc",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i=this;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(0===this.Bc.length){u.next=14;break}return u.prev=1,u.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(1),yo(u.t0)){u.next=12;break}throw u.t0;case 12:bt("AsyncQueue","Operation failed with retryable error: "+u.t0);case 13:this.Bc.length>0&&this.xo.Ao(function(){return i.Hc()});case 14:case"end":return u.stop()}},r,this,[[1,8]])})),function e(){return n.apply(this,arguments)})},{key:"zc",value:function(e){var r=this,i=this.$c.then(function(){return r.Kc=!0,e().catch(function(a){var c,h;throw r.qc=a,r.Kc=!1,xr("INTERNAL UNHANDLED ERROR: ",(h=(c=a).message||"",c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h)),a}).then(function(a){return r.Kc=!1,a})});return this.$c=i,i}},{key:"enqueueAfterDelay",value:function(e,r,i){var a=this;this.Wc(),this.Qc.indexOf(e)>-1&&(r=0);var u=W_.createAndSchedule(this,e,r,i,function(c){return a.Jc(c)});return this.Uc.push(u),u}},{key:"Wc",value:function(){this.qc&&jt()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=this.$c,u.next=3,i;case 3:if(i!==this.$c){u.next=0;break}case 4:case"end":return u.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"Xc",value:function(e){var i,r=(0,P.Z)(this.Uc);try{for(r.s();!(i=r.n()).done;)if(i.value.timerId===e)return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"Zc",value:function(e){var r=this;return this.Yc().then(function(){r.Uc.sort(function(c,h){return c.targetTimeMs-h.targetTimeMs});var a,i=(0,P.Z)(r.Uc);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(u.skipDelay(),"all"!==e&&u.timerId===e)break}}catch(c){i.e(c)}finally{i.f()}return r.Yc()})}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var r=this.Uc.indexOf(e);this.Uc.splice(r,1)}}]),t;var n}();function WS(t){return function(n,e){if("object"!=typeof n||null===n)return!1;var a,r=n,i=(0,P.Z)(["next","error","complete"]);try{for(i.s();!(a=i.n()).done;){var u=a.value;if(u in r&&"function"==typeof r[u])return!0}}catch(c){i.e(c)}finally{i.f()}return!1}(t)}var FN=function(){function t(){(0,R.Z)(this,t),this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,A.Z)(t,[{key:"onProgress",value:function(e,r,i){this._progressObserver={next:e,error:r,complete:i}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,r){return this._taskCompletionResolver.promise.then(e,r)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),t}(),Vr=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this,r,i,a,u)).type="firestore",c._queue=new LN,c._persistenceKey=(null==u?void 0:u.name)||"[DEFAULT]",c}return(0,A.Z)(e,[{key:"_terminate",value:function(){return this._firestoreClient||tP(this),this._firestoreClient.terminate()}}]),e}(nk);function Li(t){return t._firestoreClient||tP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tP(t){var n,a,c,e=t._freezeSettings(),r=(a=(null===(n=t._app)||void 0===n?void 0:n.options.appId)||"",new Fb(t._databaseId,a,t._persistenceKey,(c=e).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));t._firestoreClient=new CN(t._authCredentials,t._appCheckCredentials,t._queue,r)}function nP(t,n,e){var r=new Oi;return t.asyncQueue.enqueue((0,ut.Z)((0,ce.Z)().mark(function i(){var a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,B1(t,e);case 3:return c.next=5,V1(t,n);case 5:r.resolve(),c.next=14;break;case 8:if(c.prev=8,c.t0=c.catch(0),"FirebaseError"===(h=a=c.t0).name?h.code===We.FAILED_PRECONDITION||h.code===We.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code){c.next=13;break}throw a;case 13:wl("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return c.stop()}var h},i,null,[[0,8]])}))).then(function(){return r.promise})}function rP(t){if(t._initialized||t._terminated)throw new gt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wf=function(){function t(){(0,R.Z)(this,t);for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];for(var i=0;i<e.length;++i)if(0===e[i].length)throw new gt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}return(0,A.Z)(t,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),t}(),lp=function(){function t(n){(0,R.Z)(this,t),this._byteString=n}return(0,A.Z)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(oa.fromBase64String(e))}catch(r){throw new gt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}},{key:"fromUint8Array",value:function(e){return new t(oa.fromUint8Array(e))}}]),t}(),cp=(0,A.Z)(function t(n){(0,R.Z)(this,t),this._methodName=n}),II=function(){function t(n,e){if((0,R.Z)(this,t),!isFinite(n)||n<-90||n>90)throw new gt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(e)||e<-180||e>180)throw new gt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=n,this._long=e}return(0,A.Z)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return mn(this._lat,e._lat)||mn(this._long,e._long)}}]),t}(),KN=/^__.*__$/,$N=function(){function t(n,e,r){(0,R.Z)(this,t),this.data=n,this.fieldMask=e,this.fieldTransforms=r}return(0,A.Z)(t,[{key:"toMutation",value:function(e,r){return null!==this.fieldMask?new ko(e,this.data,this.fieldMask,r,this.fieldTransforms):new Hh(e,this.data,r,this.fieldTransforms)}}]),t}(),iP=function(){function t(n,e,r){(0,R.Z)(this,t),this.data=n,this.fieldMask=e,this.fieldTransforms=r}return(0,A.Z)(t,[{key:"toMutation",value:function(e,r){return new ko(e,this.data,this.fieldMask,r,this.fieldTransforms)}}]),t}();function aP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}var sP=function(){function t(n,e,r,i,a,u){(0,R.Z)(this,t),this.settings=n,this.databaseId=e,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=u||[]}return(0,A.Z)(t,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var r,i=null===(r=this.path)||void 0===r?void 0:r.child(e),a=this.sa({path:i,ra:!1});return a.oa(e),a}},{key:"ua",value:function(e){var r,i=null===(r=this.path)||void 0===r?void 0:r.child(e),a=this.sa({path:i,ra:!1});return a.ea(),a}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return DI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(r){return e.isPrefixOf(r)})||void 0!==this.fieldTransforms.find(function(r){return e.isPrefixOf(r.field)})}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(aP(this.na)&&KN.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),t}(),qN=function(){function t(n,e,r){(0,R.Z)(this,t),this.databaseId=n,this.ignoreUndefinedProperties=e,this.It=r||ns(n)}return(0,A.Z)(t,[{key:"fa",value:function(e,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sP({na:e,methodName:r,la:i,path:_r.emptyPath(),ra:!1,ha:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),t}();function fp(t){var n=t._freezeSettings(),e=ns(t._databaseId);return new qN(t._databaseId,!!n.ignoreUndefinedProperties,e)}function CI(t,n,e,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=t.fa(a.merge||a.mergeFields?2:0,n,e,i);$S("Data must be an object, but it was:",u,r);var h,v,c=lP(r,u);if(a.merge)h=new Eu(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){var D,g=[],I=(0,P.Z)(a.mergeFields);try{for(I.s();!(D=I.n()).done;){var L=D.value,x=qS(n,L,e);if(!u.contains(x))throw new gt(We.INVALID_ARGUMENT,"Field '".concat(x,"' is specified in your field mask but missing from your input data."));fP(g,x)||g.push(x)}}catch(K){I.e(K)}finally{I.f()}h=new Eu(g),v=u.fieldTransforms.filter(function(K){return h.covers(K.field)})}else h=null,v=u.fieldTransforms;return new $N(new Nn(c),h,v)}var GS=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"_toFieldTransform",value:function(i){if(2!==i.na)throw i.aa("".concat(this._methodName,1===i.na?"() can only appear at the top level of your update data":"() cannot be used with set() unless you pass {merge:true}"));return i.fieldMask.push(i.path),null}},{key:"isEqual",value:function(i){return i instanceof e}}]),e}(cp);function uP(t,n,e){return new sP({na:3,la:n.settings.la,methodName:t._methodName,ra:e},n.databaseId,n.It,n.ignoreUndefinedProperties)}var YN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"_toFieldTransform",value:function(i){return new Fv(i.path,new jh)}},{key:"isEqual",value:function(i){return i instanceof e}}]),e}(cp),QN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r)).da=i,a}return(0,A.Z)(e,[{key:"_toFieldTransform",value:function(i){var a=uP(this,i,!0),u=this.da.map(function(h){return hp(h,a)}),c=new zs(u);return new Fv(i.path,c)}},{key:"isEqual",value:function(i){return this===i}}]),e}(cp),XN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r)).da=i,a}return(0,A.Z)(e,[{key:"_toFieldTransform",value:function(i){var a=uP(this,i,!0),u=this.da.map(function(h){return hp(h,a)}),c=new Rl(u);return new Fv(i.path,c)}},{key:"isEqual",value:function(i){return this===i}}]),e}(cp),JN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r))._a=i,a}return(0,A.Z)(e,[{key:"_toFieldTransform",value:function(i){var a=new uf(i.It,Jb(i.It,this._a));return new Fv(i.path,a)}},{key:"isEqual",value:function(i){return this===i}}]),e}(cp);function zS(t,n,e,r){var i=t.fa(1,n,e);$S("Data must be an object, but it was:",i,r);var a=[],u=Nn.empty();nf(r,function(h,v){var g=TI(n,h,e);v=(0,X.m9)(v);var I=i.ua(g);if(v instanceof GS)a.push(g);else{var D=hp(v,I);null!=D&&(a.push(g),u.set(g,D))}});var c=new Eu(a);return new iP(u,c,i.fieldTransforms)}function KS(t,n,e,r,i,a){var u=t.fa(1,n,e),c=[qS(n,r,e)],h=[i];if(a.length%2!=0)throw new gt(We.INVALID_ARGUMENT,"Function ".concat(n,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var v=0;v<a.length;v+=2)c.push(qS(n,a[v])),h.push(a[v+1]);for(var g=[],I=Nn.empty(),D=c.length-1;D>=0;--D)if(!fP(g,c[D])){var L=c[D],x=h[D];x=(0,X.m9)(x);var K=u.ua(L);if(x instanceof GS)g.push(L);else{var ne=hp(x,K);null!=ne&&(g.push(L),I.set(L,ne))}}var re=new Eu(g);return new iP(I,re,u.fieldTransforms)}function oP(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hp(e,t.fa(r?4:3,n))}function hp(t,n){if(cP(t=(0,X.m9)(t)))return $S("Unsupported field value:",n,t),lP(t,n);if(t instanceof cp)return function(e,r){if(!aP(r.na))throw r.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!r.path)throw r.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,n),null;if(void 0===t&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),t instanceof Array){if(n.settings.ra&&4!==n.na)throw n.aa("Nested arrays are not supported");return function(e,r){var c,i=[],a=0,u=(0,P.Z)(e);try{for(u.s();!(c=u.n()).done;){var v=hp(c.value,r.ca(a));null==v&&(v={nullValue:"NULL_VALUE"}),i.push(v),a++}}catch(g){u.e(g)}finally{u.f()}return{arrayValue:{values:i}}}(t,n)}return function(e,r){if(null===(e=(0,X.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Jb(r.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var i=ar.fromDate(e);return{timestampValue:Gh(r.It,i)}}if(e instanceof ar){var a=new ar(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gh(r.It,a)}}if(e instanceof II)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lp)return{bytesValue:vE(r.It,e._byteString)};if(e instanceof Xr){var u=r.databaseId,c=e.firestore._databaseId;if(!c.isEqual(u))throw r.aa("Document reference is for database ".concat(c.projectId,"/").concat(c.database," but should be for database ").concat(u.projectId,"/").concat(u.database));return{referenceValue:t_(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.aa("Unsupported field value: ".concat(bI(e)))}(t,n)}function lP(t,n){var e={};return Nb(t)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):nf(t,function(r,i){var a=hp(i,n.ia(r));null!=a&&(e[r]=a)}),{mapValue:{fields:e}}}function cP(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ar||t instanceof II||t instanceof lp||t instanceof Xr||t instanceof cp)}function $S(t,n,e){if(!cP(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=bI(e);throw n.aa("an object"===r?t+" a custom object":t+" "+r)}var i}function qS(t,n,e){if((n=(0,X.m9)(n))instanceof wf)return n._internalPath;if("string"==typeof n)return TI(t,n);throw DI("Field path arguments must be of type string or ",t,!1,void 0,e)}var eL=new RegExp("[~\\*/\\[\\]]");function TI(t,n,e){if(n.search(eL)>=0)throw DI("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,e);try{return(0,Fw.Z)(wf,(0,on.Z)(n.split(".")))._internalPath}catch(r){throw DI("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,e)}}function DI(t,n,e,r,i){var a=r&&!r.isEmpty(),u=void 0!==i,c="Function ".concat(n,"() called with invalid data");e&&(c+=" (via `toFirestore()`)"),c+=". ";var h="";return(a||u)&&(h+=" (found",a&&(h+=" in field ".concat(r)),u&&(h+=" in document ".concat(i)),h+=")"),new gt(We.INVALID_ARGUMENT,c+t+h)}function fP(t,n){return t.some(function(e){return e.isEqual(n)})}var rk=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this._firestore=n,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}return(0,A.Z)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Xr(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var r=this._document.data.field(SI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}]),t}(),tL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"data",value:function(){return(0,ie.Z)((0,pe.Z)(e.prototype),"data",this).call(this)}}]),e}(rk);function SI(t,n){return"string"==typeof n?TI(t,n):n instanceof wf?n._internalPath:n._delegate._internalPath}var dp=function(){function t(n,e){(0,R.Z)(this,t),this.hasPendingWrites=n,this.fromCache=e}return(0,A.Z)(t,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),t}(),bf=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u,c,h){var v;return(0,R.Z)(this,e),(v=n.call(this,r,i,a,u,h))._firestore=r,v._firestoreImpl=r,v.metadata=c,v}return(0,A.Z)(e,[{key:"exists",value:function(){return(0,ie.Z)((0,pe.Z)(e.prototype),"exists",this).call(this)}},{key:"data",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var a=new ik(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}}},{key:"get",value:function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var u=this._document.data.field(SI("DocumentSnapshot.get",i));if(null!==u)return this._userDataWriter.convertValue(u,a.serverTimestamps)}}}]),e}(rk),ik=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"data",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ie.Z)((0,pe.Z)(e.prototype),"data",this).call(this,i)}}]),e}(bf),td=function(){function t(n,e,r,i){(0,R.Z)(this,t),this._firestore=n,this._userDataWriter=e,this._snapshot=i,this.metadata=new dp(i.hasPendingWrites,i.fromCache),this.query=r}return(0,A.Z)(t,[{key:"docs",get:function(){var e=[];return this.forEach(function(r){return e.push(r)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,r){var i=this;this._snapshot.docs.forEach(function(a){e.call(r,new ik(i._firestore,i._userDataWriter,a.key,a,new dp(i._snapshot.mutatedKeys.has(a.key),i._snapshot.fromCache),i.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new gt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){var u=0;return i._snapshot.docChanges.map(function(h){return{type:"added",doc:new ik(i._firestore,i._userDataWriter,h.doc.key,h.doc,new dp(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}})}var c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(h){return a||3!==h.type}).map(function(h){var v=new ik(i._firestore,i._userDataWriter,h.doc.key,h.doc,new dp(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),g=-1,I=-1;return 0!==h.type&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(I=(c=c.add(h.doc)).indexOf(h.doc.key)),{type:nL(h.type),doc:v,oldIndex:g,newIndex:I}})}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}]),t}();function nL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function hP(t,n){return t instanceof bf&&n instanceof bf?t._firestore===n._firestore&&t._key.isEqual(n._key)&&(null===t._document?null===n._document:t._document.isEqual(n._document))&&t._converter===n._converter:t instanceof td&&n instanceof td&&t._firestore===n._firestore&&eP(t.query,n.query)&&t.metadata.isEqual(n.metadata)&&t._snapshot.isEqual(n._snapshot)}function dP(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new gt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ak=(0,A.Z)(function t(){(0,R.Z)(this,t)});function nd(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=0,a=e;i<a.length;i++){var u=a[i];t=u._apply(t)}return t}var rL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).wa=r,u.ma=i,u.ga=a,u.type="where",u}return(0,A.Z)(e,[{key:"_apply",value:function(i){var c,v,a=fp(i.firestore),u=function(c,h,v,g,I,D,L){var x;if(I.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new gt(We.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(D,"' queries on documentId()."));if("in"===D||"not-in"===D){_P(L,D);var re,K=[],ne=(0,P.Z)(L);try{for(ne.s();!(re=ne.n()).done;)K.push(yP(g,c,re.value))}catch(Ye){ne.e(Ye)}finally{ne.f()}x={arrayValue:{values:K}}}else x=yP(g,c,L)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||_P(L,D),x=oP(v,"where",L,"in"===D||"not-in"===D);var Ve=Ti.create(I,D,x);return function(Ye,ze){if(ze.dt()){var Tt=x0(Ye);if(null!==Tt&&!Tt.isEqual(ze.field))throw new gt(We.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(Tt.toString(),"' and '").concat(ze.field.toString(),"'"));var Et=um(Ye);null!==Et&&kP(0,ze.field,Et)}var yt=function(en,Kt){var li,Xn=(0,P.Z)(en.filters);try{for(Xn.s();!(li=Xn.n()).done;){var Hl=li.value;if(Kt.indexOf(Hl.op)>=0)return Hl.op}}catch(Hk){Xn.e(Hk)}finally{Xn.f()}return null}(Ye,function(en){switch(en){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ze.op));if(null!==yt)throw new gt(We.INVALID_ARGUMENT,yt===ze.op?"Invalid query. You cannot use more than one '".concat(ze.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(ze.op.toString(),"' filters with '").concat(yt.toString(),"' filters."))}(c,Ve),Ve}(i._query,0,a,i.firestore._databaseId,this.wa,this.ma,this.ga);return new bs(i.firestore,i.converter,(v=(c=i._query).filters.concat([u]),new Cu(c.path,c.collectionGroup,c.explicitOrderBy.slice(),v,c.limit,c.limitType,c.startAt,c.endAt)))}}]),e}(ak),aL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this)).wa=r,a.ya=i,a.type="orderBy",a}return(0,A.Z)(e,[{key:"_apply",value:function(i){var u,h,a=function(u,c,h){if(null!==u.startAt)throw new gt(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new gt(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var v=new Iu(c,h);return function(g,I){if(null===um(g)){var D=x0(g);null!==D&&kP(0,D,I.field)}}(u,v),v}(i._query,this.wa,this.ya);return new bs(i.firestore,i.converter,(h=(u=i._query).explicitOrderBy.concat([a]),new Cu(u.path,u.collectionGroup,h,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)))}}]),e}(ak),vP=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).type=r,u.pa=i,u.Ia=a,u}return(0,A.Z)(e,[{key:"_apply",value:function(i){return new bs(i.firestore,i.converter,V0(i._query,this.pa,this.Ia))}}]),e}(ak),pP=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).type=r,u.Ta=i,u.Ea=a,u}return(0,A.Z)(e,[{key:"_apply",value:function(i){var u,c,a=mP(i,this.type,this.Ta,this.Ea);return new bs(i.firestore,i.converter,(c=a,new Cu((u=i._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)))}}]),e}(ak);function lL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new pP("startAt",n,!0)}function cL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new pP("startAfter",n,!1)}var gP=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a){var u;return(0,R.Z)(this,e),(u=n.call(this)).type=r,u.Ta=i,u.Ea=a,u}return(0,A.Z)(e,[{key:"_apply",value:function(i){var u,c,a=mP(i,this.type,this.Ta,this.Ea);return new bs(i.firestore,i.converter,(c=a,new Cu((u=i._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)))}}]),e}(ak);function fL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new gP("endBefore",n,!1)}function hL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new gP("endAt",n,!0)}function mP(t,n,e,r){if(e[0]=(0,X.m9)(e[0]),e[0]instanceof rk)return function(a,u,c,h,v){if(!h)throw new gt(We.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(c,"()."));var D,g=[],I=(0,P.Z)(Nv(a));try{for(I.s();!(D=I.n()).done;){var L=D.value;if(L.field.isKeyField())g.push(Fh(u,h.key));else{var x=h.data.field(L.field);if(rm(x))throw new gt(We.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+L.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){var K=L.field.canonicalString();throw new gt(We.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(K,"' (used as the orderBy) does not exist."))}g.push(x)}}}catch(ne){I.e(ne)}finally{I.f()}return new ks(g,v)}(t._query,t.firestore._databaseId,n,e[0]._document,r);var i=fp(t.firestore);return function(a,u,c,h,v,g){var I=a.explicitOrderBy;if(v.length>I.length)throw new gt(We.INVALID_ARGUMENT,"Too many arguments provided to ".concat(h,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var D=[],L=0;L<v.length;L++){var x=v[L];if(I[L].field.isKeyField()){if("string"!=typeof x)throw new gt(We.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(h,"(), but got a ").concat(typeof x));if(!B0(a)&&-1!==x.indexOf("/"))throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(h,"() must be a plain document ID, but '").concat(x,"' contains a slash."));var K=a.path.child(_n.fromString(x));if(!Nt.isDocumentKey(K))throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(h,"() must result in a valid document path, but '").concat(K,"' is not because it contains an odd number of segments."));var ne=new Nt(K);D.push(Fh(u,ne))}else{var re=oP(c,h,x);D.push(re)}}return new ks(D,g)}(t._query,t.firestore._databaseId,i,n,e,r)}function yP(t,n,e){if("string"==typeof(e=(0,X.m9)(e))){if(""===e)throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(n)&&-1!==e.indexOf("/"))throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(e,"' contains a '/' character."));var r=n.path.child(_n.fromString(e));if(!Nt.isDocumentKey(r))throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fh(t,new Nt(r))}if(e instanceof Xr)return Fh(t,e._key);throw new gt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bI(e),"."))}function _P(t,n){if(!Array.isArray(t)||0===t.length)throw new gt(We.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(n.toString(),"' filters."));if(t.length>10)throw new gt(We.INVALID_ARGUMENT,"Invalid Query. '".concat(n.toString(),"' filters support a maximum of 10 elements in the value array."))}function kP(t,n,e){if(!e.isEqual(n))throw new gt(We.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(n.toString(),"' and so you must also use '").concat(n.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(e.toString(),"' instead."))}var dL={maxAttempts:5},YS=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"convertValue",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(rf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw jt()}}},{key:"convertObject",value:function(e,r){var i=this,a={};return nf(e.fields,function(u,c){a[u]=i.convertValue(c,r)}),a}},{key:"convertGeoPoint",value:function(e){return new II(Br(e.latitude),Br(e.longitude))}},{key:"convertArray",value:function(e,r){var i=this;return(e.values||[]).map(function(a){return i.convertValue(a,r)})}},{key:"convertServerTimestamp",value:function(e,r){switch(r){case"previous":var i=L0(e);return null==i?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}},{key:"convertTimestamp",value:function(e){var r=Tl(e);return new ar(r.seconds,r.nanos)}},{key:"convertDocumentKey",value:function(e,r){var i=_n.fromString(e);cn(IE(i));var a=new Zh(i.get(1),i.get(3)),u=new Nt(i.popFirst(5));return a.isEqual(r)||xr("Document ".concat(u," contains a document reference within a different database (").concat(a.projectId,"/").concat(a.database,") which is not supported. It will be treated as a reference in the current database (").concat(r.projectId,"/").concat(r.database,") instead.")),u}}]),t}();function AI(t,n,e){return t?e&&(e.merge||e.mergeFields)?t.toFirestore(n,e):t.toFirestore(n):n}var vL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).firestore=r,i}return(0,A.Z)(e,[{key:"convertBytes",value:function(i){return new lp(i)}},{key:"convertReference",value:function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return new Xr(this.firestore,null,a)}}]),e}(YS),wP=function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fp(n)}return(0,A.Z)(t,[{key:"set",value:function(e,r,i){this._verifyNotCommitted();var a=rd(e,this._firestore),u=AI(a.converter,r,i),c=CI(this._dataReader,"WriteBatch.set",a._key,u,null!==a.converter,i);return this._mutations.push(c.toMutation(a._key,Yr.none())),this}},{key:"update",value:function(e,r,i){this._verifyNotCommitted();for(var u,a=rd(e,this._firestore),c=arguments.length,h=new Array(c>3?c-3:0),v=3;v<c;v++)h[v-3]=arguments[v];return u="string"==typeof(r=(0,X.m9)(r))||r instanceof wf?KS(this._dataReader,"WriteBatch.update",a._key,r,i,h):zS(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(u.toMutation(a._key,Yr.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var r=rd(e,this._firestore);return this._mutations=this._mutations.concat(new Wh(r._key,Yr.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new gt(We.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),t}();function rd(t,n){if((t=(0,X.m9)(t)).firestore!==n)throw new gt(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vp=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).firestore=r,i}return(0,A.Z)(e,[{key:"convertBytes",value:function(i){return new lp(i)}},{key:"convertReference",value:function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return new Xr(this.firestore,null,a)}}]),e}(YS);function bP(t,n,e){t=Vn(t,Xr);var r=Vn(t.firestore,Vr),i=AI(t.converter,n,e);return jm(r,[CI(fp(r),"setDoc",t._key,i,null!==t.converter,e).toMutation(t._key,Yr.none())])}function EP(t,n,e){t=Vn(t,Xr);for(var r=Vn(t.firestore,Vr),i=fp(r),u=arguments.length,c=new Array(u>3?u-3:0),h=3;h<u;h++)c[h-3]=arguments[h];return jm(r,[("string"==typeof(n=(0,X.m9)(n))||n instanceof wf?KS(i,"updateDoc",t._key,n,e,c):zS(i,"updateDoc",t._key,n)).toMutation(t._key,Yr.exists(!0))])}function IP(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i,a,u;t=(0,X.m9)(t);var c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||WS(e[h])||(c=e[h],h++);var I,D,L,ne,re,Pe,Ye,ze,v={includeMetadataChanges:c.includeMetadataChanges};if(WS(e[h])){var g=e[h];e[h]=null===(i=g.next)||void 0===i?void 0:i.bind(g),e[h+1]=null===(a=g.error)||void 0===a?void 0:a.bind(g),e[h+2]=null===(u=g.complete)||void 0===u?void 0:u.bind(g)}if(t instanceof Xr)D=Vn(t.firestore,Vr),L=sf(t._key.path),I={next:function(re){e[h]&&e[h](QS(D,t,re))},error:e[h+1],complete:e[h+2]};else{var x=Vn(t,bs);D=Vn(x.firestore,Vr),L=x._query;var K=new vp(D);I={next:function(re){e[h]&&e[h](new td(D,K,x,re))},error:e[h+1],complete:e[h+2]},dP(t._query)}return ne=Li(D),re=L,Pe=v,Ye=new _I(I),ze=new Y_(re,Ye,Pe),ne.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function Tt(){return(0,ce.Z)().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.t0=z_,yt.next=3,Vm(ne);case 3:return yt.t1=yt.sent,yt.t2=ze,yt.abrupt("return",(0,yt.t0)(yt.t1,yt.t2));case 6:case"end":return yt.stop()}},Tt)}))),function(){Ye.Rc(),ne.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function Tt(){return(0,ce.Z)().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.t0=$_,yt.next=3,Vm(ne);case 3:return yt.t1=yt.sent,yt.t2=ze,yt.abrupt("return",(0,yt.t0)(yt.t1,yt.t2));case 6:case"end":return yt.stop()}},Tt)})))}}function jm(t,n){return e=Li(t),r=n,i=new Oi,e.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function a(){return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=Z1,c.next=3,VS(e);case 3:return c.t1=c.sent,c.t2=r,c.t3=i,c.abrupt("return",(0,c.t0)(c.t1,c.t2,c.t3));case 7:case"end":return c.stop()}},a)}))),i.promise;var e,r,i}function QS(t,n,e){var r=e.docs.get(n._key),i=new vp(t);return new bf(t,i,n._key,r,new dp(e.hasPendingWrites,e.fromCache),n.converter)}var IL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,i))._firestore=r,a}return(0,A.Z)(e,[{key:"get",value:function(i){var a=this,u=rd(i,this._firestore),c=new vp(this._firestore);return(0,ie.Z)((0,pe.Z)(e.prototype),"get",this).call(this,i).then(function(h){return new bf(a._firestore,c,u._key,h._document,new dp(!1,!1),u.converter)})}}]),e}(function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._transaction=e,this._dataReader=fp(n)}return(0,A.Z)(t,[{key:"get",value:function(e){var r=this,i=rd(e,this._firestore),a=new vL(this._firestore);return this._transaction.lookup([i._key]).then(function(u){if(!u||1!==u.length)return jt();var c=u[0];if(c.isFoundDocument())return new rk(r._firestore,a,c.key,c,i.converter);if(c.isNoDocument())return new rk(r._firestore,a,i._key,null,i.converter);throw jt()})}},{key:"set",value:function(e,r,i){var a=rd(e,this._firestore),u=AI(a.converter,r,i),c=CI(this._dataReader,"Transaction.set",a._key,u,null!==a.converter,i);return this._transaction.set(a._key,c),this}},{key:"update",value:function(e,r,i){for(var u,a=rd(e,this._firestore),c=arguments.length,h=new Array(c>3?c-3:0),v=3;v<c;v++)h[v-3]=arguments[v];return u="string"==typeof(r=(0,X.m9)(r))||r instanceof wf?KS(this._dataReader,"Transaction.update",a._key,r,i,h):zS(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,u),this}},{key:"delete",value:function(e){var r=rd(e,this._firestore);return this._transaction.delete(r._key),this}}]),t}());function SL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new QN("arrayUnion",n)}function AL(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new XN("arrayRemove",n)}function XS(t,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new gt("invalid-argument","Invalid options passed to function ".concat(t,"(): You cannot ")+'specify both "merge" and "mergeFields".');return n}function TP(){if("undefined"==typeof Uint8Array)throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function DP(){if(!function lD(){return"undefined"!=typeof atob}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Xc=Ki.SDK_VERSION,(0,Ki._registerComponent)(new Bs.wA("firestore",function(e,r){var i=r.instanceIdentifier,a=r.options,u=e.getProvider("app").getImmediate(),c=new Vr(new Db(e.getProvider("auth-internal")),new iD(e.getProvider("app-check-internal")),function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new gt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zh(h.options.projectId,v)}(u,i),u);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(qg,"3.5.0",t),(0,Ki.registerVersion)(qg,"3.5.0","esm2017")}();var SP=function(){function t(n){(0,R.Z)(this,t),this._delegate=n}return(0,A.Z)(t,[{key:"toBase64",value:function(){return DP(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return TP(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(e){return DP(),new t(lp.fromBase64String(e))}},{key:"fromUint8Array",value:function(e){return TP(),new t(lp.fromUint8Array(e))}}]),t}();function JS(t){return function OL(t,n){if("object"!=typeof t||null===t)return!1;var i,e=t,r=(0,P.Z)(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a in e&&"function"==typeof e[a])return!0}}catch(u){r.e(u)}finally{r.f()}return!1}(t,["next","error","complete"])}var ZL=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"enableIndexedDbPersistence",value:function(e,r){return function xN(t,n){rP(t=Vn(t,Vr));var e=Li(t),r=t._freezeSettings(),i=new NS;return nP(e,i,new U1(i,r.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(e._delegate,{forceOwnership:r})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function BN(t){rP(t=Vn(t,Vr));var n=Li(t),e=t._freezeSettings(),r=new NS;return nP(n,r,new wN(r,e.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function VN(t){if(t._initialized&&!t._terminated)throw new gt(We.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Oi;return t._queue.enqueueAndForgetEvenWhileRestricted((0,ut.Z)((0,ce.Z)().mark(function e(){return(0,ce.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,function(){var a=(0,ut.Z)((0,ce.Z)().mark(function u(c){var h;return(0,ce.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(El.C()){g.next=2;break}return g.abrupt("return",Promise.resolve());case 2:return h=c+"main",g.next=5,El.delete(h);case 5:case"end":return g.stop()}},u)}));return function(u){return a.apply(this,arguments)}}()(Cm(t._databaseId,t._persistenceKey));case 3:n.resolve(),i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),n.reject(i.t0);case 9:case"end":return i.stop()}},e,null,[[0,6]])}))),n.promise}(e._delegate)}}]),t}(),AP=function(){function t(n,e,r){var i=this;(0,R.Z)(this,t),this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},n instanceof Zh||(this._appCompat=n)}return(0,A.Z)(t,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&wl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ZN(this._delegate,e,r,i)}},{key:"enableNetwork",value:function(){return function HN(t){return function TN(t){return t.asyncQueue.enqueue((0,ut.Z)((0,ce.Z)().mark(function n(){var e,r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j1(t);case 2:return e=a.sent,a.next=5,H1(t);case 5:return r=a.sent,a.abrupt("return",(e.setNetworkEnabled(!0),c=void 0,(c=Mt(r))._u.delete(0),Sm(c)));case 7:case"end":return a.stop()}var c},n)})))}(Li(t=Vn(t,Vr)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function WN(t){return function DN(t){return t.asyncQueue.enqueue((0,ut.Z)((0,ce.Z)().mark(function n(){var e,r;return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j1(t);case 2:return e=a.sent,a.next=5,H1(t);case 5:return r=a.sent,a.abrupt("return",(e.setNetworkEnabled(!1),function(){var u=(0,ut.Z)((0,ce.Z)().mark(function c(h){var v;return(0,ce.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return(v=Mt(h))._u.add(0),I.next=4,Xh(v);case 4:v.gu.set("Offline");case 5:case"end":return I.stop()}},c)}));return function(c){return u.apply(this,arguments)}}()(r)));case 7:case"end":return a.stop()}},n)})))}(Li(t=Vn(t,Vr)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var r=!1,i=!1;return e&&K1("synchronizeTabs",r=!!e.synchronizeTabs,"experimentalForceOwningTab",i=!!e.experimentalForceOwningTab),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function jN(t){return n=Li(t=Vn(t,Vr)),e=new Oi,n.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=l,a.next=3,VS(n);case 3:return a.t1=a.sent,a.t2=e,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},r)}))),e.promise;var n,e}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function EL(t,n){return function RN(t,n){var e=new _I(n);return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(u,c){Mt(u).Ru.add(c),c.next()},a.next=3,Vm(t);case 3:return a.t1=a.sent,a.t2=e,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},r)}))),function(){e.Rc(),t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(u,c){Mt(u).Ru.delete(c)},a.next=3,Vm(t);case 3:return a.t1=a.sent,a.t2=e,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},r)})))}}(Li(t=Vn(t,Vr)),WS(n)?n:{next:n})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new MI(this,X1(this._delegate,e))}catch(r){throw rs(r,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new id(this,EI(this._delegate,e))}catch(r){throw rs(r,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ok(this,function NN(t,n){if(t=Vn(t,nk),HS("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new gt(We.INVALID_ARGUMENT,"Invalid collection ID '".concat(n,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new bs(t,null,(e=n,new Cu(_n.emptyPath(),e)));var e}(this._delegate,e))}catch(r){throw rs(r,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var r=this;return function CL(t,n,e){t=Vn(t,Vr);var r=Object.assign(Object.assign({},dL),e);return function(i){if(i.maxAttempts<1)throw new gt(We.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function PN(t,n,e){var r=new Oi;return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function i(){return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,kI(t).then(function(v){return v.datastore});case 2:new IN(t.asyncQueue,c.sent,e,n,r).run();case 4:case"end":return c.stop()}},i)}))),r.promise}(Li(t),function(i){return n(new IL(t,i))},r)}(this._delegate,function(i){return e(new RP(r,i))})}},{key:"batch",value:function(){var e=this;return Li(this._delegate),new PP(new wP(this._delegate,function(r){return jm(e._delegate,r)}))}},{key:"loadBundle",value:function(e){return function GN(t,n){var e=Li(t=Vn(t,Vr)),r=new FN;return function MN(t,n,e,r){var a,u,h,i=(a=e,u=ns(n),h=function(h,v){if(h instanceof Uint8Array)return x1(h,v);if(h instanceof ArrayBuffer)return x1(new Uint8Array(h),v);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof a?(new TextEncoder).encode(a):a),new bN(h,u));t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function a(){return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=kN,c.next=3,VS(t);case 3:c.t1=c.sent,c.t2=i,c.t3=r,(0,c.t0)(c.t1,c.t2,c.t3);case 7:case"end":return c.stop()}},a)})))}(e,t._databaseId,n,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var r=this;return function zN(t,n){return function ON(t,n){return t.asyncQueue.enqueue((0,ut.Z)((0,ce.Z)().mark(function e(){return(0,ce.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(a,u){var c=Mt(a);return c.persistence.runTransaction("Get named query","readonly",function(h){return c.Ns.getNamedQuery(h,u)})},i.next=3,wI(t);case 3:return i.t1=i.sent,i.t2=n,i.abrupt("return",(0,i.t0)(i.t1,i.t2));case 6:case"end":return i.stop()}},e)})))}(Li(t=Vn(t,Vr)),n).then(function(e){return e?new bs(t,null,e.query):null})}(this._delegate,e).then(function(i){return i?new ok(r,i):null})}}]),t}(),RI=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).firestore=r,i}return(0,A.Z)(e,[{key:"convertBytes",value:function(i){return new SP(new lp(i))}},{key:"convertReference",value:function(i){var a=this.convertDocumentKey(i,this.firestore._databaseId);return id.forKey(a,this.firestore,null)}}]),e}(YS),RP=function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._delegate=e,this._userDataWriter=new RI(n)}return(0,A.Z)(t,[{key:"get",value:function(e){var r=this,i=pp(e);return this._delegate.get(i).then(function(a){return new sk(r._firestore,new bf(r._firestore._delegate,r._userDataWriter,a._key,a._document,a.metadata,i.converter))})}},{key:"set",value:function(e,r,i){var a=pp(e);return i?(XS("Transaction.set",i),this._delegate.set(a,r,i)):this._delegate.set(a,r),this}},{key:"update",value:function(e,r,i){for(var a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];var v,h=pp(e);return 2===arguments.length?this._delegate.update(h,r):(v=this._delegate).update.apply(v,[h,r,i].concat(u)),this}},{key:"delete",value:function(e){var r=pp(e);return this._delegate.delete(r),this}}]),t}(),PP=function(){function t(n){(0,R.Z)(this,t),this._delegate=n}return(0,A.Z)(t,[{key:"set",value:function(e,r,i){var a=pp(e);return i?(XS("WriteBatch.set",i),this._delegate.set(a,r,i)):this._delegate.set(a,r),this}},{key:"update",value:function(e,r,i){for(var a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];var v,h=pp(e);return 2===arguments.length?this._delegate.update(h,r):(v=this._delegate).update.apply(v,[h,r,i].concat(u)),this}},{key:"delete",value:function(e){var r=pp(e);return this._delegate.delete(r),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),t}(),PI=function(){function t(n,e,r){(0,R.Z)(this,t),this._firestore=n,this._userDataWriter=e,this._delegate=r}return(0,A.Z)(t,[{key:"fromFirestore",value:function(e,r){var i=new ik(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uk(this._firestore,i),null!=r?r:{})}},{key:"toFirestore",value:function(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(e,r){var i=t.INSTANCES,a=i.get(e);a||i.set(e,a=new WeakMap);var u=a.get(r);return u||(u=new t(e,new RI(e),r),a.set(r,u)),u}}]),t}();PI.INSTANCES=new WeakMap;var id=function(){function t(n,e){(0,R.Z)(this,t),this.firestore=n,this._delegate=e,this._userDataWriter=new RI(n)}return(0,A.Z)(t,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new MI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new MI(this.firestore,X1(this._delegate,e))}catch(r){throw rs(r,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,X.m9)(e))instanceof Xr&&J1(this._delegate,e)}},{key:"set",value:function(e,r){r=XS("DocumentReference.set",r);try{return r?bP(this._delegate,e,r):bP(this._delegate,e)}catch(i){throw rs(i,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,r){for(var i=arguments.length,a=new Array(i>2?i-2:0),u=2;u<i;u++)a[u-2]=arguments[u];try{return 1===arguments.length?EP(this._delegate,e):EP.apply(void 0,[this._delegate,e,r].concat(a))}catch(c){throw rs(c,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function wL(t){return jm(Vn(t.firestore,Vr),[new Wh(t._key,Yr.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var u=MP(i),c=OP(i,function(h){return new sk(e.firestore,new bf(e.firestore._delegate,e._userDataWriter,h._key,h._document,h.metadata,e._delegate.converter))});return IP(this._delegate,u,c)}},{key:"get",value:function(e){var i,r=this;return i="cache"===(null==e?void 0:e.source)?function gL(t){t=Vn(t,Xr);var n=Vn(t.firestore,Vr),e=Li(n),r=new vp(n);return function SN(t,n){var e=new Oi;return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(){var u=(0,ut.Z)((0,ce.Z)().mark(function c(h,v,g){var I,D;return(0,ce.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,function(K,ne){var re=Mt(K);return re.persistence.runTransaction("read document","readonly",function(Pe){return re.localDocuments.getDocument(Pe,ne)})}(h,v);case 3:(I=x.sent).isFoundDocument()?g.resolve(I):I.isNoDocument()?g.resolve(null):g.reject(new gt(We.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),x.next=11;break;case 7:x.prev=7,x.t0=x.catch(0),D=yf(x.t0,"Failed to get document '".concat(v," from cache")),g.reject(D);case 11:case"end":return x.stop()}},c,null,[[0,7]])}));return function(c,h,v){return u.apply(this,arguments)}}(),a.next=3,wI(t);case 3:return a.t1=a.sent,a.t2=n,a.t3=e,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3));case 7:case"end":return a.stop()}},r)}))),e.promise}(e,t._key).then(function(i){return new bf(n,r,t._key,i,new dp(null!==i&&i.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function mL(t){t=Vn(t,Xr);var n=Vn(t.firestore,Vr);return W1(Li(n),t._key,{source:"server"}).then(function(e){return QS(n,t,e)})}(this._delegate):function pL(t){t=Vn(t,Xr);var n=Vn(t.firestore,Vr);return W1(Li(n),t._key).then(function(e){return QS(n,t,e)})}(this._delegate),i.then(function(a){return new sk(r.firestore,new bf(r.firestore._delegate,r._userDataWriter,a._key,a._document,a.metadata,r._delegate.converter))})}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?PI.getInstance(this.firestore,e):null))}}],[{key:"forPath",value:function(e,r,i){if(e.length%2!=0)throw new gt("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new t(r,new Xr(r._delegate,i,new Nt(e)))}},{key:"forKey",value:function(e,r,i){return new t(r,new Xr(r._delegate,i,e))}}]),t}();function rs(t,n,e){return t.message=t.message.replace(n,e),t}function MP(t){var e,n=(0,P.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("object"==typeof r&&!JS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function OP(t,n){var e,r,i;return{next:function(u){i.next&&i.next(n(u))},error:null===(e=(i=JS(t[0])?t[0]:JS(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var sk=function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._delegate=e}return(0,A.Z)(t,[{key:"ref",get:function(){return new id(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,r){return this._delegate.get(e,r)}},{key:"isEqual",value:function(e){return hP(this._delegate,e._delegate)}}]),t}(),uk=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"data",value:function(i){var a=this._delegate.data(i);return function Ib(t,n){t||jt()}(void 0!==a),a}}]),e}(sk),ok=function(){function t(n,e){(0,R.Z)(this,t),this.firestore=n,this._delegate=e,this._userDataWriter=new RI(n)}return(0,A.Z)(t,[{key:"where",value:function(e,r,i){try{return new t(this.firestore,nd(this._delegate,function iL(t,n,e){var r=n,i=SI("where",t);return new rL(i,r,e)}(e,r,i)))}catch(a){throw rs(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(e,r){try{return new t(this.firestore,nd(this._delegate,function sL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=SI("orderBy",t);return new aL(r,e)}(e,r)))}catch(i){throw rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(e){try{return new t(this.firestore,nd(this._delegate,function uL(t){return Y1("limit",t),new vP("limit",t,"F")}(e)))}catch(r){throw rs(r,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(e){try{return new t(this.firestore,nd(this._delegate,function oL(t){return Y1("limitToLast",t),new vP("limitToLast",t,"L")}(e)))}catch(r){throw rs(r,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new t(this.firestore,nd(this._delegate,lL.apply(void 0,arguments)))}catch(e){throw rs(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new t(this.firestore,nd(this._delegate,cL.apply(void 0,arguments)))}catch(e){throw rs(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new t(this.firestore,nd(this._delegate,fL.apply(void 0,arguments)))}catch(e){throw rs(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new t(this.firestore,nd(this._delegate,hL.apply(void 0,arguments)))}catch(e){throw rs(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return eP(this._delegate,e._delegate)}},{key:"get",value:function(e){var i,r=this;return i="cache"===(null==e?void 0:e.source)?function _L(t){t=Vn(t,bs);var n=Vn(t.firestore,Vr),e=Li(n),r=new vp(n);return function AN(t,n){var e=new Oi;return t.asyncQueue.enqueueAndForget((0,ut.Z)((0,ce.Z)().mark(function r(){return(0,ce.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(){var u=(0,ut.Z)((0,ce.Z)().mark(function c(h,v,g){var I,D,L,x,K;return(0,ce.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,Xv(h,v,!0);case 3:D=new fI(v,(I=re.sent).Hi),L=D.ju(I.documents),x=D.applyChanges(L,!1),g.resolve(x.snapshot),re.next=14;break;case 10:re.prev=10,re.t0=re.catch(0),K=yf(re.t0,"Failed to execute query '".concat(v," against cache")),g.reject(K);case 14:case"end":return re.stop()}},c,null,[[0,10]])}));return function(c,h,v){return u.apply(this,arguments)}}(),a.next=3,wI(t);case 3:return a.t1=a.sent,a.t2=n,a.t3=e,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3));case 7:case"end":return a.stop()}},r)}))),e.promise}(e,t._query).then(function(i){return new td(n,r,t,i)})}(this._delegate):"server"===(null==e?void 0:e.source)?function kL(t){t=Vn(t,bs);var n=Vn(t.firestore,Vr),e=Li(n),r=new vp(n);return G1(e,t._query,{source:"server"}).then(function(i){return new td(n,r,t,i)})}(this._delegate):function yL(t){t=Vn(t,bs);var n=Vn(t.firestore,Vr),e=Li(n),r=new vp(n);return dP(t._query),G1(e,t._query).then(function(i){return new td(n,r,t,i)})}(this._delegate),i.then(function(a){return new eA(r.firestore,new td(r.firestore._delegate,r._userDataWriter,r._delegate,a._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var u=MP(i),c=OP(i,function(h){return new eA(e.firestore,new td(e.firestore._delegate,e._userDataWriter,e._delegate,h._snapshot))});return IP(this._delegate,u,c)}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?PI.getInstance(this.firestore,e):null))}}]),t}(),LL=function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._delegate=e}return(0,A.Z)(t,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new uk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),t}(),eA=function(){function t(n,e){(0,R.Z)(this,t),this._firestore=n,this._delegate=e}return(0,A.Z)(t,[{key:"query",get:function(){return new ok(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(r){return new uk(e._firestore,r)})}},{key:"docChanges",value:function(e){var r=this;return this._delegate.docChanges(e).map(function(i){return new LL(r._firestore,i)})}},{key:"forEach",value:function(e,r){var i=this;this._delegate.forEach(function(a){e.call(r,new uk(i._firestore,a))})}},{key:"isEqual",value:function(e){return hP(this._delegate,e._delegate)}}]),t}(),MI=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,i)).firestore=r,a._delegate=i,a}return(0,A.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var i=this._delegate.parent;return i?new id(this.firestore,i):null}},{key:"doc",value:function(i){try{return new id(this.firestore,void 0===i?EI(this._delegate):EI(this._delegate,i))}catch(a){throw rs(a,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(i){var a=this;return function bL(t,n){var e=Vn(t.firestore,Vr),r=EI(t),i=AI(t.converter,n);return jm(e,[CI(fp(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Yr.exists(!1))]).then(function(){return r})}(this._delegate,i).then(function(u){return new id(a.firestore,u)})}},{key:"isEqual",value:function(i){return J1(this._delegate,i._delegate)}},{key:"withConverter",value:function(i){return new e(this.firestore,this._delegate.withConverter(i?PI.getInstance(this.firestore,i):null))}}]),e}(ok);function pp(t){return Vn(t,Xr)}var FL=function(){function t(){(0,R.Z)(this,t);for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];this._delegate=(0,Fw.Z)(wf,e)}return(0,A.Z)(t,[{key:"isEqual",value:function(e){return(e=(0,X.m9)(e))instanceof wf&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new t(_r.keyField().canonicalString())}}]),t}(),UL=function(){function t(n){(0,R.Z)(this,t),this._delegate=n}return(0,A.Z)(t,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var e=function DL(){return new YN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new t(e)}},{key:"delete",value:function(){var e=function TL(){return new GS("deleteField")}();return e._methodName="FieldValue.delete",new t(e)}},{key:"arrayUnion",value:function(){var e=SL.apply(void 0,arguments);return e._methodName="FieldValue.arrayUnion",new t(e)}},{key:"arrayRemove",value:function(){var e=AL.apply(void 0,arguments);return e._methodName="FieldValue.arrayRemove",new t(e)}},{key:"increment",value:function(e){var r=function RL(t){return new JN("increment",t)}(e);return r._methodName="FieldValue.increment",new t(r)}}]),t}(),xL={Firestore:AP,GeoPoint:II,Timestamp:ar,Blob:SP,Transaction:RP,WriteBatch:PP,DocumentReference:id,DocumentSnapshot:sk,Query:ok,QueryDocumentSnapshot:uk,QuerySnapshot:eA,CollectionReference:MI,FieldPath:FL,FieldValue:UL,setLogLevel:function NL(t){!function bb(t){_s.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function VL(t){(function BL(t,n){t.INTERNAL.registerComponent(new Bs.wA("firestore-compat",function(e){var r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return n(r,i)},"PUBLIC").setServiceProps(Object.assign({},xL)))})(t,function(n,e){return new AP(n,e,new ZL)}),t.registerVersion("@firebase/firestore-compat","0.1.25")}(Jd.Z);var tA=U(6451),OI=U(5363),jL=U(6063),HL=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jL.l;return(0,R.Z)(this,e),(r=n.call(this))._bufferSize=i,r._windowTime=a,r._timestampProvider=u,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=a===1/0,r._bufferSize=Math.max(1,i),r._windowTime=Math.max(1,a),r}return(0,A.Z)(e,[{key:"next",value:function(i){var u=this._buffer,c=this._infiniteTimeWindow,h=this._timestampProvider,v=this._windowTime;this.isStopped||(u.push(i),!c&&u.push(h.now()+v)),this._trimBuffer(),(0,ie.Z)((0,pe.Z)(e.prototype),"next",this).call(this,i)}},{key:"_subscribe",value:function(i){this._throwIfClosed(),this._trimBuffer();for(var a=this._innerSubscribe(i),u=this._infiniteTimeWindow,h=this._buffer.slice(),v=0;v<h.length&&!i.closed;v+=u?1:2)i.next(h[v]);return this._checkFinalizedStatuses(i),a}},{key:"_trimBuffer",value:function(){var i=this._bufferSize,a=this._timestampProvider,u=this._buffer,c=this._infiniteTimeWindow,h=(c?1:2)*i;if(i<1/0&&h<u.length&&u.splice(0,u.length-h),!c){for(var v=a.now(),g=0,I=1;I<u.length&&u[I]<=v;I+=2)g=I;g&&u.splice(0,g+1)}}}]),e}(na.x),ZP=U(3099);function NP(t,n,e){var r,i=!1;if(t&&"object"==typeof t){var a=t.bufferSize;r=void 0===a?1/0:a;var u=t.windowTime;n=void 0===u?1/0:u;var c=t.refCount;i=void 0!==c&&c,e=t.scheduler}else r=null!=t?t:1/0;return(0,ZP.B)({connector:function(){return new HL(r,n,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function LP(t,n){return(0,Jf.m)(n)?Bn(function(){return t},n):Bn(function(){return t})}var nA=U(9468);U(5867);var Ou,FP=new Map,$L={activated:!1,tokenObservers:[]},qL={initialized:!1,enabled:!1};function ha(t){return FP.get(t)||$L}function Po(t,n){FP.set(t,n)}function NI(){return qL}var eF=function(){function t(n,e,r,i,a){if((0,R.Z)(this,t),this.operation=n,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}return(0,A.Z)(t,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(i){return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.stop(),u.prev=1,this.pending=new X.BH,u.next=5,tF(this.getNextRun(i));case 5:return this.pending.resolve(),u.next=8,this.pending.promise;case 8:return this.pending=new X.BH,u.next=11,this.operation();case 11:return this.pending.resolve(),u.next=14,this.pending.promise;case 14:this.process(!0).catch(function(){}),u.next=20;break;case 17:u.prev=17,u.t0=u.catch(1),this.retryPolicy(u.t0)?this.process(!1).catch(function(){}):this.stop();case 20:case"end":return u.stop()}},r,this,[[1,17]])})),function e(r){return n.apply(this,arguments)})},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var r=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),r}}]),t;var n}();function tF(t){return new Promise(function(n){setTimeout(n,t)})}var nF=((0,yi.Z)(Ou={},"already-initialized","You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance."),(0,yi.Z)(Ou,"use-before-activation","App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services."),(0,yi.Z)(Ou,"fetch-network-error","Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,yi.Z)(Ou,"fetch-parse-error","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,yi.Z)(Ou,"fetch-status-error","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,yi.Z)(Ou,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,yi.Z)(Ou,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,yi.Z)(Ou,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,yi.Z)(Ou,"recaptcha-error","ReCAPTCHA error."),(0,yi.Z)(Ou,"throttled","Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"),Ou),Mo=new X.LL("appCheck","AppCheck",nF);function xP(t){if(!ha(t).activated)throw Mo.create("use-before-activation",{appName:t.name})}function iF(t,n){return aA.apply(this,arguments)}function aA(){return aA=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var r,i,a,u,c,h,v,g,I,D,L,x,K;return(0,ce.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(r=n.url,i=n.body,c={"Content-Type":"application/json"},!(h=e.getImmediate({optional:!0}))){re.next=8;break}return re.next=6,h.getHeartbeatsHeader();case 6:(v=re.sent)&&(c["X-Firebase-Client"]=v);case 8:return g={method:"POST",body:JSON.stringify(i),headers:c},re.prev=9,re.next=12,fetch(r,g);case 12:I=re.sent,re.next=18;break;case 15:throw re.prev=15,re.t0=re.catch(9),Mo.create("fetch-network-error",{originalErrorMessage:null===(a=re.t0)||void 0===a?void 0:a.message});case 18:if(200===I.status){re.next=20;break}throw Mo.create("fetch-status-error",{httpStatus:I.status});case 20:return re.prev=20,re.next=23,I.json();case 23:D=re.sent,re.next=29;break;case 26:throw re.prev=26,re.t1=re.catch(20),Mo.create("fetch-parse-error",{originalErrorMessage:null===(u=re.t1)||void 0===u?void 0:u.message});case 29:if((L=D.ttl.match(/^([\d.]+)(s)$/))&&L[2]&&!isNaN(Number(L[1]))){re.next=32;break}throw Mo.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+"format: ".concat(D.ttl)});case 32:return x=1e3*Number(L[1]),K=Date.now(),re.abrupt("return",{token:D.token,expireTimeMillis:K+x,issuedAtTimeMillis:K});case 35:case"end":return re.stop()}},t,null,[[9,15],[20,26]])})),aA.apply(this,arguments)}function aF(t,n){var e=t.options,r=e.projectId,i=e.appId,a=e.apiKey;return{url:"".concat("https://content-firebaseappcheck.googleapis.com/v1","/projects/").concat(r,"/apps/").concat(i,":").concat("exchangeDebugToken","?key=").concat(a),body:{debug_token:n}}}var lk="firebase-app-check-store",UI=null;function VP(){return UI||(UI=new Promise(function(t,n){var e;try{var r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=function(i){t(i.target.result)},r.onerror=function(i){var a;n(Mo.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=function(i){0===i.oldVersion&&i.target.result.createObjectStore(lk,{keyPath:"compositeKey"})}}catch(i){n(Mo.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),UI)}function sA(){return sA=(0,ut.Z)((0,ce.Z)().mark(function t(n,e){var i,a,u;return(0,ce.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,VP();case 2:return i=h.sent.transaction(lk,"readwrite"),a=i.objectStore(lk),u=a.put({compositeKey:n,value:e}),h.abrupt("return",new Promise(function(v,g){u.onsuccess=function(I){v()},i.onerror=function(I){var D;g(Mo.create("storage-set",{originalErrorMessage:null===(D=I.target.error)||void 0===D?void 0:D.message}))}}));case 7:case"end":return h.stop()}},t)})),sA.apply(this,arguments)}var ck=new gs.Yd("@firebase/app-check");function GP(t,n){return(0,X.hl)()?function lF(t,n){return function jP(t,n){return sA.apply(this,arguments)}(function WP(t){return"".concat(t.options.appId,"-").concat(t.name)}(t),n)}(t,n).catch(function(e){ck.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function zP(){return NI().enabled}function KP(){return cA.apply(this,arguments)}function cA(){return cA=(0,ut.Z)((0,ce.Z)().mark(function t(){var n;return(0,ce.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=NI()).enabled||!n.token){r.next=5;break}return r.abrupt("return",n.token.promise);case 5:throw Error("\n            Can't get debug token in production mode.\n        ");case 6:case"end":return r.stop()}},t)})),cA.apply(this,arguments)}var pF={error:"UNKNOWN_ERROR"};function gF(t){return X.US.encodeString(JSON.stringify(t),!1)}function xI(t){return fA.apply(this,arguments)}function fA(){return fA=(0,ut.Z)((0,ce.Z)().mark(function t(n){var e,r,i,a,u,c,h,v,g,I=arguments;return(0,ce.Z)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(e=I.length>1&&void 0!==I[1]&&I[1],xP(r=n.app),i=ha(r),u=void 0,a=i.token){L.next=11;break}return L.next=9,i.cachedTokenPromise;case 9:(c=L.sent)&&BI(c)&&(a=c);case 11:if(e||!a||!BI(a)){L.next=13;break}return L.abrupt("return",{token:a.token});case 13:if(h=!1,!zP()){L.next=33;break}if(i.exchangeTokenPromise){L.next=26;break}return L.t0=iF,L.t1=aF,L.t2=r,L.next=21,KP();case 21:L.t3=L.sent,L.t4=(0,L.t1)(L.t2,L.t3),L.t5=n.heartbeatServiceProvider,i.exchangeTokenPromise=(0,L.t0)(L.t4,L.t5).then(function(x){return i.exchangeTokenPromise=void 0,x}),h=!0;case 26:return L.next=28,i.exchangeTokenPromise;case 28:return v=L.sent,L.next=31,GP(r,v);case 31:return Po(r,Object.assign(Object.assign({},i),{token:v})),L.abrupt("return",{token:v.token});case 33:return L.prev=33,i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(function(x){return i.exchangeTokenPromise=void 0,x}),h=!0),L.next=37,i.exchangeTokenPromise;case 37:a=L.sent,L.next=44;break;case 40:L.prev=40,L.t6=L.catch(33),L.t6.code==="appCheck/".concat("throttled")?ck.warn(L.t6.message):ck.error(L.t6),u=L.t6;case 44:if(a){L.next=48;break}g=yF(u),L.next=52;break;case 48:return g={token:a.token},Po(r,Object.assign(Object.assign({},i),{token:a})),L.next=52,GP(r,a);case 52:return h&&qP(r,g),L.abrupt("return",g);case 54:case"end":return L.stop()}},t,null,[[33,40]])})),fA.apply(this,arguments)}function dA(t,n){var e=ha(t),r=e.tokenObservers.filter(function(i){return i.next!==n});0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Po(t,Object.assign(Object.assign({},e),{tokenObservers:r}))}function $P(t){var n=t.app,e=ha(n),r=e.tokenRefresher;r||(r=function mF(t){var n=t.app;return new eF((0,ut.Z)((0,ce.Z)().mark(function e(){var i;return(0,ce.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(ha(n).token){u.next=7;break}return u.next=4,xI(t);case 4:i=u.sent,u.next=10;break;case 7:return u.next=9,xI(t,!0);case 9:i=u.sent;case 10:if(!i.error){u.next=12;break}throw i.error;case 12:case"end":return u.stop()}},e)})),function(){return!0},function(){var e=ha(n);if(e.token){var r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),Po(n,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function qP(t,n){var i,e=ha(t).tokenObservers,r=(0,P.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;try{"EXTERNAL"===a.type&&null!=n.error?a.error(n.error):a.next(n)}catch(u){}}}catch(u){r.e(u)}finally{r.f()}}function BI(t){return t.expireTimeMillis-Date.now()>0}function yF(t){return{token:gF(pF),error:t}}var _F=function(){function t(n,e){(0,R.Z)(this,t),this.app=n,this.heartbeatServiceProvider=e}return(0,A.Z)(t,[{key:"_delete",value:function(){var a,e=ha(this.app),i=(0,P.Z)(e.tokenObservers);try{for(i.s();!(a=i.n()).done;)dA(this.app,a.value.next)}catch(c){i.e(c)}finally{i.f()}return Promise.resolve()}}]),t}(),QP="app-check-internal";!function NF(){(0,Ki._registerComponent)(new Bs.wA("app-check",function(t){return function kF(t,n){return new _F(t,n)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,n,e){t.getProvider(QP).initialize()})),(0,Ki._registerComponent)(new Bs.wA(QP,function(t){return function wF(t){return{getToken:function(e){return xI(t,e)},addTokenListener:function(e){return function hA(t,n,e,r){var i=t.app,a=ha(i),u={next:e,error:r,type:n};if(Po(i,Object.assign(Object.assign({},a),{tokenObservers:[].concat((0,on.Z)(a.tokenObservers),[u])})),a.token&&BI(a.token)){var c=a.token;Promise.resolve().then(function(){e({token:c.token}),$P(t)}).catch(function(){})}a.cachedTokenPromise.then(function(){return $P(t)})}(t,"INTERNAL",e)},removeTokenListener:function(e){return dA(t.app,e)}}}(t.getProvider("app-check").getImmediate())},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ki.registerVersion)("@firebase/app-check","0.5.12")}();var fk=(0,A.Z)(function t(){return(0,R.Z)(this,t),(0,yn.vb)("app-check")});"undefined"!=typeof window&&window;var jI=U(127),yA=new y.OlP("angularfire2.auth.use-emulator"),_A=new y.OlP("angularfire2.auth.settings"),kA=new y.OlP("angularfire2.auth.tenant-id"),wA=new y.OlP("angularfire2.auth.langugage-code"),bA=new y.OlP("angularfire2.auth.use-device-language"),EA=new y.OlP("angularfire.auth.persistence"),IA=function(n,e,r,i,a,u,c,h){return(0,si.cc)("".concat(n.name,".auth"),"AngularFireAuth",n.name,function(){var v=e.runOutsideAngular(function(){return n.auth()});if(r&&v.useEmulator.apply(v,(0,on.Z)(r)),i&&(v.tenantId=i),v.languageCode=a,u&&v.useDeviceLanguage(),c)for(var g=0,I=Object.entries(c);g<I.length;g++){var D=(0,ye.Z)(I[g],2);v.settings[D[0]]=D[1]}return h&&v.setPersistence(h),v},[r,i,a,u,c,h])},hk=function(){var t=(0,A.Z)(function n(e,r,i,a,u,c,h,v,g,I,D,L){(0,R.Z)(this,n);var x=new na.x,K=Dt(void 0).pipe((0,OI.Q)(u.outsideAngular),Bn(function(){return a.runOutsideAngular(function(){return Promise.resolve().then(U.bind(U,5881))})}),(0,qt.U)(function(){return(0,si.on)(e,a,r)}),(0,qt.U)(function(Ye){return IA(Ye,a,c,v,g,I,h,D)}),NP({bufferSize:1,refCount:!1}));if(Uo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dt(null);else{K.pipe(zi()).subscribe();var re=K.pipe(Bn(function(Ye){return Ye.getRedirectResult().then(function(ze){return ze},function(){return null})}),yn.iC,NP({bufferSize:1,refCount:!1})),Pe=K.pipe(Bn(function(Ye){return new dr.y(function(ze){return{unsubscribe:a.runOutsideAngular(function(){return Ye.onAuthStateChanged(function(Tt){return ze.next(Tt)},function(Tt){return ze.error(Tt)},function(){return ze.complete()})})}})})),Ve=K.pipe(Bn(function(Ye){return new dr.y(function(ze){return{unsubscribe:a.runOutsideAngular(function(){return Ye.onIdTokenChanged(function(Tt){return ze.next(Tt)},function(Tt){return ze.error(Tt)},function(){return ze.complete()})})}})}));this.authState=re.pipe(LP(Pe),(0,nA.R)(u.outsideAngular),(0,OI.Q)(u.insideAngular)),this.user=re.pipe(LP(Ve),(0,nA.R)(u.outsideAngular),(0,OI.Q)(u.insideAngular)),this.idToken=this.user.pipe(Bn(function(Ye){return Ye?(0,Kn.D)(Ye.getIdToken()):Dt(null)})),this.idTokenResult=this.user.pipe(Bn(function(Ye){return Ye?(0,Kn.D)(Ye.getIdTokenResult()):Dt(null)})),this.credential=(0,tA.T)(re,x,this.authState.pipe(ka(function(Ye){return!Ye}))).pipe((0,qt.U)(function(Ye){return null!=Ye&&Ye.user?Ye:null}),(0,nA.R)(u.outsideAngular),(0,OI.Q)(u.insideAngular))}return(0,si.pX)(this,K,a,{spy:{apply:function(ze,Tt,Et){(ze.startsWith("signIn")||ze.startsWith("createUser"))&&Et.then(function(yt){return x.next(yt)})}}})});return t.\u0275fac=function(e){return new(e||t)(y.LFG(si.Dh),y.LFG(si.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(yn.HU),y.LFG(yA,8),y.LFG(_A,8),y.LFG(kA,8),y.LFG(wA,8),y.LFG(bA,8),y.LFG(EA,8),y.LFG(fk,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t}(),jF=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n),jI.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[hk]}),t}();function JP(t,n){return function HF(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gg.z;return new dr.y(function(e){var r;return null!=n?n.schedule(function(){r=t.onSnapshot({includeMetadataChanges:!0},e)}):r=t.onSnapshot({includeMetadataChanges:!0},e),function(){null!=r&&r()}})}(t,n)}function CA(t,n){return JP(t,n).pipe((0,qt.U)(function(e){return{payload:e,type:"query"}}))}function HI(t,n){return CA(t,n).pipe(ki(void 0),Wy(),(0,qt.U)(function(e){var r=(0,ye.Z)(e,2),i=r[0],a=r[1],u=a.payload.docChanges(),c=u.map(function(h){return{type:h.type,payload:h}});return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach(function(h,v){var g=u.find(function(D){return D.doc.ref.isEqual(h.ref)}),I=null==i?void 0:i.payload.docs.find(function(D){return D.ref.isEqual(h.ref)});g&&JSON.stringify(g.doc.metadata)===JSON.stringify(h.metadata)||!g&&I&&JSON.stringify(I.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:v,newIndex:v,type:"modified",doc:h}})}),c}))}function eM(t,n,e){return HI(t,e).pipe(z(function(r,i){return function GF(t,n,e){return n.forEach(function(r){e.indexOf(r.type)>-1&&(t=function zF(t,n){switch(n.type){case"added":if(!t[n.newIndex]||!t[n.newIndex].doc.ref.isEqual(n.doc.ref))return TA(t,n.newIndex,0,n);break;case"modified":if(null==t[n.oldIndex]||t[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){var e=t.slice();return e.splice(n.oldIndex,1),e.splice(n.newIndex,0,n),e}return TA(t,n.newIndex,1,n)}break;case"removed":if(t[n.oldIndex]&&t[n.oldIndex].doc.ref.isEqual(n.doc.ref))return TA(t,n.oldIndex,1)}return t}(t,r))}),t}(r,i.map(function(a){return a.payload}),n)},[]),IT(),(0,qt.U)(function(r){return r.map(function(i){return{type:i.type,payload:i}})}))}function TA(t,n,e){for(var r=t.slice(),i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++)a[u-3]=arguments[u];return r.splice.apply(r,[n,e].concat(a)),r}function tM(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}var nM=function(){function t(n,e,r){(0,R.Z)(this,t),this.ref=n,this.query=e,this.afs=r}return(0,A.Z)(t,[{key:"stateChanges",value:function(e){var r=HI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,qt.U)(function(i){return i.filter(function(a){return e.indexOf(a.type)>-1})}))),r.pipe(ki(void 0),Wy(),ka(function(i){var a=(0,ye.Z)(i,2);return a[1].length>0||!a[0]}),(0,qt.U)(function(i){return(0,ye.Z)(i,2)[1]}),yn.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(z(function(r,i){return[].concat((0,on.Z)(r),(0,on.Z)(i))},[]))}},{key:"snapshotChanges",value:function(e){var r=tM(e);return eM(this.query,r,this.afs.schedulers.outsideAngular).pipe(yn.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return CA(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(function(r){return r.payload.docs.map(function(i){return e.idField?Object.assign(Object.assign({},i.data()),(0,yi.Z)({},e.idField,i.id)):i.data()})}),yn.iC)}},{key:"get",value:function(e){return(0,Kn.D)(this.query.get(e)).pipe(yn.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new rM(this.ref.doc(e),this.afs)}}]),t}(),rM=function(){function t(n,e){(0,R.Z)(this,t),this.ref=n,this.afs=e}return(0,A.Z)(t,[{key:"set",value:function(e,r){return this.ref.set(e,r)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,r){var a=sM(this.ref.collection(e),r);return new nM(a.ref,a.query,this.afs)}},{key:"snapshotChanges",value:function(){var e=function WF(t,n){return JP(t,n).pipe(ki(void 0),Wy(),(0,qt.U)(function(e){var r=(0,ye.Z)(e,2),i=r[0],a=r[1];return a.exists?null!=i&&i.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular);return e.pipe(yn.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,qt.U)(function(r){var i=r.payload;return e.idField?Object.assign(Object.assign({},i.data()),(0,yi.Z)({},e.idField,i.id)):i.data()}))}},{key:"get",value:function(e){return(0,Kn.D)(this.ref.get(e)).pipe(yn.iC)}}]),t}(),KF=function(){function t(n,e){(0,R.Z)(this,t),this.query=n,this.afs=e}return(0,A.Z)(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?HI(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(function(r){return r.filter(function(i){return e.indexOf(i.type)>-1})}),ka(function(r){return r.length>0}),yn.iC):HI(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(z(function(r,i){return[].concat((0,on.Z)(r),(0,on.Z)(i))},[]))}},{key:"snapshotChanges",value:function(e){var r=tM(e);return eM(this.query,r,this.afs.schedulers.outsideAngular).pipe(yn.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=CA(this.query,this.afs.schedulers.outsideAngular);return r.pipe((0,qt.U)(function(i){return i.payload.docs.map(function(a){return e.idField?Object.assign((0,yi.Z)({},e.idField,a.id),a.data()):a.data()})}),yn.iC)}},{key:"get",value:function(e){return(0,Kn.D)(this.query.get(e)).pipe(yn.iC)}}]),t}(),iM=new y.OlP("angularfire2.enableFirestorePersistence"),aM=new y.OlP("angularfire2.firestore.persistenceSettings"),$F=new y.OlP("angularfire2.firestore.settings"),qF=new y.OlP("angularfire2.firestore.use-emulator");function sM(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(i){return i},e=n(t);return{query:e,ref:t}}var uM=function(){var t=function(){function n(e,r,i,a,u,c,h,v,g,I,D,L,x,K,ne,re,Pe){(0,R.Z)(this,n),this.schedulers=h;var Ve=(0,si.on)(e,c,r),Ye=g;I&&IA(Ve,c,D,x,K,ne,L,re);var ze=(0,si.cc)("".concat(Ve.name,".firestore"),"AngularFirestore",Ve.name,function(){var Et=c.runOutsideAngular(function(){return Ve.firestore()});return a&&Et.settings(a),Ye&&Et.useEmulator.apply(Et,(0,on.Z)(Ye)),i&&!Uo(u)?[Et,c.runOutsideAngular(function(){try{return(0,Kn.D)(Et.enablePersistence(v||void 0).then(function(){return!0},function(){return!1}))}catch(Kt){return"undefined"!=typeof console&&console.warn(Kt),Dt(!1)}})]:[Et,Dt(!1)]},[a,Ye,i]),Tt=(0,ye.Z)(ze,2);this.firestore=Tt[0],this.persistenceEnabled$=Tt[1]}return(0,A.Z)(n,[{key:"collection",value:function(r,i){var u=sM("string"==typeof r?this.firestore.collection(r):r,i),c=u.ref,h=u.query,v=this.schedulers.ngZone.run(function(){return c});return new nM(v,h,this)}},{key:"collectionGroup",value:function(r,i){var a=i||function(c){return c},u=this.firestore.collectionGroup(r);return new KF(a(u),this)}},{key:"doc",value:function(r){var i;i="string"==typeof r?this.firestore.doc(r):r;var a=this.schedulers.ngZone.run(function(){return i});return new rM(a,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(si.Dh),y.LFG(si.xv,8),y.LFG(iM,8),y.LFG($F,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(yn.HU),y.LFG(aM,8),y.LFG(qF,8),y.LFG(hk,8),y.LFG(yA,8),y.LFG(_A,8),y.LFG(kA,8),y.LFG(wA,8),y.LFG(bA,8),y.LFG(EA,8),y.LFG(fk,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t}(),YF=function(){var t=function(){function n(){(0,R.Z)(this,n),jI.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}return(0,A.Z)(n,null,[{key:"enablePersistence",value:function(r){return{ngModule:n,providers:[{provide:iM,useValue:!0},{provide:aM,useValue:r}]}}}]),n}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[uM]}),t}(),gp=function(){var t=function(){function n(e,r,i,a){var u=this;(0,R.Z)(this,n),this.afs=e,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(function(c){c?(u.userData=c,localStorage.setItem("user",JSON.stringify(u.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}return(0,A.Z)(n,[{key:"SignIn",value:function(r,i){var a=this;return this.afAuth.signInWithEmailAndPassword(r,i).then(function(u){a.SetUserData(u.user),a.afAuth.authState.subscribe(function(c){c&&a.router.navigate(["dashboard"])})}).catch(function(u){window.alert(u.message)})}},{key:"SignUp",value:function(r,i){var a=this;return this.afAuth.createUserWithEmailAndPassword(r,i).then(function(u){a.SendVerificationMail(),a.SetUserData(u.user)}).catch(function(u){window.alert(u.message)})}},{key:"SendVerificationMail",value:function(){var r=this;return this.afAuth.currentUser.then(function(i){return i.sendEmailVerification()}).then(function(){r.router.navigate(["verify-email-address"])})}},{key:"ForgotPassword",value:function(r){return this.afAuth.sendPasswordResetEmail(r).then(function(){window.alert("Password reset email sent, check your inbox.")}).catch(function(i){window.alert(i)})}},{key:"isLoggedIn",get:function(){var r=JSON.parse(localStorage.getItem("user"));return null!==r&&!1!==r.emailVerified}},{key:"GoogleAuth",value:function(){var r=this;return this.AuthLogin(new Nw.Q).then(function(i){r.router.navigate(["dashboard"])})}},{key:"AuthLogin",value:function(r){var i=this;return this.afAuth.signInWithPopup(r).then(function(a){i.router.navigate(["dashboard"]),i.SetUserData(a.user)}).catch(function(a){window.alert(a)})}},{key:"SetUserData",value:function(r){return this.afs.doc("users/".concat(r.uid)).set({uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},{merge:!0})}},{key:"SignOut",value:function(){var r=this;return this.afAuth.signOut().then(function(){localStorage.removeItem("user"),r.router.navigate(["sign-in"])})}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(uM),y.LFG(hk),y.LFG(Pi),y.LFG(y.R0b))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),QF=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.authService=e}return(0,A.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(gp))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-sign-in"]],decls:29,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(e,r){if(1&e){var i=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Sign In"),y.qZA(),y.TgZ(5,"div",3),y._UZ(6,"input",4,5),y.qZA(),y.TgZ(8,"div",3),y._UZ(9,"input",6,7),y.qZA(),y.TgZ(11,"div",3)(12,"input",8),y.NdJ("click",function(){y.CHM(i);var u=y.MAs(7),c=y.MAs(10);return y.KtG(r.authService.SignIn(u.value,c.value))}),y.qZA()(),y.TgZ(13,"div",3)(14,"span",9)(15,"span",10),y._uU(16,"Or"),y.qZA()()(),y.TgZ(17,"div",3)(18,"button",11),y.NdJ("click",function(){return r.authService.GoogleAuth()}),y._UZ(19,"i",12),y._uU(20," Log in with Google "),y.qZA()(),y.TgZ(21,"div",13)(22,"span",14),y._uU(23,"Forgot Password?"),y.qZA()()(),y.TgZ(24,"div",15)(25,"span"),y._uU(26,"Don't have an account?"),y.TgZ(27,"span",16),y._uU(28," Sign Up"),y.qZA()()()()()}},dependencies:[vl]}),t}(),XF=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.authService=e}return(0,A.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(gp))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(e,r){if(1&e){var i=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Sign Up"),y.qZA(),y.TgZ(5,"div",3),y._UZ(6,"input",4,5),y.qZA(),y.TgZ(8,"div",3),y._UZ(9,"input",6,7),y.qZA(),y.TgZ(11,"div",3)(12,"input",8),y.NdJ("click",function(){y.CHM(i);var u=y.MAs(7),c=y.MAs(10);return y.KtG(r.authService.SignUp(u.value,c.value))}),y.qZA()(),y.TgZ(13,"div",3)(14,"span",9)(15,"span",10),y._uU(16,"Or"),y.qZA()()(),y.TgZ(17,"div",3)(18,"button",11),y.NdJ("click",function(){return r.authService.GoogleAuth()}),y._UZ(19,"i",12),y._uU(20," Continue with Google "),y.qZA()()(),y.TgZ(21,"div",13)(22,"span"),y._uU(23,"Already have an account? "),y.TgZ(24,"span",14),y._uU(25,"Log In"),y.qZA()()()()()}},dependencies:[vl]}),t}();function JF(t,n){if(1&t&&(y.TgZ(0,"div",4)(1,"div",18)(2,"div",19),y._UZ(3,"img",20),y.TgZ(4,"div",21)(5,"h1"),y._uU(6,"Hello: "),y.TgZ(7,"strong"),y._uU(8),y.qZA()(),y.TgZ(9,"p"),y._uU(10,"User ID: "),y.TgZ(11,"strong"),y._uU(12),y.qZA()(),y.TgZ(13,"p"),y._uU(14,"Email: "),y.TgZ(15,"strong"),y._uU(16),y.qZA()(),y.TgZ(17,"p"),y._uU(18,"Email Verified: "),y.TgZ(19,"strong"),y._uU(20),y.qZA()()()()()()),2&t){var e=n.ngIf;y.xp6(3),y.s9C("src",e.photoURL?e.photoURL:"/assets/dummy-user.png",y.LSH),y.s9C("alt",e.displayName),y.xp6(5),y.Oqu(e.displayName?e.displayName:"User"),y.xp6(4),y.Oqu(e.uid),y.xp6(4),y.Oqu(e.email),y.xp6(4),y.Oqu(e.emailVerified)}}var e2=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.authService=e}return(0,A.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(gp))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(e,r){1&e&&(y.TgZ(0,"nav",0)(1,"a",1),y._UZ(2,"img",2),y.qZA()(),y.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),y._UZ(10,"i",10),y._uU(11,"User Profile "),y.qZA()(),y.TgZ(12,"li",8)(13,"a",11),y.NdJ("click",function(){return r.authService.SignOut()}),y._UZ(14,"i",12),y._uU(15,"Log out "),y.qZA()()()()(),y.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),y._uU(20,"User Profile"),y.qZA()(),y.YNc(21,JF,21,6,"div",17),y.qZA()()()()),2&e&&(y.xp6(21),y.Q6J("ngIf",r.authService.userData))},dependencies:[Va]}),t}(),t2=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.authService=e}return(0,A.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(gp))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(e,r){if(1&e){var i=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Reset Password"),y.qZA(),y.TgZ(5,"p",3),y._uU(6,"Please enter your email address to request a password reset."),y.qZA(),y.TgZ(7,"div",4),y._UZ(8,"input",5,6),y.qZA(),y.TgZ(10,"div",4)(11,"input",7),y.NdJ("click",function(){y.CHM(i);var u=y.MAs(9);return y.KtG(r.authService.ForgotPassword(u.value))}),y.qZA()()(),y.TgZ(12,"div",8)(13,"span"),y._uU(14,"Go back to ? "),y.TgZ(15,"span",9),y._uU(16,"Log In"),y.qZA()()()()()}},dependencies:[vl]}),t}();function n2(t,n){if(1&t&&(y.TgZ(0,"div",4)(1,"p",9),y._uU(2,"We have sent a confirmation email to "),y.TgZ(3,"strong"),y._uU(4),y.qZA(),y._uU(5,"."),y.qZA(),y.TgZ(6,"p",9),y._uU(7,"Please check your email and click on the link to verfiy your email address."),y.qZA()()),2&t){var e=n.ngIf;y.xp6(4),y.Oqu(e.email)}}var r2=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.authService=e}return(0,A.Z)(n,[{key:"ngOnInit",value:function(){}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.Y36(gp))},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(e,r){1&e&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),y._uU(4,"Thank You for Registering"),y.qZA(),y.YNc(5,n2,8,1,"div",3),y.TgZ(6,"div",4)(7,"button",5),y.NdJ("click",function(){return r.authService.SendVerificationMail()}),y._UZ(8,"i",6),y._uU(9," Resend Verification Email "),y.qZA()()(),y.TgZ(10,"div",7)(11,"span"),y._uU(12,"Go back to?"),y.TgZ(13,"span",8),y._uU(14," Sign in"),y.qZA()()()()()),2&e&&(y.xp6(5),y.Q6J("ngIf",r.authService.userData))},dependencies:[Va,vl]}),t}(),i2=function(){var t=function(){function n(e,r){(0,R.Z)(this,n),this.authService=e,this.router=r}return(0,A.Z)(n,[{key:"canActivate",value:function(r,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(gp),y.LFG(Pi))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),a2=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:QF},{path:"register-user",component:XF},{path:"dashboard",component:e2,canActivate:[i2]},{path:"forgot-password",component:t2},{path:"verify-email-address",component:r2}],s2=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({imports:[Mw.forRoot(a2),Mw]}),t}(),u2=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n),this.title="FirebaseAuthentication1"});return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=y.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){1&e&&y._UZ(0,"router-outlet")},dependencies:[qp]}),t}(),oM="firebasestorage.googleapis.com",lM="storageBucket",Fi=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,DA(r),"Firebase Storage: ".concat(i," (").concat(DA(r),")"))).customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf((0,_c.Z)(a),e.prototype),a}return(0,A.Z)(e,[{key:"_codeEquals",value:function(i){return DA(i)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(i){this.customData.serverResponse=i,this.message=this.customData.serverResponse?"".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this._baseMessage}}]),e}(X.ZR);function DA(t){return"storage/"+t}function SA(){return new Fi("unknown","An unknown error occurred, please check the error payload for server response.")}function cM(){return new Fi("canceled","User canceled the upload/download.")}function fM(){return new Fi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Hm(t){return new Fi("invalid-argument",t)}function hM(){return new Fi("app-deleted","The Firebase app was deleted.")}function dM(t){return new Fi("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dk(t,n){return new Fi("invalid-format","String does not match format '"+t+"': "+n)}function vk(t){throw new Fi("internal-error","Internal error: "+t)}var Zu=function(){function t(n,e){(0,R.Z)(this,t),this.bucket=n,this.path_=e}return(0,A.Z)(t,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(e,r){var i;try{i=t.makeFromUrl(e,r)}catch(a){return new t(e,"")}if(""===i.path)return i;throw function y2(t){return new Fi("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(e)}},{key:"makeFromUrl",value:function(e,r){var i=null,a="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+a+"(/(.*))?$","i");function g(Kt){Kt.path_=decodeURIComponent(Kt.path)}for(var D=r.replace(/[.]/g,"\\."),Ye=[{regex:h,indices:{bucket:1,path:3},postModify:function u(Kt){"/"===Kt.path.charAt(Kt.path.length-1)&&(Kt.path_=Kt.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(D,"/").concat("v[A-Za-z0-9_]+","/b/").concat(a,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:g},{regex:new RegExp("^https?://".concat(r===oM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,"/").concat(a,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:g}],ze=0;ze<Ye.length;ze++){var Tt=Ye[ze],Et=Tt.regex.exec(e);if(Et){var en=Et[Tt.indices.path];en||(en=""),i=new t(Et[Tt.indices.bucket],en),Tt.postModify(i);break}}if(null==i)throw function m2(t){return new Fi("invalid-url","Invalid URL '"+t+"'.")}(e);return i}}]),t}(),b2=function(){function t(n){(0,R.Z)(this,t),this.promise_=Promise.reject(n)}return(0,A.Z)(t,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),t}();function WI(t){return"string"==typeof t||t instanceof String}function vM(t){return AA()&&t instanceof Blob}function AA(){return"undefined"!=typeof Blob}function RA(t,n,e,r){if(r<n)throw Hm("Invalid value for '".concat(t,"'. Expected ").concat(n," or greater."));if(r>e)throw Hm("Invalid value for '".concat(t,"'. Expected ").concat(e," or less."))}function If(t,n,e){var r=n;return null==e&&(r="https://".concat(n)),"".concat(e,"://").concat(r,"/v0").concat(t)}function pM(t){var n=encodeURIComponent,e="?";for(var r in t)t.hasOwnProperty(r)&&(e=e+(n(r)+"=")+n(t[r])+"&");return e.slice(0,-1)}var ad=function(){return function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(ad||(ad={})),ad}(),S2=function(){function t(n,e,r,i,a,u,c,h,v,g,I){var D=this;(0,R.Z)(this,t),this.url_=n,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=c,this.errorCallback_=h,this.timeout_=v,this.progressCallback_=g,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(function(L,x){D.resolve_=L,D.reject_=x,D.start_()})}return(0,A.Z)(t,[{key:"start_",value:function(){var e=this,i=function(u,c){var h=e.resolve_,v=e.reject_,g=c.connection;if(c.wasSuccessCode)try{var I=e.callback_(g,g.getResponse());!function C2(t){return void 0!==t}(I)?h():h(I)}catch(K){v(K)}else if(null!==g){var D=SA();D.serverResponse=g.getErrorText(),v(e.errorCallback_?e.errorCallback_(g,D):D)}else v(c.canceled?e.appDelete_?hM():cM():function g2(){return new Fi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?i(0,new GI(!1,null,!0)):this.backoffId_=function E2(t,n,e){var r=1,i=null,a=null,u=!1,c=0;function h(){return 2===c}var v=!1;function g(){if(!v){v=!0;for(var ne=arguments.length,re=new Array(ne),Pe=0;Pe<ne;Pe++)re[Pe]=arguments[Pe];n.apply(null,re)}}function I(ne){i=setTimeout(function(){i=null,t(L,h())},ne)}function D(){a&&clearTimeout(a)}function L(ne){if(v)D();else{for(var re=arguments.length,Pe=new Array(re>1?re-1:0),Ve=1;Ve<re;Ve++)Pe[Ve-1]=arguments[Ve];if(ne)return D(),void g.call.apply(g,[null,ne].concat(Pe));var ze;if(h()||u)return D(),void g.call.apply(g,[null,ne].concat(Pe));r<64&&(r*=2),1===c?(c=2,ze=0):ze=1e3*(r+Math.random()),I(ze)}}var x=!1;function K(ne){x||(x=!0,D(),!v&&(null!==i?(ne||(c=2),clearTimeout(i),I(0)):ne||(c=1)))}return I(0),a=setTimeout(function(){u=!0,K(!0)},e),K}(function(u,c){if(c)u(!1,new GI(!1,null,!0));else{var h=e.connectionFactory_();e.pendingConnection_=h;var v=function(I){null!==e.progressCallback_&&e.progressCallback_(I.loaded,I.lengthComputable?I.total:-1)};null!==e.progressCallback_&&h.addUploadProgressListener(v),h.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&h.removeUploadProgressListener(v),e.pendingConnection_=null;var g=h.getErrorCode()===ad.NO_ERROR,I=h.getStatus();if(g&&!e.isRetryStatusCode_(I)){var L=-1!==e.successCodes_.indexOf(I);u(!0,new GI(L,h))}else{var D=h.getErrorCode()===ad.ABORT;u(!1,new GI(!1,null,D))}})}},i,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function I2(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var r=e>=500&&e<600,a=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return r||a||u}}]),t}(),GI=(0,A.Z)(function t(n,e,r){(0,R.Z)(this,t),this.wasSuccessCode=n,this.connection=e,this.canceled=!!r});function Z2(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function N2(){for(var t=Z2(),n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(void 0!==t){for(var i=new t,a=0;a<e.length;a++)i.append(e[a]);return i.getBlob()}if(AA())return new Blob(e);throw new Fi("unsupported-environment","This browser doesn't seem to support creating Blobs")}var qs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},PA=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.data=n,this.contentType=e||null});function MA(t,n){switch(t){case qs.RAW:return new PA(gM(n));case qs.BASE64:case qs.BASE64URL:return new PA(mM(t,n));case qs.DATA_URL:return new PA(function x2(t){var n=new yM(t);return n.base64?mM(qs.BASE64,n.rest):function U2(t){var n;try{n=decodeURIComponent(t)}catch(e){throw dk(qs.DATA_URL,"Malformed data URL.")}return gM(n)}(n.rest)}(n),function B2(t){return new yM(t).contentType}(n))}throw SA()}function gM(t){for(var n=[],e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<=127)n.push(r);else if(r<=2047)n.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(e<t.length-1&&56320==(64512&t.charCodeAt(e+1))){var a=r,u=t.charCodeAt(++e);n.push(240|(r=65536|(1023&a)<<10|1023&u)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else n.push(239,191,189);else 56320==(64512&r)?n.push(239,191,189):n.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(n)}function mM(t,n){switch(t){case qs.BASE64:var e=-1!==n.indexOf("-"),r=-1!==n.indexOf("_");if(e||r)throw dk(t,"Invalid character '"+(e?"-":"_")+"' found: is it base64url encoded?");break;case qs.BASE64URL:var a=-1!==n.indexOf("+"),u=-1!==n.indexOf("/");if(a||u)throw dk(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/")}var h;try{h=function F2(t){return atob(t)}(n)}catch(I){throw dk(t,"Invalid character found")}for(var v=new Uint8Array(h.length),g=0;g<h.length;g++)v[g]=h.charCodeAt(g);return v}var yM=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.base64=!1,this.contentType=null;var e=n.match(/^data:([^,]+)?,/);if(null===e)throw dk(qs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=e[1]||null;null!=r&&(this.base64=function V2(t,n){return t.length>=n.length&&t.substring(t.length-n.length)===n}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=n.substring(n.indexOf(",")+1)}),zI=function(){function t(n,e){(0,R.Z)(this,t);var r=0,i="";vM(n)?(this.data_=n,r=n.size,i=n.type):n instanceof ArrayBuffer?(e?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),r=this.data_.length):n instanceof Uint8Array&&(e?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),r=n.length),this.size_=r,this.type_=i}return(0,A.Z)(t,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(e,r){if(vM(this.data_)){var a=function L2(t,n,e){return t.webkitSlice?t.webkitSlice(n,e):t.mozSlice?t.mozSlice(n,e):t.slice?t.slice(n,e):null}(this.data_,e,r);return null===a?null:new t(a)}return new t(new Uint8Array(this.data_.buffer,e,r-e),!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(AA()){var a=r.map(function(g){return g instanceof t?g.data_:g});return new t(N2.apply(null,a))}var u=r.map(function(g){return WI(g)?MA(qs.RAW,g).data:g.data_}),c=0;u.forEach(function(g){c+=g.byteLength});var h=new Uint8Array(c),v=0;return u.forEach(function(g){for(var I=0;I<g.length;I++)h[v++]=g[I]}),new t(h,!0)}}]),t}();function OA(t){var n;try{n=JSON.parse(t)}catch(e){return null}return function D2(t){return"object"==typeof t&&!Array.isArray(t)}(n)?n:null}function _M(t){var n=t.lastIndexOf("/",t.length-2);return-1===n?t:t.slice(n+1)}function W2(t,n){return n}var is=(0,A.Z)(function t(n,e,r,i){(0,R.Z)(this,t),this.server=n,this.local=e||n,this.writable=!!r,this.xform=i||W2}),KI=null;function pk(){if(KI)return KI;var t=[];t.push(new is("bucket")),t.push(new is("generation")),t.push(new is("metageneration")),t.push(new is("name","fullPath",!0));var e=new is("name");e.xform=function n(a,u){return function G2(t){return!WI(t)||t.length<2?t:_M(t)}(u)},t.push(e);var i=new is("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},t.push(i),t.push(new is("timeCreated")),t.push(new is("updated")),t.push(new is("md5Hash",null,!0)),t.push(new is("cacheControl",null,!0)),t.push(new is("contentDisposition",null,!0)),t.push(new is("contentEncoding",null,!0)),t.push(new is("contentLanguage",null,!0)),t.push(new is("contentType",null,!0)),t.push(new is("metadata","customMetadata",!0)),KI=t}function kM(t,n,e){var r=OA(n);return null===r?null:function K2(t,n,e){for(var r={type:"file"},i=e.length,a=0;a<i;a++){var u=e[a];r[u.local]=u.xform(r,n[u.server])}return function z2(t,n){Object.defineProperty(t,"ref",{get:function e(){var a=new Zu(t.bucket,t.fullPath);return n._makeStorageReference(a)}})}(r,t),r}(t,r,e)}function ZA(t,n){for(var e={},r=n.length,i=0;i<r;i++){var a=n[i];a.writable&&(e[a.server]=t[a.local])}return JSON.stringify(e)}var wM="prefixes";var Nl=(0,A.Z)(function t(n,e,r,i){(0,R.Z)(this,t),this.url=n,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]});function Ll(t){if(!t)throw SA()}function $I(t,n){return function e(r,i){var a=kM(t,i,n);return Ll(null!==a),a}}function Wm(t){return function n(e,r){var i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function v2(){return new Fi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function d2(){return new Fi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function h2(t){return new Fi("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===e.getStatus()?function p2(t){return new Fi("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):r,i.serverResponse=r.serverResponse,i}}function gk(t){var n=Wm(t);return function e(r,i){var a=n(r,i);return 404===r.getStatus()&&(a=function f2(t){return new Fi("object-not-found","Object '"+t+"' does not exist.")}(t.path)),a.serverResponse=i.serverResponse,a}}function EM(t,n,e){var i=If(n.fullServerUrl(),t.host,t._protocol),u=t.maxOperationRetryTime,c=new Nl(i,"GET",$I(t,e),u);return c.errorHandler=gk(n),c}function J2(t,n,e,r,i){var a={};a.prefix=n.isRoot?"":n.path+"/",e&&e.length>0&&(a.delimiter=e),r&&(a.pageToken=r),i&&(a.maxResults=i);var c=If(n.bucketOnlyServerUrl(),t.host,t._protocol),v=t.maxOperationRetryTime,g=new Nl(c,"GET",function Q2(t,n){return function e(r,i){var a=function Y2(t,n,e){var r=OA(e);return null===r?null:function q2(t,n,e){var r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[wM]){var a,i=(0,P.Z)(e[wM]);try{for(i.s();!(a=i.n()).done;){var c=a.value.replace(/\/$/,""),h=t._makeStorageReference(new Zu(n,c));r.prefixes.push(h)}}catch(L){i.e(L)}finally{i.f()}}if(e.items){var g,v=(0,P.Z)(e.items);try{for(v.s();!(g=v.n()).done;){var D=t._makeStorageReference(new Zu(n,g.value.name));r.items.push(D)}}catch(L){v.e(L)}finally{v.f()}}return r}(t,n,r)}(t,n,i);return Ll(null!==a),a}}(t,n.bucket),v);return g.urlParams=a,g.errorHandler=Wm(n),g}function CM(t,n,e){var r=Object.assign({},e);return r.fullPath=t.path,r.size=n.size(),r.contentType||(r.contentType=function rU(t,n){return t&&t.contentType||n&&n.type()||"application/octet-stream"}(null,n)),r}var qI=(0,A.Z)(function t(n,e,r,i){(0,R.Z)(this,t),this.current=n,this.total=e,this.finalized=!!r,this.metadata=i||null});function NA(t,n){var e=null;try{e=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ll(!1)}return Ll(!!e&&-1!==(n||["active"]).indexOf(e)),e}var uU={STATE_CHANGED:"state_changed"},as={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function LA(t){switch(t){case"running":case"pausing":case"canceling":return as.RUNNING;case"paused":return as.PAUSED;case"success":return as.SUCCESS;case"canceled":return as.CANCELED;default:return as.ERROR}}var oU=(0,A.Z)(function t(n,e,r){(0,R.Z)(this,t);var i=function T2(t){return"function"==typeof t}(n)||null!=e||null!=r;if(i)this.next=n,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{var a=n;this.next=a.next,this.error=a.error,this.complete=a.complete}});function Gm(t){return function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var lU=function(){function t(){var n=this;(0,R.Z)(this,t),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ad.NO_ERROR,this.sendPromise_=new Promise(function(e){n.xhr_.addEventListener("abort",function(){n.errorCode_=ad.ABORT,e()}),n.xhr_.addEventListener("error",function(){n.errorCode_=ad.NETWORK_ERROR,e()}),n.xhr_.addEventListener("load",function(){e()})})}return(0,A.Z)(t,[{key:"send",value:function(e,r,i,a){if(this.sent_)throw vk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),void 0!==a)for(var u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw vk("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw vk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw vk("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw vk("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),t}(),cU=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),e}(lU);function Oo(){return new cU}var AM=function(){function t(n,e){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,R.Z)(this,t),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=e,this._metadata=i,this._mappings=pk(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(a){r._request=void 0,r._chunkMultiplier=1,a._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=a,r._transition("error"))},this._metadataErrorHandler=function(a){r._request=void 0,a._codeEquals("canceled")?r.completeTransitions_():(r._error=a,r._transition("error"))},this._promise=new Promise(function(a,u){r._resolve=a,r._reject=u,r._start()}),this._promise.then(null,function(){})}return(0,A.Z)(t,[{key:"_makeProgressCallback",value:function(){var e=this,r=this._transferred;return function(i){return e._updateProgress(r+i)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var r=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(i){var a=(0,ye.Z)(i,2),u=a[0],c=a[1];switch(r._state){case"running":e(u,c);break;case"canceling":r._transition("canceled");break;case"pausing":r._transition("paused")}})}},{key:"_createResumable",value:function(){var e=this;this._resolveToken(function(r,i){var a=function iU(t,n,e,r,i){var a=n.bucketOnlyServerUrl(),u=CM(n,r,i),c={name:u.fullPath},h=If(a,t.host,t._protocol),g={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},I=ZA(u,e),x=new Nl(h,"POST",function L(K){var ne;NA(K);try{ne=K.getResponseHeader("X-Goog-Upload-URL")}catch(re){Ll(!1)}return Ll(WI(ne)),ne},t.maxUploadRetryTime);return x.urlParams=c,x.headers=g,x.body=I,x.errorHandler=Wm(n),x}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),u=e._ref.storage._makeRequest(a,Oo,r,i);e._request=u,u.getPromise().then(function(c){e._request=void 0,e._uploadUrl=c,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})}},{key:"_fetchStatus",value:function(){var e=this,r=this._uploadUrl;this._resolveToken(function(i,a){var u=function aU(t,n,e,r){var h=new Nl(e,"POST",function a(v){var g=NA(v,["active","final"]),I=null;try{I=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){Ll(!1)}I||Ll(!1);var D=Number(I);return Ll(!isNaN(D)),new qI(D,r.size(),"final"===g)},t.maxUploadRetryTime);return h.headers={"X-Goog-Upload-Command":"query"},h.errorHandler=Wm(n),h}(e._ref.storage,e._ref._location,r,e._blob),c=e._ref.storage._makeRequest(u,Oo,i,a);e._request=c,c.getPromise().then(function(h){e._request=void 0,e._updateProgress(h.current),e._needToFetchStatus=!1,h.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})}},{key:"_continueUpload",value:function(){var e=this,r=262144*this._chunkMultiplier,i=new qI(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken(function(u,c){var h;try{h=function sU(t,n,e,r,i,a,u,c){var h=new qI(0,0);if(u?(h.current=u.current,h.total=u.total):(h.current=0,h.total=r.size()),r.size()!==h.total)throw function k2(){return new Fi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();var v=h.total-h.current,g=v;i>0&&(g=Math.min(g,i));var I=h.current,D=I+g,x={"X-Goog-Upload-Command":g===v?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(h.current)},K=r.slice(I,D);if(null===K)throw fM();var Ve=new Nl(e,"POST",function ne(Ye,ze){var en,Tt=NA(Ye,["active","final"]),Et=h.current+g,yt=r.size();return en="final"===Tt?$I(n,a)(Ye,ze):null,new qI(Et,yt,"final"===Tt,en)},n.maxUploadRetryTime);return Ve.headers=x,Ve.body=K.uploadData(),Ve.progressCallback=c||null,Ve.errorHandler=Wm(t),Ve}(e._ref._location,e._ref.storage,a,e._blob,r,e._mappings,i,e._makeProgressCallback())}catch(g){return e._error=g,void e._transition("error")}var v=e._ref.storage._makeRequest(h,Oo,u,c);e._request=v,v.getPromise().then(function(g){e._increaseMultiplier(),e._request=void 0,e._updateProgress(g.current),g.finalized?(e._metadata=g.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})}},{key:"_increaseMultiplier",value:function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken(function(r,i){var a=EM(e._ref.storage,e._ref._location,e._mappings),u=e._ref.storage._makeRequest(a,Oo,r,i);e._request=u,u.getPromise().then(function(c){e._request=void 0,e._metadata=c,e._transition("success")},e._metadataErrorHandler)})}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken(function(r,i){var a=function TM(t,n,e,r,i){var a=n.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},h=function c(){for(var Ve="",Ye=0;Ye<2;Ye++)Ve+=Math.random().toString().slice(2);return Ve}();u["Content-Type"]="multipart/related; boundary="+h;var v=CM(n,r,i),g=ZA(v,e),L=zI.getBlob("--"+h+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+g+"\r\n--"+h+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+h+"--");if(null===L)throw fM();var x={name:v.fullPath},K=If(a,t.host,t._protocol),re=t.maxUploadRetryTime,Pe=new Nl(K,"POST",$I(t,e),re);return Pe.urlParams=x,Pe.headers=u,Pe.body=L.uploadData(),Pe.errorHandler=Wm(n),Pe}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),u=e._ref.storage._makeRequest(a,Oo,r,i);e._request=u,u.getPromise().then(function(c){e._request=void 0,e._metadata=c,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})}},{key:"_updateProgress",value:function(e){var r=this._transferred;this._transferred=e,this._transferred!==r&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var r="paused"===this._state;this._state=e,r&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=cM(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=LA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,r,i,a){var u=this,c=new oU(r||void 0,i||void 0,a||void 0);return this._addObserver(c),function(){u._removeObserver(c)}}},{key:"then",value:function(e,r){return this._promise.then(e,r)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var r=this._observers.indexOf(e);-1!==r&&this._observers.splice(r,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(i){e._notifyObserver(i)})}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(LA(this._state)){case as.SUCCESS:Gm(this._resolve.bind(null,this.snapshot))();break;case as.CANCELED:case as.ERROR:Gm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(LA(this._state)){case as.RUNNING:case as.PAUSED:e.next&&Gm(e.next.bind(e,this.snapshot))();break;case as.SUCCESS:e.complete&&Gm(e.complete.bind(e))();break;default:e.error&&Gm(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),t}(),YI=function(){function t(n,e){(0,R.Z)(this,t),this._service=n,this._location=e instanceof Zu?e:Zu.makeFromUrl(e,n.host)}return(0,A.Z)(t,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(e,r){return new t(e,r)}},{key:"root",get:function(){var e=new Zu(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return _M(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var e=function j2(t){if(0===t.length)return null;var n=t.lastIndexOf("/");return-1===n?"":t.slice(0,n)}(this._location.path);if(null===e)return null;var r=new Zu(this._location.bucket,e);return new t(this._service,r)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw dM(e)}}]),t}();function PM(t,n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,ut.Z)((0,ce.Z)().mark(function t(n,e,r){var i,a,u,c;return(0,ce.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u={pageToken:r},v.next=3,MM(n,u);case 3:if((i=e.prefixes).push.apply(i,(0,on.Z)((c=v.sent).prefixes)),(a=e.items).push.apply(a,(0,on.Z)(c.items)),null==c.nextPageToken){v.next=9;break}return v.next=9,PM(n,e,c.nextPageToken);case 9:case"end":return v.stop()}},t)})),FA.apply(this,arguments)}function MM(t,n){null!=n&&"number"==typeof n.maxResults&&RA("options.maxResults",1,1e3,n.maxResults);var e=n||{},r=J2(t.storage,t._location,"/",e.pageToken,e.maxResults);return t.storage.makeRequestWithTokens(r,Oo)}function bU(t){t._throwIfRoot("getDownloadURL");var n=function eU(t,n,e){var i=If(n.fullServerUrl(),t.host,t._protocol),u=t.maxOperationRetryTime,c=new Nl(i,"GET",function X2(t,n){return function e(r,i){var a=kM(t,i,n);return Ll(null!==a),function $2(t,n,e,r){var i=OA(n);if(null===i||!WI(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var u=encodeURIComponent;return a.split(",").map(function(v){var I=t.fullPath;return If("/b/"+u(t.bucket)+"/o/"+u(I),e,r)+pM({alt:"media",token:v})})[0]}(a,i,t.host,t._protocol)}}(t,e),u);return c.errorHandler=gk(n),c}(t.storage,t._location,pk());return t.storage.makeRequestWithTokens(n,Oo).then(function(e){if(null===e)throw function w2(){return new Fi("no-download-url","The given file does not have any download URLs.")}();return e})}function OM(t,n){var e=function H2(t,n){var e=n.split("/").filter(function(r){return r.length>0}).join("/");return 0===t.length?e:t+"/"+e}(t._location.path,n),r=new Zu(t._location.bucket,e);return new YI(t.storage,r)}function ZM(t,n){if(t instanceof UA){var e=t;if(null==e._bucket)throw function _2(){return new Fi("no-default-bucket","No default bucket found. Did you set the '"+lM+"' property when initializing the app?")}();var r=new YI(e,e._bucket);return null!=n?ZM(r,n):r}return void 0!==n?OM(t,n):t}function TU(t,n){if(n&&function IU(t){return/^[A-Za-z]+:\/\//.test(t)}(n)){if(t instanceof UA)return function CU(t,n){return new YI(t,n)}(t,n);throw Hm("To use ref(service, url), the first argument must be a Storage instance.")}return ZM(t,n)}function NM(t,n){var e=null==n?void 0:n[lM];return null==e?null:Zu.makeFromBucketSpec(e,t)}function DU(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.host="".concat(n,":").concat(e),t._protocol="http";var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:(0,X.Sg)(i,t.app.options.projectId))}var UA=function(){function t(n,e,r,i,a){(0,R.Z)(this,t),this.app=n,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=oM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Zu.makeFromBucketSpec(i,this._host):NM(this._host,this.app.options)}return(0,A.Z)(t,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?Zu.makeFromBucketSpec(this._url,e):NM(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){RA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){RA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:(n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i,a;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this._overrideAuthToken){c.next=2;break}return c.abrupt("return",this._overrideAuthToken);case 2:if(!(i=this._authProvider.getImmediate({optional:!0}))){c.next=9;break}return c.next=6,i.getToken();case 6:if(null===(a=c.sent)){c.next=9;break}return c.abrupt("return",a.accessToken);case 9:return c.abrupt("return",null);case 10:case"end":return c.stop()}},r,this)})),function e(){return n.apply(this,arguments)})},{key:"_getAppCheckToken",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(){var i;return(0,ce.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(i=this._appCheckProvider.getImmediate({optional:!0}))){c.next=6;break}return c.next=4,i.getToken();case 4:return c.abrupt("return",c.sent.token);case 6:return c.abrupt("return",null);case 7:case"end":return c.stop()}},r,this)}));return function e(){return n.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new YI(this,e)}},{key:"_makeRequest",value:function(e,r,i,a){var u=this;if(this._deleted)return new b2(hM());var c=function O2(t,n,e,r,i,a){var u=pM(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return function P2(t,n){n&&(t["X-Firebase-GMPID"]=n)}(h,n),function A2(t,n){null!==n&&n.length>0&&(t.Authorization="Firebase "+n)}(h,e),function R2(t,n){t["X-Firebase-Storage-Version"]="webjs/"+(null!=n?n:"AppManager")}(h,a),function M2(t,n){null!==n&&(t["X-Firebase-AppCheck"]=n)}(h,r),new S2(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(e,this._appId,i,a,r,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(function(){return u._requests.delete(c)},function(){return u._requests.delete(c)}),c}},{key:"makeRequestWithTokens",value:function(){var n=(0,ut.Z)((0,ce.Z)().mark(function r(i,a){var c;return(0,ce.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return c=(0,ye.Z)(I.sent,2),I.abrupt("return",this._makeRequest(i,a,c[0],c[1]).getPromise());case 7:case"end":return I.stop()}},r,this)}));return function e(r,i){return n.apply(this,arguments)}}()}]),t;var n}(),LM="@firebase/storage";function xM(t,n){return TU(t=(0,X.m9)(t),n)}function LU(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};DU(t,n,e,r)}function FU(t,n){var e=n.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new UA(r,i,a,e,Ki.SDK_VERSION)}!function UU(){(0,Ki._registerComponent)(new Bs.wA("storage",FU,"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(LM,"0.9.9",""),(0,Ki.registerVersion)(LM,"0.9.9","esm2017")}();var QI=function(){function t(n,e,r){(0,R.Z)(this,t),this._delegate=n,this.task=e,this.ref=r}return(0,A.Z)(t,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),t}(),BM=function(){function t(n,e){(0,R.Z)(this,t),this._delegate=n,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return(0,A.Z)(t,[{key:"snapshot",get:function(){return new QI(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,r){var i=this;return this._delegate.then(function(a){if(e)return e(new QI(a,i,i._ref))},r)}},{key:"on",value:function(e,r,i,a){var u=this,c=void 0;return r&&(c="function"==typeof r?function(v){return r(new QI(v,u,u._ref))}:{next:r.next?function(h){return r.next(new QI(h,u,u._ref))}:void 0,complete:r.complete||void 0,error:r.error||void 0}),this._delegate.on(e,c,i||void 0,a||void 0)}}]),t}(),VM=function(){function t(n,e){(0,R.Z)(this,t),this._delegate=n,this._service=e}return(0,A.Z)(t,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map(function(r){return new mk(r,e._service)})}},{key:"items",get:function(){var e=this;return this._delegate.items.map(function(r){return new mk(r,e._service)})}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),t}(),mk=function(){function t(n,e){(0,R.Z)(this,t),this._delegate=n,this.storage=e}return(0,A.Z)(t,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(e){var r=function NU(t,n){return OM(t,n)}(this._delegate,e);return new t(r,this.storage)}},{key:"root",get:function(){return new t(this._delegate.root,this.storage)}},{key:"parent",get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)}},{key:"put",value:function(e,r){return this._throwIfRoot("put"),new BM(function SU(t,n,e){return function mU(t,n,e){return t._throwIfRoot("uploadBytesResumable"),new AM(t,new zI(n),e)}(t=(0,X.m9)(t),n,e)}(this._delegate,e,r),this)}},{key:"putString",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qs.RAW,i=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var a=MA(r,e),u=Object.assign({},i);return null==u.contentType&&null!=a.contentType&&(u.contentType=a.contentType),new BM(new AM(this._delegate,new zI(a.data,!0),u),this)}},{key:"listAll",value:function(){var e=this;return function MU(t){return function _U(t){var n={prefixes:[],items:[]};return PM(t,n).then(function(){return n})}(t=(0,X.m9)(t))}(this._delegate).then(function(r){return new VM(r,e.storage)})}},{key:"list",value:function(e){var r=this;return function PU(t,n){return MM(t=(0,X.m9)(t),n)}(this._delegate,e||void 0).then(function(i){return new VM(i,r.storage)})}},{key:"getMetadata",value:function(){return function AU(t){return function kU(t){t._throwIfRoot("getMetadata");var n=EM(t.storage,t._location,pk());return t.storage.makeRequestWithTokens(n,Oo)}(t=(0,X.m9)(t))}(this._delegate)}},{key:"updateMetadata",value:function(e){return function RU(t,n){return function wU(t,n){t._throwIfRoot("updateMetadata");var e=function tU(t,n,e,r){var a=If(n.fullServerUrl(),t.host,t._protocol),c=ZA(e,r),v=t.maxOperationRetryTime,g=new Nl(a,"PATCH",$I(t,r),v);return g.headers={"Content-Type":"application/json; charset=utf-8"},g.body=c,g.errorHandler=gk(n),g}(t.storage,t._location,n,pk());return t.storage.makeRequestWithTokens(e,Oo)}(t=(0,X.m9)(t),n)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return function OU(t){return bU(t=(0,X.m9)(t))}(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),function ZU(t){return function EU(t){t._throwIfRoot("deleteObject");var n=function nU(t,n){var r=If(n.fullServerUrl(),t.host,t._protocol),c=new Nl(r,"DELETE",function u(h,v){},t.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=gk(n),c}(t.storage,t._location);return t.storage.makeRequestWithTokens(n,Oo)}(t=(0,X.m9)(t))}(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw dM(e)}}]),t}(),jM=function(){function t(n,e){(0,R.Z)(this,t),this.app=n,this._delegate=e}return(0,A.Z)(t,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(HM(e))throw Hm("ref() expected a child path but got a URL, use refFromURL instead.");return new mk(xM(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!HM(e))throw Hm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zu.makeFromUrl(e,this._delegate.host)}catch(r){throw Hm("refFromUrl() expected a valid full URL but got an invalid one.")}return new mk(xM(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};LU(this._delegate,e,r,i)}}]),t}();function HM(t){return/^[A-Za-z]+:\/\//.test(t)}function jU(t,n){var e=n.instanceIdentifier,r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new jM(r,i)}function WM(t){var n=function WU(t){return new dr.y(function(n){var e=function(c){return n.next(c)};e(t.snapshot);var a=t.on("state_changed",e);return t.then(function(u){e(u),n.complete()},function(u){e(t.snapshot),n.error(u)}),function(){a()}}).pipe(function o2(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gg.z;return(0,br.e)(function(e,r){var i=null,a=null,u=null,c=function(){if(i){i.unsubscribe(),i=null;var g=a;a=null,r.next(g)}};function h(){var v=u+t,g=n.now();if(g<v)return i=this.schedule(void 0,v-g),void r.add(i);c()}e.subscribe((0,ir.x)(r,function(v){a=v,u=n.now(),i||(i=n.schedule(h,t),r.add(i))},function(){c(),r.complete()},void 0,function(){a=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:function(){return n},percentageChanges:function(){return n.pipe((0,qt.U)(function(r){return r.bytesTransferred/r.totalBytes*100}))}}}function XI(t){return{getDownloadURL:function(){return Dt(void 0).pipe(yn.fc,Bn(function(){return t.getDownloadURL()}),yn.iC)},getMetadata:function(){return Dt(void 0).pipe(yn.fc,Bn(function(){return t.getMetadata()}),yn.iC)},delete:function(){return(0,Kn.D)(t.delete())},child:function(e){return XI(t.child(e))},updateMetadata:function(e){return(0,Kn.D)(t.updateMetadata(e))},put:function(e,r){return WM(t.put(e,r))},putString:function(e,r,i){return WM(t.putString(e,r,i))},list:function(e){return(0,Kn.D)(t.list(e))},listAll:function(){return(0,Kn.D)(t.listAll())}}}!function HU(t){var n={TaskState:as,TaskEvent:uU,StringFormat:qs,Storage:jM,Reference:mk};t.INTERNAL.registerComponent(new Bs.wA("storage-compat",jU,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.1.17")}(Jd.Z);var GU=new y.OlP("angularfire2.storageBucket"),zU=new y.OlP("angularfire2.storage.maxUploadRetryTime"),KU=new y.OlP("angularfire2.storage.maxOperationRetryTime"),$U=new y.OlP("angularfire2.storage.use-emulator"),qU=function(){var t=function(){function n(e,r,i,a,u,c,h,v,g,I){(0,R.Z)(this,n);var D=(0,si.on)(e,u,r);this.storage=(0,si.cc)("".concat(D.name,".storage.").concat(i),"AngularFireStorage",D.name,function(){var L=u.runOutsideAngular(function(){return D.storage(i||void 0)});return g&&L.useEmulator.apply(L,(0,on.Z)(g)),h&&L.setMaxUploadRetryTime(h),v&&L.setMaxOperationRetryTime(v),L},[h,v])}return(0,A.Z)(n,[{key:"ref",value:function(r){return XI(this.storage.ref(r))}},{key:"refFromURL",value:function(r){return XI(this.storage.refFromURL(r))}},{key:"upload",value:function(r,i,a){return XI(this.storage.ref(r)).put(i,a)}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(si.Dh),y.LFG(si.xv,8),y.LFG(GU,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(yn.HU),y.LFG(zU,8),y.LFG(KU,8),y.LFG($U,8),y.LFG(fk,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t}(),YU=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({}),t}(),QU=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n),jI.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[qU],imports:[YU]}),t}(),XU=U(5032),GM="@firebase/database",xA="";function KM(t){xA=t}var tx=function(){function t(n){(0,R.Z)(this,t),this.domStorage_=n,this.prefix_="firebase:"}return(0,A.Z)(t,[{key:"set",value:function(e,r){null==r?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,X.Pz)(r))}},{key:"get",value:function(e){var r=this.domStorage_.getItem(this.prefixedName_(e));return null==r?null:(0,X.cI)(r)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),t}(),nx=function(){function t(){(0,R.Z)(this,t),this.cache_={},this.isInMemoryStorage=!0}return(0,A.Z)(t,[{key:"set",value:function(e,r){null==r?delete this.cache_[e]:this.cache_[e]=r}},{key:"get",value:function(e){return(0,X.r3)(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),t}(),$M=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){var e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tx(e)}}catch(r){}return new nx},mp=$M("localStorage"),BA=$M("sessionStorage"),zm=new gs.Yd("@firebase/database"),qM=function(){var t=1;return function(){return t++}}(),YM=function(n){var e=(0,X.dS)(n),r=new X.gQ;r.update(e);var i=r.digest();return X.US.encodeByteArray(i)},JI=function t(){for(var n="",e=0;e<arguments.length;e++){var r=e<0||arguments.length<=e?void 0:arguments[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=t.apply(null,r):n+="object"==typeof r?(0,X.Pz)(r):r,n+=" "}return n},yp=null,QM=!0,XM=function(n,e){(0,X.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(zm.logLevel=gs.in.VERBOSE,yp=zm.log.bind(zm),e&&BA.set("logging_enabled",!0)):"function"==typeof n?yp=n:(yp=null,BA.remove("logging_enabled"))},da=function(){if(!0===QM&&(QM=!1,null===yp&&!0===BA.get("logging_enabled")&&XM(!0)),yp){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=JI.apply(null,e);yp(i)}},yk=function(n){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];da.apply(void 0,[n].concat(r))}},VA=function(){var n="FIREBASE INTERNAL ERROR: "+JI.apply(void 0,arguments);zm.error(n)},Fl=function(){var n="FIREBASE FATAL ERROR: ".concat(JI.apply(void 0,arguments));throw zm.error(n),new Error(n)},Ua=function(){var n="FIREBASE WARNING: "+JI.apply(void 0,arguments);zm.warn(n)},eC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cf="[MIN_NAME]",Ul="[MAX_NAME]",_p=function(n,e){if(n===e)return 0;if(n===Cf||e===Ul)return-1;if(e===Cf||n===Ul)return 1;var r=tC(n),i=tC(e);return null!==r?null!==i?r-i==0?n.length-e.length:r-i:-1:null!==i?1:n<e?-1:1},ax=function(n,e){return n===e?0:n<e?-1:1},_k=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,X.Pz)(e))},JM=function t(n){if("object"!=typeof n||null===n)return(0,X.Pz)(n);var e=[];for(var r in n)e.push(r);e.sort();for(var i="{",a=0;a<e.length;a++)0!==a&&(i+=","),i+=(0,X.Pz)(e[a]),i+=":",i+=t(n[e[a]]);return i+"}"},eO=function(n,e){var r=n.length;if(r<=e)return[n];for(var i=[],a=0;a<r;a+=e)i.push(n.substring(a,a+e>r?r:a+e));return i};function va(t,n){for(var e in t)t.hasOwnProperty(e)&&n(e,t[e])}var tO=function(n){(0,X.hu)(!eC(n),"Invalid JSON number");var a,u,c,h,v,i=1023;0===n?(u=0,c=0,a=1/n==-1/0?1:0):(a=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(u=(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i))+i,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));var g=[];for(v=52;v;v-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(v=11;v;v-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(a?1:0),g.reverse();var I=g.join(""),D="";for(v=0;v<64;v+=8){var L=parseInt(I.substr(v,8),2).toString(16);1===L.length&&(L="0"+L),D+=L}return D.toLowerCase()},lx=new RegExp("^-?(0*)\\d{1,10}$"),nO=-2147483648,jA=2147483647,tC=function(n){if(lx.test(n)){var e=Number(n);if(e>=nO&&e<=jA)return e}return null},Km=function(n){try{n()}catch(e){setTimeout(function(){throw Ua("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},kk=function(n,e){var r=setTimeout(n,e);return"number"==typeof r&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(r):"object"==typeof r&&r.unref&&r.unref(),r},fx=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this.appName_=n,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(i){return r.appCheck=i})}return(0,A.Z)(t,[{key:"getToken",value:function(e){var r=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(i,a){setTimeout(function(){r.appCheck?r.getToken(e).then(i,a):i(null)},0)})}},{key:"addTokenChangeListener",value:function(e){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(function(i){return i.addTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){Ua('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),t}(),hx=function(){function t(n,e,r){var i=this;(0,R.Z)(this,t),this.appName_=n,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(a){return i.auth_=a})}return(0,A.Z)(t,[{key:"getToken",value:function(e){var r=this;return this.auth_?this.auth_.getToken(e).catch(function(i){return i&&"auth/token-not-initialized"===i.code?(da("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)}):new Promise(function(i,a){setTimeout(function(){r.auth_?r.getToken(e).then(i,a):i(null)},0)})}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(r){return r.addAuthTokenListener(e)})}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then(function(r){return r.removeAuthTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Ua(e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')}}]),t}(),wk=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.accessToken=e}return(0,A.Z)(n,[{key:"getToken",value:function(r){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(r){r(this.accessToken)}},{key:"removeTokenChangeListener",value:function(r){}},{key:"notifyForInvalidToken",value:function(){}}]),n}();return t.OWNER="owner",t}(),uO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cO="websocket",fO="long_polling",WA=function(){function t(n,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,R.Z)(this,t),this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=c,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mp.get("host:"+n)||this._host}return(0,A.Z)(t,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mp.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(r)}}]),t}();function hO(t,n,e){var r;if((0,X.hu)("string"==typeof n,"typeof type must == string"),(0,X.hu)("object"==typeof e,"typeof params must == object"),n===cO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(n!==fO)throw new Error("Unknown connection type: "+n);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function dx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(e.ns=t.namespace);var i=[];return va(e,function(a,u){i.push(a+"="+u)}),r+i.join("&")}var vx=function(){function t(){(0,R.Z)(this,t),this.counters_={}}return(0,A.Z)(t,[{key:"incrementCounter",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,X.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=r}},{key:"get",value:function(){return(0,X.p$)(this.counters_)}}]),t}(),GA={},zA={};function KA(t){var n=t.toString();return GA[n]||(GA[n]=new vx),GA[n]}var gx=function(){function t(n){(0,R.Z)(this,t),this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,A.Z)(t,[{key:"closeAfter",value:function(e,r){this.closeAfterResponse=e,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,r){var i=this;this.pendingResponses[e]=r;for(var a=function(){var h=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var v=function(D){h[D]&&Km(function(){i.onMessage_(h[D])})},g=0;g<h.length;++g)v(g);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&"break"!==a(););}}]),t}(),$A=function(){function t(n,e,r,i,a,u,c){var h=this;(0,R.Z)(this,t),this.connId=n,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yk(n),this.stats_=KA(e),this.urlFn=function(v){return h.appCheckToken&&(v.ac=h.appCheckToken),hO(e,fO,v)}}return(0,A.Z)(t,[{key:"open",value:function(e,r){var i=this;this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new gx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){i.log_("Timed out trying to connect."),i.onClosed_(),i.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,X.Yr)()||"complete"===document.readyState)n();else{var e=!1,r=function i(){document.body?e||(e=!0,n()):setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(function(){if(!i.isClosed_){i.scriptTagHolder=new Sx(function(){for(var c=arguments.length,h=new Array(c),v=0;v<c;v++)h[v]=arguments[v];var g=h[0],I=h[1],D=h[2];if(i.incrementIncomingBytes_(h),i.scriptTagHolder)if(i.connectTimeoutTimer_&&(clearTimeout(i.connectTimeoutTimer_),i.connectTimeoutTimer_=null),i.everConnected_=!0,"start"===g)i.id=I,i.password=D;else{if("close"!==g)throw new Error("Unrecognized command received: "+g);I?(i.scriptTagHolder.sendNewPolls=!1,i.myPacketOrderer.closeAfter(I,function(){i.onClosed_()})):i.onClosed_()}},function(){for(var c=arguments.length,h=new Array(c),v=0;v<c;v++)h[v]=arguments[v];var g=h[0],I=h[1];i.incrementIncomingBytes_(h),i.myPacketOrderer.handleResponse(g,I)},function(){i.onClosed_()},i.urlFn);var a={start:"t"};a.ser=Math.floor(1e8*Math.random()),i.scriptTagHolder.uniqueCallbackIdentifier&&(a.cb=i.scriptTagHolder.uniqueCallbackIdentifier),a.v="5",i.transportSessionId&&(a.s=i.transportSessionId),i.lastSessionId&&(a.ls=i.lastSessionId),i.applicationId&&(a.p=i.applicationId),i.appCheckToken&&(a.ac=i.appCheckToken),"undefined"!=typeof location&&location.hostname&&uO.test(location.hostname)&&(a.r="f");var u=i.urlFn(a);i.log_("Connecting via long-poll to "+u),i.scriptTagHolder.addTag(u,function(){})}})}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var r=(0,X.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);for(var i=(0,X.h$)(r),a=eO(i,1840),u=0;u<a.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[u]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,r){if(!(0,X.Yr)()){this.myDisconnFrame=document.createElement("iframe");var i={dframe:"t"};i.id=e,i.pw=r,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var r=(0,X.Pz)(e).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}],[{key:"forceAllow",value:function(){t.forceAllow_=!0}},{key:"forceDisallow",value:function(){t.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!((0,X.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}}]),t}(),Sx=function(){function t(n,e,r,i){if((0,R.Z)(this,t),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=n,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=qM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){da("frame writing exception"),h.stack&&da(h.stack),da(h)}}}return(0,A.Z)(t,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var r=this.onDisconnect;r&&(this.onDisconnect=null,r())}},{key:"startLongPoll",value:function(e,r){for(this.myID=e,this.myPW=r,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var r=this.urlFn(e),i="",a=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){var c=this.pendingSegs.shift();i=i+"&seg"+a+"="+c.seg+"&ts"+a+"="+c.ts+"&d"+a+"="+c.d,a++}return this.addLongPollTag_(r+=i,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,r,i){this.pendingSegs.push({seg:e,ts:r,d:i}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,r){var i=this;this.outstandingRequests.add(r);var a=function(){i.outstandingRequests.delete(r),i.newRequest_()},u=setTimeout(a,Math.floor(25e3));this.addTag(e,function(){clearTimeout(u),a()})}},{key:"addTag",value:function(e,r){var i=this;(0,X.Yr)()?this.doNodeLongPoll(e,r):setTimeout(function(){try{if(!i.sendNewPolls)return;var a=i.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){var u=a.readyState;(!u||"loaded"===u||"complete"===u)&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),r())},a.onerror=function(){da("Long-poll script failed to load: "+e),i.sendNewPolls=!1,i.close()},i.myIFrame.doc.body.appendChild(a)}catch(u){}},Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||da("No IE domain setting required")}catch(a){var i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),t}(),rC=null;"undefined"!=typeof MozWebSocket?rC=MozWebSocket:"undefined"!=typeof WebSocket&&(rC=WebSocket);var $m=function(){var t=function(){function n(e,r,i,a,u,c,h){(0,R.Z)(this,n),this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yk(this.connId),this.stats_=KA(r),this.connURL=n.connectionURL_(r,c,h,a,i),this.nodeAdmin=r.nodeAdmin}return(0,A.Z)(n,[{key:"open",value:function(r,i){var a=this;this.onDisconnect=i,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mp.set("previous_websocket_failure",!0);try{var u;if((0,X.Yr)()){var c=this.nodeAdmin?"AdminNode":"Node";u={headers:{"User-Agent":"Firebase/".concat("5","/").concat(xA,"/").concat(process.platform,"/").concat(c),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(u.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);var h=process.env,v=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;v&&(u.proxy={origin:v})}this.mySock=new rC(this.connURL,[],u)}catch(I){this.log_("Error instantiating WebSocket.");var g=I.message||I.data;return g&&this.log_(g),void this.onClosed_()}this.mySock.onopen=function(){a.log_("Websocket connected."),a.everConnected_=!0},this.mySock.onclose=function(){a.log_("Websocket connection was disconnected."),a.mySock=null,a.onClosed_()},this.mySock.onmessage=function(I){a.handleIncomingFrame(I)},this.mySock.onerror=function(I){a.log_("WebSocket error.  Closing connection.");var D=I.message||I.data;D&&a.log_(D),a.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){mp.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(r){if(this.frames.push(r),this.frames.length===this.totalFrames){var i=this.frames.join("");this.frames=null;var a=(0,X.cI)(i);this.onMessage(a)}}},{key:"handleNewFrameCount_",value:function(r){this.totalFrames=r,this.frames=[]}},{key:"extractFrameCount_",value:function(r){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){var i=Number(r);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),r}},{key:"handleIncomingFrame",value:function(r){if(null!==this.mySock){var i=r.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{var a=this.extractFrameCount_(i);null!==a&&this.appendFrame_(a)}}}},{key:"send",value:function(r){this.resetKeepAlive();var i=(0,X.Pz)(r);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);var a=eO(i,16384);a.length>1&&this.sendString_(String(a.length));for(var u=0;u<a.length;u++)this.sendString_(a[u])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var r=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){r.mySock&&r.sendString_("0"),r.resetKeepAlive()},Math.floor(45e3))}},{key:"sendString_",value:function(r){try{this.mySock.send(r)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(r,i,a,u,c){var h={v:"5"};return!(0,X.Yr)()&&"undefined"!=typeof location&&location.hostname&&uO.test(location.hostname)&&(h.r="f"),i&&(h.s=i),a&&(h.ls=a),u&&(h.ac=u),c&&(h.p=c),hO(r,cO,h)}},{key:"forceDisallow",value:function(){n.forceDisallow_=!0}},{key:"isAvailable",value:function(){var r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var a=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);a&&a.length>1&&parseFloat(a[1])<4.4&&(r=!0)}return!r&&null!==rC&&!n.forceDisallow_}},{key:"previouslyFailed",value:function(){return mp.isInMemoryStorage||!0===mp.get("previous_websocket_failure")}}]),n}();return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),_O=function(){var t=function(){function n(e){(0,R.Z)(this,n),this.initTransports_(e)}return(0,A.Z)(n,[{key:"initTransports_",value:function(r){var i=$m&&$m.isAvailable(),a=i&&!$m.previouslyFailed();if(r.webSocketOnly&&(i||Ua("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[$m];else{var h,u=this.transports_=[],c=(0,P.Z)(n.ALL_TRANSPORTS);try{for(c.s();!(h=c.n()).done;){var v=h.value;v&&v.isAvailable()&&u.push(v)}}catch(g){c.e(g)}finally{c.f()}n.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[$A,$m]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),n}();return t.globalTransportInitialized_=!1,t}(),TO=function(){function t(n,e,r,i,a,u,c,h,v,g){(0,R.Z)(this,t),this.id=n,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=c,this.onDisconnect_=h,this.onKill_=v,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yk("c:"+this.id+":"),this.transportManager_=new _O(e),this.log_("Connection created"),this.start_()}return(0,A.Z)(t,[{key:"start_",value:function(){var e=this,r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;var i=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(i,a)},Math.floor(0));var u=r.healthyTimeout||0;u>0&&(this.healthyTimeout_=kk(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(u)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var r=this;return function(i){e===r.conn_?r.onConnectionLost_(i):e===r.secondaryConn_?(r.log_("Secondary connection lost."),r.onSecondaryConnectionLost_()):r.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var r=this;return function(i){2!==r.state_&&(e===r.rx_?r.onPrimaryMessageReceived_(i):e===r.secondaryConn_?r.onSecondaryMessageReceived_(i):r.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){this.sendData_({t:"d",d:e})}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var r=e.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var r=_k("t",e),i=_k("d",e);if("c"===r)this.onSecondaryControl_(i);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(i)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var r=_k("t",e),i=_k("d",e);"c"===r?this.onControl_(i):"d"===r&&this.onDataMessage_(i)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var r=_k("t",e);if("d"in e){var i=e.d;if("h"===r)this.onHandshake_(i);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(i):"r"===r?this.onReset_(i):"e"===r?VA("Server Error: "+i):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VA("Unknown control packet command: "+r)}}},{key:"onHandshake_",value:function(e){var r=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==i&&Ua("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var r=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var i=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,a),kk(function(){r.secondaryConn_&&(r.log_("Timed out trying to upgrade."),r.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,r){var i=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kk(function(){i.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),t}(),DO=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"put",value:function(e,r,i,a){}},{key:"merge",value:function(e,r,i,a){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,r,i){}},{key:"onDisconnectMerge",value:function(e,r,i){}},{key:"onDisconnectCancel",value:function(e,r){}},{key:"reportStats",value:function(e){}}]),t}(),SO=function(){function t(n){(0,R.Z)(this,t),this.allowedEvents_=n,this.listeners_={},(0,X.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}return(0,A.Z)(t,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var r=(0,on.Z)(this.listeners_[e]),i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];for(var c=0;c<r.length;c++)r[c].callback.apply(r[c].context,a)}}},{key:"on",value:function(e,r,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:r,context:i});var a=this.getInitialEvent(e);a&&r.apply(i,a)}},{key:"off",value:function(e,r,i){this.validateEventType_(e);for(var a=this.listeners_[e]||[],u=0;u<a.length;u++)if(a[u].callback===r&&(!i||i===a[u].context))return void a.splice(u,1)}},{key:"validateEventType_",value:function(e){(0,X.hu)(this.allowedEvents_.find(function(r){return r===e}),"Unknown event: "+e)}}]),t}(),AO=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){var r;return(0,R.Z)(this,e),(r=n.call(this,["online"])).online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,X.uI)()&&(window.addEventListener("online",function(){r.online_||(r.online_=!0,r.trigger("online",!0))},!1),window.addEventListener("offline",function(){r.online_&&(r.online_=!1,r.trigger("online",!1))},!1)),r}return(0,A.Z)(e,[{key:"getInitialEvent",value:function(i){return(0,X.hu)("online"===i,"Unknown event type: "+i),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new e}}]),e}(SO),ur=function(){function t(n,e){if((0,R.Z)(this,t),void 0===e){this.pieces_=n.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=e}return(0,A.Z)(t,[{key:"toString",value:function(){for(var e="",r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(e+="/"+this.pieces_[r]);return e||"/"}}]),t}();function tr(){return new ur("")}function Mn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function sd(t){return t.pieces_.length-t.pieceNum_}function Ir(t){var n=t.pieceNum_;return n<t.pieces_.length&&n++,new ur(t.pieces_,n)}function YA(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bk(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.pieces_.slice(t.pieceNum_+n)}function MO(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var n=[],e=t.pieceNum_;e<t.pieces_.length-1;e++)n.push(t.pieces_[e]);return new ur(n,0)}function jr(t,n){for(var e=[],r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);if(n instanceof ur)for(var i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);else for(var a=n.split("/"),u=0;u<a.length;u++)a[u].length>0&&e.push(a[u]);return new ur(e,0)}function On(t){return t.pieceNum_>=t.pieces_.length}function ss(t,n){var e=Mn(t),r=Mn(n);if(null===e)return n;if(e===r)return ss(Ir(t),Ir(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")}function xx(t,n){for(var e=bk(t,0),r=bk(n,0),i=0;i<e.length&&i<r.length;i++){var a=_p(e[i],r[i]);if(0!==a)return a}return e.length===r.length?0:e.length<r.length?-1:1}function QA(t,n){if(sd(t)!==sd(n))return!1;for(var e=t.pieceNum_,r=n.pieceNum_;e<=t.pieces_.length;e++,r++)if(t.pieces_[e]!==n.pieces_[r])return!1;return!0}function Nu(t,n){var e=t.pieceNum_,r=n.pieceNum_;if(sd(t)>sd(n))return!1;for(;e<t.pieces_.length;){if(t.pieces_[e]!==n.pieces_[r])return!1;++e,++r}return!0}var Bx=(0,A.Z)(function t(n,e){(0,R.Z)(this,t),this.errorPrefix_=e,this.parts_=bk(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,X.ug)(this.parts_[r]);OO(this)});function OO(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kp(t))}function kp(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var aC,JA,Hx=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){var r,i,a;return(0,R.Z)(this,e),r=n.call(this,["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",i="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",i="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",i="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",i="webkitHidden")),r.visible_=!0,a&&document.addEventListener(a,function(){var u=!document[i];u!==r.visible_&&(r.visible_=u,r.trigger("visible",u))},!1),r}return(0,A.Z)(e,[{key:"getInitialEvent",value:function(i){return(0,X.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}],[{key:"getInstance",value:function(){return new e}}]),e}(SO),Ek=1e3,wp=function(){var t=function(n){(0,j.Z)(r,n);var i,e=(0,se.Z)(r);function r(i,a,u,c,h,v,g,I){var D;if((0,R.Z)(this,r),(D=e.call(this)).repoInfo_=i,D.applicationId_=a,D.onDataUpdate_=u,D.onConnectStatus_=c,D.onServerInfoUpdate_=h,D.authTokenProvider_=v,D.appCheckTokenProvider_=g,D.authOverride_=I,D.id=r.nextPersistentConnectionId_++,D.log_=yk("p:"+D.id+":"),D.interruptReasons_={},D.listens=new Map,D.outstandingPuts_=[],D.outstandingGets_=[],D.outstandingPutCount_=0,D.outstandingGetCount_=0,D.onDisconnectRequestQueue_=[],D.connected_=!1,D.reconnectDelay_=Ek,D.maxReconnectDelay_=3e5,D.securityDebugCallback_=null,D.lastSessionId=null,D.establishConnectionTimer_=null,D.visible_=!1,D.requestCBHash_={},D.requestNumber_=0,D.realtime_=null,D.authToken_=null,D.appCheckToken_=null,D.forceTokenRefresh_=!1,D.invalidAuthTokenCount_=0,D.invalidAppCheckTokenCount_=0,D.firstConnection_=!0,D.lastConnectionAttemptTime_=null,D.lastConnectionEstablishedTime_=null,I&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Hx.getInstance().on("visible",D.onVisible_,(0,_c.Z)(D)),-1===i.host.indexOf("fblocal")&&AO.getInstance().on("online",D.onOnline_,(0,_c.Z)(D)),D}return(0,A.Z)(r,[{key:"sendRequest",value:function(a,u,c){var h=++this.requestNumber_,v={r:h,a:a,b:u};this.log_((0,X.Pz)(v)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(v),c&&(this.requestCBHash_[h]=c)}},{key:"get",value:function(a){this.initConnection_();var u=new X.BH,c={p:a._path.toString(),q:a._queryObject};return this.outstandingGets_.push({action:"g",request:c,onComplete:function(I){var D=I.d;"ok"===I.s?u.resolve(D):u.reject(D)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),u.promise}},{key:"listen",value:function(a,u,c,h){this.initConnection_();var v=a._queryIdentifier,g=a._path.toString();this.log_("Listen called for "+g+" "+v),this.listens.has(g)||this.listens.set(g,new Map),(0,X.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(g).has(v),"listen() called twice for same path/queryId.");var I={onComplete:h,hashFn:u,query:a,tag:c};this.listens.get(g).set(v,I),this.connected_&&this.sendListen_(I)}},{key:"sendGet_",value:function(a){var u=this,c=this.outstandingGets_[a];this.sendRequest("g",c.request,function(h){delete u.outstandingGets_[a],u.outstandingGetCount_--,0===u.outstandingGetCount_&&(u.outstandingGets_=[]),c.onComplete&&c.onComplete(h)})}},{key:"sendListen_",value:function(a){var u=this,c=a.query,h=c._path.toString(),v=c._queryIdentifier;this.log_("Listen on "+h+" for "+v);var g={p:h};a.tag&&(g.q=c._queryObject,g.t=a.tag),g.h=a.hashFn(),this.sendRequest("q",g,function(D){var L=D.d,x=D.s;r.warnOnListenWarnings_(L,c),(u.listens.get(h)&&u.listens.get(h).get(v))===a&&(u.log_("listen response",D),"ok"!==x&&u.removeListen_(h,v),a.onComplete&&a.onComplete(x,L))})}},{key:"refreshAuthToken",value:function(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(a)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(a){(a&&40===a.length||(0,X.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})}},{key:"tryAuth",value:function(){var a=this;if(this.connected_&&this.authToken_){var u=this.authToken_,c=(0,X.w9)(u)?"auth":"gauth",h={cred:u};null===this.authOverride_?h.noauth=!0:"object"==typeof this.authOverride_&&(h.authvar=this.authOverride_),this.sendRequest(c,h,function(v){var g=v.s,I=v.d||"error";a.authToken_===u&&("ok"===g?a.invalidAuthTokenCount_=0:a.onAuthRevoked_(g,I))})}}},{key:"tryAppCheck",value:function(){var a=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(u){var c=u.s,h=u.d||"error";"ok"===c?a.invalidAppCheckTokenCount_=0:a.onAppCheckRevoked_(c,h)})}},{key:"unlisten",value:function(a,u){var c=a._path.toString(),h=a._queryIdentifier;this.log_("Unlisten called for "+c+" "+h),(0,X.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(c,h)&&this.connected_&&this.sendUnlisten_(c,h,a._queryObject,u)}},{key:"sendUnlisten_",value:function(a,u,c,h){this.log_("Unlisten on "+a+" for "+u);var v={p:a};h&&(v.q=c,v.t=h),this.sendRequest("n",v)}},{key:"onDisconnectPut",value:function(a,u,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,u,c):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:u,onComplete:c})}},{key:"onDisconnectMerge",value:function(a,u,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,u,c):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:u,onComplete:c})}},{key:"onDisconnectCancel",value:function(a,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,u):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:u})}},{key:"sendOnDisconnect_",value:function(a,u,c,h){var v={p:u,d:c};this.log_("onDisconnect "+a,v),this.sendRequest(a,v,function(g){h&&setTimeout(function(){h(g.s,g.d)},Math.floor(0))})}},{key:"put",value:function(a,u,c,h){this.putInternal("p",a,u,c,h)}},{key:"merge",value:function(a,u,c,h){this.putInternal("m",a,u,c,h)}},{key:"putInternal",value:function(a,u,c,h,v){this.initConnection_();var g={p:u,d:c};void 0!==v&&(g.h=v),this.outstandingPuts_.push({action:a,request:g,onComplete:h}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+u)}},{key:"sendPut_",value:function(a){var u=this,c=this.outstandingPuts_[a].action,h=this.outstandingPuts_[a].request,v=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(c,h,function(g){u.log_(c+" response",g),delete u.outstandingPuts_[a],u.outstandingPutCount_--,0===u.outstandingPutCount_&&(u.outstandingPuts_=[]),v&&v(g.s,g.d)})}},{key:"reportStats",value:function(a){var u=this;if(this.connected_){var c={c:a};this.log_("reportStats",c),this.sendRequest("s",c,function(h){"ok"!==h.s&&u.log_("reportStats","Error sending stats: "+h.d)})}}},{key:"onDataMessage_",value:function(a){if("r"in a){this.log_("from server: "+(0,X.Pz)(a));var u=a.r,c=this.requestCBHash_[u];c&&(delete this.requestCBHash_[u],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}},{key:"onDataPush_",value:function(a,u){this.log_("handleServerMessage",a,u),"d"===a?this.onDataUpdate_(u.p,u.d,!1,u.t):"m"===a?this.onDataUpdate_(u.p,u.d,!0,u.t):"c"===a?this.onListenRevoked_(u.p,u.q):"ac"===a?this.onAuthRevoked_(u.s,u.d):"apc"===a?this.onAppCheckRevoked_(u.s,u.d):"sd"===a?this.onSecurityDebugPacket_(u):VA("Unrecognized action received from server: "+(0,X.Pz)(a)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(a,u){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=u,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(a){var u=this;(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){u.establishConnectionTimer_=null,u.establishConnection_()},Math.floor(a))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ek,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}},{key:"onOnline_",value:function(a){a?(this.log_("Browser went online."),this.reconnectDelay_=Ek,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ek),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var u=(new Date).getTime()-this.lastConnectionAttemptTime_,c=Math.max(0,this.reconnectDelay_-u);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:(i=(0,ut.Z)((0,ce.Z)().mark(function u(){var h,v,g,I,D,L,x,K,re,Ve,Ye,ze,c=this;return(0,ce.Z)().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(!this.shouldReconnect_()){Et.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,h=this.onDataMessage_.bind(this),v=this.onReady_.bind(this),g=this.onRealtimeDisconnect_.bind(this),I=this.id+":"+r.nextConnectionId_++,D=this.lastSessionId,L=!1,x=null,this.realtime_={close:K=function(){x?x.close():(L=!0,g())},sendRequest:function(en){(0,X.hu)(x,"sendRequest call when we're not connected not allowed."),x.sendRequest(en)}},re=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,Et.prev=16,Et.next=19,Promise.all([this.authTokenProvider_.getToken(re),this.appCheckTokenProvider_.getToken(re)]);case 19:Ve=(0,ye.Z)(Et.sent,2),Ye=Ve[0],ze=Ve[1],L?da("getToken() completed but was canceled"):(da("getToken() completed. Creating connection."),this.authToken_=Ye&&Ye.accessToken,this.appCheckToken_=ze&&ze.token,x=new TO(I,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,h,v,g,function(yt){Ua(yt+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},D)),Et.next=30;break;case 26:Et.prev=26,Et.t0=Et.catch(16),this.log_("Failed to get token: "+Et.t0),L||(this.repoInfo_.nodeAdmin&&Ua(Et.t0),K());case 30:case"end":return Et.stop()}},u,this,[[16,26]])})),function a(){return i.apply(this,arguments)})},{key:"interrupt",value:function(a){da("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(a){da("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ek,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(a){var u=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:u})}},{key:"cancelSentTransactions_",value:function(){for(var a=0;a<this.outstandingPuts_.length;a++){var u=this.outstandingPuts_[a];u&&"h"in u.request&&u.queued&&(u.onComplete&&u.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(a,u){var c;c=u?u.map(function(v){return JM(v)}).join("$"):"default";var h=this.removeListen_(a,c);h&&h.onComplete&&h.onComplete("permission_denied")}},{key:"removeListen_",value:function(a,u){var h,c=new ur(a).toString();if(this.listens.has(c)){var v=this.listens.get(c);h=v.get(u),v.delete(u),0===v.size&&this.listens.delete(c)}else h=void 0;return h}},{key:"onAuthRevoked_",value:function(a,u){da("Auth token revoked: "+a+"/"+u),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(a,u){da("App check token revoked: "+a+"/"+u),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var u,a=(0,P.Z)(this.listens.values());try{for(a.s();!(u=a.n()).done;){var v,h=(0,P.Z)(u.value.values());try{for(h.s();!(v=h.n()).done;)this.sendListen_(v.value)}catch(x){h.e(x)}finally{h.f()}}}catch(x){a.e(x)}finally{a.f()}for(var I=0;I<this.outstandingPuts_.length;I++)this.outstandingPuts_[I]&&this.sendPut_(I);for(;this.onDisconnectRequestQueue_.length;){var D=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(D.action,D.pathString,D.data,D.onComplete)}for(var L=0;L<this.outstandingGets_.length;L++)this.outstandingGets_[L]&&this.sendGet_(L)}},{key:"sendConnectStats_",value:function(){var a={},u="js";(0,X.Yr)()&&(u=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+u+"."+xA.replace(/\./g,"-")]=1,(0,X.uI)()?a["framework.cordova"]=1:(0,X.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}},{key:"shouldReconnect_",value:function(){var a=AO.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&a}}],[{key:"warnOnListenWarnings_",value:function(a,u){if(a&&"object"==typeof a&&(0,X.r3)(a,"w")){var c=(0,X.DV)(a,"w");if(Array.isArray(c)&&~c.indexOf("no_index")){var h='".indexOn": "'+u._queryParams.getIndex().toString()+'"',v=u._path.toString();Ua("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(h," at ")+"".concat(v," to your security rules for better performance."))}}}}]),r}(DO);return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(),xn=function(){function t(n,e){(0,R.Z)(this,t),this.name=n,this.node=e}return(0,A.Z)(t,null,[{key:"Wrap",value:function(e,r){return new t(e,r)}}]),t}(),iC=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,r){var i=new xn(Cf,e),a=new xn(Cf,r);return 0!==this.compare(i,a)}},{key:"minPost",value:function(){return xn.MIN}}]),t}(),LO=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"compare",value:function(i,a){return _p(i.name,a.name)}},{key:"isDefinedOn",value:function(i){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(i,a){return!1}},{key:"minPost",value:function(){return xn.MIN}},{key:"maxPost",value:function(){return new xn(Ul,aC)}},{key:"makePost",value:function(i,a){return(0,X.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new xn(i,aC)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return aC},set:function(i){aC=i}}]),e}(iC),xl=new LO,sC=function(){function t(n,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,R.Z)(this,t),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var u=1;!n.isEmpty();)if(u=e?r(n.key,e):1,i&&(u*=-1),u<0)n=this.isReverse_?n.left:n.right;else{if(0===u){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}return(0,A.Z)(t,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var r,e=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return r}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),t}(),Zo=function(){var t=function(){function n(e,r,i,a,u){(0,R.Z)(this,n),this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Bl.EMPTY_NODE,this.right=null!=u?u:Bl.EMPTY_NODE}return(0,A.Z)(n,[{key:"copy",value:function(r,i,a,u,c){return new n(null!=r?r:this.key,null!=i?i:this.value,null!=a?a:this.color,null!=u?u:this.left,null!=c?c:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}},{key:"reverseTraversal",value:function(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(r,i,a){var u=this,c=a(r,u.key);return(u=c<0?u.copy(null,null,null,u.left.insert(r,i,a),null):0===c?u.copy(null,i,null,null,null):u.copy(null,null,null,null,u.right.insert(r,i,a))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Bl.EMPTY_NODE;var r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),(r=r.copy(null,null,null,r.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(r,i){var a,u;if(i(r,(a=this).key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(r,i),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),0===i(r,a.key)){if(a.right.isEmpty())return Bl.EMPTY_NODE;u=a.right.min_(),a=a.copy(u.key,u.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(r,i))}return a.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}},{key:"moveRedLeft_",value:function(){var r=this.colorFlip_();return r.right.left.isRed_()&&(r=(r=(r=r.copy(null,null,null,null,r.right.rotateRight_())).rotateLeft_()).colorFlip_()),r}},{key:"moveRedRight_",value:function(){var r=this.colorFlip_();return r.left.left.isRed_()&&(r=(r=r.rotateRight_()).colorFlip_()),r}},{key:"rotateLeft_",value:function(){var r=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}},{key:"rotateRight_",value:function(){var r=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}},{key:"colorFlip_",value:function(){var r=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,i)}},{key:"checkMaxDepth_",value:function(){var r=this.check_();return Math.pow(2,r)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}]),n}();return t.RED=!0,t.BLACK=!1,t}(),$x=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"copy",value:function(e,r,i,a,u){return this}},{key:"insert",value:function(e,r,i){return new Zo(e,r,null)}},{key:"remove",value:function(e,r){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),t}(),Bl=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.EMPTY_NODE;(0,R.Z)(this,t),this.comparator_=n,this.root_=e}return(0,A.Z)(t,[{key:"insert",value:function(e,r){return new t(this.comparator_,this.root_.insert(e,r,this.comparator_).copy(null,null,Zo.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zo.BLACK,null,null))}},{key:"get",value:function(e){for(var r,i=this.root_;!i.isEmpty();){if(0===(r=this.comparator_(e,i.key)))return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var r,i=this.root_,a=null;!i.isEmpty();){if(0===(r=this.comparator_(e,i.key))){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}r<0?i=i.left:r>0&&(a=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new sC(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,r){return new sC(this.root_,e,this.comparator_,!1,r)}},{key:"getReverseIteratorFrom",value:function(e,r){return new sC(this.root_,e,this.comparator_,!0,r)}},{key:"getReverseIterator",value:function(e){return new sC(this.root_,null,this.comparator_,!0,e)}}]),t}();function qx(t,n){return _p(t.name,n.name)}function XA(t,n){return _p(t,n)}Bl.EMPTY_NODE=new $x;var xO,BO,VO,eR,Ik,FO=function(n){return"number"==typeof n?"number:"+tO(n):"string:"+n},UO=function(n){if(n.isLeafNode()){var e=n.val();(0,X.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,X.r3)(e,".sv"),"Priority must be a string or number.")}else(0,X.hu)(n===JA||n.isEmpty(),"priority of unexpected type.");(0,X.hu)(n===JA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},qm=function(){var t=function(){function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.__childrenNodeConstructor.EMPTY_NODE;(0,R.Z)(this,n),this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),UO(this.priorityNode_)}return(0,A.Z)(n,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(r){return new n(this.value_,r)}},{key:"getImmediateChild",value:function(r){return".priority"===r?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(r){return On(r)?this:".priority"===Mn(r)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(r,i){return null}},{key:"updateImmediateChild",value:function(r,i){return".priority"===r?this.updatePriority(i):i.isEmpty()&&".priority"!==r?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,i).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(r,i){var a=Mn(r);return null===a?i:i.isEmpty()&&".priority"!==a?this:((0,X.hu)(".priority"!==a||1===sd(r),".priority must be the last token in a path"),this.updateImmediateChild(a,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ir(r),i)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(r,i){return!1}},{key:"val",value:function(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.priorityNode_.isEmpty()||(r+="priority:"+FO(this.priorityNode_.val())+":");var i=typeof this.value_;r+=i+":",r+="number"===i?tO(this.value_):this.value_,this.lazyHash_=YM(r)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(r){return r===n.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof n.__childrenNodeConstructor?-1:((0,X.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}},{key:"compareToLeafNode_",value:function(r){var i=typeof r.value_,a=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(a);return(0,X.hu)(u>=0,"Unknown leaf type: "+i),(0,X.hu)(c>=0,"Unknown leaf type: "+a),u===c?"object"===a?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:c-u}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(r){return r===this||!!r.isLeafNode()&&(this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_))}}],[{key:"__childrenNodeConstructor",get:function(){return xO},set:function(r){xO=r}}]),n}();return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jx=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"compare",value:function(i,a){var u=i.node.getPriority(),c=a.node.getPriority(),h=u.compareTo(c);return 0===h?_p(i.name,a.name):h}},{key:"isDefinedOn",value:function(i){return!i.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(i,a){return!i.getPriority().equals(a.getPriority())}},{key:"minPost",value:function(){return xn.MIN}},{key:"maxPost",value:function(){return new xn(Ul,new qm("[PRIORITY-POST]",VO))}},{key:"makePost",value:function(i,a){var u=BO(i);return new xn(a,new qm("[PRIORITY-POST]",u))}},{key:"toString",value:function(){return".priority"}}]),e}(iC),Ar=new Jx,eB=Math.log(2),tB=function(){function t(n){(0,R.Z)(this,t),this.count=parseInt(Math.log(n+1)/eB,10),this.current_=this.count-1;var i=parseInt(Array(this.count+1).join("1"),2);this.bits_=n+1&i}return(0,A.Z)(t,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),t}(),uC=function(n,e,r,i){n.sort(e);var a=function v(g,I){var L,x,D=I-g;if(0===D)return null;if(1===D)return L=n[g],x=r?r(L):L,new Zo(x,L.node,Zo.BLACK,null,null);var K=parseInt(D/2,10)+g,ne=v(g,K),re=v(K+1,I);return L=n[K],x=r?r(L):L,new Zo(x,L.node,Zo.BLACK,ne,re)},h=function(g){for(var I=null,D=null,L=n.length,x=function(Ye,ze){var Tt=L-Ye,Et=L;L-=Ye;var yt=a(Tt+1,Et),en=n[Tt],Kt=r?r(en):en;K(new Zo(Kt,en.node,ze,null,yt))},K=function(Ye){I?(I.left=Ye,I=Ye):(D=Ye,I=Ye)},ne=0;ne<g.count;++ne){var re=g.nextBitIsOne(),Pe=Math.pow(2,g.count-(ne+1));re?x(Pe,Zo.BLACK):(x(Pe,Zo.BLACK),x(Pe,Zo.RED))}return D}(new tB(n.length));return new Bl(i||e,h)},Ym={},oC=function(){function t(n,e){(0,R.Z)(this,t),this.indexes_=n,this.indexSet_=e}return(0,A.Z)(t,[{key:"get",value:function(e){var r=(0,X.DV)(this.indexes_,e);if(!r)throw new Error("No index defined for "+e);return r instanceof Bl?r:null}},{key:"hasIndex",value:function(e){return(0,X.r3)(this.indexSet_,e.toString())}},{key:"addIndex",value:function(e,r){(0,X.hu)(e!==xl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i=[],a=!1,u=r.getIterator(xn.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();var h;h=a?uC(i,e.getCompare()):Ym;var v=e.toString(),g=Object.assign({},this.indexSet_);g[v]=e;var I=Object.assign({},this.indexes_);return I[v]=h,new t(I,g)}},{key:"addToIndexes",value:function(e,r){var i=this;return new t((0,X.UI)(this.indexes_,function(u,c){var h=(0,X.DV)(i.indexSet_,c);if((0,X.hu)(h,"Missing index implementation for "+c),u===Ym){if(h.isDefinedOn(e.node)){for(var v=[],g=r.getIterator(xn.Wrap),I=g.getNext();I;)I.name!==e.name&&v.push(I),I=g.getNext();return v.push(e),uC(v,h.getCompare())}return Ym}var D=r.get(e.name),L=u;return D&&(L=L.remove(new xn(e.name,D))),L.insert(e,e.node)}),this.indexSet_)}},{key:"removeFromIndexes",value:function(e,r){return new t((0,X.UI)(this.indexes_,function(a){if(a===Ym)return a;var u=r.get(e.name);return u?a.remove(new xn(e.name,u)):a}),this.indexSet_)}}],[{key:"Default",get:function(){return(0,X.hu)(Ym&&Ar,"ChildrenNode.ts has not been loaded"),eR=eR||new t({".priority":Ym},{".priority":Ar})}}]),t}(),En=function(){var t=function(){function n(e,r,i){(0,R.Z)(this,n),this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&UO(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,A.Z)(n,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Ik}},{key:"updatePriority",value:function(r){return this.children_.isEmpty()?this:new n(this.children_,r,this.indexMap_)}},{key:"getImmediateChild",value:function(r){if(".priority"===r)return this.getPriority();var i=this.children_.get(r);return null===i?Ik:i}},{key:"getChild",value:function(r){var i=Mn(r);return null===i?this:this.getImmediateChild(i).getChild(Ir(r))}},{key:"hasChild",value:function(r){return null!==this.children_.get(r)}},{key:"updateImmediateChild",value:function(r,i){if((0,X.hu)(i,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(i);var u,c,a=new xn(r,i);i.isEmpty()?(u=this.children_.remove(r),c=this.indexMap_.removeFromIndexes(a,this.children_)):(u=this.children_.insert(r,i),c=this.indexMap_.addToIndexes(a,this.children_));var h=u.isEmpty()?Ik:this.priorityNode_;return new n(u,h,c)}},{key:"updateChild",value:function(r,i){var a=Mn(r);if(null===a)return i;(0,X.hu)(".priority"!==Mn(r)||1===sd(r),".priority must be the last token in a path");var u=this.getImmediateChild(a).updateChild(Ir(r),i);return this.updateImmediateChild(a,u)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(r){if(this.isEmpty())return null;var i={},a=0,u=0,c=!0;if(this.forEachChild(Ar,function(g,I){i[g]=I.val(r),a++,c&&n.INTEGER_REGEXP_.test(g)?u=Math.max(u,Number(g)):c=!1}),!r&&c&&u<2*a){var h=[];for(var v in i)h[v]=i[v];return h}return r&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+FO(this.getPriority().val())+":"),this.forEachChild(Ar,function(i,a){var u=a.hash();""!==u&&(r+=":"+i+":"+u)}),this.lazyHash_=""===r?"":YM(r)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(r,i,a){var u=this.resolveIndex_(a);if(u){var c=u.getPredecessorKey(new xn(r,i));return c?c.name:null}return this.children_.getPredecessorKey(r)}},{key:"getFirstChildName",value:function(r){var i=this.resolveIndex_(r);if(i){var a=i.minKey();return a&&a.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(r){var i=this.getFirstChildName(r);return i?new xn(i,this.children_.get(i)):null}},{key:"getLastChildName",value:function(r){var i=this.resolveIndex_(r);if(i){var a=i.maxKey();return a&&a.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(r){var i=this.getLastChildName(r);return i?new xn(i,this.children_.get(i)):null}},{key:"forEachChild",value:function(r,i){var a=this.resolveIndex_(r);return a?a.inorderTraversal(function(u){return i(u.name,u.node)}):this.children_.inorderTraversal(i)}},{key:"getIterator",value:function(r){return this.getIteratorFrom(r.minPost(),r)}},{key:"getIteratorFrom",value:function(r,i){var a=this.resolveIndex_(i);if(a)return a.getIteratorFrom(r,function(h){return h});for(var u=this.children_.getIteratorFrom(r.name,xn.Wrap),c=u.peek();null!=c&&i.compare(c,r)<0;)u.getNext(),c=u.peek();return u}},{key:"getReverseIterator",value:function(r){return this.getReverseIteratorFrom(r.maxPost(),r)}},{key:"getReverseIteratorFrom",value:function(r,i){var a=this.resolveIndex_(i);if(a)return a.getReverseIteratorFrom(r,function(h){return h});for(var u=this.children_.getReverseIteratorFrom(r.name,xn.Wrap),c=u.peek();null!=c&&i.compare(c,r)>0;)u.getNext(),c=u.peek();return u}},{key:"compareTo",value:function(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===Ck?-1:0}},{key:"withIndex",value:function(r){if(r===xl||this.indexMap_.hasIndex(r))return this;var i=this.indexMap_.addIndex(r,this.children_);return new n(this.children_,this.priorityNode_,i)}},{key:"isIndexed",value:function(r){return r===xl||this.indexMap_.hasIndex(r)}},{key:"equals",value:function(r){if(r===this)return!0;if(r.isLeafNode())return!1;var i=r;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){for(var a=this.getIterator(Ar),u=i.getIterator(Ar),c=a.getNext(),h=u.getNext();c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=a.getNext(),h=u.getNext()}return null===c&&null===h}return!1}return!1}},{key:"resolveIndex_",value:function(r){return r===xl?null:this.indexMap_.get(r.toString())}}],[{key:"EMPTY_NODE",get:function(){return Ik||(Ik=new n(new Bl(XA),null,oC.Default))}}]),n}();return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),nB=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.call(this,new Bl(XA),En.EMPTY_NODE,oC.Default)}return(0,A.Z)(e,[{key:"compareTo",value:function(i){return i===this?0:1}},{key:"equals",value:function(i){return i===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(i){return En.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),e}(En),Ck=new nB;function Jr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t)return En.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(n=t[".priority"]),(0,X.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t){var e=t;return new qm(e,Jr(n))}if(t instanceof Array){var h=En.EMPTY_NODE;return va(t,function(v,g){if((0,X.r3)(t,v)&&"."!==v.substring(0,1)){var I=Jr(g);(I.isLeafNode()||!I.isEmpty())&&(h=h.updateImmediateChild(v,I))}}),h.updatePriority(Jr(n))}var r=[],i=!1,a=t;if(va(a,function(v,g){if("."!==v.substring(0,1)){var I=Jr(g);I.isEmpty()||(i=i||!I.getPriority().isEmpty(),r.push(new xn(v,I)))}}),0===r.length)return En.EMPTY_NODE;var u=uC(r,qx,function(v){return v.name},XA);if(i){var c=uC(r,Ar.getCompare());return new En(u,Jr(n),new oC({".priority":c},{".priority":Ar}))}return new En(u,Jr(n),oC.Default)}Object.defineProperties(xn,{MIN:{value:new xn(Cf,En.EMPTY_NODE)},MAX:{value:new xn(Ul,Ck)}}),LO.__EMPTY_NODE=En.EMPTY_NODE,qm.__childrenNodeConstructor=En,function Yx(t){JA=t}(Ck),function Xx(t){VO=t}(Ck),function Qx(t){BO=t}(Jr);var tR=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this)).indexPath_=r,(0,X.hu)(!On(r)&&".priority"!==Mn(r),"Can't create PathIndex with empty path or .priority key"),i}return(0,A.Z)(e,[{key:"extractChild",value:function(i){return i.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(i){return!i.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(i,a){var u=this.extractChild(i.node),c=this.extractChild(a.node),h=u.compareTo(c);return 0===h?_p(i.name,a.name):h}},{key:"makePost",value:function(i,a){var u=Jr(i),c=En.EMPTY_NODE.updateChild(this.indexPath_,u);return new xn(a,c)}},{key:"maxPost",value:function(){var i=En.EMPTY_NODE.updateChild(this.indexPath_,Ck);return new xn(Ul,i)}},{key:"toString",value:function(){return bk(this.indexPath_,0).join("/")}}]),e}(iC),iB=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"compare",value:function(i,a){var u=i.node.compareTo(a.node);return 0===u?_p(i.name,a.name):u}},{key:"isDefinedOn",value:function(i){return!0}},{key:"indexedValueChanged",value:function(i,a){return!i.equals(a)}},{key:"minPost",value:function(){return xn.MIN}},{key:"maxPost",value:function(){return xn.MAX}},{key:"makePost",value:function(i,a){var u=Jr(i);return new xn(a,u)}},{key:"toString",value:function(){return".value"}}]),e}(iC),nR=new iB,Qm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aB=function(){var t=0,n=[];return function(e){var r=e===t;t=e;var i,a=new Array(8);for(i=7;i>=0;i--)a[i]=Qm.charAt(e%64),e=Math.floor(e/64);(0,X.hu)(0===e,"Cannot push at time == 0");var u=a.join("");if(r){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Qm.charAt(n[i]);return(0,X.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),WO=function(n){if(n===""+jA)return"-";var e=tC(n);if(null!=e)return""+(e+1);for(var r=new Array(n.length),i=0;i<r.length;i++)r[i]=n.charAt(i);if(r.length<786)return r.push("-"),r.join("");for(var a=r.length-1;a>=0&&"z"===r[a];)a--;if(-1===a)return Ul;var c=Qm.charAt(Qm.indexOf(r[a])+1);return r[a]=c,r.slice(0,a+1).join("")},GO=function(n){if(n===""+nO)return Cf;var e=tC(n);if(null!=e)return""+(e-1);for(var r=new Array(n.length),i=0;i<r.length;i++)r[i]=n.charAt(i);return"-"===r[r.length-1]?1===r.length?""+jA:(delete r[r.length-1],r.join("")):(r[r.length-1]=Qm.charAt(Qm.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function zO(t){return{type:"value",snapshotNode:t}}function Xm(t,n){return{type:"child_added",snapshotNode:n,childName:t}}function Tk(t,n){return{type:"child_removed",snapshotNode:n,childName:t}}function Dk(t,n,e){return{type:"child_changed",snapshotNode:n,childName:t,oldSnap:e}}var iR=function(){function t(n){(0,R.Z)(this,t),this.index_=n}return(0,A.Z)(t,[{key:"updateChild",value:function(e,r,i,a,u,c){(0,X.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var h=e.getImmediateChild(r);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(r)?c.trackChildChange(Tk(r,h)):(0,X.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Xm(r,i)):c.trackChildChange(Dk(r,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(r,i).withIndex(this.index_)}},{key:"updateFullNode",value:function(e,r,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Ar,function(a,u){r.hasChild(a)||i.trackChildChange(Tk(a,u))}),r.isLeafNode()||r.forEachChild(Ar,function(a,u){if(e.hasChild(a)){var c=e.getImmediateChild(a);c.equals(u)||i.trackChildChange(Dk(a,u,c))}else i.trackChildChange(Xm(a,u))})),r.withIndex(this.index_)}},{key:"updatePriority",value:function(e,r){return e.isEmpty()?En.EMPTY_NODE:e.updatePriority(r)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),t}(),KO=function(){function t(n){(0,R.Z)(this,t),this.indexedFilter_=new iR(n.getIndex()),this.index_=n.getIndex(),this.startPost_=t.getStartPost_(n),this.endPost_=t.getEndPost_(n)}return(0,A.Z)(t,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,r,i,a,u,c){return this.matches(new xn(r,i))||(i=En.EMPTY_NODE),this.indexedFilter_.updateChild(e,r,i,a,u,c)}},{key:"updateFullNode",value:function(e,r,i){r.isLeafNode()&&(r=En.EMPTY_NODE);var a=r.withIndex(this.index_);a=a.updatePriority(En.EMPTY_NODE);var u=this;return r.forEachChild(Ar,function(c,h){u.matches(new xn(c,h))||(a=a.updateImmediateChild(c,En.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}},{key:"updatePriority",value:function(e,r){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var r=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),r)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var r=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),r)}return e.getIndex().maxPost()}}]),t}(),uB=function(){function t(n){(0,R.Z)(this,t),this.rangedFilter_=new KO(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft()}return(0,A.Z)(t,[{key:"updateChild",value:function(e,r,i,a,u,c){return this.rangedFilter_.matches(new xn(r,i))||(i=En.EMPTY_NODE),e.getImmediateChild(r).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,i,a,u,c):this.fullLimitUpdateChild_(e,r,i,u,c)}},{key:"updateFullNode",value:function(e,r,i){var a;if(r.isLeafNode()||r.isEmpty())a=En.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){var u;a=En.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var c=0;u.hasNext()&&c<this.limit_;){var h=u.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0))break;a=a.updateImmediateChild(h.name,h.node),c++}}else{var g,I,D,L;if(a=(a=r.withIndex(this.index_)).updatePriority(En.EMPTY_NODE),this.reverse_){L=a.getReverseIterator(this.index_),g=this.rangedFilter_.getEndPost(),I=this.rangedFilter_.getStartPost();var x=this.index_.getCompare();D=function(Ye,ze){return x(ze,Ye)}}else L=a.getIterator(this.index_),g=this.rangedFilter_.getStartPost(),I=this.rangedFilter_.getEndPost(),D=this.index_.getCompare();for(var K=0,ne=!1;L.hasNext();){var re=L.getNext();!ne&&D(g,re)<=0&&(ne=!0),ne&&K<this.limit_&&D(re,I)<=0?K++:a=a.updateImmediateChild(re.name,En.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}},{key:"updatePriority",value:function(e,r){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,r,i,a,u){var c;if(this.reverse_){var h=this.index_.getCompare();c=function(Ye,ze){return h(ze,Ye)}}else c=this.index_.getCompare();var v=e;(0,X.hu)(v.numChildren()===this.limit_,"");var g=new xn(r,i),I=this.reverse_?v.getFirstChild(this.index_):v.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(v.hasChild(r)){for(var L=v.getImmediateChild(r),x=a.getChildAfterChild(this.index_,I,this.reverse_);null!=x&&(x.name===r||v.hasChild(x.name));)x=a.getChildAfterChild(this.index_,x,this.reverse_);var K=null==x?1:c(x,g);if(D&&!i.isEmpty()&&K>=0)return null!=u&&u.trackChildChange(Dk(r,i,L)),v.updateImmediateChild(r,i);null!=u&&u.trackChildChange(Tk(r,L));var re=v.updateImmediateChild(r,En.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=u&&u.trackChildChange(Xm(x.name,x.node)),re.updateImmediateChild(x.name,x.node)):re}return i.isEmpty()?e:D&&c(I,g)>=0?(null!=u&&(u.trackChildChange(Tk(I.name,I.node)),u.trackChildChange(Xm(r,i))),v.updateImmediateChild(r,i).updateImmediateChild(I.name,En.EMPTY_NODE)):e}}]),t}(),$O=function(){function t(){(0,R.Z)(this,t),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}return(0,A.Z)(t,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cf}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ul}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Ar}},{key:"copy",value:function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}]),t}();function aR(t,n,e){var r=t.copy();return r.startSet_=!0,void 0===n&&(n=null),r.indexStartValue_=n,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function sR(t,n,e){var r=t.copy();return r.endSet_=!0,void 0===n&&(n=null),r.indexEndValue_=n,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function lC(t,n){var e=t.copy();return e.index_=n,e}function qO(t){var e,n={};return t.isDefault()||(t.index_===Ar?e="$priority":t.index_===nR?e="$value":t.index_===xl?e="$key":((0,X.hu)(t.index_ instanceof tR,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,X.Pz)(e),t.startSet_&&(n.startAt=(0,X.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,X.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,X.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,X.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function YO(t){var n={};if(t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_){n.l=t.limit_;var e=t.viewFrom_;""===e&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e}return t.index_!==Ar&&(n.i=t.index_.toString()),n}var dB=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i,a,u){var c;return(0,R.Z)(this,e),(c=n.call(this)).repoInfo_=r,c.onDataUpdate_=i,c.authTokenProvider_=a,c.appCheckTokenProvider_=u,c.log_=yk("p:rest:"),c.listens_={},c}return(0,A.Z)(e,[{key:"reportStats",value:function(i){throw new Error("Method not implemented.")}},{key:"listen",value:function(i,a,u,c){var h=this,v=i._path.toString();this.log_("Listen called for "+v+" "+i._queryIdentifier);var g=e.getListenId_(i,u),I={};this.listens_[g]=I;var D=qO(i._queryParams);this.restRequest_(v+".json",D,function(L,x){var K=x;404===L&&(K=null,L=null),null===L&&h.onDataUpdate_(v,K,!1,u),(0,X.DV)(h.listens_,g)===I&&c(L?401===L?"permission_denied":"rest_error:"+L:"ok",null)})}},{key:"unlisten",value:function(i,a){var u=e.getListenId_(i,a);delete this.listens_[u]}},{key:"get",value:function(i){var a=this,u=qO(i._queryParams),c=i._path.toString(),h=new X.BH;return this.restRequest_(c+".json",u,function(v,g){var I=g;404===v&&(I=null,v=null),null===v?(a.onDataUpdate_(c,I,!1,null),h.resolve(I)):h.reject(new Error(I))}),h.promise}},{key:"refreshAuthToken",value:function(i){}},{key:"restRequest_",value:function(i){var a=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(h){var v=(0,ye.Z)(h,2),g=v[0],I=v[1];g&&g.accessToken&&(u.auth=g.accessToken),I&&I.token&&(u.ac=I.token);var D=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+(0,X.xO)(u);a.log_("Sending REST request for "+D);var L=new XMLHttpRequest;L.onreadystatechange=function(){if(c&&4===L.readyState){a.log_("REST Response for "+D+" received. status:",L.status,"response:",L.responseText);var x=null;if(L.status>=200&&L.status<300){try{x=(0,X.cI)(L.responseText)}catch(K){Ua("Failed to parse JSON response for "+D+": "+L.responseText)}c(null,x)}else 401!==L.status&&404!==L.status&&Ua("Got unsuccessful REST response for "+D+" Status: "+L.status),c(L.status);c=null}},L.open("GET",D,!0),L.send()})}}],[{key:"getListenId_",value:function(i,a){return void 0!==a?"tag$"+a:((0,X.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}}]),e}(DO),vB=function(){function t(){(0,R.Z)(this,t),this.rootNode_=En.EMPTY_NODE}return(0,A.Z)(t,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,r){this.rootNode_=this.rootNode_.updateChild(e,r)}}]),t}();function cC(){return{value:null,children:new Map}}function Jm(t,n,e){if(On(n))t.value=e,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(n,e);else{var r=Mn(n);t.children.has(r)||t.children.set(r,cC()),Jm(t.children.get(r),n=Ir(n),e)}}function uR(t,n){if(On(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var e=t.value;return t.value=null,e.forEachChild(Ar,function(a,u){Jm(t,new ur(a),u)}),uR(t,n)}if(t.children.size>0){var r=Mn(n);return n=Ir(n),t.children.has(r)&&uR(t.children.get(r),n)&&t.children.delete(r),0===t.children.size}return!0}function oR(t,n,e){null!==t.value?e(n,t.value):function pB(t,n){t.children.forEach(function(e,r){n(r,e)})}(t,function(r,i){oR(i,new ur(n.toString()+"/"+r),e)})}var gB=function(){function t(n){(0,R.Z)(this,t),this.collection_=n,this.last_=null}return(0,A.Z)(t,[{key:"get",value:function(){var e=this.collection_.get(),r=Object.assign({},e);return this.last_&&va(this.last_,function(i,a){r[i]=r[i]-a}),this.last_=e,r}}]),t}(),_B=function(){function t(n,e){(0,R.Z)(this,t),this.server_=e,this.statsToReport_={},this.statsListener_=new gB(n);var r=1e4+2e4*Math.random();kk(this.reportStats_.bind(this),Math.floor(r))}return(0,A.Z)(t,[{key:"reportStats_",value:function(){var e=this,r=this.statsListener_.get(),i={},a=!1;va(r,function(u,c){c>0&&(0,X.r3)(e.statsToReport_,u)&&(i[u]=c,a=!0)}),a&&this.server_.reportStats(i),kk(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),t}(),Lu=function(){return function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Lu||(Lu={})),Lu}();function fR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var kB=function(){function t(n,e,r){(0,R.Z)(this,t),this.path=n,this.affectedTree=e,this.revert=r,this.type=Lu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,A.Z)(t,[{key:"operationForChild",value:function(e){if(On(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var r=this.affectedTree.subtree(new ur(e));return new t(tr(),r,this.revert)}return(0,X.hu)(Mn(this.path)===e,"operationForChild called for unrelated child."),new t(Ir(this.path),this.affectedTree,this.revert)}}]),t}(),XO=function(){function t(n,e){(0,R.Z)(this,t),this.source=n,this.path=e,this.type=Lu.LISTEN_COMPLETE}return(0,A.Z)(t,[{key:"operationForChild",value:function(e){return On(this.path)?new t(this.source,tr()):new t(this.source,Ir(this.path))}}]),t}(),fC=function(){function t(n,e,r){(0,R.Z)(this,t),this.source=n,this.path=e,this.snap=r,this.type=Lu.OVERWRITE}return(0,A.Z)(t,[{key:"operationForChild",value:function(e){return On(this.path)?new t(this.source,tr(),this.snap.getImmediateChild(e)):new t(this.source,Ir(this.path),this.snap)}}]),t}(),hR=function(){function t(n,e,r){(0,R.Z)(this,t),this.source=n,this.path=e,this.children=r,this.type=Lu.MERGE}return(0,A.Z)(t,[{key:"operationForChild",value:function(e){if(On(this.path)){var r=this.children.subtree(new ur(e));return r.isEmpty()?null:r.value?new fC(this.source,tr(),r.value):new t(this.source,tr(),r)}return(0,X.hu)(Mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ir(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),t}(),ud=function(){function t(n,e,r){(0,R.Z)(this,t),this.node_=n,this.fullyInitialized_=e,this.filtered_=r}return(0,A.Z)(t,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(On(e))return this.isFullyInitialized()&&!this.filtered_;var r=Mn(e);return this.isCompleteForChild(r)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),t}(),wB=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.query_=n,this.index_=this.query_._queryParams.getIndex()});function Sk(t,n,e,r,i,a){var u=r.filter(function(c){return c.type===e});u.sort(function(c,h){return function IB(t,n,e){if(null==n.childName||null==e.childName)throw(0,X.g5)("Should only compare child_ events.");var r=new xn(n.childName,n.snapshotNode),i=new xn(e.childName,e.snapshotNode);return t.index_.compare(r,i)}(t,c,h)}),u.forEach(function(c){var h=function EB(t,n,e){return"value"===n.type||"child_removed"===n.type||(n.prevName=e.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n}(t,c,a);i.forEach(function(v){v.respondsTo(c.type)&&n.push(v.createEvent(h,t.query_))})})}function hC(t,n){return{eventCache:t,serverCache:n}}function Ak(t,n,e,r){return hC(new ud(n,e,r),t.serverCache)}function JO(t,n,e,r){return hC(t.eventCache,new ud(n,e,r))}function dC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bp(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var dR,CB=function(){return dR||(dR=new Bl(ax)),dR},Ys=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CB();(0,R.Z)(this,t),this.value=n,this.children=e}return(0,A.Z)(t,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,r){if(null!=this.value&&r(this.value))return{path:tr(),value:this.value};if(On(e))return null;var i=Mn(e),a=this.children.get(i);if(null!==a){var u=a.findRootMostMatchingPathAndValue(Ir(e),r);return null!=u?{path:jr(new ur(i),u.path),value:u.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})}},{key:"subtree",value:function(e){if(On(e))return this;var r=Mn(e),i=this.children.get(r);return null!==i?i.subtree(Ir(e)):new t(null)}},{key:"set",value:function(e,r){if(On(e))return new t(r,this.children);var i=Mn(e),u=(this.children.get(i)||new t(null)).set(Ir(e),r),c=this.children.insert(i,u);return new t(this.value,c)}},{key:"remove",value:function(e){if(On(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var r=Mn(e),i=this.children.get(r);if(i){var u,a=i.remove(Ir(e));return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),null===this.value&&u.isEmpty()?new t(null):new t(this.value,u)}return this}},{key:"get",value:function(e){if(On(e))return this.value;var r=Mn(e),i=this.children.get(r);return i?i.get(Ir(e)):null}},{key:"setTree",value:function(e,r){if(On(e))return r;var c,i=Mn(e),u=(this.children.get(i)||new t(null)).setTree(Ir(e),r);return c=u.isEmpty()?this.children.remove(i):this.children.insert(i,u),new t(this.value,c)}},{key:"fold",value:function(e){return this.fold_(tr(),e)}},{key:"fold_",value:function(e,r){var i={};return this.children.inorderTraversal(function(a,u){i[a]=u.fold_(jr(e,a),r)}),r(e,this.value,i)}},{key:"findOnPath",value:function(e,r){return this.findOnPath_(e,tr(),r)}},{key:"findOnPath_",value:function(e,r,i){var a=!!this.value&&i(r,this.value);if(a)return a;if(On(e))return null;var u=Mn(e),c=this.children.get(u);return c?c.findOnPath_(Ir(e),jr(r,u),i):null}},{key:"foreachOnPath",value:function(e,r){return this.foreachOnPath_(e,tr(),r)}},{key:"foreachOnPath_",value:function(e,r,i){if(On(e))return this;this.value&&i(r,this.value);var a=Mn(e),u=this.children.get(a);return u?u.foreachOnPath_(Ir(e),jr(r,a),i):new t(null)}},{key:"foreach",value:function(e){this.foreach_(tr(),e)}},{key:"foreach_",value:function(e,r){this.children.inorderTraversal(function(i,a){a.foreach_(jr(e,i),r)}),this.value&&r(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal(function(r,i){i.value&&e(r,i.value)})}}],[{key:"fromObject",value:function(e){var r=new t(null);return va(e,function(i,a){r=r.set(new ur(i),a)}),r}}]),t}(),Tf=function(){function t(n){(0,R.Z)(this,t),this.writeTree_=n}return(0,A.Z)(t,null,[{key:"empty",value:function(){return new t(new Ys(null))}}]),t}();function Rk(t,n,e){if(On(n))return new Tf(new Ys(e));var r=t.writeTree_.findRootMostValueAndPath(n);if(null!=r){var i=r.path,a=r.value,u=ss(i,n);return a=a.updateChild(u,e),new Tf(t.writeTree_.set(i,a))}var c=new Ys(e),h=t.writeTree_.setTree(n,c);return new Tf(h)}function vR(t,n,e){var r=t;return va(e,function(i,a){r=Rk(r,jr(n,i),a)}),r}function eZ(t,n){if(On(n))return Tf.empty();var e=t.writeTree_.setTree(n,new Ys(null));return new Tf(e)}function pR(t,n){return null!=Ep(t,n)}function Ep(t,n){var e=t.writeTree_.findRootMostValueAndPath(n);return null!=e?t.writeTree_.get(e.path).getChild(ss(e.path,n)):null}function tZ(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ar,function(r,i){n.push(new xn(r,i))}):t.writeTree_.children.inorderTraversal(function(r,i){null!=i.value&&n.push(new xn(r,i.value))}),n}function od(t,n){if(On(n))return t;var e=Ep(t,n);return new Tf(null!=e?new Ys(e):t.writeTree_.subtree(n))}function gR(t){return t.writeTree_.isEmpty()}function ey(t,n){return nZ(tr(),t.writeTree_,n)}function nZ(t,n,e){if(null!=n.value)return e.updateChild(t,n.value);var r=null;return n.children.inorderTraversal(function(i,a){".priority"===i?((0,X.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):e=nZ(jr(t,i),a,e)}),!e.getChild(t).isEmpty()&&null!==r&&(e=e.updateChild(jr(t,".priority"),r)),e}function vC(t,n){return uZ(n,t)}function SB(t,n){for(var e=0;e<t.allWrites.length;e++){var r=t.allWrites[e];if(r.writeId===n)return r}return null}function AB(t,n){var e=t.allWrites.findIndex(function(v){return v.writeId===n});(0,X.hu)(e>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[e];t.allWrites.splice(e,1);for(var i=r.visible,a=!1,u=t.allWrites.length-1;i&&u>=0;){var c=t.allWrites[u];c.visible&&(u>=e&&RB(c,r.path)?i=!1:Nu(r.path,c.path)&&(a=!0)),u--}return!!i&&(a?(function PB(t){t.visibleWrites=rZ(t.allWrites,MB,tr()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=eZ(t.visibleWrites,r.path):va(r.children,function(v){t.visibleWrites=eZ(t.visibleWrites,jr(r.path,v))}),!0))}function RB(t,n){if(t.snap)return Nu(t.path,n);for(var e in t.children)if(t.children.hasOwnProperty(e)&&Nu(jr(t.path,e),n))return!0;return!1}function MB(t){return t.visible}function rZ(t,n,e){for(var r=Tf.empty(),i=0;i<t.length;++i){var a=t[i];if(n(a)){var u=a.path,c=void 0;if(a.snap)Nu(e,u)?r=Rk(r,c=ss(e,u),a.snap):Nu(u,e)&&(c=ss(u,e),r=Rk(r,tr(),a.snap.getChild(c)));else{if(!a.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(Nu(e,u))r=vR(r,c=ss(e,u),a.children);else if(Nu(u,e))if(On(c=ss(u,e)))r=vR(r,tr(),a.children);else{var h=(0,X.DV)(a.children,Mn(c));if(h){var v=h.getChild(Ir(c));r=Rk(r,tr(),v)}}}}}return r}function iZ(t,n,e,r,i){if(r||i){var h=od(t.visibleWrites,n);return!i&&gR(h)?e:i||null!=e||pR(h,tr())?ey(rZ(t.allWrites,function(L){return(L.visible||i)&&(!r||!~r.indexOf(L.writeId))&&(Nu(L.path,n)||Nu(n,L.path))},n),e||En.EMPTY_NODE):null}var a=Ep(t.visibleWrites,n);if(null!=a)return a;var u=od(t.visibleWrites,n);return gR(u)?e:null!=e||pR(u,tr())?ey(u,e||En.EMPTY_NODE):null}function pC(t,n,e,r){return iZ(t.writeTree,t.treePath,n,e,r)}function mR(t,n){return function OB(t,n,e){var r=En.EMPTY_NODE,i=Ep(t.visibleWrites,n);if(i)return i.isLeafNode()||i.forEachChild(Ar,function(c,h){r=r.updateImmediateChild(c,h)}),r;if(e){var a=od(t.visibleWrites,n);return e.forEachChild(Ar,function(c,h){var v=ey(od(a,new ur(c)),h);r=r.updateImmediateChild(c,v)}),tZ(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}return tZ(od(t.visibleWrites,n)).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}(t.writeTree,t.treePath,n)}function aZ(t,n,e,r){return function ZB(t,n,e,r,i){(0,X.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=jr(n,e);if(pR(t.visibleWrites,a))return null;var u=od(t.visibleWrites,a);return gR(u)?i.getChild(e):ey(u,i.getChild(e))}(t.writeTree,t.treePath,n,e,r)}function gC(t,n){return function LB(t,n){return Ep(t.visibleWrites,n)}(t.writeTree,jr(t.treePath,n))}function yR(t,n,e){return function NB(t,n,e,r){var i=jr(n,e),a=Ep(t.visibleWrites,i);return null!=a?a:r.isCompleteForChild(e)?ey(od(t.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(t.writeTree,t.treePath,n,e)}function sZ(t,n){return uZ(jr(t.treePath,n),t.writeTree)}function uZ(t,n){return{treePath:t,writeTree:n}}var BB=function(){function t(){(0,R.Z)(this,t),this.changeMap=new Map}return(0,A.Z)(t,[{key:"trackChildChange",value:function(e){var r=e.type,i=e.childName;(0,X.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");var a=this.changeMap.get(i);if(a){var u=a.type;if("child_added"===r&&"child_removed"===u)this.changeMap.set(i,Dk(i,e.snapshotNode,a.snapshotNode));else if("child_removed"===r&&"child_added"===u)this.changeMap.delete(i);else if("child_removed"===r&&"child_changed"===u)this.changeMap.set(i,Tk(i,a.oldSnap));else if("child_changed"===r&&"child_added"===u)this.changeMap.set(i,Xm(i,e.snapshotNode));else{if("child_changed"!==r||"child_changed"!==u)throw(0,X.g5)("Illegal combination of changes: "+e+" occurred after "+a);this.changeMap.set(i,Dk(i,e.snapshotNode,a.oldSnap))}}else this.changeMap.set(i,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),t}(),VB=function(){function t(){(0,R.Z)(this,t)}return(0,A.Z)(t,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,r,i){return null}}]),t}(),oZ=new VB,_R=function(){function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,R.Z)(this,t),this.writes_=n,this.viewCache_=e,this.optCompleteServerCache_=r}return(0,A.Z)(t,[{key:"getCompleteChild",value:function(e){var r=this.viewCache_.eventCache;if(r.isCompleteForChild(e))return r.getNode().getImmediateChild(e);var i=null!=this.optCompleteServerCache_?new ud(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yR(this.writes_,e,i)}},{key:"getChildAfterChild",value:function(e,r,i){var a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bp(this.viewCache_),u=function xB(t,n,e,r,i,a){return function FB(t,n,e,r,i,a,u){var c,h=od(t.visibleWrites,n),v=Ep(h,tr());if(null!=v)c=v;else{if(null==e)return[];c=ey(h,e)}if((c=c.withIndex(u)).isEmpty()||c.isLeafNode())return[];for(var g=[],I=u.getCompare(),D=a?c.getReverseIteratorFrom(r,u):c.getIteratorFrom(r,u),L=D.getNext();L&&g.length<i;)0!==I(L,r)&&g.push(L),L=D.getNext();return g}(t.writeTree,t.treePath,n,e,r,i,a)}(this.writes_,a,r,1,i,e);return 0===u.length?null:u[0]}}]),t}();function lZ(t,n,e,r,i,a){var c,h,u=n.eventCache;if(null!=gC(r,e))return n;if(On(e))if((0,X.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){var v=bp(n),I=mR(r,v instanceof En?v:En.EMPTY_NODE);c=t.filter.updateFullNode(n.eventCache.getNode(),I,a)}else{var D=pC(r,bp(n));c=t.filter.updateFullNode(n.eventCache.getNode(),D,a)}else{var L=Mn(e);if(".priority"===L){(0,X.hu)(1===sd(e),"Can't have a priority with additional path components");var x=u.getNode(),K=aZ(r,e,x,h=n.serverCache.getNode());c=null!=K?t.filter.updatePriority(x,K):u.getNode()}else{var re,ne=Ir(e);if(u.isCompleteForChild(L)){h=n.serverCache.getNode();var Pe=aZ(r,e,u.getNode(),h);re=null!=Pe?u.getNode().getImmediateChild(L).updateChild(ne,Pe):u.getNode().getImmediateChild(L)}else re=yR(r,L,n.serverCache);c=null!=re?t.filter.updateChild(u.getNode(),L,re,ne,i,a):u.getNode()}}return Ak(n,c,u.isFullyInitialized()||On(e),t.filter.filtersNodes())}function mC(t,n,e,r,i,a,u,c){var v,h=n.serverCache,g=u?t.filter:t.filter.getIndexedFilter();if(On(e))v=g.updateFullNode(h.getNode(),r,null);else if(g.filtersNodes()&&!h.isFiltered()){var I=h.getNode().updateChild(e,r);v=g.updateFullNode(h.getNode(),I,null)}else{var D=Mn(e);if(!h.isCompleteForPath(e)&&sd(e)>1)return n;var L=Ir(e),K=h.getNode().getImmediateChild(D).updateChild(L,r);v=".priority"===D?g.updatePriority(h.getNode(),K):g.updateChild(h.getNode(),D,K,L,oZ,null)}var ne=JO(n,v,h.isFullyInitialized()||On(e),g.filtersNodes());return lZ(t,ne,e,i,new _R(i,ne,a),c)}function kR(t,n,e,r,i,a,u){var h,v,c=n.eventCache,g=new _R(i,n,a);if(On(e))v=t.filter.updateFullNode(n.eventCache.getNode(),r,u),h=Ak(n,v,!0,t.filter.filtersNodes());else{var I=Mn(e);if(".priority"===I)v=t.filter.updatePriority(n.eventCache.getNode(),r),h=Ak(n,v,c.isFullyInitialized(),c.isFiltered());else{var x,D=Ir(e),L=c.getNode().getImmediateChild(I);if(On(D))x=r;else{var K=g.getCompleteChild(I);x=null!=K?".priority"===YA(D)&&K.getChild(MO(D)).isEmpty()?K:K.updateChild(D,r):En.EMPTY_NODE}h=L.equals(x)?n:Ak(n,t.filter.updateChild(c.getNode(),I,x,D,g,u),c.isFullyInitialized(),t.filter.filtersNodes())}}return h}function cZ(t,n){return t.eventCache.isCompleteForChild(n)}function fZ(t,n,e){return e.foreach(function(r,i){n=n.updateChild(r,i)}),n}function wR(t,n,e,r,i,a,u,c){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;var v,h=n;v=On(e)?r:new Ys(null).setTree(e,r);var g=n.serverCache.getNode();return v.children.inorderTraversal(function(I,D){if(g.hasChild(I)){var x=fZ(0,n.serverCache.getNode().getImmediateChild(I),D);h=mC(t,h,new ur(I),x,i,a,u,c)}}),v.children.inorderTraversal(function(I,D){var L=!n.serverCache.isCompleteForChild(I)&&null===D.value;if(!g.hasChild(I)&&!L){var K=fZ(0,n.serverCache.getNode().getImmediateChild(I),D);h=mC(t,h,new ur(I),K,i,a,u,c)}}),h}var YB=function(){function t(n,e){(0,R.Z)(this,t),this.query_=n,this.eventRegistrations_=[];var r=this.query_._queryParams,i=new iR(r.getIndex()),a=function oB(t){return t.loadsAllData()?new iR(t.getIndex()):t.hasLimit()?new uB(t):new KO(t)}(r);this.processor_=function jB(t){return{filter:t}}(a);var u=e.serverCache,c=e.eventCache,h=i.updateFullNode(En.EMPTY_NODE,u.getNode(),null),v=a.updateFullNode(En.EMPTY_NODE,c.getNode(),null),g=new ud(h,u.isFullyInitialized(),i.filtersNodes()),I=new ud(v,c.isFullyInitialized(),a.filtersNodes());this.viewCache_=hC(I,g),this.eventGenerator_=new wB(this.query_)}return(0,A.Z)(t,[{key:"query",get:function(){return this.query_}}]),t}();function JB(t,n){var e=bp(t.viewCache_);return e&&(t.query._queryParams.loadsAllData()||!On(n)&&!e.getImmediateChild(Mn(n)).isEmpty())?e.getChild(n):null}function hZ(t){return 0===t.eventRegistrations_.length}function dZ(t,n,e){var r=[];if(e){(0,X.hu)(null==n,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(h){var v=h.createCancelEvent(e,i);v&&r.push(v)})}if(n){for(var a=[],u=0;u<t.eventRegistrations_.length;++u){var c=t.eventRegistrations_[u];if(c.matches(n)){if(n.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(u+1));break}}else a.push(c)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function vZ(t,n,e,r){n.type===Lu.MERGE&&null!==n.source.queryId&&((0,X.hu)(bp(t.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(dC(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,a=function WB(t,n,e,r,i){var u,c,a=new BB;if(e.type===Lu.OVERWRITE){var h=e;h.source.fromUser?u=kR(t,n,h.path,h.snap,r,i,a):((0,X.hu)(h.source.fromServer,"Unknown source."),c=h.source.tagged||n.serverCache.isFiltered()&&!On(h.path),u=mC(t,n,h.path,h.snap,r,i,c,a))}else if(e.type===Lu.MERGE){var v=e;v.source.fromUser?u=function zB(t,n,e,r,i,a,u){var c=n;return r.foreach(function(h,v){var g=jr(e,h);cZ(n,Mn(g))&&(c=kR(t,c,g,v,i,a,u))}),r.foreach(function(h,v){var g=jr(e,h);cZ(n,Mn(g))||(c=kR(t,c,g,v,i,a,u))}),c}(t,n,v.path,v.children,r,i,a):((0,X.hu)(v.source.fromServer,"Unknown source."),c=v.source.tagged||n.serverCache.isFiltered(),u=wR(t,n,v.path,v.children,r,i,c,a))}else if(e.type===Lu.ACK_USER_WRITE){var g=e;u=g.revert?function qB(t,n,e,r,i,a){var u;if(null!=gC(r,e))return n;var v,c=new _R(r,n,i),h=n.eventCache.getNode();if(On(e)||".priority"===Mn(e)){var g;if(n.serverCache.isFullyInitialized())g=pC(r,bp(n));else{var I=n.serverCache.getNode();(0,X.hu)(I instanceof En,"serverChildren would be complete if leaf node"),g=mR(r,I)}v=t.filter.updateFullNode(h,g,a)}else{var D=Mn(e),L=yR(r,D,n.serverCache);null==L&&n.serverCache.isCompleteForChild(D)&&(L=h.getImmediateChild(D)),(v=null!=L?t.filter.updateChild(h,D,L,Ir(e),c,a):n.eventCache.getNode().hasChild(D)?t.filter.updateChild(h,D,En.EMPTY_NODE,Ir(e),c,a):h).isEmpty()&&n.serverCache.isFullyInitialized()&&(u=pC(r,bp(n))).isLeafNode()&&(v=t.filter.updateFullNode(v,u,a))}return u=n.serverCache.isFullyInitialized()||null!=gC(r,tr()),Ak(n,v,u,t.filter.filtersNodes())}(t,n,g.path,r,i,a):function KB(t,n,e,r,i,a,u){if(null!=gC(i,e))return n;var c=n.serverCache.isFiltered(),h=n.serverCache;if(null!=r.value){if(On(e)&&h.isFullyInitialized()||h.isCompleteForPath(e))return mC(t,n,e,h.getNode().getChild(e),i,a,c,u);if(On(e)){var v=new Ys(null);return h.getNode().forEachChild(xl,function(I,D){v=v.set(new ur(I),D)}),wR(t,n,e,v,i,a,c,u)}return n}var g=new Ys(null);return r.foreach(function(I,D){var L=jr(e,I);h.isCompleteForPath(L)&&(g=g.set(I,h.getNode().getChild(L)))}),wR(t,n,e,g,i,a,c,u)}(t,n,g.path,g.affectedTree,r,i,a)}else{if(e.type!==Lu.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+e.type);u=function $B(t,n,e,r,i){var a=n.serverCache;return lZ(t,JO(n,a.getNode(),a.isFullyInitialized()||On(e),a.isFiltered()),e,r,oZ,i)}(t,n,e.path,r,a)}var I=a.getChanges();return function GB(t,n,e){var r=n.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dC(t);(e.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&e.push(zO(dC(n)))}}(n,u,I),{viewCache:u,changes:I}}(t.processor_,i,n,e,r);return function HB(t,n){(0,X.hu)(n.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(n.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,a.viewCache),(0,X.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,pZ(t,a.changes,a.viewCache.eventCache.getNode(),null)}function pZ(t,n,e,r){return function bB(t,n,e,r){var i=[],a=[];return n.forEach(function(u){"child_changed"===u.type&&t.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function sB(t,n){return{type:"child_moved",snapshotNode:n,childName:t}}(u.childName,u.snapshotNode))}),Sk(t,i,"child_removed",n,r,e),Sk(t,i,"child_added",n,r,e),Sk(t,i,"child_moved",a,r,e),Sk(t,i,"child_changed",n,r,e),Sk(t,i,"value",n,r,e),i}(t.eventGenerator_,n,e,r?[r]:t.eventRegistrations_)}var yC,kC,gZ=(0,A.Z)(function t(){(0,R.Z)(this,t),this.views=new Map});function iV(t){return 0===t.views.size}function bR(t,n,e,r){var i=n.source.queryId;if(null!==i){var a=t.views.get(i);return(0,X.hu)(null!=a,"SyncTree gave us an op for an invalid query."),vZ(a,n,e,r)}var h,u=[],c=(0,P.Z)(t.views.values());try{for(c.s();!(h=c.n()).done;)u=u.concat(vZ(h.value,n,e,r))}catch(g){c.e(g)}finally{c.f()}return u}function mZ(t,n,e,r,i){var u=t.views.get(n._queryIdentifier);if(!u){var c=pC(e,i?r:null),h=!1;c?h=!0:r instanceof En?(c=mR(e,r),h=!1):(c=En.EMPTY_NODE,h=!1);var v=hC(new ud(c,h,!1),new ud(r,i,!1));return new YB(n,v)}return u}function aV(t,n,e,r,i,a){var u=mZ(t,n,r,i,a);return t.views.has(n._queryIdentifier)||t.views.set(n._queryIdentifier,u),function eV(t,n){t.eventRegistrations_.push(n)}(u,e),function tV(t,n){var e=t.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ar,function(a,u){r.push(Xm(a,u))}),e.isFullyInitialized()&&r.push(zO(e.getNode())),pZ(t,r,e.getNode(),n)}(u,e)}function sV(t,n,e,r){var i=n._queryIdentifier,a=[],u=[],c=cd(t);if("default"===i){var v,h=(0,P.Z)(t.views.entries());try{for(h.s();!(v=h.n()).done;){var g=(0,ye.Z)(v.value,2),I=g[0],D=g[1];u=u.concat(dZ(D,e,r)),hZ(D)&&(t.views.delete(I),D.query._queryParams.loadsAllData()||a.push(D.query))}}catch(x){h.e(x)}finally{h.f()}}else{var L=t.views.get(i);L&&(u=u.concat(dZ(L,e,r)),hZ(L)&&(t.views.delete(i),L.query._queryParams.loadsAllData()||a.push(L.query)))}return c&&!cd(t)&&a.push(new(function rV(){return(0,X.hu)(yC,"Reference.ts has not been loaded"),yC}())(n._repo,n._path)),{removed:a,events:u}}function yZ(t){var r,n=[],e=(0,P.Z)(t.views.values());try{for(e.s();!(r=e.n()).done;){var i=r.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){e.e(a)}finally{e.f()}return n}function ld(t,n){var i,e=null,r=(0,P.Z)(t.views.values());try{for(r.s();!(i=r.n()).done;)e=e||JB(i.value,n)}catch(u){r.e(u)}finally{r.f()}return e}function _Z(t,n){return n._queryParams.loadsAllData()?_C(t):t.views.get(n._queryIdentifier)}function kZ(t,n){return null!=_Z(t,n)}function cd(t){return null!=_C(t)}function _C(t){var e,n=(0,P.Z)(t.views.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var lV=1,wZ=(0,A.Z)(function t(n){(0,R.Z)(this,t),this.listenProvider_=n,this.syncPointTree_=new Ys(null),this.pendingWriteTree_=function UB(){return{visibleWrites:Tf.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map});function ER(t,n,e,r,i){return function TB(t,n,e,r,i){(0,X.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:n,snap:e,writeId:r,visible:i}),i&&(t.visibleWrites=Rk(t.visibleWrites,n,e)),t.lastWriteId=r}(t.pendingWriteTree_,n,e,r,i),i?ty(t,new fC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,e)):[]}function fd(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=SB(t.pendingWriteTree_,n),i=AB(t.pendingWriteTree_,n);if(i){var a=new Ys(null);return null!=r.snap?a=a.set(tr(),!0):va(r.children,function(u){a=a.set(new ur(u),!0)}),ty(t,new kB(r.path,a,e))}return[]}function Pk(t,n,e){return ty(t,new fC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,e))}function wC(t,n,e,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=n._path,u=t.syncPointTree_.get(a),c=[];if(u&&("default"===n._queryIdentifier||kZ(u,n))){var h=sV(u,n,e,r);iV(u)&&(t.syncPointTree_=t.syncPointTree_.remove(a));var v=h.removed;if(c=h.events,!i){var g=-1!==v.findIndex(function(Ve){return Ve._queryParams.loadsAllData()}),I=t.syncPointTree_.findOnPath(a,function(Ve,Ye){return cd(Ye)});if(g&&!I){var D=t.syncPointTree_.subtree(a);if(!D.isEmpty())for(var L=gV(D),x=0;x<L.length;++x){var K=L[x],ne=K.query,re=CZ(t,K);t.listenProvider_.startListening(Ok(ne),Mk(t,ne),re.hashFn,re.onComplete)}}if(!I&&v.length>0&&!r)if(g){var Pe=null;t.listenProvider_.stopListening(Ok(n),Pe)}else v.forEach(function(Ve){var Ye=t.queryToTagMap.get(EC(Ve));t.listenProvider_.stopListening(Ok(Ve),Ye)})}mV(t,v)}return c}function bZ(t,n,e,r){var i=CR(t,r);if(null!=i){var a=TR(i),u=a.path,c=a.queryId,h=ss(u,n);return DR(t,u,new fC(fR(c),h,e))}return[]}function IR(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n._path,a=null,u=!1;t.syncPointTree_.foreachOnPath(i,function(ne,re){var Pe=ss(ne,i);a=a||ld(re,Pe),u=u||cd(re)});var h,c=t.syncPointTree_.get(i);if(c?(u=u||cd(c),a=a||ld(c,tr())):(c=new gZ,t.syncPointTree_=t.syncPointTree_.set(i,c)),null!=a)h=!0;else{h=!1,a=En.EMPTY_NODE;var v=t.syncPointTree_.subtree(i);v.foreachChild(function(ne,re){var Pe=ld(re,tr());Pe&&(a=a.updateImmediateChild(ne,Pe))})}var g=kZ(c,n);if(!g&&!n._queryParams.loadsAllData()){var I=EC(n);(0,X.hu)(!t.queryToTagMap.has(I),"View does not exist, but we have a tag");var D=yV();t.queryToTagMap.set(I,D),t.tagToQueryMap.set(D,I)}var L=vC(t.pendingWriteTree_,i),x=aV(c,n,e,L,a,h);if(!g&&!u&&!r){var K=_Z(c,n);x=x.concat(_V(t,n,K))}return x}function bC(t,n,e){var i=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(n,function(u,c){var v=ld(c,ss(u,n));if(v)return v});return iZ(i,n,a,e,!0)}function ty(t,n){return EZ(n,t.syncPointTree_,null,vC(t.pendingWriteTree_,tr()))}function EZ(t,n,e,r){if(On(t.path))return IZ(t,n,e,r);var i=n.get(tr());null==e&&null!=i&&(e=ld(i,tr()));var a=[],u=Mn(t.path),c=t.operationForChild(u),h=n.children.get(u);if(h&&c){var v=e?e.getImmediateChild(u):null,g=sZ(r,u);a=a.concat(EZ(c,h,v,g))}return i&&(a=a.concat(bR(i,t,r,e))),a}function IZ(t,n,e,r){var i=n.get(tr());null==e&&null!=i&&(e=ld(i,tr()));var a=[];return n.children.inorderTraversal(function(u,c){var h=e?e.getImmediateChild(u):null,v=sZ(r,u),g=t.operationForChild(u);g&&(a=a.concat(IZ(g,c,h,v)))}),i&&(a=a.concat(bR(i,t,r,e))),a}function CZ(t,n){var e=n.query,r=Mk(t,e);return{hashFn:function(){var a=function QB(t){return t.viewCache_.serverCache.getNode()}(n)||En.EMPTY_NODE;return a.hash()},onComplete:function(a){if("ok"===a)return r?function dV(t,n,e){var r=CR(t,e);if(r){var i=TR(r),a=i.path,u=i.queryId,c=ss(a,n);return DR(t,a,new XO(fR(u),c))}return[]}(t,e._path,r):function hV(t,n){return ty(t,new XO({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(t,e._path);var u=function ox(t,n){var e="Unknown Error";"too_big"===t?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?e="Client doesn't have permission to access the desired data.":"unavailable"===t&&(e="The service is unavailable");var r=new Error(t+" at "+n._path.toString()+": "+e);return r.code=t.toUpperCase(),r}(a,e);return wC(t,e,null,u)}}}function Mk(t,n){var e=EC(n);return t.queryToTagMap.get(e)}function EC(t){return t._path.toString()+"$"+t._queryIdentifier}function CR(t,n){return t.tagToQueryMap.get(n)}function TR(t){var n=t.indexOf("$");return(0,X.hu)(-1!==n&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new ur(t.substr(0,n))}}function DR(t,n,e){var r=t.syncPointTree_.get(n);return(0,X.hu)(r,"Missing sync point for query tag that we're tracking"),bR(r,e,vC(t.pendingWriteTree_,n),null)}function gV(t){return t.fold(function(n,e,r){if(e&&cd(e))return[_C(e)];var a=[];return e&&(a=yZ(e)),va(r,function(u,c){a=a.concat(c)}),a})}function Ok(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function oV(){return(0,X.hu)(kC,"Reference.ts has not been loaded"),kC}())(t._repo,t._path):t}function mV(t,n){for(var e=0;e<n.length;++e){var r=n[e];if(!r._queryParams.loadsAllData()){var i=EC(r),a=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(a)}}}function yV(){return lV++}function _V(t,n,e){var r=n._path,i=Mk(t,n),a=CZ(t,e),u=t.listenProvider_.startListening(Ok(n),i,a.hashFn,a.onComplete),c=t.syncPointTree_.subtree(r);if(i)(0,X.hu)(!cd(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var h=c.fold(function(I,D,L){if(!On(I)&&D&&cd(D))return[_C(D).query];var x=[];return D&&(x=x.concat(yZ(D).map(function(K){return K.query}))),va(L,function(K,ne){x=x.concat(ne)}),x}),v=0;v<h.length;++v){var g=h[v];t.listenProvider_.stopListening(Ok(g),Mk(t,g))}return u}var kV=function(){function t(n){(0,R.Z)(this,t),this.node_=n}return(0,A.Z)(t,[{key:"getImmediateChild",value:function(e){return new t(this.node_.getImmediateChild(e))}},{key:"node",value:function(){return this.node_}}]),t}(),wV=function(){function t(n,e){(0,R.Z)(this,t),this.syncTree_=n,this.path_=e}return(0,A.Z)(t,[{key:"getImmediateChild",value:function(e){var r=jr(this.path_,e);return new t(this.syncTree_,r)}},{key:"node",value:function(){return bC(this.syncTree_,this.path_)}}]),t}(),TZ=function(n,e,r){return n&&"object"==typeof n?((0,X.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?EV(n[".sv"],e,r):"object"==typeof n[".sv"]?IV(n[".sv"],e):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},EV=function(n,e,r){if("timestamp"===n)return r.timestamp;(0,X.hu)(!1,"Unexpected server value: "+n)},IV=function(n,e,r){n.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));var i=n.increment;"number"!=typeof i&&(0,X.hu)(!1,"Unexpected increment value: "+i);var a=e.node();if((0,X.hu)(null!=a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;var c=a.getValue();return"number"!=typeof c?i:c+i},DZ=function(n,e,r,i){return AR(e,new wV(r,n),i)},SR=function(n,e,r){return AR(n,new kV(e),r)};function AR(t,n,e){var a,r=t.getPriority().val(),i=TZ(r,n.getImmediateChild(".priority"),e);if(t.isLeafNode()){var u=t,c=TZ(u.getValue(),n,e);return c!==u.getValue()||i!==u.getPriority().val()?new qm(c,Jr(i)):t}var h=t;return a=h,i!==h.getPriority().val()&&(a=a.updatePriority(new qm(i))),h.forEachChild(Ar,function(v,g){var I=AR(g,n.getImmediateChild(v),e);I!==g&&(a=a.updateImmediateChild(v,I))}),a}var RR=(0,A.Z)(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,R.Z)(this,t),this.name=n,this.parent=e,this.node=r});function IC(t,n){for(var e=n instanceof ur?n:new ur(n),r=t,i=Mn(e);null!==i;){var a=(0,X.DV)(r.node.children,i)||{children:{},childCount:0};r=new RR(i,r,a),i=Mn(e=Ir(e))}return r}function Ip(t){return t.node.value}function PR(t,n){t.node.value=n,MR(t)}function SZ(t){return t.node.childCount>0}function CC(t,n){va(t.node.children,function(e,r){n(new RR(e,t,r))})}function AZ(t,n,e,r){e&&!r&&n(t),CC(t,function(i){AZ(i,n,!0,r)}),e&&r&&n(t)}function Zk(t){return new ur(null===t.parent?t.name:Zk(t.parent)+"/"+t.name)}function MR(t){null!==t.parent&&function DV(t,n,e){var r=function CV(t){return void 0===Ip(t)&&!SZ(t)}(e),i=(0,X.r3)(t.node.children,n);r&&i?(delete t.node.children[n],t.node.childCount--,MR(t)):!r&&!i&&(t.node.children[n]=e.node,t.node.childCount++,MR(t))}(t.parent,t.name,t)}var SV=/[\[\].#$\/\u0000-\u001F\u007F]/,AV=/[\[\].#$\u0000-\u001F\u007F]/,OR=10485760,TC=function(n){return"string"==typeof n&&0!==n.length&&!SV.test(n)},RZ=function(n){return"string"==typeof n&&0!==n.length&&!AV.test(n)},Nk=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!eC(n)||n&&"object"==typeof n&&(0,X.r3)(n,".sv")},Vl=function(n,e,r,i){i&&void 0===e||DC((0,X.gK)(n,"value"),e,r)},DC=function t(n,e,r){var i=r instanceof ur?new Bx(r,n):r;if(void 0===e)throw new Error(n+"contains undefined "+kp(i));if("function"==typeof e)throw new Error(n+"contains a function "+kp(i)+" with contents = "+e.toString());if(eC(e))throw new Error(n+"contains "+e.toString()+" "+kp(i));if("string"==typeof e&&e.length>OR/3&&(0,X.ug)(e)>OR)throw new Error(n+"contains a string greater than "+OR+" utf8 bytes "+kp(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var a=!1,u=!1;if(va(e,function(c,h){if(".value"===c)a=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!TC(c)))throw new Error(n+" contains an invalid key ("+c+") "+kp(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Vx(t,n){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=(0,X.ug)(n),OO(t)})(i,c),t(n,h,i),function jx(t){var n=t.parts_.pop();t.byteLength_-=(0,X.ug)(n),t.parts_.length>0&&(t.byteLength_-=1)}(i)}),a&&u)throw new Error(n+' contains ".value" child '+kp(i)+" in addition to actual children.")}},PZ=function(n,e,r,i){if(!i||void 0!==e){var a=(0,X.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");var u=[];va(e,function(c,h){var v=new ur(c);if(DC(a,h,jr(r,v)),".priority"===YA(v)&&!Nk(h))throw new Error(a+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(v)}),function(n,e){var r,i;for(r=0;r<e.length;r++)for(var a=bk(i=e[r]),u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!TC(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(xx);var c=null;for(r=0;r<e.length;r++){if(i=e[r],null!==c&&Nu(c,i))throw new Error(n+"contains a path "+c.toString()+" that is ancestor of another path "+i.toString());c=i}}(a,u)}},ZR=function(n,e,r){if(!r||void 0!==e){if(eC(e))throw new Error((0,X.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nk(e))throw new Error((0,X.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lk=function(n,e,r,i){if(!(i&&void 0===r||TC(r)))throw new Error((0,X.gK)(n,e)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Fk=function(n,e,r,i){if(!(i&&void 0===r||RZ(r)))throw new Error((0,X.gK)(n,e)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fu=function(n,e){if(".info"===Mn(e))throw new Error(n+" failed = Can't modify data under /.info/")},MZ=function(n,e){var r=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!TC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==r.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RZ(n)}(r))throw new Error((0,X.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},OV=(0,A.Z)(function t(){(0,R.Z)(this,t),this.eventLists_=[],this.recursionDepth_=0});function SC(t,n){for(var e=null,r=0;r<n.length;r++){var i=n[r],a=i.getPath();null!==e&&!QA(a,e.path)&&(t.eventLists_.push(e),e=null),null===e&&(e={events:[],path:a}),e.events.push(i)}e&&t.eventLists_.push(e)}function OZ(t,n,e){SC(t,e),ZZ(t,function(r){return QA(r,n)})}function Qs(t,n,e){SC(t,e),ZZ(t,function(r){return Nu(r,n)||Nu(n,r)})}function ZZ(t,n){t.recursionDepth_++;for(var e=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(n(i.path)?(ZV(t.eventLists_[r]),t.eventLists_[r]=null):e=!1)}e&&(t.eventLists_=[]),t.recursionDepth_--}function ZV(t){for(var n=0;n<t.events.length;n++){var e=t.events[n];if(null!==e){t.events[n]=null;var r=e.getEventRunner();yp&&da("event: "+e.toString()),Km(r)}}}var NZ="repo_interrupt",LV=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.repoInfo_=n,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cC(),this.transactionQueueTree_=new RR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,A.Z)(t,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),t}();function LZ(t){var e=t.infoData_.getNode(new ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Uk(t){return(n=(n={timestamp:LZ(t)})||{}).timestamp=n.timestamp||(new Date).getTime(),n;var n}function FZ(t,n,e,r,i){t.dataUpdateCount++;var a=new ur(n);e=t.interceptServerDataCallback_?t.interceptServerDataCallback_(n,e):e;var u=[];if(i)if(r){var c=(0,X.UI)(e,function(D){return Jr(D)});u=function vV(t,n,e,r){var i=CR(t,r);if(i){var a=TR(i),u=a.path,c=a.queryId,h=ss(u,n),v=Ys.fromObject(e);return DR(t,u,new hR(fR(c),h,v))}return[]}(t.serverSyncTree_,a,c,i)}else{var h=Jr(e);u=bZ(t.serverSyncTree_,a,h,i)}else if(r){var v=(0,X.UI)(e,function(D){return Jr(D)});u=function fV(t,n,e){var r=Ys.fromObject(e);return ty(t,new hR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,r))}(t.serverSyncTree_,a,v)}else{var g=Jr(e);u=Pk(t.serverSyncTree_,a,g)}var I=a;u.length>0&&(I=ry(t,a)),Qs(t.eventQueue_,I,u)}function UZ(t,n){NR(t,"connected",n),!1===n&&function VV(t){ny(t,"onDisconnectEvents");var n=Uk(t),e=cC();oR(t.onDisconnect_,tr(),function(i,a){var u=DZ(i,a,t.serverSyncTree_,n);Jm(e,i,u)});var r=[];oR(e,tr(),function(i,a){r=r.concat(Pk(t.serverSyncTree_,i,a));var u=xR(t,i);ry(t,u)}),t.onDisconnect_=cC(),Qs(t.eventQueue_,tr(),r)}(t)}function NR(t,n,e){var r=new ur("/.info/"+n),i=Jr(e);t.infoData_.updateSnapshot(r,i);var a=Pk(t.infoSyncTree_,r,i);Qs(t.eventQueue_,r,a)}function AC(t){return t.nextWriteId_++}function LR(t,n,e,r,i){ny(t,"set",{path:n.toString(),value:e,priority:r});var a=Uk(t),u=Jr(e,r),c=bC(t.serverSyncTree_,n),h=SR(u,c,a),v=AC(t),g=ER(t.serverSyncTree_,n,h,v,!0);SC(t.eventQueue_,g),t.server_.put(n.toString(),u.val(!0),function(D,L){var x="ok"===D;x||Ua("set at "+n+" failed: "+D);var K=fd(t.serverSyncTree_,v,!x);Qs(t.eventQueue_,n,K),hd(0,i,D,L)});var I=xR(t,n);ry(t,I),Qs(t.eventQueue_,I,[])}function jV(t,n,e){t.server_.onDisconnectCancel(n.toString(),function(r,i){"ok"===r&&uR(t.onDisconnect_,n),hd(0,e,r,i)})}function xZ(t,n,e,r){var i=Jr(e);t.server_.onDisconnectPut(n.toString(),i.val(!0),function(a,u){"ok"===a&&Jm(t.onDisconnect_,n,i),hd(0,r,a,u)})}function FR(t,n,e){var r;r=".info"===Mn(n._path)?wC(t.infoSyncTree_,n,e):wC(t.serverSyncTree_,n,e),OZ(t.eventQueue_,n._path,r)}function BZ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(NZ)}function ny(t){var n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":");for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];da.apply(void 0,[n].concat(r))}function hd(t,n,e,r){n&&Km(function(){if("ok"===e)n(null);else{var i=(e||"error").toUpperCase(),a=i;r&&(a+=": "+r);var u=new Error(a);u.code=i,n(u)}})}function UR(t,n,e){return bC(t.serverSyncTree_,n,e)||En.EMPTY_NODE}function RC(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transactionQueueTree_;if(n||PC(t,n),Ip(n)){var e=jZ(t,n);(0,X.hu)(e.length>0,"Sending zero length transaction queue");var r=e.every(function(i){return 0===i.status});r&&$V(t,Zk(n),e)}else SZ(n)&&CC(n,function(i){RC(t,i)})}function $V(t,n,e){for(var r=e.map(function(D){return D.currentWriteId}),i=UR(t,n,r),a=i,u=i.hash(),c=0;c<e.length;c++){var h=e[c];(0,X.hu)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;var v=ss(n,h.path);a=a.updateChild(v,h.currentOutputSnapshotRaw)}var g=a.val(!0),I=n;t.server_.put(I.toString(),g,function(D){ny(t,"transaction put response",{path:I.toString(),status:D});var L=[];if("ok"===D){for(var x=[],K=function(ze){e[ze].status=2,L=L.concat(fd(t.serverSyncTree_,e[ze].currentWriteId)),e[ze].onComplete&&x.push(function(){return e[ze].onComplete(null,!0,e[ze].currentOutputSnapshotResolved)}),e[ze].unwatcher()},ne=0;ne<e.length;ne++)K(ne);PC(t,IC(t.transactionQueueTree_,n)),RC(t,t.transactionQueueTree_),Qs(t.eventQueue_,n,L);for(var re=0;re<x.length;re++)Km(x[re])}else{if("datastale"===D)for(var Pe=0;Pe<e.length;Pe++)e[Pe].status=3===e[Pe].status?4:0;else{Ua("transaction at "+I.toString()+" failed: "+D);for(var Ve=0;Ve<e.length;Ve++)e[Ve].status=4,e[Ve].abortReason=D}ry(t,n)}},u)}function ry(t,n){var e=VZ(t,n),r=Zk(e);return function qV(t,n,e){if(0!==n.length){for(var r=[],i=[],u=n.filter(function(g){return 0===g.status}).map(function(g){return g.currentWriteId}),c=function(I){var D=n[I],L=ss(e,D.path),x=!1,K=void 0;if((0,X.hu)(null!==L,"rerunTransactionsUnderNode_: relativePath should not be null."),4===D.status)x=!0,K=D.abortReason,i=i.concat(fd(t.serverSyncTree_,D.currentWriteId,!0));else if(0===D.status)if(D.retryCount>=25)x=!0,K="maxretry",i=i.concat(fd(t.serverSyncTree_,D.currentWriteId,!0));else{var ne=UR(t,D.path,u);D.currentInputSnapshot=ne;var re=n[I].update(ne.val());if(void 0!==re){DC("transaction failed: Data returned ",re,D.path);var Pe=Jr(re);"object"==typeof re&&null!=re&&(0,X.r3)(re,".priority")||(Pe=Pe.updatePriority(ne.getPriority()));var Ye=D.currentWriteId,ze=Uk(t),Tt=SR(Pe,ne,ze);D.currentOutputSnapshotRaw=Pe,D.currentOutputSnapshotResolved=Tt,D.currentWriteId=AC(t),u.splice(u.indexOf(Ye),1),i=(i=i.concat(ER(t.serverSyncTree_,D.path,Tt,D.currentWriteId,D.applyLocally))).concat(fd(t.serverSyncTree_,Ye,!0))}else x=!0,K="nodata",i=i.concat(fd(t.serverSyncTree_,D.currentWriteId,!0))}Qs(t.eventQueue_,e,i),i=[],x&&(n[I].status=2,setTimeout(n[I].unwatcher,Math.floor(0)),n[I].onComplete&&r.push("nodata"===K?function(){return n[I].onComplete(null,!1,n[I].currentInputSnapshot)}:function(){return n[I].onComplete(new Error(K),!1,null)}))},h=0;h<n.length;h++)c(h);PC(t,t.transactionQueueTree_);for(var v=0;v<r.length;v++)Km(r[v]);RC(t,t.transactionQueueTree_)}}(t,jZ(t,e),r),r}function VZ(t,n){var e,r=t.transactionQueueTree_;for(e=Mn(n);null!==e&&void 0===Ip(r);)r=IC(r,e),e=Mn(n=Ir(n));return r}function jZ(t,n){var e=[];return HZ(t,n,e),e.sort(function(r,i){return r.order-i.order}),e}function HZ(t,n,e){var r=Ip(n);if(r)for(var i=0;i<r.length;i++)e.push(r[i]);CC(n,function(a){HZ(t,a,e)})}function PC(t,n){var e=Ip(n);if(e){for(var r=0,i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,PR(n,e.length>0?e:void 0)}CC(n,function(a){PC(t,a)})}function xR(t,n){var e=Zk(VZ(t,n)),r=IC(t.transactionQueueTree_,n);return function TV(t,n,e){for(var r=e?t:t.parent;null!==r;){if(n(r))return!0;r=r.parent}}(r,function(i){BR(t,i)}),BR(t,r),AZ(r,function(i){BR(t,i)}),e}function BR(t,n){var e=Ip(n);if(e){for(var r=[],i=[],a=-1,u=0;u<e.length;u++)3===e[u].status||(1===e[u].status?((0,X.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,e[u].status=3,e[u].abortReason="set"):((0,X.hu)(0===e[u].status,"Unexpected transaction status in abort"),e[u].unwatcher(),i=i.concat(fd(t.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&r.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?PR(n,void 0):e.length=a+1,Qs(t.eventQueue_,Zk(n),i);for(var c=0;c<r.length;c++)Km(r[c])}}var VR=function(n,e){var r=XV(n),i=r.namespace;return"firebase.com"===r.domain&&Fl(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==r.domain&&Fl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ua("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new WA(r.host,r.secure,i,"ws"===r.scheme||"wss"===r.scheme,e,"",i!==r.subdomain),path:new ur(r.pathString)}},XV=function(n){var e="",r="",i="",a="",u="",c=!0,h="https",v=443;if("string"==typeof n){var g=n.indexOf("//");g>=0&&(h=n.substring(0,g-1),n=n.substring(g+2));var I=n.indexOf("/");-1===I&&(I=n.length);var D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(a=function YV(t){for(var n="",e=t.split("/"),r=0;r<e.length;r++)if(e[r].length>0){var i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}n+="/"+i}return n}(n.substring(I,D)));var L=function QV(t){var n={};"?"===t.charAt(0)&&(t=t.substring(1));var r,e=(0,P.Z)(t.split("&"));try{for(e.s();!(r=e.n()).done;){var i=r.value;if(0!==i.length){var a=i.split("=");2===a.length?n[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ua("Invalid query segment '".concat(i,"' in query '").concat(t,"'"))}}}catch(u){e.e(u)}finally{e.f()}return n}(n.substring(Math.min(n.length,D)));(g=e.indexOf(":"))>=0?(c="https"===h||"wss"===h,v=parseInt(e.substring(g+1),10)):g=e.length;var x=e.slice(0,g);if("localhost"===x.toLowerCase())r="localhost";else if(x.split(".").length<=2)r=x;else{var K=e.indexOf(".");i=e.substring(0,K).toLowerCase(),r=e.substring(K+1),u=i}"ns"in L&&(u=L.ns)}return{host:e,port:v,domain:r,subdomain:i,secure:c,scheme:h,pathString:a,namespace:u}},WZ=function(){function t(n,e,r,i){(0,R.Z)(this,t),this.eventType=n,this.eventRegistration=e,this.snapshot=r,this.prevName=i}return(0,A.Z)(t,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+(0,X.Pz)(this.snapshot.exportVal())}}]),t}(),GZ=function(){function t(n,e,r){(0,R.Z)(this,t),this.eventRegistration=n,this.error=e,this.path=r}return(0,A.Z)(t,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),t}(),jR=function(){function t(n,e){(0,R.Z)(this,t),this.snapshotCallback=n,this.cancelCallback=e}return(0,A.Z)(t,[{key:"onValue",value:function(e,r){this.snapshotCallback.call(null,e,r)}},{key:"onCancel",value:function(e){return(0,X.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),t}(),zZ=function(){function t(n,e){(0,R.Z)(this,t),this._repo=n,this._path=e}return(0,A.Z)(t,[{key:"cancel",value:function(){var e=new X.BH;return jV(this._repo,this._path,e.wrapCallback(function(){})),e.promise}},{key:"remove",value:function(){Fu("OnDisconnect.remove",this._path);var e=new X.BH;return xZ(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise}},{key:"set",value:function(e){Fu("OnDisconnect.set",this._path),Vl("OnDisconnect.set",e,this._path,!1);var r=new X.BH;return xZ(this._repo,this._path,e,r.wrapCallback(function(){})),r.promise}},{key:"setWithPriority",value:function(e,r){Fu("OnDisconnect.setWithPriority",this._path),Vl("OnDisconnect.setWithPriority",e,this._path,!1),ZR("OnDisconnect.setWithPriority",r,!1);var i=new X.BH;return function HV(t,n,e,r,i){var a=Jr(e,r);t.server_.onDisconnectPut(n.toString(),a.val(!0),function(u,c){"ok"===u&&Jm(t.onDisconnect_,n,a),hd(0,i,u,c)})}(this._repo,this._path,e,r,i.wrapCallback(function(){})),i.promise}},{key:"update",value:function(e){Fu("OnDisconnect.update",this._path),PZ("OnDisconnect.update",e,this._path,!1);var r=new X.BH;return function WV(t,n,e,r){if((0,X.xb)(e))return da("onDisconnect().update() called with empty data.  Don't do anything."),void hd(0,r,"ok",void 0);t.server_.onDisconnectMerge(n.toString(),e,function(i,a){"ok"===i&&va(e,function(u,c){var h=Jr(c);Jm(t.onDisconnect_,jr(n,u),h)}),hd(0,r,i,a)})}(this._repo,this._path,e,r.wrapCallback(function(){})),r.promise}}]),t}(),Uu=function(){function t(n,e,r,i){(0,R.Z)(this,t),this._repo=n,this._path=e,this._queryParams=r,this._orderByCalled=i}return(0,A.Z)(t,[{key:"key",get:function(){return On(this._path)?null:YA(this._path)}},{key:"ref",get:function(){return new jl(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=YO(this._queryParams),r=JM(e);return"{}"===r?"default":r}},{key:"_queryObject",get:function(){return YO(this._queryParams)}},{key:"isEqual",value:function(e){if(!((e=(0,X.m9)(e))instanceof t))return!1;var r=this._repo===e._repo,i=QA(this._path,e._path);return r&&i&&this._queryIdentifier===e._queryIdentifier}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function Ux(t){for(var n="",e=t.pieceNum_;e<t.pieces_.length;e++)""!==t.pieces_[e]&&(n+="/"+encodeURIComponent(String(t.pieces_[e])));return n||"/"}(this._path)}}]),t}();function MC(t,n){if(!0===t._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function dd(t){var n=null,e=null;if(t.hasStart()&&(n=t.getIndexStartValue()),t.hasEnd()&&(e=t.getIndexEndValue()),t.getIndex()===xl){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Cf)throw new Error(r);if("string"!=typeof n)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ul)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(t.getIndex()===Ar){if(null!=n&&!Nk(n)||null!=e&&!Nk(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,X.hu)(t.getIndex()instanceof tR||t.getIndex()===nR,"unknown index type."),null!=n&&"object"==typeof n||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function OC(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var jl=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){return(0,R.Z)(this,e),n.call(this,r,i,new $O,!1)}return(0,A.Z)(e,[{key:"parent",get:function(){var i=MO(this._path);return null===i?null:new e(this._repo,i)}},{key:"root",get:function(){for(var i=this;null!==i.parent;)i=i.parent;return i}}]),e}(Uu),ZC=function(){function t(n,e,r){(0,R.Z)(this,t),this._node=n,this.ref=e,this._index=r}return(0,A.Z)(t,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(e){var r=new ur(e),i=Cp(this.ref,e);return new t(this._node.getChild(r),i,Ar)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(e){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(a,u){return e(new t(u,Cp(r.ref,a),Ar))})}},{key:"hasChild",value:function(e){var r=new ur(e);return!this._node.getChild(r).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),t}();function KZ(t,n){return(t=(0,X.m9)(t))._checkNotDeleted("ref"),void 0!==n?Cp(t._root,n):t._root}function $Z(t,n){(t=(0,X.m9)(t))._checkNotDeleted("refFromURL");var e=VR(n,t._repo.repoInfo_.nodeAdmin);MZ("refFromURL",e);var r=e.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Fl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),KZ(t,e.path.toString())}function Cp(t,n){return null===Mn((t=(0,X.m9)(t))._path)?(r=n,r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Fk("child","path",r,!1)):Fk("child","path",n,!1),new jl(t._repo,jr(t._path,n));var r}function JV(t,n){t=(0,X.m9)(t),Fu("push",t._path),Vl("push",n,t._path,!0);var u,e=LZ(t._repo),r=aB(e),i=Cp(t,r),a=Cp(t,r);return u=null!=n?HR(a,n).then(function(){return a}):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}function ej(t){return Fu("remove",t._path),HR(t,null)}function HR(t,n){t=(0,X.m9)(t),Fu("set",t._path),Vl("set",n,t._path,!1);var e=new X.BH;return LR(t._repo,t._path,n,null,e.wrapCallback(function(){})),e.promise}function tj(t,n){t=(0,X.m9)(t),Fu("setPriority",t._path),ZR("setPriority",n,!1);var e=new X.BH;return LR(t._repo,jr(t._path,".priority"),n,null,e.wrapCallback(function(){})),e.promise}function nj(t,n,e){if(Fu("setWithPriority",t._path),Vl("setWithPriority",n,t._path,!1),ZR("setWithPriority",e,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new X.BH;return LR(t._repo,t._path,n,e,r.wrapCallback(function(){})),r.promise}function rj(t,n){PZ("update",n,t._path,!1);var e=new X.BH;return function BV(t,n,e,r){ny(t,"update",{path:n.toString(),value:e});var i=!0,a=Uk(t),u={};if(va(e,function(v,g){i=!1,u[v]=DZ(jr(n,v),Jr(g),t.serverSyncTree_,a)}),i)da("update() called with empty data.  Don't do anything."),hd(0,r,"ok",void 0);else{var c=AC(t),h=function cV(t,n,e,r){!function DB(t,n,e,r){(0,X.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:n,children:e,writeId:r,visible:!0}),t.visibleWrites=vR(t.visibleWrites,n,e),t.lastWriteId=r}(t.pendingWriteTree_,n,e,r);var i=Ys.fromObject(e);return ty(t,new hR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,i))}(t.serverSyncTree_,n,u,c);SC(t.eventQueue_,h),t.server_.merge(n.toString(),e,function(v,g){var I="ok"===v;I||Ua("update at "+n+" failed: "+v);var D=fd(t.serverSyncTree_,c,!I),L=D.length>0?ry(t,n):n;Qs(t.eventQueue_,L,D),hd(0,r,v,g)}),va(e,function(v){var g=xR(t,jr(n,v));ry(t,g)}),Qs(t.eventQueue_,n,[])}}(t._repo,t._path,n,e.wrapCallback(function(){})),e.promise}function ij(t){t=(0,X.m9)(t);var n=new jR(function(){}),e=new WR(n);return function xV(t,n,e){var r=function pV(t,n){var e=n._path,r=null;t.syncPointTree_.foreachOnPath(e,function(v,g){var I=ss(v,e);r=r||ld(g,I)});var i=t.syncPointTree_.get(e);i?r=r||ld(i,tr()):(i=new gZ,t.syncPointTree_=t.syncPointTree_.set(e,i));var a=null!=r,u=a?new ud(r,!0,!1):null;return function XB(t){return dC(t.viewCache_)}(mZ(i,n,vC(t.pendingWriteTree_,n._path),a?u.getNode():En.EMPTY_NODE,a))}(t.serverSyncTree_,n);return null!=r?Promise.resolve(r):t.server_.get(n).then(function(i){var u,a=Jr(i).withIndex(n._queryParams.getIndex());if(IR(t.serverSyncTree_,n,e,!0),n._queryParams.loadsAllData())u=Pk(t.serverSyncTree_,n._path,a);else{var c=Mk(t.serverSyncTree_,n);u=bZ(t.serverSyncTree_,n._path,a,c)}return Qs(t.eventQueue_,n._path,u),wC(t.serverSyncTree_,n,e,null,!0),a},function(i){return ny(t,"get for query "+(0,X.Pz)(n)+" failed: "+i),Promise.reject(new Error(i))})}(t._repo,t,e).then(function(r){return new ZC(r,new jl(t._repo,t._path),t._queryParams.getIndex())})}var WR=function(){function t(n){(0,R.Z)(this,t),this.callbackContext=n}return(0,A.Z)(t,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,r){var i=r._queryParams.getIndex();return new WZ("value",this,new ZC(e.snapshotNode,new jl(r._repo,r._path),i))}},{key:"getEventRunner",value:function(e){var r=this;return"cancel"===e.getEventType()?function(){return r.callbackContext.onCancel(e.error)}:function(){return r.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,r){return this.callbackContext.hasCancelCallback?new GZ(this,e,r):null}},{key:"matches",value:function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),t}(),qZ=function(){function t(n,e){(0,R.Z)(this,t),this.eventType=n,this.callbackContext=e}return(0,A.Z)(t,[{key:"respondsTo",value:function(e){var r="children_added"===e?"child_added":e;return this.eventType===("children_removed"===r?"child_removed":r)}},{key:"createCancelEvent",value:function(e,r){return this.callbackContext.hasCancelCallback?new GZ(this,e,r):null}},{key:"createEvent",value:function(e,r){(0,X.hu)(null!=e.childName,"Child events should have a childName.");var i=Cp(new jl(r._repo,r._path),e.childName),a=r._queryParams.getIndex();return new WZ(e.type,this,new ZC(e.snapshotNode,i,a),e.prevName)}},{key:"getEventRunner",value:function(e){var r=this;return"cancel"===e.getEventType()?function(){return r.callbackContext.onCancel(e.error)}:function(){return r.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),t}();function xk(t,n,e,r,i){var a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){var u=e,c=function(I,D){FR(t._repo,t,v),u(I,D)};c.userCallback=e.userCallback,c.context=e.context,e=c}var h=new jR(e,a||void 0),v="value"===n?new WR(h):new qZ(n,h);return function GV(t,n,e){var r;r=".info"===Mn(n._path)?IR(t.infoSyncTree_,n,e):IR(t.serverSyncTree_,n,e),OZ(t.eventQueue_,n._path,r)}(t._repo,t,v),function(){return FR(t._repo,t,v)}}function GR(t,n,e,r){return xk(t,"value",n,e,r)}function YZ(t,n,e,r){return xk(t,"child_added",n,e,r)}function QZ(t,n,e,r){return xk(t,"child_changed",n,e,r)}function XZ(t,n,e,r){return xk(t,"child_moved",n,e,r)}function JZ(t,n,e,r){return xk(t,"child_removed",n,e,r)}function eN(t,n,e){var r=null,i=e?new jR(e):null;"value"===n?r=new WR(i):n&&(r=new qZ(n,i)),FR(t._repo,t,r)}var No=(0,A.Z)(function t(){(0,R.Z)(this,t)}),tN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this))._value=r,a._key=i,a}return(0,A.Z)(e,[{key:"_apply",value:function(i){Vl("endAt",this._value,i._path,!0);var a=sR(i._queryParams,this._value,this._key);if(OC(a),dd(a),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uu(i._repo,i._path,a,i._orderByCalled)}}]),e}(No);function aj(t,n){return Lk("endAt","key",n,!0),new tN(t,n)}var sj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this))._value=r,a._key=i,a}return(0,A.Z)(e,[{key:"_apply",value:function(i){Vl("endBefore",this._value,i._path,!1);var a=function hB(t,n,e){var i;return t.index_===xl?("string"==typeof n&&(n=GO(n)),i=sR(t,n,e)):i=sR(t,n,null==e?Cf:GO(e)),i.endBeforeSet_=!0,i}(i._queryParams,this._value,this._key);if(OC(a),dd(a),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uu(i._repo,i._path,a,i._orderByCalled)}}]),e}(No);function uj(t,n){return Lk("endBefore","key",n,!0),new sj(t,n)}var nN=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this))._value=r,a._key=i,a}return(0,A.Z)(e,[{key:"_apply",value:function(i){Vl("startAt",this._value,i._path,!0);var a=aR(i._queryParams,this._value,this._key);if(OC(a),dd(a),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Uu(i._repo,i._path,a,i._orderByCalled)}}]),e}(No);function oj(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Lk("startAt","key",n,!0),new nN(t,n)}var lj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this))._value=r,a._key=i,a}return(0,A.Z)(e,[{key:"_apply",value:function(i){Vl("startAfter",this._value,i._path,!1);var a=function fB(t,n,e){var r;return t.index_===xl?("string"==typeof n&&(n=WO(n)),r=aR(t,n,e)):r=aR(t,n,null==e?Ul:WO(e)),r.startAfterSet_=!0,r}(i._queryParams,this._value,this._key);if(OC(a),dd(a),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Uu(i._repo,i._path,a,i._orderByCalled)}}]),e}(No);function cj(t,n){return Lk("startAfter","key",n,!0),new lj(t,n)}var fj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this))._limit=r,i}return(0,A.Z)(e,[{key:"_apply",value:function(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uu(i._repo,i._path,function lB(t,n){var e=t.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="l",e}(i._queryParams,this._limit),i._orderByCalled)}}]),e}(No);function hj(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fj(t)}var dj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this))._limit=r,i}return(0,A.Z)(e,[{key:"_apply",value:function(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uu(i._repo,i._path,function cB(t,n){var e=t.copy();return e.limitSet_=!0,e.limit_=n,e.viewFrom_="r",e}(i._queryParams,this._limit),i._orderByCalled)}}]),e}(No);function vj(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new dj(t)}var pj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r){var i;return(0,R.Z)(this,e),(i=n.call(this))._path=r,i}return(0,A.Z)(e,[{key:"_apply",value:function(i){MC(i,"orderByChild");var a=new ur(this._path);if(On(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var u=new tR(a),c=lC(i._queryParams,u);return dd(c),new Uu(i._repo,i._path,c,!0)}}]),e}(No);function gj(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Fk("orderByChild","path",t,!1),new pj(t)}var mj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"_apply",value:function(i){MC(i,"orderByKey");var a=lC(i._queryParams,xl);return dd(a),new Uu(i._repo,i._path,a,!0)}}]),e}(No);function yj(){return new mj}var _j=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"_apply",value:function(i){MC(i,"orderByPriority");var a=lC(i._queryParams,Ar);return dd(a),new Uu(i._repo,i._path,a,!0)}}]),e}(No);function kj(){return new _j}var wj=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(){return(0,R.Z)(this,e),n.apply(this,arguments)}return(0,A.Z)(e,[{key:"_apply",value:function(i){MC(i,"orderByValue");var a=lC(i._queryParams,nR);return dd(a),new Uu(i._repo,i._path,a,!0)}}]),e}(No);function bj(){return new wj}var Ej=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this))._value=r,a._key=i,a}return(0,A.Z)(e,[{key:"_apply",value:function(i){if(Vl("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new tN(this._value,this._key)._apply(new nN(this._value,this._key)._apply(i))}}]),e}(No);function Ij(t,n){return Lk("equalTo","key",n,!0),new Ej(t,n)}function Lo(t){for(var n=(0,X.m9)(t),e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var a=0,u=r;a<u.length;a++){var c=u[a];n=c._apply(n)}return n}(function nV(t){(0,X.hu)(!yC,"__referenceConstructor has already been defined"),yC=t})(jl),function uV(t){(0,X.hu)(!kC,"__referenceConstructor has already been defined"),kC=t}(jl);var zR={};function Tj(t,n,e,r){t.repoInfo_=new WA("".concat(n,":").concat(e),!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function iN(t,n,e,r,i){var a=r||t.options.databaseURL;void 0===a&&(t.options.projectId||Fl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),da("Using default host for project ",t.options.projectId),a="".concat(t.options.projectId,"-default-rtdb.firebaseio.com"));var h,u=VR(a,i),c=u.repoInfo,v=void 0;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(h=!0,a="http://".concat(v,"?ns=").concat(c.namespace),c=(u=VR(a,i)).repoInfo):h=!u.repoInfo.secure;var g=i&&h?new wk(wk.OWNER):new hx(t.name,t.options,n);MZ("Invalid Firebase Database URL",u),On(u.path)||Fl("Database URL must point to the root of a Firebase Database (not including a child path).");var I=function Sj(t,n,e,r){var i=zR[n.name];i||(zR[n.name]=i={});var a=i[t.toURLString()];return a&&Fl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new LV(t,false,e,r),i[t.toURLString()]=a,a}(c,t,g,new fx(t.name,e));return new Rj(I,t)}var Rj=function(){function t(n,e){(0,R.Z)(this,t),this._repoInternal=n,this.app=e,this.type="database",this._instanceStarted=!1}return(0,A.Z)(t,[{key:"_repo",get:function(){return this._instanceStarted||(function FV(t,n,e){if(t.stats_=KA(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new dB(t.repoInfo_,function(r,i,a,u){FZ(t,r,i,a,u)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return UZ(t,!0)},0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new wp(t.repoInfo_,n,function(r,i,a,u){FZ(t,r,i,a,u)},function(r){UZ(t,r)},function(r){!function UV(t,n){va(n,function(e,r){NR(t,e,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,e),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(function(r){t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(function(r){t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function px(t,n){var e=t.toString();return zA[e]||(zA[e]=n()),zA[e]}(t.repoInfo_,function(){return new _B(t.stats_,t.server_)}),t.infoData_=new vB,t.infoSyncTree_=new wZ({startListening:function(i,a,u,c){var h=[],v=t.infoData_.getNode(i._path);return v.isEmpty()||(h=Pk(t.infoSyncTree_,i._path,v),setTimeout(function(){c("ok")},0)),h},stopListening:function(){}}),NR(t,"connected",!1),t.serverSyncTree_=new wZ({startListening:function(i,a,u,c){return t.server_.listen(i,u,a,function(h,v){var g=c(h,v);Qs(t.eventQueue_,i._path,g)}),[]},stopListening:function(i,a){t.server_.unlisten(i,a)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new jl(this._repo,tr())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(function Dj(t,n){var e=zR[n];(!e||e[t.key]!==t)&&Fl("Database ".concat(n,"(").concat(t.repoInfo_,") has already been deleted.")),BZ(t),delete e[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Fl("Cannot call "+e+" on a deleted database.")}}]),t}();function aN(){_O.IS_TRANSPORT_INITIALIZED&&Ua("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Pj(){aN(),$A.forceDisallow()}function Mj(){aN(),$m.forceDisallow(),$A.forceAllow()}function Oj(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(t=(0,X.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Fl("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Fl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new wk(wk.OWNER);else if(r.mockUserToken){var u="string"==typeof r.mockUserToken?r.mockUserToken:(0,X.Sg)(r.mockUserToken,t.app.options.projectId);a=new wk(u)}Tj(i,n,e,a)}function Zj(t){(t=(0,X.m9)(t))._checkNotDeleted("goOffline"),BZ(t._repo)}function Nj(t){(t=(0,X.m9)(t))._checkNotDeleted("goOnline"),function zV(t){t.persistentConnection_&&t.persistentConnection_.resume(NZ)}(t._repo)}function Lj(t,n){XM(t,n)}var Uj={".sv":"timestamp"},Vj=function(){function t(n,e){(0,R.Z)(this,t),this.committed=n,this.snapshot=e}return(0,A.Z)(t,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),t}();function jj(t,n,e){var r;if(t=(0,X.m9)(t),Fu("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,a=new X.BH,c=GR(t,function(){});return function KV(t,n,e,r,i,a){ny(t,"transaction on "+n);var u={path:n,update:e,onComplete:r,status:null,order:qM(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=UR(t,n,void 0);u.currentInputSnapshot=c;var h=u.update(c.val());if(void 0===h)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{DC("transaction failed: Data returned ",h,u.path),u.status=0;var I,v=IC(t.transactionQueueTree_,n),g=Ip(v)||[];g.push(u),PR(v,g),"object"==typeof h&&null!==h&&(0,X.r3)(h,".priority")?(I=(0,X.DV)(h,".priority"),(0,X.hu)(Nk(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(bC(t.serverSyncTree_,n)||En.EMPTY_NODE).getPriority().val();var L=Uk(t),x=Jr(h,I),K=SR(x,c,L);u.currentOutputSnapshotRaw=x,u.currentOutputSnapshotResolved=K,u.currentWriteId=AC(t);var ne=ER(t.serverSyncTree_,n,K,u.currentWriteId,u.applyLocally);Qs(t.eventQueue_,n,ne),RC(t,t.transactionQueueTree_)}}(t._repo,t._path,n,function(v,g,I){var D=null;v?a.reject(v):(D=new ZC(I,new jl(t._repo,t._path),Ar),a.resolve(new Vj(g,D)))},c,i),a.promise}wp.prototype.simpleListen=function(t,n){this.sendRequest("q",{p:t},n)},wp.prototype.echo=function(t,n){this.sendRequest("echo",{d:t},n)},function Fj(t){KM(Ki.SDK_VERSION),(0,Ki._registerComponent)(new Bs.wA("database",function(n,e){var r=e.instanceIdentifier;return iN(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),r)},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(GM,"0.13.6",t),(0,Ki.registerVersion)(GM,"0.13.6","esm2017")}();var Gj=new gs.Yd("@firebase/database-compat"),sN=function(n){Gj.warn("FIREBASE WARNING: "+n)},zj=function(n,e,r,i){if((!i||void 0!==r)&&"boolean"!=typeof r)throw new Error((0,X.gK)(n,e)+"must be a boolean.")},Kj=function(n,e,r){if(!r||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,X.gK)(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},$j=function(){function t(n){(0,R.Z)(this,t),this._delegate=n}return(0,A.Z)(t,[{key:"cancel",value:function(e){(0,X.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,X.Wj)("OnDisconnect.cancel","onComplete",e,!0);var r=this._delegate.cancel();return e&&r.then(function(){return e(null)},function(i){return e(i)}),r}},{key:"remove",value:function(e){(0,X.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,X.Wj)("OnDisconnect.remove","onComplete",e,!0);var r=this._delegate.remove();return e&&r.then(function(){return e(null)},function(i){return e(i)}),r}},{key:"set",value:function(e,r){(0,X.Dv)("OnDisconnect.set",1,2,arguments.length),(0,X.Wj)("OnDisconnect.set","onComplete",r,!0);var i=this._delegate.set(e);return r&&i.then(function(){return r(null)},function(a){return r(a)}),i}},{key:"setWithPriority",value:function(e,r,i){(0,X.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,X.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);var a=this._delegate.setWithPriority(e,r);return i&&a.then(function(){return i(null)},function(u){return i(u)}),a}},{key:"update",value:function(e,r){if((0,X.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var i={},a=0;a<e.length;++a)i[""+a]=e[a];e=i,sN("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,X.Wj)("OnDisconnect.update","onComplete",r,!0);var u=this._delegate.update(e);return r&&u.then(function(){return r(null)},function(c){return r(c)}),u}}]),t}(),qj=function(){function t(n,e){(0,R.Z)(this,t),this.committed=n,this.snapshot=e}return(0,A.Z)(t,[{key:"toJSON",value:function(){return(0,X.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),t}(),Bk=function(){function t(n,e){(0,R.Z)(this,t),this._database=n,this._delegate=e}return(0,A.Z)(t,[{key:"val",value:function(){return(0,X.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return(0,X.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return(0,X.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return(0,X.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(e){return(0,X.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Fk("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}},{key:"hasChild",value:function(e){return(0,X.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Fk("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return(0,X.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(e){var r=this;return(0,X.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,X.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(i){return e(new t(r._database,i))})}},{key:"hasChildren",value:function(){return(0,X.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return(0,X.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return(0,X.Dv)("DataSnapshot.ref",0,0,arguments.length),new Tp(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),t}(),uN=function(){function t(n,e){(0,R.Z)(this,t),this.database=n,this._delegate=e}return(0,A.Z)(t,[{key:"on",value:function(e,r,i,a){var c,u=this;(0,X.Dv)("Query.on",2,4,arguments.length),(0,X.Wj)("Query.on","callback",r,!1);var h=t.getCancelAndContextArgs_("Query.on",i,a),v=function(D,L){r.call(h.context,new Bk(u.database,D),L)};v.userCallback=r,v.context=h.context;var g=null===(c=h.cancel)||void 0===c?void 0:c.bind(h.context);switch(e){case"value":return GR(this._delegate,v,g),r;case"child_added":return YZ(this._delegate,v,g),r;case"child_removed":return JZ(this._delegate,v,g),r;case"child_changed":return QZ(this._delegate,v,g),r;case"child_moved":return XZ(this._delegate,v,g),r;default:throw new Error((0,X.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,r,i){if((0,X.Dv)("Query.off",0,3,arguments.length),Kj("Query.off",e,!0),(0,X.Wj)("Query.off","callback",r,!0),(0,X.lb)("Query.off","context",i,!0),r){var a=function(){};a.userCallback=r,a.context=i,eN(this._delegate,e,a)}else eN(this._delegate,e)}},{key:"get",value:function(){var e=this;return ij(this._delegate).then(function(r){return new Bk(e.database,r)})}},{key:"once",value:function(e,r,i,a){var u=this;(0,X.Dv)("Query.once",1,4,arguments.length),(0,X.Wj)("Query.once","callback",r,!0);var c=t.getCancelAndContextArgs_("Query.once",i,a),h=new X.BH,v=function(D,L){var x=new Bk(u.database,D);r&&r.call(c.context,x,L),h.resolve(x)};v.userCallback=r,v.context=c.context;var g=function(D){c.cancel&&c.cancel.call(c.context,D),h.reject(D)};switch(e){case"value":GR(this._delegate,v,g,{onlyOnce:!0});break;case"child_added":YZ(this._delegate,v,g,{onlyOnce:!0});break;case"child_removed":JZ(this._delegate,v,g,{onlyOnce:!0});break;case"child_changed":QZ(this._delegate,v,g,{onlyOnce:!0});break;case"child_moved":XZ(this._delegate,v,g,{onlyOnce:!0});break;default:throw new Error((0,X.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}},{key:"limitToFirst",value:function(e){return(0,X.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,Lo(this._delegate,hj(e)))}},{key:"limitToLast",value:function(e){return(0,X.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,Lo(this._delegate,vj(e)))}},{key:"orderByChild",value:function(e){return(0,X.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,Lo(this._delegate,gj(e)))}},{key:"orderByKey",value:function(){return(0,X.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,Lo(this._delegate,yj()))}},{key:"orderByPriority",value:function(){return(0,X.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,Lo(this._delegate,kj()))}},{key:"orderByValue",value:function(){return(0,X.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,Lo(this._delegate,bj()))}},{key:"startAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,X.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,Lo(this._delegate,oj(e,r)))}},{key:"startAfter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,X.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,Lo(this._delegate,cj(e,r)))}},{key:"endAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,X.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,Lo(this._delegate,aj(e,r)))}},{key:"endBefore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,X.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,Lo(this._delegate,uj(e,r)))}},{key:"equalTo",value:function(e,r){return(0,X.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,Lo(this._delegate,Ij(e,r)))}},{key:"toString",value:function(){return(0,X.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return(0,X.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(e){if((0,X.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var r="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(r)}return this._delegate.isEqual(e._delegate)}},{key:"ref",get:function(){return new Tp(this.database,new jl(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,r,i){var a={cancel:void 0,context:void 0};if(r&&i)a.cancel=r,(0,X.Wj)(e,"cancel",a.cancel,!0),a.context=i,(0,X.lb)(e,"context",a.context,!0);else if(r)if("object"==typeof r&&null!==r)a.context=r;else{if("function"!=typeof r)throw new Error((0,X.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=r}return a}}]),t}(),Tp=function(t){(0,j.Z)(e,t);var n=(0,se.Z)(e);function e(r,i){var a;return(0,R.Z)(this,e),(a=n.call(this,r,new Uu(i._repo,i._path,new $O,!1))).database=r,a._delegate=i,a}return(0,A.Z)(e,[{key:"getKey",value:function(){return(0,X.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(i){return(0,X.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new e(this.database,Cp(this._delegate,i))}},{key:"getParent",value:function(){(0,X.Dv)("Reference.parent",0,0,arguments.length);var i=this._delegate.parent;return i?new e(this.database,i):null}},{key:"getRoot",value:function(){return(0,X.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)}},{key:"set",value:function(i,a){(0,X.Dv)("Reference.set",1,2,arguments.length),(0,X.Wj)("Reference.set","onComplete",a,!0);var u=HR(this._delegate,i);return a&&u.then(function(){return a(null)},function(c){return a(c)}),u}},{key:"update",value:function(i,a){if((0,X.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){for(var u={},c=0;c<i.length;++c)u[""+c]=i[c];i=u,sN("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fu("Reference.update",this._delegate._path),(0,X.Wj)("Reference.update","onComplete",a,!0);var h=rj(this._delegate,i);return a&&h.then(function(){return a(null)},function(v){return a(v)}),h}},{key:"setWithPriority",value:function(i,a,u){(0,X.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,X.Wj)("Reference.setWithPriority","onComplete",u,!0);var c=nj(this._delegate,i,a);return u&&c.then(function(){return u(null)},function(h){return u(h)}),c}},{key:"remove",value:function(i){(0,X.Dv)("Reference.remove",0,1,arguments.length),(0,X.Wj)("Reference.remove","onComplete",i,!0);var a=ej(this._delegate);return i&&a.then(function(){return i(null)},function(u){return i(u)}),a}},{key:"transaction",value:function(i,a,u){var c=this;(0,X.Dv)("Reference.transaction",1,3,arguments.length),(0,X.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,X.Wj)("Reference.transaction","onComplete",a,!0),zj("Reference.transaction","applyLocally",u,!0);var h=jj(this._delegate,i,{applyLocally:u}).then(function(v){return new qj(v.committed,new Bk(c.database,v.snapshot))});return a&&h.then(function(v){return a(null,v.committed,v.snapshot)},function(v){return a(v,!1,null)}),h}},{key:"setPriority",value:function(i,a){(0,X.Dv)("Reference.setPriority",1,2,arguments.length),(0,X.Wj)("Reference.setPriority","onComplete",a,!0);var u=tj(this._delegate,i);return a&&u.then(function(){return a(null)},function(c){return a(c)}),u}},{key:"push",value:function(i,a){var u=this;(0,X.Dv)("Reference.push",0,2,arguments.length),(0,X.Wj)("Reference.push","onComplete",a,!0);var c=JV(this._delegate,i),h=c.then(function(g){return new e(u.database,g)});a&&h.then(function(){return a(null)},function(g){return a(g)});var v=new e(this.database,c);return v.then=h.then.bind(h),v.catch=h.catch.bind(h,void 0),v}},{key:"onDisconnect",value:function(){return Fu("Reference.onDisconnect",this._delegate._path),new $j(new zZ(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),e}(uN),Vk=function(){function t(n,e){var r=this;(0,R.Z)(this,t),this._delegate=n,this.app=e,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Pj,forceLongPolling:Mj}}return(0,A.Z)(t,[{key:"useEmulator",value:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Oj(this._delegate,e,r,i)}},{key:"ref",value:function(e){if((0,X.Dv)("database.ref",0,1,arguments.length),e instanceof Tp){var r=$Z(this._delegate,e.toString());return new Tp(this,r)}var i=KZ(this._delegate,e);return new Tp(this,i)}},{key:"refFromURL",value:function(e){var r="database.refFromURL";(0,X.Dv)(r,1,1,arguments.length);var i=$Z(this._delegate,e);return new Tp(this,i)}},{key:"goOffline",value:function(){return(0,X.Dv)("database.goOffline",0,0,arguments.length),Zj(this._delegate)}},{key:"goOnline",value:function(){return(0,X.Dv)("database.goOnline",0,0,arguments.length),Nj(this._delegate)}}]),t}();Vk.ServerValue={TIMESTAMP:function xj(){return Uj}(),increment:function(n){return function Bj(t){return{".sv":{increment:t}}}(n)}};var Qj=Object.freeze({__proto__:null,initStandalone:function Yj(t){var n=t.app,e=t.url,i=t.customAuthImpl,a=t.namespace,u=t.nodeAdmin,c=void 0!==u&&u;KM(t.version);var h=new Bs.zt("auth-internal",new Bs.H0("database-standalone"));return h.setComponent(new Bs.wA("auth-internal",function(){return i},"PRIVATE")),{instance:new Vk(iN(n,h,void 0,e,c),n),namespace:a}}}),Xj=Vk.ServerValue;function oN(t){return null==t}function lN(t){return"function"==typeof t.set}function cN(t,n){return lN(n)?n:t.ref(n)}function fN(t,n){if(function e3(t){return"string"==typeof t}(t))return n.stringCase();if(lN(t))return n.firebaseCase();if(function t3(t){return"function"==typeof t.exportVal}(t))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: ".concat(typeof t))}function jk(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gg.z;return new dr.y(function(i){var a;return a=t[e](n,function(u,c){r.schedule(function(){i.next({snapshot:u,prevKey:c})}),"once"===e&&r.schedule(function(){return i.complete()})},function(u){r.schedule(function(){return i.error(u)})}),"on"===e?{unsubscribe:function(){null!=a&&t.off(n,a)}}:{unsubscribe:function(){}}}).pipe((0,qt.U)(function(i){var a=i.snapshot,u=i.prevKey,c=null;return a.exists()&&(c=a.key),{type:n,payload:a,prevKey:u,key:c}}),(0,ZP.B)())}function hN(t,n){for(var e=t.length,r=0;r<e;r++)if(t[r].payload.key===n)return r;return-1}function i3(t,n){var e=n.payload,r=n.prevKey,i=n.key,a=hN(t,i),u=function r3(t,n){if(oN(n))return 0;var e=hN(t,n);return-1===e?t.length:e+1}(t,r);switch(n.type){case"value":if(n.payload&&n.payload.exists()){var c=null;n.payload.forEach(function(g){var I={payload:g,type:"value",prevKey:c,key:g.key};return c=g.key,t=[].concat((0,on.Z)(t),[I]),!1})}return t;case"child_added":if(a>-1){var h=t[a-1];(h&&h.key||null)!==r&&(t=t.filter(function(g){return g.payload.key!==e.key})).splice(u,0,n)}else{if(null==r)return[n].concat((0,on.Z)(t));(t=t.slice()).splice(u,0,n)}return t;case"child_removed":return t.filter(function(g){return g.payload.key!==e.key});case"child_changed":return t.map(function(g){return g.payload.key===i?n:g});case"child_moved":if(a>-1){var v=t.splice(a,1)[0];return(t=t.slice()).splice(u,0,v),t}return t;default:return t}}function dN(t){return(oN(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function vN(t,n,e){return function n3(t,n,e){return jk(t,"value","once",e).pipe(Bn(function(r){var i=[Dt(r)];return n.forEach(function(a){return i.push(jk(t,a,"on",e))}),tA.T.apply(void 0,i).pipe(z(i3,[]))}),IT())}(t,n=dN(n),e)}function pN(t,n,e){var r=(n=dN(n)).map(function(i){return jk(t,i,"on",e)});return tA.T.apply(void 0,(0,on.Z)(r))}function gN(t,n){return function(r,i){return fN(r,{stringCase:function(){return t.child(r)[n](i)},firebaseCase:function(){return r[n](i)},snapshotCase:function(){return r.ref[n](i)}})}}function o3(t){return function(e){return e?fN(e,{stringCase:function(){return t.child(e).remove()},firebaseCase:function(){return e.remove()},snapshotCase:function(){return e.ref.remove()}}):t.remove()}}function mN(t,n){return function(){return jk(t,"value","on",n)}}!function Jj(t){t.INTERNAL.registerComponent(new Bs.wA("database-compat",function(n,e){var r=e.instanceIdentifier,i=n.getProvider("app-compat").getImmediate(),a=n.getProvider("database").getImmediate({identifier:r});return new Vk(a,i)},"PUBLIC").setServiceProps({Reference:Tp,Query:uN,Database:Vk,DataSnapshot:Bk,enableLogging:Lj,INTERNAL:Qj,ServerValue:Xj}).setMultipleInstances(!0)),t.registerVersion("@firebase/database-compat","0.2.6")}(Jd.Z);var f3=new y.OlP("angularfire2.realtimeDatabaseURL"),h3=new y.OlP("angularfire2.database.use-emulator"),d3=function(){var t=function(){function n(e,r,i,a,u,c,h,v,g,I,D,L,x,K,ne){(0,R.Z)(this,n),this.schedulers=c;var re=h,Pe=(0,si.on)(e,u,r);v&&IA(Pe,u,g,D,L,x,I,K),this.database=(0,si.cc)("".concat(Pe.name,".database.").concat(i),"AngularFireDatabase",Pe.name,function(){var Ve=u.runOutsideAngular(function(){return Pe.database(i||void 0)});return re&&Ve.useEmulator.apply(Ve,(0,on.Z)(re)),Ve},[re])}return(0,A.Z)(n,[{key:"list",value:function(r,i){var a=this,u=this.schedulers.ngZone.runOutsideAngular(function(){return cN(a.database,r)}),c=u;return i&&(c=i(u)),function l3(t,n){var e=n.schedulers.outsideAngular,r=n.schedulers.ngZone.run(function(){return t.ref});return{query:t,update:gN(r,"update"),set:gN(r,"set"),push:function(a){return r.push(a)},remove:o3(r),snapshotChanges:function(a){return vN(t,a,e).pipe(yn.iC)},stateChanges:function(a){return pN(t,a,e).pipe(yn.iC)},auditTrail:function(a){return function a3(t,n,e){return function u3(t,n,e){return function s3(t,n){return jk(t,"value","on",n).pipe((0,qt.U)(function(e){var r;return e.payload.forEach(function(i){return r=i.key,!1}),{data:e,lastKeyToLoad:r}}))}(t,e).pipe(function JU(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=(0,il.jO)(n);return(0,br.e)(function(i,a){for(var u=n.length,c=new Array(u),h=n.map(function(){return!1}),v=!1,g=function(L){(0,fs.Xf)(n[L]).subscribe((0,ir.x)(a,function(x){c[L]=x,!v&&!h[L]&&(h[L]=!0,(v=h.every(ya.y))&&(h=null))},XU.Z))},I=0;I<u;I++)g(I);i.subscribe((0,ir.x)(a,function(D){if(v){var L=[D].concat(c);a.next(r?r.apply(void 0,(0,on.Z)(L)):L)}}))})}(n),(0,qt.U)(function(i){var a=(0,ye.Z)(i,2),c=a[1],h=a[0].lastKeyToLoad,v=c.map(function(g){return g.key});return{actions:c,lastKeyToLoad:h,loadedKeys:v}}),function ex(t){return(0,br.e)(function(n,e){var r=!1,i=0;n.subscribe((0,ir.x)(e,function(a){return(r||(r=!t(a,i++)))&&e.next(a)}))})}(function(i){return-1===i.loadedKeys.indexOf(i.lastKeyToLoad)}),(0,qt.U)(function(i){return i.actions}))}(t,pN(t,n).pipe(z(function(i,a){return[].concat((0,on.Z)(i),[a])},[])),e)}(t,a,e).pipe(yn.iC)},valueChanges:function(a,u){return vN(t,a,e).pipe((0,qt.U)(function(h){return h.map(function(v){return u&&u.idField?Object.assign(Object.assign({},v.payload.val()),(0,yi.Z)({},u.idField,v.key)):v.payload.val()})}),yn.iC)}}}(c,this)}},{key:"object",value:function(r){var i=this;return function c3(t,n){return{query:t,snapshotChanges:function(){return mN(t,n.schedulers.outsideAngular)().pipe(yn.iC)},update:function(r){return t.ref.update(r)},set:function(r){return t.ref.set(r)},remove:function(){return t.ref.remove()},valueChanges:function(){return mN(t,n.schedulers.outsideAngular)().pipe(yn.iC,(0,qt.U)(function(i){return i.payload.exists()?i.payload.val():null}))}}}(this.schedulers.ngZone.runOutsideAngular(function(){return cN(i.database,r)}),this)}},{key:"createPushId",value:function(){var r=this;return this.schedulers.ngZone.runOutsideAngular(function(){return r.database.ref()}).push().key}}]),n}();return t.\u0275fac=function(e){return new(e||t)(y.LFG(si.Dh),y.LFG(si.xv,8),y.LFG(f3,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(yn.HU),y.LFG(h3,8),y.LFG(hk,8),y.LFG(yA,8),y.LFG(_A,8),y.LFG(kA,8),y.LFG(wA,8),y.LFG(bA,8),y.LFG(EA,8),y.LFG(fk,8))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t}(),v3=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n),jI.Z.registerVersion("angularfire",yn.q4.full,"rtdb-compat")});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[d3]}),t}(),yN_firebase={apiKey:"AIzaSyC0R2AmJvPIu4Zp7ms4_cULRYMsgbYvWWw",authDomain:"authenticationtest-27f87.firebaseapp.com",projectId:"authenticationtest-27f87",storageBucket:"authenticationtest-27f87.appspot.com",messagingSenderId:"654873304740",appId:"1:654873304740:web:48f8a1c3078dcd96501031"},p3=function(){var t=(0,A.Z)(function n(){(0,R.Z)(this,n)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t,bootstrap:[u2]}),t.\u0275inj=y.cJS({providers:[gp],imports:[eo,s2,si.hO.initializeApp(yN_firebase,"AuthTest"),jF,YF,QU,v3]}),t}();(0,y.G48)(),Ju().bootstrapModule(p3).catch(function(t){return console.error(t)})},5867:function(St,He,U){U.d(He,{C6:function(){return ie.getApps},KN:function(){return ie.registerVersion},Mq:function(){return ie.getApp},P2:function(){return ie.deleteApp},TP:function(){return ie.onLog},Ub:function(){return ie.setLogLevel},ZF:function(){return ie.initializeApp}});var ie=U(9681);(0,ie.registerVersion)("firebase","9.10.0","app")},127:function(St,He,U){U.d(He,{Z:function(){return ie.Z}});var ie=U(3942);ie.Z.registerVersion("firebase","9.10.0","app-compat")},5881:function(St,He,U){U.r(He);var ie=U(4165),pe=U(5671),A=U(3144),R=U(5861),j=U(3942),se=U(4506),P=U(3237),ye=U(1120),y=U(136),J=U(8486),G=U(7143),Te=U(2090),Ae=(U(9681),U(1877),U(4859));function Me(){return window}function Fe(me,Ie,he){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,R.Z)((0,ie.Z)().mark(function me(Ie,he,ke){var Le,vt,it,ht,Pt;return(0,ie.Z)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return vt=Me(),it=vt.BuildInfo,(0,G.aq)(he.sessionId,"AuthEvent did not contain a session ID"),er.next=4,Je(he.sessionId);case 4:return ht=er.sent,Pt={},(0,G.ar)()?Pt.ibi=it.packageName:(0,G.as)()?Pt.apn=it.packageName:(0,G.at)(Ie,"operation-not-supported-in-this-environment"),it.displayName&&(Pt.appDisplayName=it.displayName),Pt.sessionId=ht,er.abrupt("return",(0,G.au)(Ie,ke,he.type,void 0,null!==(Le=he.eventId)&&void 0!==Le?Le:void 0,Pt));case 10:case"end":return er.stop()}},me)}))).apply(this,arguments)}function je(){return(je=(0,R.Z)((0,ie.Z)().mark(function me(Ie){var he,ke,Le;return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return he=Me(),ke=he.BuildInfo,Le={},(0,G.ar)()?Le.iosBundleId=ke.packageName:(0,G.as)()?Le.androidPackageName=ke.packageName:(0,G.at)(Ie,"operation-not-supported-in-this-environment"),it.next=5,(0,G.av)(Ie,Le);case 5:case"end":return it.stop()}},me)}))).apply(this,arguments)}function De(me){var he=Me().cordova;return new Promise(function(ke){he.plugins.browsertab.isAvailable(function(Le){var vt=null;Le?he.plugins.browsertab.openUrl(me):vt=he.InAppBrowser.open(me,(0,G.ap)()?"_blank":"_system","location=yes"),ke(vt)})})}function Se(me,Ie,he){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,R.Z)((0,ie.Z)().mark(function me(Ie,he,ke){var Le,vt,it;return(0,ie.Z)().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Le=Me(),vt=Le.cordova,it=function(){},Pt.prev=2,Pt.next=5,new Promise(function(Bt,er){var ln=null;function di(){var ni;Bt();var Mr=null===(ni=vt.plugins.browsertab)||void 0===ni?void 0:ni.close;"function"==typeof Mr&&Mr(),"function"==typeof(null==ke?void 0:ke.close)&&ke.close()}function Zn(){ln||(ln=window.setTimeout(function(){er((0,G.aw)(Ie,"redirect-cancelled-by-user"))},2e3))}function nr(){"visible"===(null==document?void 0:document.visibilityState)&&Zn()}he.addPassiveListener(di),document.addEventListener("resume",Zn,!1),(0,G.as)()&&document.addEventListener("visibilitychange",nr,!1),it=function(){he.removePassiveListener(di),document.removeEventListener("resume",Zn,!1),document.removeEventListener("visibilitychange",nr,!1),ln&&window.clearTimeout(ln)}});case 5:return Pt.prev=5,it(),Pt.finish(5);case 8:case"end":return Pt.stop()}},me,null,[[2,,5,8]])}))).apply(this,arguments)}function tt(me){var Ie,he,ke,Le,vt,it,ht,Pt,Bt,er,ln=Me();(0,G.ax)("function"==typeof(null===(Ie=null==ln?void 0:ln.universalLinks)||void 0===Ie?void 0:Ie.subscribe),me,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,G.ax)(void 0!==(null===(he=null==ln?void 0:ln.BuildInfo)||void 0===he?void 0:he.packageName),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,G.ax)("function"==typeof(null===(vt=null===(Le=null===(ke=null==ln?void 0:ln.cordova)||void 0===ke?void 0:ke.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===vt?void 0:vt.openUrl),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(Pt=null===(ht=null===(it=null==ln?void 0:ln.cordova)||void 0===it?void 0:it.plugins)||void 0===ht?void 0:ht.browsertab)||void 0===Pt?void 0:Pt.isAvailable),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(er=null===(Bt=null==ln?void 0:ln.cordova)||void 0===Bt?void 0:Bt.InAppBrowser)||void 0===er?void 0:er.open),me,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Je(me){return At.apply(this,arguments)}function At(){return(At=(0,R.Z)((0,ie.Z)().mark(function me(Ie){var he,Le;return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return he=Ze(Ie),it.next=3,crypto.subtle.digest("SHA-256",he);case 3:return Le=Array.from(new Uint8Array(it.sent)),it.abrupt("return",Le.map(function(ht){return ht.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return it.stop()}},me)}))).apply(this,arguments)}function Ze(me){if((0,G.aq)(/[0-9a-zA-Z]+/.test(me),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(me);for(var Ie=new ArrayBuffer(me.length),he=new Uint8Array(Ie),ke=0;ke<me.length;ke++)he[ke]=me.charCodeAt(ke);return he}var $=function(me){(0,y.Z)(he,me);var ke,Ie=(0,J.Z)(he);function he(){var ke;return(0,pe.Z)(this,he),(ke=Ie.apply(this,arguments)).passiveListeners=new Set,ke.initPromise=new Promise(function(Le){ke.resolveInialized=Le}),ke}return(0,A.Z)(he,[{key:"addPassiveListener",value:function(Le){this.passiveListeners.add(Le)}},{key:"removePassiveListener",value:function(Le){this.passiveListeners.delete(Le)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(Le){return this.resolveInialized(),this.passiveListeners.forEach(function(vt){return vt(Le)}),(0,P.Z)((0,ye.Z)(he.prototype),"onEvent",this).call(this,Le)}},{key:"initialized",value:(ke=(0,R.Z)((0,ie.Z)().mark(function vt(){return(0,ie.Z)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.initPromise;case 2:case"end":return ht.stop()}},vt,this)})),function Le(){return ke.apply(this,arguments)})}]),he}(G.aA);function te(me,Ie){var he=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:Ie,eventId:he,urlResponse:null,sessionId:It(),postBody:null,tenantId:me.tenantId,error:(0,G.aw)(me,"no-auth-event")}}function ue(me,Ie){return at()._set(Be(me),Ie)}function we(me){return $e.apply(this,arguments)}function $e(){return($e=(0,R.Z)((0,ie.Z)().mark(function me(Ie){var he;return(0,ie.Z)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,at()._get(Be(Ie));case 2:if(!(he=Le.sent)){Le.next=6;break}return Le.next=6,at()._remove(Be(Ie));case 6:return Le.abrupt("return",he);case 7:case"end":return Le.stop()}},me)}))).apply(this,arguments)}function pt(me,Ie){var he,ke,Le=function rn(me){var Ie=Tn(me),he=Ie.link?decodeURIComponent(Ie.link):void 0,ke=Tn(he).link,Le=Ie.deep_link_id?decodeURIComponent(Ie.deep_link_id):void 0;return Tn(Le).link||Le||ke||he||me}(Ie);if(Le.includes("/__/auth/callback")){var vt=Tn(Le),it=vt.firebaseError?function mt(me){try{return JSON.parse(me)}catch(Ie){return null}}(decodeURIComponent(vt.firebaseError)):null,ht=null===(ke=null===(he=null==it?void 0:it.code)||void 0===he?void 0:he.split("auth/"))||void 0===ke?void 0:ke[1],Pt=ht?(0,G.aw)(ht):null;return Pt?{type:me.type,eventId:me.eventId,tenantId:me.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:me.type,eventId:me.eventId,tenantId:me.tenantId,sessionId:me.sessionId,urlResponse:Le,postBody:null}}return null}function It(){for(var me=[],Ie="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",he=0;he<20;he++){var ke=Math.floor(Math.random()*Ie.length);me.push(Ie.charAt(ke))}return me.join("")}function at(){return(0,G.ay)(G.b)}function Be(me){return(0,G.az)("authEvent",me.config.apiKey,me.name)}function Tn(me){if(null==me||!me.includes("?"))return{};var Ie=me.split("?"),Le=(0,se.Z)(Ie).slice(1);return(0,Te.zd)(Le.join("?"))}var Rr=function(){function me(){(0,pe.Z)(this,me),this._redirectPersistence=G.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}return(0,A.Z)(me,[{key:"_initialize",value:(Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){var vt,it;return(0,ie.Z)().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return vt=Le._key(),(it=this.eventManagers.get(vt))||(it=new $(Le),this.eventManagers.set(vt,it),this.attachCallbackListeners(Le,it)),Pt.abrupt("return",it);case 4:case"end":return Pt.stop()}},ke,this)})),function he(ke){return Ie.apply(this,arguments)})},{key:"_openPopup",value:function(he){(0,G.at)(he,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le,vt,it,ht){var Pt,Bt,er;return(0,ie.Z)().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:return tt(Le),Zn.next=3,this._initialize(Le);case 3:return Pt=Zn.sent,Zn.next=6,Pt.initialized();case 6:return Pt.resetRedirect(),(0,G.aD)(),Zn.next=10,this._originValidation(Le);case 10:return Bt=te(Le,it,ht),Zn.next=13,ue(Le,Bt);case 13:return Zn.next=15,Fe(Le,Bt,vt);case 15:return er=Zn.sent,Zn.next=18,De(er);case 18:return Zn.abrupt("return",Se(Le,Pt,Zn.sent));case 20:case"end":return Zn.stop()}},ke,this)}));return function he(ke,Le,vt,it){return Ie.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(he,ke){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(he){var ke=he._key();return this.originValidationPromises[ke]||(this.originValidationPromises[ke]=function Ge(me){return je.apply(this,arguments)}(he)),this.originValidationPromises[ke]}},{key:"attachCallbackListeners",value:function(he,ke){var Le=Me(),vt=Le.universalLinks,it=Le.handleOpenURL,ht=Le.BuildInfo,Pt=setTimeout((0,R.Z)((0,ie.Z)().mark(function di(){return(0,ie.Z)().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:return nr.next=2,we(he);case 2:ke.onEvent(Hr());case 3:case"end":return nr.stop()}},di)})),500),Bt=function(){var di=(0,R.Z)((0,ie.Z)().mark(function Zn(nr){var ni,Mr;return(0,ie.Z)().wrap(function(xa){for(;;)switch(xa.prev=xa.next){case 0:return clearTimeout(Pt),xa.next=3,we(he);case 3:Mr=null,(ni=xa.sent)&&(null==nr?void 0:nr.url)&&(Mr=pt(ni,nr.url)),ke.onEvent(Mr||Hr());case 7:case"end":return xa.stop()}},Zn)}));return function(nr){return di.apply(this,arguments)}}();void 0!==vt&&"function"==typeof vt.subscribe&&vt.subscribe(null,Bt);var er=it,ln="".concat(ht.packageName.toLowerCase(),"://");Me().handleOpenURL=function(){var di=(0,R.Z)((0,ie.Z)().mark(function Zn(nr){return(0,ie.Z)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:if(nr.toLowerCase().startsWith(ln)&&Bt({url:nr}),"function"==typeof er)try{er(nr)}catch(Cr){console.error(Cr)}case 2:case"end":return Mr.stop()}},Zn)}));return function(Zn){return di.apply(this,arguments)}}()}}]),me;var Ie}(),or=Rr;function Hr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,G.aw)("no-auth-event")}}function An(){var me;return(null===(me=null==self?void 0:self.location)||void 0===me?void 0:me.protocol)||null}function pa(){var me=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Te.z$)();return!("file:"!==An()&&"ionic:"!==An()&&"capacitor:"!==An()||!me.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yi(){return(0,Te.w1)()&&11===(null==document?void 0:document.documentMode)}function un(){var me=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Te.z$)();return/Edge\/\d+/.test(me)}function Ui(){try{var me=self.localStorage,Ie=G.aI();if(me)return me.setItem(Ie,"1"),me.removeItem(Ie),!function lr(){var me=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Te.z$)();return Yi()||un(me)}()||(0,Te.hl)()}catch(he){return Si()&&(0,Te.hl)()}return!1}function Si(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wr(){return(function tn(){return"http:"===An()||"https:"===An()}()||(0,Te.ru)()||pa())&&!function xu(){return(0,Te.b$)()||(0,Te.UG)()}()&&Ui()&&!Si()}function Pr(){return pa()&&"undefined"!=typeof document}function Ca(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,R.Z)((0,ie.Z)().mark(function me(){return(0,ie.Z)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(Pr()){he.next=2;break}return he.abrupt("return",!1);case 2:return he.abrupt("return",new Promise(function(ke){var Le=setTimeout(function(){ke(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(Le),ke(!0)})}));case 3:case"end":return he.stop()}},me)}))).apply(this,arguments)}var jn={LOCAL:"local",NONE:"none",SESSION:"session"},Gr=G.ax,fi="persistence";function Qi(me,Ie){Gr(Object.values(jn).includes(Ie),me,"invalid-persistence-type"),(0,Te.b$)()?Gr(Ie!==jn.SESSION,me,"unsupported-persistence-type"):(0,Te.UG)()?Gr(Ie===jn.NONE,me,"unsupported-persistence-type"):Si()?Gr(Ie===jn.NONE||Ie===jn.LOCAL&&(0,Te.hl)(),me,"unsupported-persistence-type"):Gr(Ie===jn.NONE||Ui(),me,"unsupported-persistence-type")}function xt(me){return hi.apply(this,arguments)}function hi(){return(hi=(0,R.Z)((0,ie.Z)().mark(function me(Ie){var he,ke;return(0,ie.Z)().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,Ie._initializationPromise;case 2:he=Ot(),ke=G.az(fi,Ie.config.apiKey,Ie.name),he&&he.setItem(ke,Ie._getPersistence());case 5:case"end":return vt.stop()}},me)}))).apply(this,arguments)}function Ot(){var me;try{return(null===(me=function Ai(){return"undefined"!=typeof window?window:null}())||void 0===me?void 0:me.sessionStorage)||null}catch(Ie){return null}}var an=G.ax,ti=function(){function me(){(0,pe.Z)(this,me),this.browserResolver=G.ay(G.k),this.cordovaResolver=G.ay(or),this.underlyingResolver=null,this._redirectPersistence=G.a,this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}return(0,A.Z)(me,[{key:"_initialize",value:(Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.selectUnderlyingResolver();case 2:return it.abrupt("return",this.assertedUnderlyingResolver._initialize(Le));case 3:case"end":return it.stop()}},ke,this)})),function he(ke){return Ie.apply(this,arguments)})},{key:"_openPopup",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le,vt,it,ht){return(0,ie.Z)().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return Bt.next=2,this.selectUnderlyingResolver();case 2:return Bt.abrupt("return",this.assertedUnderlyingResolver._openPopup(Le,vt,it,ht));case 3:case"end":return Bt.stop()}},ke,this)}));return function he(ke,Le,vt,it){return Ie.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le,vt,it,ht){return(0,ie.Z)().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return Bt.next=2,this.selectUnderlyingResolver();case 2:return Bt.abrupt("return",this.assertedUnderlyingResolver._openRedirect(Le,vt,it,ht));case 3:case"end":return Bt.stop()}},ke,this)}));return function he(ke,Le,vt,it){return Ie.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(he,ke){this.assertedUnderlyingResolver._isIframeWebStorageSupported(he,ke)}},{key:"_originValidation",value:function(he){return this.assertedUnderlyingResolver._originValidation(he)}},{key:"_shouldInitProactively",get:function(){return Pr()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return an(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(!this.underlyingResolver){it.next=2;break}return it.abrupt("return");case 2:return it.next=4,Ca();case 4:this.underlyingResolver=it.sent?this.cordovaResolver:this.browserResolver;case 6:case"end":return it.stop()}},ke,this)}));return function he(){return Ie.apply(this,arguments)}}()}]),me;var Ie}();function pr(me){return me.unwrap()}function xi(me){return sr(me)}function sr(me){var he=(me instanceof Te.ZR?me.customData:me)._tokenResponse;if(!he)return null;if(!(me instanceof Te.ZR)&&"temporaryProof"in he&&"phoneNumber"in he)return G.P.credentialFromResult(me);var Le,ke=he.providerId;if(!ke||ke===G.o.PASSWORD)return null;switch(ke){case G.o.GOOGLE:Le=G.Q;break;case G.o.FACEBOOK:Le=G.N;break;case G.o.GITHUB:Le=G.T;break;case G.o.TWITTER:Le=G.W;break;default:var vt=he.oauthIdToken,it=he.oauthAccessToken,Pt=he.pendingToken,Bt=he.nonce;return it||he.oauthTokenSecret||vt||Pt?Pt?ke.startsWith("saml.")?G.aL._create(ke,Pt):G.J._fromParams({providerId:ke,signInMethod:ke,pendingToken:Pt,idToken:vt,accessToken:it}):new G.U(ke).credential({idToken:vt,accessToken:it,rawNonce:Bt}):null}return me instanceof Te.ZR?Le.credentialFromError(me):Le.credentialFromResult(me)}function Ht(me,Ie){return Ie.catch(function(he){throw he instanceof Te.ZR&&function zr(me,Ie){var he,ke,Le=null===(he=Ie.customData)||void 0===he?void 0:he._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ke=Ie)||void 0===ke?void 0:ke.code))Ie.resolver=new Ke(me,G.an(me,Ie));else if(Le){var it=sr(Ie),ht=Ie;it&&(ht.credential=it,ht.tenantId=Le.tenantId||void 0,ht.email=Le.email||void 0,ht.phoneNumber=Le.phoneNumber||void 0)}}(me,he),he}).then(function(he){var Le=he.user;return{operationType:he.operationType,credential:xi(he),additionalUserInfo:G.al(he),user:_e.getOrCreate(Le)}})}function Ta(me,Ie){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,R.Z)((0,ie.Z)().mark(function me(Ie,he){var ke;return(0,ie.Z)().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,he;case 2:return vt.abrupt("return",{verificationId:(ke=vt.sent).verificationId,confirm:function(ht){return Ht(Ie,ke.confirm(ht))}});case 4:case"end":return vt.stop()}},me)}))).apply(this,arguments)}var Ke=function(){function me(Ie,he){(0,pe.Z)(this,me),this.resolver=he,this.auth=function Fn(me){return me.wrapped()}(Ie)}return(0,A.Z)(me,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(he){return Ht(pr(this.auth),this.resolver.resolveSignIn(he))}}]),me}(),_e=function(){function me(Ie){(0,pe.Z)(this,me),this._delegate=Ie,this.multiFactor=G.ao(Ie)}return(0,A.Z)(me,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(he){return this._delegate.getIdTokenResult(he)}},{key:"getIdToken",value:function(he){return this._delegate.getIdToken(he)}},{key:"linkAndRetrieveDataWithCredential",value:function(he){return this.linkWithCredential(he)}},{key:"linkWithCredential",value:(Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",Ht(this.auth,G.Z(this._delegate,Le)));case 1:case"end":return it.stop()}},ke,this)})),function he(ke){return Ie.apply(this,arguments)})},{key:"linkWithPhoneNumber",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le,vt){return(0,ie.Z)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.abrupt("return",Ta(this.auth,G.l(this._delegate,Le,vt)));case 1:case"end":return ht.stop()}},ke,this)}));return function he(ke,Le){return Ie.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",Ht(this.auth,G.d(this._delegate,Le,ti)));case 1:case"end":return it.stop()}},ke,this)}));return function he(ke){return Ie.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,xt(G.aE(this.auth));case 2:return it.abrupt("return",G.g(this._delegate,Le,ti));case 3:case"end":return it.stop()}},ke,this)}));return function he(ke){return Ie.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(he){return this.reauthenticateWithCredential(he)}},{key:"reauthenticateWithCredential",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",Ht(this.auth,G._(this._delegate,Le)));case 1:case"end":return it.stop()}},ke,this)}));return function he(ke){return Ie.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(he,ke){return Ta(this.auth,G.r(this._delegate,he,ke))}},{key:"reauthenticateWithPopup",value:function(he){return Ht(this.auth,G.e(this._delegate,he,ti))}},{key:"reauthenticateWithRedirect",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,xt(G.aE(this.auth));case 2:return it.abrupt("return",G.h(this._delegate,Le,ti));case 3:case"end":return it.stop()}},ke,this)}));return function he(ke){return Ie.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(he){return G.ab(this._delegate,he)}},{key:"unlink",value:function(){var Ie=(0,R.Z)((0,ie.Z)().mark(function ke(Le){return(0,ie.Z)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,G.ak(this._delegate,Le);case 2:return it.abrupt("return",this);case 3:case"end":return it.stop()}},ke,this)}));return function he(ke){return Ie.apply(this,arguments)}}()},{key:"updateEmail",value:function(he){return G.ag(this._delegate,he)}},{key:"updatePassword",value:function(he){return G.ah(this._delegate,he)}},{key:"updatePhoneNumber",value:function(he){return G.u(this._delegate,he)}},{key:"updateProfile",value:function(he){return G.af(this._delegate,he)}},{key:"verifyBeforeUpdateEmail",value:function(he,ke){return G.ac(this._delegate,he,ke)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(he){return me.USER_MAP.has(he)||me.USER_MAP.set(he,new me(he)),me.USER_MAP.get(he)}}]),me;var Ie}();_e.USER_MAP=new WeakMap;var le=G.ax,ve=function(){var me=function(){function Ie(he,ke){if((0,pe.Z)(this,Ie),this.app=he,ke.isInitialized())return this._delegate=ke.getImmediate(),void this.linkUnderlyingAuth();var Le=he.options.apiKey;le(Le,"invalid-api-key",{appName:he.name}),le(Le,"invalid-api-key",{appName:he.name});var vt="undefined"!=typeof window?ti:void 0;this._delegate=ke.initialize({options:{persistence:Oe(Le,he.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(G.B),this.linkUnderlyingAuth()}return(0,A.Z)(Ie,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?_e.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(ke){this._delegate.languageCode=ke}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(ke){this._delegate.tenantId=ke}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(ke,Le){G.G(this._delegate,ke,Le)}},{key:"applyActionCode",value:function(ke){return G.a2(this._delegate,ke)}},{key:"checkActionCode",value:function(ke){return G.a3(this._delegate,ke)}},{key:"confirmPasswordReset",value:function(ke,Le){return G.a1(this._delegate,ke,Le)}},{key:"createUserWithEmailAndPassword",value:(he=(0,R.Z)((0,ie.Z)().mark(function Le(vt,it){return(0,ie.Z)().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.abrupt("return",Ht(this._delegate,G.a5(this._delegate,vt,it)));case 1:case"end":return Pt.stop()}},Le,this)})),function ke(Le,vt){return he.apply(this,arguments)})},{key:"fetchProvidersForEmail",value:function(ke){return this.fetchSignInMethodsForEmail(ke)}},{key:"fetchSignInMethodsForEmail",value:function(ke){return G.aa(this._delegate,ke)}},{key:"isSignInWithEmailLink",value:function(ke){return G.a8(this._delegate,ke)}},{key:"getRedirectResult",value:function(){var he=(0,R.Z)((0,ie.Z)().mark(function Le(){var vt;return(0,ie.Z)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return le(Wr(),this._delegate,"operation-not-supported-in-this-environment"),ht.next=3,G.j(this._delegate,ti);case 3:if(vt=ht.sent){ht.next=6;break}return ht.abrupt("return",{credential:null,user:null});case 6:return ht.abrupt("return",Ht(this._delegate,Promise.resolve(vt)));case 7:case"end":return ht.stop()}},Le,this)}));return function ke(){return he.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(ke){!function ci(me,Ie){(0,G.aE)(me)._logFramework(Ie)}(this._delegate,ke)}},{key:"onAuthStateChanged",value:function(ke,Le,vt){var it=Re(ke,Le,vt);return this._delegate.onAuthStateChanged(it.next,it.error,it.complete)}},{key:"onIdTokenChanged",value:function(ke,Le,vt){var it=Re(ke,Le,vt);return this._delegate.onIdTokenChanged(it.next,it.error,it.complete)}},{key:"sendSignInLinkToEmail",value:function(ke,Le){return G.a7(this._delegate,ke,Le)}},{key:"sendPasswordResetEmail",value:function(ke,Le){return G.a0(this._delegate,ke,Le||void 0)}},{key:"setPersistence",value:function(){var he=(0,R.Z)((0,ie.Z)().mark(function Le(vt){var it;return(0,ie.Z)().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:Qi(this._delegate,vt),Bt.t0=vt,Bt.next=Bt.t0===jn.SESSION?4:Bt.t0===jn.LOCAL?6:Bt.t0===jn.NONE?11:13;break;case 4:return it=G.a,Bt.abrupt("break",14);case 6:return Bt.next=8,G.ay(G.i)._isAvailable();case 8:return it=Bt.sent?G.i:G.b,Bt.abrupt("break",14);case 11:return it=G.L,Bt.abrupt("break",14);case 13:return Bt.abrupt("return",G.at("argument-error",{appName:this._delegate.name}));case 14:return Bt.abrupt("return",this._delegate.setPersistence(it));case 15:case"end":return Bt.stop()}},Le,this)}));return function ke(Le){return he.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(ke){return this.signInWithCredential(ke)}},{key:"signInAnonymously",value:function(){return Ht(this._delegate,G.X(this._delegate))}},{key:"signInWithCredential",value:function(ke){return Ht(this._delegate,G.Y(this._delegate,ke))}},{key:"signInWithCustomToken",value:function(ke){return Ht(this._delegate,G.$(this._delegate,ke))}},{key:"signInWithEmailAndPassword",value:function(ke,Le){return Ht(this._delegate,G.a6(this._delegate,ke,Le))}},{key:"signInWithEmailLink",value:function(ke,Le){return Ht(this._delegate,G.a9(this._delegate,ke,Le))}},{key:"signInWithPhoneNumber",value:function(ke,Le){return Ta(this._delegate,G.s(this._delegate,ke,Le))}},{key:"signInWithPopup",value:function(){var he=(0,R.Z)((0,ie.Z)().mark(function Le(vt){return(0,ie.Z)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return le(Wr(),this._delegate,"operation-not-supported-in-this-environment"),ht.abrupt("return",Ht(this._delegate,G.c(this._delegate,vt,ti)));case 2:case"end":return ht.stop()}},Le,this)}));return function ke(Le){return he.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var he=(0,R.Z)((0,ie.Z)().mark(function Le(vt){return(0,ie.Z)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return le(Wr(),this._delegate,"operation-not-supported-in-this-environment"),ht.next=3,xt(this._delegate);case 3:return ht.abrupt("return",G.f(this._delegate,vt,ti));case 4:case"end":return ht.stop()}},Le,this)}));return function ke(Le){return he.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(ke){return this._delegate.updateCurrentUser(ke)}},{key:"verifyPasswordResetCode",value:function(ke){return G.a4(this._delegate,ke)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var ke=this;this._delegate.wrapped=function(){return ke}}}]),Ie;var he}();return me.Persistence=jn,me}();function Re(me,Ie,he){var ke=me;"function"!=typeof me&&(ke=me.next,Ie=me.error,he=me.complete);var Le=ke;return{next:function(ht){return Le(ht&&_e.getOrCreate(ht))},error:Ie,complete:he}}function Oe(me,Ie){var he=function Hn(me,Ie){var he=Ot();if(!he)return[];var ke=G.az(fi,me,Ie);switch(he.getItem(ke)){case jn.NONE:return[G.L];case jn.LOCAL:return[G.i,G.a];case jn.SESSION:return[G.a];default:return[]}}(me,Ie);if("undefined"!=typeof self&&!he.includes(G.i)&&he.push(G.i),"undefined"!=typeof window)for(var ke=0,Le=[G.b,G.a];ke<Le.length;ke++){var vt=Le[ke];he.includes(vt)||he.push(vt)}return he.includes(G.L)||he.push(G.L),he}var et=function(){function me(){(0,pe.Z)(this,me),this.providerId="phone",this._delegate=new G.P(pr(j.Z.auth()))}return(0,A.Z)(me,[{key:"verifyPhoneNumber",value:function(he,ke){return this._delegate.verifyPhoneNumber(he,ke)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(he,ke){return G.P.credential(he,ke)}}]),me}();et.PHONE_SIGN_IN_METHOD=G.P.PHONE_SIGN_IN_METHOD,et.PROVIDER_ID=G.P.PROVIDER_ID;var dt=G.ax,Zt=function(){function me(Ie,he){var Le,ke=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.Z.app();(0,pe.Z)(this,me),dt(null===(Le=ke.options)||void 0===Le?void 0:Le.apiKey,"invalid-api-key",{appName:ke.name}),this._delegate=new G.R(Ie,he,ke.auth()),this.type=this._delegate.type}return(0,A.Z)(me,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),me}();!function Gt(me){me.INTERNAL.registerComponent(new Ae.wA("auth-compat",function(Ie){var he=Ie.getProvider("app-compat").getImmediate(),ke=Ie.getProvider("auth");return new ve(he,ke)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:G.A.EMAIL_SIGNIN,PASSWORD_RESET:G.A.PASSWORD_RESET,RECOVER_EMAIL:G.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:G.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:G.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:G.A.VERIFY_EMAIL}},EmailAuthProvider:G.M,FacebookAuthProvider:G.N,GithubAuthProvider:G.T,GoogleAuthProvider:G.Q,OAuthProvider:G.U,SAMLAuthProvider:G.V,PhoneAuthProvider:et,PhoneMultiFactorGenerator:G.m,RecaptchaVerifier:Zt,TwitterAuthProvider:G.W,Auth:ve,AuthCredential:G.H,Error:Te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),me.registerVersion("@firebase/auth-compat","0.2.20")}(j.Z)},9751:function(St,He,U){U.d(He,{y:function(){return J}});var ie=U(5671),pe=U(3144),A=U(930),R=U(727),j=U(8822),se=U(9635),P=U(2416),ye=U(576),y=U(2806),J=function(){var Ee=function(){function Ae(Me){(0,ie.Z)(this,Ae),Me&&(this._subscribe=Me)}return(0,pe.Z)(Ae,[{key:"lift",value:function(be){var Fe=new Ae;return Fe.source=this,Fe.operator=be,Fe}},{key:"subscribe",value:function(be,Fe,Ue){var Ge=this,je=function Q(Ee){return Ee&&Ee instanceof A.Lv||function Te(Ee){return Ee&&(0,ye.m)(Ee.next)&&(0,ye.m)(Ee.error)&&(0,ye.m)(Ee.complete)}(Ee)&&(0,R.Nn)(Ee)}(be)?be:new A.Hp(be,Fe,Ue);return(0,y.x)(function(){var De=Ge.operator,Se=Ge.source;je.add(De?De.call(je,Se):Se?Ge._subscribe(je):Ge._trySubscribe(je))}),je}},{key:"_trySubscribe",value:function(be){try{return this._subscribe(be)}catch(Fe){be.error(Fe)}}},{key:"forEach",value:function(be,Fe){var Ue=this;return new(Fe=G(Fe))(function(Ge,je){var De=new A.Hp({next:function(Qe){try{be(Qe)}catch(tt){je(tt),De.unsubscribe()}},error:je,complete:Ge});Ue.subscribe(De)})}},{key:"_subscribe",value:function(be){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(be)}},{key:j.L,value:function(){return this}},{key:"pipe",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];return(0,se.U)(Fe)(this)}},{key:"toPromise",value:function(be){var Fe=this;return new(be=G(be))(function(Ue,Ge){var je;Fe.subscribe(function(De){return je=De},function(De){return Ge(De)},function(){return Ue(je)})})}}]),Ae}();return Ee.create=function(Ae){return new Ee(Ae)},Ee}();function G(Ee){var Ae;return null!==(Ae=null!=Ee?Ee:P.v.Promise)&&void 0!==Ae?Ae:Promise}},7579:function(St,He,U){U.d(He,{x:function(){return Ee}});var ie=U(7762),pe=U(5671),A=U(3144),R=U(3237),j=U(1120),se=U(136),P=U(8486),ye=U(9751),y=U(727),G=(0,U(3888).d)(function(Me){return function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Te=U(8737),Q=U(2806),Ee=function(){var Me=function(be){(0,se.Z)(Ue,be);var Fe=(0,P.Z)(Ue);function Ue(){var Ge;return(0,pe.Z)(this,Ue),(Ge=Fe.call(this)).closed=!1,Ge.currentObservers=null,Ge.observers=[],Ge.isStopped=!1,Ge.hasError=!1,Ge.thrownError=null,Ge}return(0,A.Z)(Ue,[{key:"lift",value:function(je){var De=new Ae(this,this);return De.operator=je,De}},{key:"_throwIfClosed",value:function(){if(this.closed)throw new G}},{key:"next",value:function(je){var De=this;(0,Q.x)(function(){if(De._throwIfClosed(),!De.isStopped){De.currentObservers||(De.currentObservers=Array.from(De.observers));var Qe,Se=(0,ie.Z)(De.currentObservers);try{for(Se.s();!(Qe=Se.n()).done;)Qe.value.next(je)}catch(Je){Se.e(Je)}finally{Se.f()}}})}},{key:"error",value:function(je){var De=this;(0,Q.x)(function(){if(De._throwIfClosed(),!De.isStopped){De.hasError=De.isStopped=!0,De.thrownError=je;for(var Se=De.observers;Se.length;)Se.shift().error(je)}})}},{key:"complete",value:function(){var je=this;(0,Q.x)(function(){if(je._throwIfClosed(),!je.isStopped){je.isStopped=!0;for(var De=je.observers;De.length;)De.shift().complete()}})}},{key:"unsubscribe",value:function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}},{key:"observed",get:function(){var je;return(null===(je=this.observers)||void 0===je?void 0:je.length)>0}},{key:"_trySubscribe",value:function(je){return this._throwIfClosed(),(0,R.Z)((0,j.Z)(Ue.prototype),"_trySubscribe",this).call(this,je)}},{key:"_subscribe",value:function(je){return this._throwIfClosed(),this._checkFinalizedStatuses(je),this._innerSubscribe(je)}},{key:"_innerSubscribe",value:function(je){var De=this,tt=this.observers;return this.hasError||this.isStopped?y.Lc:(this.currentObservers=null,tt.push(je),new y.w0(function(){De.currentObservers=null,(0,Te.P)(tt,je)}))}},{key:"_checkFinalizedStatuses",value:function(je){var Qe=this.isStopped;this.hasError?je.error(this.thrownError):Qe&&je.complete()}},{key:"asObservable",value:function(){var je=new ye.y;return je.source=this,je}}]),Ue}(ye.y);return Me.create=function(be,Fe){return new Ae(be,Fe)},Me}(),Ae=function(Me){(0,se.Z)(Fe,Me);var be=(0,P.Z)(Fe);function Fe(Ue,Ge){var je;return(0,pe.Z)(this,Fe),(je=be.call(this)).destination=Ue,je.source=Ge,je}return(0,A.Z)(Fe,[{key:"next",value:function(Ge){var je,De;null===(De=null===(je=this.destination)||void 0===je?void 0:je.next)||void 0===De||De.call(je,Ge)}},{key:"error",value:function(Ge){var je,De;null===(De=null===(je=this.destination)||void 0===je?void 0:je.error)||void 0===De||De.call(je,Ge)}},{key:"complete",value:function(){var Ge,je;null===(je=null===(Ge=this.destination)||void 0===Ge?void 0:Ge.complete)||void 0===je||je.call(Ge)}},{key:"_subscribe",value:function(Ge){var je,De;return null!==(De=null===(je=this.source)||void 0===je?void 0:je.subscribe(Ge))&&void 0!==De?De:y.Lc}}]),Fe}(Ee)},930:function(St,He,U){U.d(He,{Hp:function(){return Se},Lv:function(){return Ue}});var ie=U(5671),pe=U(3144),A=U(7326),R=U(3237),j=U(1120),se=U(136),P=U(8486),ye=U(576),y=U(727),J=U(2416),G=U(7849),Te=U(5032),Q=Me("C",void 0,void 0);function Me(Ze,oe,$){return{kind:Ze,value:oe,error:$}}var be=U(3410),Fe=U(2806),Ue=function(Ze){(0,se.Z)($,Ze);var oe=(0,P.Z)($);function $(te){var ue;return(0,ie.Z)(this,$),(ue=oe.call(this)).isStopped=!1,te?(ue.destination=te,(0,y.Nn)(te)&&te.add((0,A.Z)(ue))):ue.destination=At,ue}return(0,pe.Z)($,[{key:"next",value:function(ue){this.isStopped?Je(function Ae(Ze){return Me("N",Ze,void 0)}(ue),this):this._next(ue)}},{key:"error",value:function(ue){this.isStopped?Je(function Ee(Ze){return Me("E",void 0,Ze)}(ue),this):(this.isStopped=!0,this._error(ue))}},{key:"complete",value:function(){this.isStopped?Je(Q,this):(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,(0,R.Z)((0,j.Z)($.prototype),"unsubscribe",this).call(this),this.destination=null)}},{key:"_next",value:function(ue){this.destination.next(ue)}},{key:"_error",value:function(ue){try{this.destination.error(ue)}finally{this.unsubscribe()}}},{key:"_complete",value:function(){try{this.destination.complete()}finally{this.unsubscribe()}}}],[{key:"create",value:function(ue,we,$e){return new Se(ue,we,$e)}}]),$}(y.w0),Ge=Function.prototype.bind;function je(Ze,oe){return Ge.call(Ze,oe)}var De=function(){function Ze(oe){(0,ie.Z)(this,Ze),this.partialObserver=oe}return(0,pe.Z)(Ze,[{key:"next",value:function($){var te=this.partialObserver;if(te.next)try{te.next($)}catch(ue){Qe(ue)}}},{key:"error",value:function($){var te=this.partialObserver;if(te.error)try{te.error($)}catch(ue){Qe(ue)}else Qe($)}},{key:"complete",value:function(){var $=this.partialObserver;if($.complete)try{$.complete()}catch(te){Qe(te)}}}]),Ze}(),Se=function(Ze){(0,se.Z)($,Ze);var oe=(0,P.Z)($);function $(te,ue,we){var $e,pt,It;return(0,ie.Z)(this,$),$e=oe.call(this),(0,ye.m)(te)||!te?pt={next:null!=te?te:void 0,error:null!=ue?ue:void 0,complete:null!=we?we:void 0}:(0,A.Z)($e)&&J.v.useDeprecatedNextContext?((It=Object.create(te)).unsubscribe=function(){return $e.unsubscribe()},pt={next:te.next&&je(te.next,It),error:te.error&&je(te.error,It),complete:te.complete&&je(te.complete,It)}):pt=te,$e.destination=new De(pt),$e}return(0,pe.Z)($)}(Ue);function Qe(Ze){J.v.useDeprecatedSynchronousErrorHandling?(0,Fe.O)(Ze):(0,G.h)(Ze)}function Je(Ze,oe){var $=J.v.onStoppedNotification;$&&be.z.setTimeout(function(){return $(Ze,oe)})}var At={closed:!0,next:Te.Z,error:function tt(Ze){throw Ze},complete:Te.Z}},727:function(St,He,U){U.d(He,{Lc:function(){return J},w0:function(){return y},Nn:function(){return G}});var Q,ie=U(4902),pe=U(7762),A=U(5671),R=U(3144),j=U(576),P=(0,U(3888).d)(function(Q){return function(Ae){Q(this),this.message=Ae?"".concat(Ae.length," errors occurred during unsubscription:\n").concat(Ae.map(function(Me,be){return"".concat(be+1,") ").concat(Me.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=Ae}}),ye=U(8737),y=function(){function Q(Ee){(0,A.Z)(this,Q),this.initialTeardown=Ee,this.closed=!1,this._parentage=null,this._finalizers=null}return(0,R.Z)(Q,[{key:"unsubscribe",value:function(){var Ae;if(!this.closed){this.closed=!0;var Me=this._parentage;if(Me)if(this._parentage=null,Array.isArray(Me)){var Fe,be=(0,pe.Z)(Me);try{for(be.s();!(Fe=be.n()).done;)Fe.value.remove(this)}catch(tt){be.e(tt)}finally{be.f()}}else Me.remove(this);var Ge=this.initialTeardown;if((0,j.m)(Ge))try{Ge()}catch(tt){Ae=tt instanceof P?tt.errors:[tt]}var je=this._finalizers;if(je){this._finalizers=null;var Se,De=(0,pe.Z)(je);try{for(De.s();!(Se=De.n()).done;){var Qe=Se.value;try{Te(Qe)}catch(tt){Ae=null!=Ae?Ae:[],tt instanceof P?Ae=[].concat((0,ie.Z)(Ae),(0,ie.Z)(tt.errors)):Ae.push(tt)}}}catch(tt){De.e(tt)}finally{De.f()}}if(Ae)throw new P(Ae)}}},{key:"add",value:function(Ae){var Me;if(Ae&&Ae!==this)if(this.closed)Te(Ae);else{if(Ae instanceof Q){if(Ae.closed||Ae._hasParent(this))return;Ae._addParent(this)}(this._finalizers=null!==(Me=this._finalizers)&&void 0!==Me?Me:[]).push(Ae)}}},{key:"_hasParent",value:function(Ae){var Me=this._parentage;return Me===Ae||Array.isArray(Me)&&Me.includes(Ae)}},{key:"_addParent",value:function(Ae){var Me=this._parentage;this._parentage=Array.isArray(Me)?(Me.push(Ae),Me):Me?[Me,Ae]:Ae}},{key:"_removeParent",value:function(Ae){var Me=this._parentage;Me===Ae?this._parentage=null:Array.isArray(Me)&&(0,ye.P)(Me,Ae)}},{key:"remove",value:function(Ae){var Me=this._finalizers;Me&&(0,ye.P)(Me,Ae),Ae instanceof Q&&Ae._removeParent(this)}}]),Q}();y.EMPTY=((Q=new y).closed=!0,Q);var J=y.EMPTY;function G(Q){return Q instanceof y||Q&&"closed"in Q&&(0,j.m)(Q.remove)&&(0,j.m)(Q.add)&&(0,j.m)(Q.unsubscribe)}function Te(Q){(0,j.m)(Q)?Q():Q.unsubscribe()}},2416:function(St,He,U){U.d(He,{v:function(){return ie}});var ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:function(St,He,U){U.d(He,{E:function(){return pe}});var pe=new(U(9751).y)(function(j){return j.complete()})},8996:function(St,He,U){U.d(He,{D:function(){return De}});var ie=U(8421),pe=U(5363),A=U(9468),se=U(9751),ye=U(2202),y=U(576),J=U(9672);function Te(Se,Qe){if(!Se)throw new Error("Iterable cannot be null");return new se.y(function(tt){(0,J.f)(tt,Qe,function(){var Je=Se[Symbol.asyncIterator]();(0,J.f)(tt,Qe,function(){Je.next().then(function(At){At.done?tt.complete():tt.next(At.value)})},0,!0)})})}var Q=U(3670),Ee=U(8239),Ae=U(1144),Me=U(6495),be=U(2206),Fe=U(4532),Ue=U(3260);function De(Se,Qe){return Qe?function je(Se,Qe){if(null!=Se){if((0,Q.c)(Se))return function R(Se,Qe){return(0,ie.Xf)(Se).pipe((0,A.R)(Qe),(0,pe.Q)(Qe))}(Se,Qe);if((0,Ae.z)(Se))return function P(Se,Qe){return new se.y(function(tt){var Je=0;return Qe.schedule(function(){Je===Se.length?tt.complete():(tt.next(Se[Je++]),tt.closed||this.schedule())})})}(Se,Qe);if((0,Ee.t)(Se))return function j(Se,Qe){return(0,ie.Xf)(Se).pipe((0,A.R)(Qe),(0,pe.Q)(Qe))}(Se,Qe);if((0,be.D)(Se))return Te(Se,Qe);if((0,Me.T)(Se))return function G(Se,Qe){return new se.y(function(tt){var Je;return(0,J.f)(tt,Qe,function(){Je=Se[ye.h](),(0,J.f)(tt,Qe,function(){var At,Ze;try{var oe=Je.next();At=oe.value,Ze=oe.done}catch($){return void tt.error($)}Ze?tt.complete():tt.next(At)},0,!0)}),function(){return(0,y.m)(null==Je?void 0:Je.return)&&Je.return()}})}(Se,Qe);if((0,Ue.L)(Se))return function Ge(Se,Qe){return Te((0,Ue.Q)(Se),Qe)}(Se,Qe)}throw(0,Fe.z)(Se)}(Se,Qe):(0,ie.Xf)(Se)}},8421:function(St,He,U){U.d(He,{Xf:function(){return Ae}});var ie=U(4165),pe=U(7762),A=U(655),R=U(1144),j=U(8239),se=U(9751),P=U(3670),ye=U(2206),y=U(4532),J=U(6495),G=U(3260),Te=U(576),Q=U(7849),Ee=U(8822);function Ae(Se){if(Se instanceof se.y)return Se;if(null!=Se){if((0,P.c)(Se))return function Me(Se){return new se.y(function(Qe){var tt=Se[Ee.L]();if((0,Te.m)(tt.subscribe))return tt.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,R.z)(Se))return function be(Se){return new se.y(function(Qe){for(var tt=0;tt<Se.length&&!Qe.closed;tt++)Qe.next(Se[tt]);Qe.complete()})}(Se);if((0,j.t)(Se))return function Fe(Se){return new se.y(function(Qe){Se.then(function(tt){Qe.closed||(Qe.next(tt),Qe.complete())},function(tt){return Qe.error(tt)}).then(null,Q.h)})}(Se);if((0,ye.D)(Se))return Ge(Se);if((0,J.T)(Se))return function Ue(Se){return new se.y(function(Qe){var Je,tt=(0,pe.Z)(Se);try{for(tt.s();!(Je=tt.n()).done;)if(Qe.next(Je.value),Qe.closed)return}catch(Ze){tt.e(Ze)}finally{tt.f()}Qe.complete()})}(Se);if((0,G.L)(Se))return function je(Se){return Ge((0,G.Q)(Se))}(Se)}throw(0,y.z)(Se)}function Ge(Se){return new se.y(function(Qe){(function De(Se,Qe){var tt,Je,At,Ze;return(0,A.mG)(this,void 0,void 0,(0,ie.Z)().mark(function oe(){return(0,ie.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:ue.prev=0,tt=(0,A.KL)(Se);case 2:return ue.next=4,tt.next();case 4:if((Je=ue.sent).done){ue.next=12;break}if(Qe.next(Je.value),!Qe.closed){ue.next=10;break}return ue.abrupt("return");case 10:ue.next=2;break;case 12:ue.next=17;break;case 14:ue.prev=14,ue.t0=ue.catch(0),At={error:ue.t0};case 17:if(ue.prev=17,ue.prev=18,!Je||Je.done||!(Ze=tt.return)){ue.next=22;break}return ue.next=22,Ze.call(tt);case 22:if(ue.prev=22,!At){ue.next=25;break}throw At.error;case 25:return ue.finish(22);case 26:return ue.finish(17);case 27:Qe.complete();case 28:case"end":return ue.stop()}},oe,null,[[0,14,17,27],[18,,22,26]])}))})(Se,Qe).catch(function(tt){return Qe.error(tt)})})}},6451:function(St,He,U){U.d(He,{T:function(){return se}});var ie=U(8189),pe=U(8421),A=U(515),R=U(7669),j=U(8996);function se(){for(var P=arguments.length,ye=new Array(P),y=0;y<P;y++)ye[y]=arguments[y];var J=(0,R.yG)(ye),G=(0,R._6)(ye,1/0),Te=ye;return Te.length?1===Te.length?(0,pe.Xf)(Te[0]):(0,ie.J)(G)((0,j.D)(Te,J)):A.E}},5403:function(St,He,U){U.d(He,{x:function(){return y}});var ie=U(5671),pe=U(3144),A=U(7326),R=U(136),j=U(8486),se=U(3237),P=U(1120);function y(G,Te,Q,Ee,Ae){return new J(G,Te,Q,Ee,Ae)}var J=function(G){(0,R.Z)(Q,G);var Te=(0,j.Z)(Q);function Q(Ee,Ae,Me,be,Fe,Ue){var Ge,je,De,Se;return(0,ie.Z)(this,Q),(Se=Te.call(this,Ee)).onFinalize=Fe,Se.shouldUnsubscribe=Ue,Se._next=Ae?function(Qe){try{Ae(Qe)}catch(tt){Ee.error(tt)}}:(0,se.Z)((Ge=(0,A.Z)(Se),(0,P.Z)(Q.prototype)),"_next",Ge),Se._error=be?function(Qe){try{be(Qe)}catch(tt){Ee.error(tt)}finally{this.unsubscribe()}}:(0,se.Z)((je=(0,A.Z)(Se),(0,P.Z)(Q.prototype)),"_error",je),Se._complete=Me?function(){try{Me()}catch(Qe){Ee.error(Qe)}finally{this.unsubscribe()}}:(0,se.Z)((De=(0,A.Z)(Se),(0,P.Z)(Q.prototype)),"_complete",De),Se}return(0,pe.Z)(Q,[{key:"unsubscribe",value:function(){var Ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var Me=this.closed;(0,se.Z)((0,P.Z)(Q.prototype),"unsubscribe",this).call(this),!Me&&(null===(Ae=this.onFinalize)||void 0===Ae||Ae.call(this))}}}]),Q}(U(930).Lv)},4004:function(St,He,U){U.d(He,{U:function(){return A}});var ie=U(4482),pe=U(5403);function A(R,j){return(0,ie.e)(function(se,P){var ye=0;se.subscribe((0,pe.x)(P,function(y){P.next(R.call(j,y,ye++))}))})}},8189:function(St,He,U){U.d(He,{J:function(){return A}});var ie=U(5577),pe=U(4671);function A(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return(0,ie.z)(pe.y,R)}},5577:function(St,He,U){U.d(He,{z:function(){return ye}});var ie=U(4004),pe=U(8421),A=U(4482),R=U(9672),j=U(5403);function se(y,J,G,Te,Q,Ee,Ae,Me){var be=[],Fe=0,Ue=0,Ge=!1,je=function(){Ge&&!be.length&&!Fe&&J.complete()},De=function(tt){return Fe<Te?Se(tt):be.push(tt)},Se=function Qe(tt){Ee&&J.next(tt),Fe++;var Je=!1;(0,pe.Xf)(G(tt,Ue++)).subscribe((0,j.x)(J,function(At){null==Q||Q(At),Ee?De(At):J.next(At)},function(){Je=!0},void 0,function(){if(Je)try{Fe--;for(var At=function(){var oe=be.shift();Ae?(0,R.f)(J,Ae,function(){return Qe(oe)}):Qe(oe)};be.length&&Fe<Te;)At();je()}catch(Ze){J.error(Ze)}}))};return y.subscribe((0,j.x)(J,De,function(){Ge=!0,je()})),function(){null==Me||Me()}}var P=U(576);function ye(y,J){var G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return(0,P.m)(J)?ye(function(Te,Q){return(0,ie.U)(function(Ee,Ae){return J(Te,Ee,Q,Ae)})((0,pe.Xf)(y(Te,Q)))},G):("number"==typeof J&&(G=J),(0,A.e)(function(Te,Q){return se(Te,Q,y,G)}))}},5363:function(St,He,U){U.d(He,{Q:function(){return R}});var ie=U(9672),pe=U(4482),A=U(5403);function R(j){var se=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,pe.e)(function(P,ye){P.subscribe((0,A.x)(ye,function(y){return(0,ie.f)(ye,j,function(){return ye.next(y)},se)},function(){return(0,ie.f)(ye,j,function(){return ye.complete()},se)},function(y){return(0,ie.f)(ye,j,function(){return ye.error(y)},se)}))})}},3099:function(St,He,U){U.d(He,{B:function(){return j}});var ie=U(8421),pe=U(7579),A=U(930),R=U(4482);function j(){var P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ye=P.connector,y=void 0===ye?function(){return new pe.x}:ye,J=P.resetOnError,G=void 0===J||J,Te=P.resetOnComplete,Q=void 0===Te||Te,Ee=P.resetOnRefCountZero,Ae=void 0===Ee||Ee;return function(Me){var be,Fe,Ue,Ge=0,je=!1,De=!1,Se=function(){null==Fe||Fe.unsubscribe(),Fe=void 0},Qe=function(){Se(),be=Ue=void 0,je=De=!1},tt=function(){var At=be;Qe(),null==At||At.unsubscribe()};return(0,R.e)(function(Je,At){Ge++,!De&&!je&&Se();var Ze=Ue=null!=Ue?Ue:y();At.add(function(){0==--Ge&&!De&&!je&&(Fe=se(tt,Ae))}),Ze.subscribe(At),!be&&Ge>0&&(be=new A.Hp({next:function($){return Ze.next($)},error:function($){De=!0,Se(),Fe=se(Qe,G,$),Ze.error($)},complete:function(){je=!0,Se(),Fe=se(Qe,Q),Ze.complete()}}),(0,ie.Xf)(Je).subscribe(be))})(Me)}}function se(P,ye){if(!0!==ye){if(!1!==ye){for(var y=new A.Hp({next:function(){y.unsubscribe(),P()}}),J=arguments.length,G=new Array(J>2?J-2:0),Te=2;Te<J;Te++)G[Te-2]=arguments[Te];return ye.apply(void 0,G).subscribe(y)}}else P()}},9468:function(St,He,U){U.d(He,{R:function(){return pe}});var ie=U(4482);function pe(A){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,ie.e)(function(j,se){se.add(A.schedule(function(){return j.subscribe(se)},R))})}},8505:function(St,He,U){U.d(He,{b:function(){return j}});var ie=U(576),pe=U(4482),A=U(5403),R=U(4671);function j(se,P,ye){var y=(0,ie.m)(se)||P||ye?{next:se,error:P,complete:ye}:se;return y?(0,pe.e)(function(J,G){var Te;null===(Te=y.subscribe)||void 0===Te||Te.call(y);var Q=!0;J.subscribe((0,A.x)(G,function(Ee){var Ae;null===(Ae=y.next)||void 0===Ae||Ae.call(y,Ee),G.next(Ee)},function(){var Ee;Q=!1,null===(Ee=y.complete)||void 0===Ee||Ee.call(y),G.complete()},function(Ee){var Ae;Q=!1,null===(Ae=y.error)||void 0===Ae||Ae.call(y,Ee),G.error(Ee)},function(){var Ee,Ae;Q&&(null===(Ee=y.unsubscribe)||void 0===Ee||Ee.call(y)),null===(Ae=y.finalize)||void 0===Ae||Ae.call(y)}))}):R.y}},4408:function(St,He,U){U.d(He,{o:function(){return G}});var ie=U(5671),pe=U(3144),A=U(3237),R=U(1120),j=U(136),se=U(8486),ye=function(Te){(0,j.Z)(Ee,Te);var Q=(0,se.Z)(Ee);function Ee(Ae,Me){return(0,ie.Z)(this,Ee),Q.call(this)}return(0,pe.Z)(Ee,[{key:"schedule",value:function(Me){return this}}]),Ee}(U(727).w0),y={setInterval:function(Te){function Q(Ee,Ae){return Te.apply(this,arguments)}return Q.toString=function(){return Te.toString()},Q}(function(Te,Q){for(var Ee=y.delegate,Ae=arguments.length,Me=new Array(Ae>2?Ae-2:0),be=2;be<Ae;be++)Me[be-2]=arguments[be];return null!=Ee&&Ee.setInterval?Ee.setInterval.apply(Ee,[Te,Q].concat(Me)):setInterval.apply(void 0,[Te,Q].concat(Me))}),clearInterval:function(Te){function Q(Ee){return Te.apply(this,arguments)}return Q.toString=function(){return Te.toString()},Q}(function(Te){var Q=y.delegate;return((null==Q?void 0:Q.clearInterval)||clearInterval)(Te)}),delegate:void 0},J=U(8737),G=function(Te){(0,j.Z)(Ee,Te);var Q=(0,se.Z)(Ee);function Ee(Ae,Me){var be;return(0,ie.Z)(this,Ee),(be=Q.call(this,Ae,Me)).scheduler=Ae,be.work=Me,be.pending=!1,be}return(0,pe.Z)(Ee,[{key:"schedule",value:function(Me){var Fe,be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=Me;var Ue=this.id,Ge=this.scheduler;return null!=Ue&&(this.id=this.recycleAsyncId(Ge,Ue,be)),this.pending=!0,this.delay=be,this.id=null!==(Fe=this.id)&&void 0!==Fe?Fe:this.requestAsyncId(Ge,this.id,be),this}},{key:"requestAsyncId",value:function(Me,be){var Fe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y.setInterval(Me.flush.bind(Me,this),Fe)}},{key:"recycleAsyncId",value:function(Me,be){var Fe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!=Fe&&this.delay===Fe&&!1===this.pending)return be;null!=be&&y.clearInterval(be)}},{key:"execute",value:function(Me,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var Fe=this._execute(Me,be);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(Me,be){var Ue,Fe=!1;try{this.work(Me)}catch(Ge){Fe=!0,Ue=Ge||new Error("Scheduled action threw falsy error")}if(Fe)return this.unsubscribe(),Ue}},{key:"unsubscribe",value:function(){if(!this.closed){var Me=this.id,be=this.scheduler,Fe=be.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(Fe,this),null!=Me&&(this.id=this.recycleAsyncId(be,Me,null)),this.delay=null,(0,A.Z)((0,R.Z)(Ee.prototype),"unsubscribe",this).call(this)}}}]),Ee}(ye)},7565:function(St,He,U){U.d(He,{v:function(){return P}});var ie=U(5671),pe=U(3144),A=U(136),R=U(8486),j=U(6063),se=function(){function ye(y){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.now;(0,ie.Z)(this,ye),this.schedulerActionCtor=y,this.now=J}return(0,pe.Z)(ye,[{key:"schedule",value:function(J){var G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Te=arguments.length>2?arguments[2]:void 0;return new this.schedulerActionCtor(this,J).schedule(Te,G)}}]),ye}();se.now=j.l.now;var P=function(ye){(0,A.Z)(J,ye);var y=(0,R.Z)(J);function J(G){var Te,Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se.now;return(0,ie.Z)(this,J),(Te=y.call(this,G,Q)).actions=[],Te._active=!1,Te}return(0,pe.Z)(J,[{key:"flush",value:function(Te){var Q=this.actions;if(this._active)Q.push(Te);else{var Ee;this._active=!0;do{if(Ee=Te.execute(Te.state,Te.delay))break}while(Te=Q.shift());if(this._active=!1,Ee){for(;Te=Q.shift();)Te.unsubscribe();throw Ee}}}}]),J}(se)},4986:function(St,He,U){U.d(He,{z:function(){return A}});var ie=U(4408),A=new(U(7565).v)(ie.o)},6063:function(St,He,U){U.d(He,{l:function(){return ie}});var ie={now:function(){return(ie.delegate||Date).now()},delegate:void 0}},3410:function(St,He,U){U.d(He,{z:function(){return ie}});var ie={setTimeout:function(pe){function A(R,j){return pe.apply(this,arguments)}return A.toString=function(){return pe.toString()},A}(function(pe,A){for(var R=ie.delegate,j=arguments.length,se=new Array(j>2?j-2:0),P=2;P<j;P++)se[P-2]=arguments[P];return null!=R&&R.setTimeout?R.setTimeout.apply(R,[pe,A].concat(se)):setTimeout.apply(void 0,[pe,A].concat(se))}),clearTimeout:function(pe){function A(R){return pe.apply(this,arguments)}return A.toString=function(){return pe.toString()},A}(function(pe){var A=ie.delegate;return((null==A?void 0:A.clearTimeout)||clearTimeout)(pe)}),delegate:void 0}},2202:function(St,He,U){U.d(He,{h:function(){return pe}});var pe=function ie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:function(St,He,U){U.d(He,{L:function(){return ie}});var ie="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:function(St,He,U){U.d(He,{_6:function(){return se},jO:function(){return R},yG:function(){return j}});var ie=U(576);function A(P){return P[P.length-1]}function R(P){return(0,ie.m)(A(P))?P.pop():void 0}function j(P){return function pe(P){return P&&(0,ie.m)(P.schedule)}(A(P))?P.pop():void 0}function se(P,ye){return"number"==typeof A(P)?P.pop():ye}},8737:function(St,He,U){function ie(pe,A){if(pe){var R=pe.indexOf(A);0<=R&&pe.splice(R,1)}}U.d(He,{P:function(){return ie}})},3888:function(St,He,U){function ie(pe){var R=pe(function(se){Error.call(se),se.stack=(new Error).stack});return R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R}U.d(He,{d:function(){return ie}})},2806:function(St,He,U){U.d(He,{O:function(){return R},x:function(){return A}});var ie=U(2416),pe=null;function A(j){if(ie.v.useDeprecatedSynchronousErrorHandling){var se=!pe;if(se&&(pe={errorThrown:!1,error:null}),j(),se){var P=pe;if(pe=null,P.errorThrown)throw P.error}}else j()}function R(j){ie.v.useDeprecatedSynchronousErrorHandling&&pe&&(pe.errorThrown=!0,pe.error=j)}},9672:function(St,He,U){function ie(pe,A,R){var j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,se=arguments.length>4&&void 0!==arguments[4]&&arguments[4],P=A.schedule(function(){R(),se?pe.add(this.schedule(null,j)):this.unsubscribe()},j);if(pe.add(P),!se)return P}U.d(He,{f:function(){return ie}})},4671:function(St,He,U){function ie(pe){return pe}U.d(He,{y:function(){return ie}})},1144:function(St,He,U){U.d(He,{z:function(){return ie}});var ie=function(A){return A&&"number"==typeof A.length&&"function"!=typeof A}},2206:function(St,He,U){U.d(He,{D:function(){return pe}});var ie=U(576);function pe(A){return Symbol.asyncIterator&&(0,ie.m)(null==A?void 0:A[Symbol.asyncIterator])}},576:function(St,He,U){function ie(pe){return"function"==typeof pe}U.d(He,{m:function(){return ie}})},3670:function(St,He,U){U.d(He,{c:function(){return A}});var ie=U(8822),pe=U(576);function A(R){return(0,pe.m)(R[ie.L])}},6495:function(St,He,U){U.d(He,{T:function(){return A}});var ie=U(2202),pe=U(576);function A(R){return(0,pe.m)(null==R?void 0:R[ie.h])}},8239:function(St,He,U){U.d(He,{t:function(){return pe}});var ie=U(576);function pe(A){return(0,ie.m)(null==A?void 0:A.then)}},3260:function(St,He,U){U.d(He,{L:function(){return j},Q:function(){return R}});var ie=U(4165),pe=U(655),A=U(576);function R(se){return(0,pe.FC)(this,arguments,(0,ie.Z)().mark(function P(){var ye,y,J;return(0,ie.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:ye=se.getReader(),Q.prev=1;case 2:return Q.next=5,(0,pe.qq)(ye.read());case 5:if(J=(y=Q.sent).value,!y.done){Q.next=12;break}return Q.next=11,(0,pe.qq)(void 0);case 11:return Q.abrupt("return",Q.sent);case 12:return Q.next=14,(0,pe.qq)(J);case 14:return Q.next=16,Q.sent;case 16:Q.next=2;break;case 18:return Q.prev=18,ye.releaseLock(),Q.finish(18);case 21:case"end":return Q.stop()}},P,null,[[1,,18,21]])}))}function j(se){return(0,A.m)(null==se?void 0:se.getReader)}},4482:function(St,He,U){U.d(He,{A:function(){return pe},e:function(){return A}});var ie=U(576);function pe(R){return(0,ie.m)(null==R?void 0:R.lift)}function A(R){return function(j){if(pe(j))return j.lift(function(se){try{return R(se,this)}catch(P){this.error(P)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:function(St,He,U){function ie(){}U.d(He,{Z:function(){return ie}})},9635:function(St,He,U){U.d(He,{U:function(){return A},z:function(){return pe}});var ie=U(4671);function pe(){for(var R=arguments.length,j=new Array(R),se=0;se<R;se++)j[se]=arguments[se];return A(j)}function A(R){return 0===R.length?ie.y:1===R.length?R[0]:function(se){return R.reduce(function(P,ye){return ye(P)},se)}}},7849:function(St,He,U){U.d(He,{h:function(){return A}});var ie=U(2416),pe=U(3410);function A(R){pe.z.setTimeout(function(){var j=ie.v.onUnhandledError;if(!j)throw R;j(R)})}},4532:function(St,He,U){function ie(pe){return new TypeError("You provided ".concat(null!==pe&&"object"==typeof pe?"an invalid object":"'".concat(pe,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}U.d(He,{z:function(){return ie}})},655:function(St,He,U){function R(Ze,oe){var $={};for(var te in Ze)Object.prototype.hasOwnProperty.call(Ze,te)&&oe.indexOf(te)<0&&($[te]=Ze[te]);if(null!=Ze&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(te=Object.getOwnPropertySymbols(Ze);ue<te.length;ue++)oe.indexOf(te[ue])<0&&Object.prototype.propertyIsEnumerable.call(Ze,te[ue])&&($[te[ue]]=Ze[te[ue]])}return $}function ye(Ze,oe,$,te){return new($||($=Promise))(function(we,$e){function pt(Be){try{at(te.next(Be))}catch(mt){$e(mt)}}function It(Be){try{at(te.throw(Be))}catch(mt){$e(mt)}}function at(Be){Be.done?we(Be.value):function ue(we){return we instanceof $?we:new $(function($e){$e(we)})}(Be.value).then(pt,It)}at((te=te.apply(Ze,oe||[])).next())})}function be(Ze){return this instanceof be?(this.v=Ze,this):new be(Ze)}function Fe(Ze,oe,$){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,te=$.apply(Ze,oe||[]),we=[];return ue={},$e("next"),$e("throw"),$e("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function $e(rn){te[rn]&&(ue[rn]=function(Tn){return new Promise(function(Wn,Rr){we.push([rn,Tn,Wn,Rr])>1||pt(rn,Tn)})})}function pt(rn,Tn){try{!function It(rn){rn.value instanceof be?Promise.resolve(rn.value.v).then(at,Be):mt(we[0][2],rn)}(te[rn](Tn))}catch(Wn){mt(we[0][3],Wn)}}function at(rn){pt("next",rn)}function Be(rn){pt("throw",rn)}function mt(rn,Tn){rn(Tn),we.shift(),we.length&&pt(we[0][0],we[0][1])}}function Ge(Ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $,oe=Ze[Symbol.asyncIterator];return oe?oe.call(Ze):(Ze=function Te(Ze){var oe="function"==typeof Symbol&&Symbol.iterator,$=oe&&Ze[oe],te=0;if($)return $.call(Ze);if(Ze&&"number"==typeof Ze.length)return{next:function(){return Ze&&te>=Ze.length&&(Ze=void 0),{value:Ze&&Ze[te++],done:!Ze}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ze),$={},te("next"),te("throw"),te("return"),$[Symbol.asyncIterator]=function(){return this},$);function te(we){$[we]=Ze[we]&&function($e){return new Promise(function(pt,It){!function ue(we,$e,pt,It){Promise.resolve(It).then(function(at){we({value:at,done:pt})},$e)}(pt,It,($e=Ze[we]($e)).done,$e.value)})}}}U.d(He,{FC:function(){return Fe},KL:function(){return Ge},_T:function(){return R},mG:function(){return ye},qq:function(){return be}})},5e3:function(St,He,U){U.d(He,{$8M:function(){return no},$Z:function(){return Vs},AFp:function(){return qE},AaK:function(){return De},CHM:function(){return ec},CRH:function(){return km},CZH:function(){return qv},CqO:function(){return D0},D6c:function(){return tk},EJc:function(){return S_},EpF:function(){return T0},F4k:function(){return Na},FYo:function(){return Qp},FiY:function(){return z},G48:function(){return Fm},GfV:function(){return Xp},JOm:function(){return mu},KtG:function(){return tc},LFG:function(){return Dn},LSH:function(){return co},Lbi:function(){return Im},Lck:function(){return Y0},MAs:function(){return I0},MMx:function(){return J0},NdJ:function(){return zg},OlP:function(){return rr},Oqu:function(){return em},PXZ:function(){return mS},Q6J:function(){return wv},QGY:function(){return Ah},QP$:function(){return er},Qsj:function(){return HC},R0b:function(){return $s},RDi:function(){return nh},Rgc:function(){return Wv},SBq:function(){return Yp},Sil:function(){return lS},Suo:function(){return c_},TTD:function(){return $l},TgZ:function(){return qc},X6Q:function(){return B_},XFs:function(){return xt},Xpm:function(){return Vt},Xts:function(){return dy},Y36:function(){return ho},YKP:function(){return dm},YNc:function(){return Sh},Yjl:function(){return it},Yz7:function(){return un},Z0I:function(){return Wr},ZZ4:function(){return X_},_UZ:function(){return Hg},_Vd:function(){return Mc},_c5:function(){return MS},_uU:function(){return rt},aQg:function(){return Bm},c2e:function(){return uS},cJS:function(){return Ui},cg1:function(){return Av},dDg:function(){return dS},dqk:function(){return Ht},eFA:function(){return Am},eoX:function(){return N_},f3M:function(){return Ic},g9A:function(){return qh},h0i:function(){return bo},hGG:function(){return ek},iGM:function(){return Ml},ifc:function(){return sr},ip1:function(){return $E},jDz:function(){return e_},kL8:function(){return im},lG2:function(){return vt},lqb:function(){return dl},lri:function(){return Dm},oAB:function(){return he},q4F:function(){return Ja},qLn:function(){return zd},qZA:function(){return Ev},rWj:function(){return Z_},s9C:function(){return S0},sBO:function(){return V_},sIi:function(){return yv},s_b:function(){return mm},soG:function(){return Yv},tb:function(){return Cm},tp0:function(){return fe},uIk:function(){return Bg},vHH:function(){return oe},vpe:function(){return Du},wAp:function(){return sn},xp6:function(){return Zw},z2F:function(){return np},zSh:function(){return jp},zs3:function(){return ph}});var ie=U(3237),pe=U(1120),se=(U(7685),U(4942),U(4506),U(7326)),P=U(7762),ye=U(4902),y=U(5647),J=U(3144),G=U(5671),Te=U(136),Q=U(8486),Ee=U(5724),Ae=U(727),Me=U(7579),be=U(9751),Fe=U(6451),Ue=U(3099);function Ge(s){for(var o in s)if(s[o]===Ge)return o;throw Error("Could not find renamed property on target object.")}function De(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(De).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return"".concat(s.overriddenName);if(s.name)return"".concat(s.name);var o=s.toString();if(null==o)return""+o;var l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function Se(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}var Qe=Ge({__forward_ref__:Ge});function tt(s){return s.__forward_ref__=tt,s.toString=function(){return De(this())},s}function Je(s){return function At(s){return"function"==typeof s&&s.hasOwnProperty(Qe)&&s.__forward_ref__===tt}(s)?s():s}var oe=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d){var p;return(0,G.Z)(this,l),(p=o.call(this,function $(s,o){var l="NG0".concat(Math.abs(s));return"".concat(l).concat(o?": "+o.trim():"")}(f,d))).code=f,p}return(0,J.Z)(l)}((0,Ee.Z)(Error));function te(s){return"string"==typeof s?s:null==s?"":String(s)}function It(s,o){throw o&&" in ".concat(o),new oe(-201,!1)}function An(s,o){null==s&&function tn(s,o,l,f){throw new Error("ASSERTION ERROR: ".concat(s)+(null==f?"":" [Expected=> ".concat(l," ").concat(f," ").concat(o," <=Actual]")))}(o,s,null,"!=")}function un(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ui(s){return{providers:s.providers||[],imports:s.imports||[]}}function Si(s){return Pr(s,jn)||Pr(s,fi)}function Wr(s){return null!==Si(s)}function Pr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ai(s){return s&&(s.hasOwnProperty(Gr)||s.hasOwnProperty(Qi))?s[Gr]:null}var hi,jn=Ge({"\u0275prov":Ge}),Gr=Ge({"\u0275inj":Ge}),fi=Ge({ngInjectableDef:Ge}),Qi=Ge({ngInjectorDef:Ge}),xt=function(){return(xt=xt||{})[xt.Default=0]="Default",xt[xt.Host=1]="Host",xt[xt.Self=2]="Self",xt[xt.SkipSelf=4]="SkipSelf",xt[xt.Optional=8]="Optional",xt}();function Hn(){return hi}function Ot(s){var o=hi;return hi=s,o}function an(s,o,l){var f=Si(s);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:l&xt.Optional?null:void 0!==o?o:void It(De(s),"Injector")}function pr(s){return{toString:s}.toString()}var Fn=function(){return(Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn}(),sr=function(){return(s=sr||(sr={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",sr;var s}(),Ht=function(){return"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self}(),Ke={},_e=[],le=Ge({"\u0275cmp":Ge}),ve=Ge({"\u0275dir":Ge}),Re=Ge({"\u0275pipe":Ge}),Oe=Ge({"\u0275mod":Ge}),et=Ge({"\u0275fac":Ge}),dt=Ge({__NG_ELEMENT_ID__:Ge}),Zt=0;function Vt(s){return pr(function(){var l=!0===s.standalone,f={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||_e,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||sr.Emulated,id:"c".concat(Zt++),styles:s.styles||_e,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,m=s.features;return d.inputs=Le(s.inputs,f),d.outputs=Le(s.outputs),m&&m.forEach(function(C){return C(d)}),d.directiveDefs=p?function(){return("function"==typeof p?p():p).map(me).filter(Ie)}:null,d.pipeDefs=p?function(){return("function"==typeof p?p():p).map(Bt).filter(Ie)}:null,d})}function me(s){return ht(s)||Pt(s)}function Ie(s){return null!==s}function he(s){return pr(function(){return{type:s.type,bootstrap:s.bootstrap||_e,declarations:s.declarations||_e,imports:s.imports||_e,exports:s.exports||_e,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}})}function Le(s,o){if(null==s)return Ke;var l={};for(var f in s)if(s.hasOwnProperty(f)){var d=s[f],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),l[d]=f,o&&(o[d]=p)}return l}var vt=Vt;function it(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ht(s){return s[le]||null}function Pt(s){return s[ve]||null}function Bt(s){return s[Re]||null}function er(s){var o=ht(s)||Pt(s)||Bt(s);return null!==o&&o.standalone}function ln(s,o){var l=s[Oe]||null;if(!l&&!0===o)throw new Error("Type ".concat(De(s)," does not have '\u0275mod' property."));return l}function Lr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ji(s){return Array.isArray(s)&&!0===s[1]}function Gl(s){return 0!=(8&s.flags)}function tu(s){return 2==(2&s.flags)}function zl(s){return 1==(1&s.flags)}function cr(s){return null!==s.template}function pd(s){return 0!=(256&s[2])}function Vi(s,o){return s.hasOwnProperty(et)?s[et]:null}var Mp=function(){function s(o,l,f){(0,G.Z)(this,s),this.previousValue=o,this.currentValue=l,this.firstChange=f}return(0,J.Z)(s,[{key:"isFirstChange",value:function(){return this.firstChange}}]),s}();function $l(){return ql}function ql(s){return s.type.prototype.ngOnChanges&&(s.setInput=ru),Op}function Op(){var s=gd(this),o=null==s?void 0:s.current;if(o){var l=s.previous;if(l===Ke)s.previous=o;else for(var f in o)l[f]=o[f];s.current=null,this.ngOnChanges(o)}}function ru(s,o,l,f){var d=gd(s)||function Uo(s,o){return s[ea]=o}(s,{previous:Ke,current:null}),p=d.current||(d.current={}),m=d.previous,C=this.declaredInputs[l],S=m[C];p[C]=new Mp(S&&S.currentValue,o,m===Ke),s[f]=o}$l.ngInherit=!0;var ea="__ngSimpleChanges__";function gd(s){return s[ea]||null}function fr(s){for(;Array.isArray(s);)s=s[0];return s}function Fr(s,o){return fr(o[s.index])}function iu(s,o){return s.data[o]}function ii(s,o){var l=o[s];return Lr(l)?l:l[0]}function Dr(s){return 64==(64&s[2])}function Wi(s,o){return null==o?null:s[o]}function Vo(s){s[18]=0}function au(s,o){s[5]+=o;for(var l=s,f=s[3];null!==f&&(1===o&&1===l[5]||-1===o&&0===l[5]);)f[5]+=o,l=f,f=f[3]}var Qt={lFrame:uu(null),bindingsEnabled:!0};function Ho(){return Qt.bindingsEnabled}function ft(){return Qt.lFrame.lView}function Cn(){return Qt.lFrame.tView}function ec(s){return Qt.lFrame.contextLView=s,s[8]}function tc(s){return Qt.lFrame.contextLView=null,s}function hr(){for(var s=Wo();null!==s&&64===s.type;)s=s.parent;return s}function Wo(){return Qt.lFrame.currentTNode}function pi(s,o){var l=Qt.lFrame;l.currentTNode=s,l.isParent=o}function Wa(){return Qt.lFrame.isParent}function Ku(){return Qt.lFrame.bindingIndex++}function ic(s,o){var l=Qt.lFrame;l.bindingIndex=l.bindingRootIndex=s,zo(o)}function zo(s){Qt.lFrame.currentDirectiveIndex=s}function ac(){return Qt.lFrame.currentQueryIndex}function Ko(s){Qt.lFrame.currentQueryIndex=s}function sc(s){var o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function $o(s,o,l){if(l&xt.SkipSelf){for(var f=o,d=s;!(null!==(f=f.parent)||l&xt.Host||null===(f=sc(d))||(d=d[15],10&f.type)););if(null===f)return!1;o=f,s=d}var p=Qt.lFrame=su();return p.currentTNode=o,p.lView=s,!0}function Ds(s){var o=su(),l=s[1];Qt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function su(){var s=Qt.lFrame,o=null===s?null:s.child;return null===o?uu(s):o}function uu(s){var o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function uc(){var s=Qt.lFrame;return Qt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}var qo=uc;function qu(){var s=uc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ur(){return Qt.lFrame.selectedIndex}function ga(s){Qt.lFrame.selectedIndex=s}function zn(){var s=Qt.lFrame;return iu(s.tView,s.selectedIndex)}function mi(s,o){for(var l=o.directiveStart,f=o.directiveEnd;l<f;l++){var p=s.data[l].type.prototype,m=p.ngAfterContentInit,C=p.ngAfterContentChecked,S=p.ngAfterViewInit,F=p.ngAfterViewChecked,W=p.ngOnDestroy;m&&(s.contentHooks||(s.contentHooks=[])).push(-l,m),C&&((s.contentHooks||(s.contentHooks=[])).push(l,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,C)),S&&(s.viewHooks||(s.viewHooks=[])).push(-l,S),F&&((s.viewHooks||(s.viewHooks=[])).push(l,F),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,F)),null!=W&&(s.destroyHooks||(s.destroyHooks=[])).push(l,W)}}function As(s,o,l){Id(s,o,3,l)}function lc(s,o,l,f){(3&s[2])===l&&Id(s,o,l,f)}function Hf(s,o){var l=s[2];(3&l)===o&&(l&=2047,s[2]=l+=1)}function Id(s,o,l,f){for(var p=null!=f?f:-1,m=o.length-1,C=0,S=void 0!==f?65535&s[18]:0;S<m;S++)if("number"==typeof o[S+1]){if(C=o[S],null!=f&&C>=f)break}else o[S]<0&&(s[18]+=65536),(C<p||-1==p)&&(cc(s,l,o,S),s[18]=(4294901760&s[18])+S+2),S++}function cc(s,o,l,f){var d=l[f]<0,p=l[f+1],C=s[d?-l[f]:l[f]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}var gr=(0,J.Z)(function s(o,l,f){(0,G.Z)(this,s),this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=f});function Yu(s,o,l){for(var f=0;f<l.length;){var d=l[f];if("number"==typeof d){if(0!==d)break;f++;var p=l[f++],m=l[f++],C=l[f++];s.setAttribute(o,m,C,p)}else{var S=d,F=l[++f];Gf(S)?s.setProperty(o,S,F):s.setAttribute(o,S,F),f++}}return f}function vc(s){return 3===s||4===s||6===s}function Gf(s){return 64===s.charCodeAt(0)}function ai(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else for(var l=-1,f=0;f<o.length;f++){var d=o[f];"number"==typeof d?l=d:0===l||zf(s,l,d,null,-1===l||2===l?o[++f]:null)}return s}function zf(s,o,l,f,d){var p=0,m=s.length;if(-1===o)m=-1;else for(;p<s.length;){var C=s[p++];if("number"==typeof C){if(C===o){m=-1;break}if(C>o){m=p-1;break}}}for(;p<s.length;){var S=s[p];if("number"==typeof S)break;if(S===l){if(null===f)return void(null!==d&&(s[p+1]=d));if(f===s[p+1])return void(s[p+2]=d)}p++,null!==f&&p++,null!==d&&p++}-1!==m&&(s.splice(m,0,o),p=m+1),s.splice(p++,0,l),null!==f&&s.splice(p++,0,f),null!==d&&s.splice(p++,0,d)}function Qu(s){return-1!==s}function Xu(s){return 32767&s}function Ps(s,o){for(var l=function pc(s){return s>>16}(s),f=o;l>0;)f=f[15],l--;return f}var Kf=!0;function Ra(s){var o=Kf;return Kf=s,o}var Ju=0,ma={};function ou(s,o){var l=gc(s,o);if(-1!==l)return l;var f=o[1];f.firstCreatePass&&(s.injectorIndex=o.length,eo(f.data,s),eo(o,null),eo(f.blueprint,null));var d=lu(s,o),p=s.injectorIndex;if(Qu(d))for(var m=Xu(d),C=Ps(d,o),S=C[1].data,F=0;F<8;F++)o[p+F]=C[m+F]|S[m+F];return o[p+8]=d,p}function eo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function gc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function lu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;for(var l=0,f=null,d=o;null!==d;){if(null===(f=Yf(d)))return-1;if(l++,d=d[15],-1!==f.injectorIndex)return f.injectorIndex|l<<16}return-1}function cu(s,o,l){!function el(s,o,l){var f;"string"==typeof l?f=l.charCodeAt(0)||0:l.hasOwnProperty(dt)&&(f=l[dt]),null==f&&(f=l[dt]=Ju++);var d=255&f;o.data[s+(d>>5)]|=1<<d}(s,o,l)}function Ms(s,o,l){if(l&xt.Optional||void 0!==s)return s;It(0,"NodeInjector")}function Os(s,o,l,f){if(l&xt.Optional&&void 0===f&&(f=null),0==(l&(xt.Self|xt.Host))){var d=s[9],p=Ot(void 0);try{return d?d.get(o,f,l&xt.Optional):an(o,f,l&xt.Optional)}finally{Ot(p)}}return Ms(f,0,l)}function $f(s,o,l){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xt.Default,d=arguments.length>4?arguments[4]:void 0;if(null!==s){if(1024&o[2]){var p=$a(s,o,l,f,ma);if(p!==ma)return p}var m=to(s,o,l,f,ma);if(m!==ma)return m}return Os(o,l,f,d)}function to(s,o,l,f,d){var p=function mc(s){if("string"==typeof s)return s.charCodeAt(0)||0;var o=s.hasOwnProperty(dt)?s[dt]:void 0;return"number"==typeof o?o>=0?255&o:Np:o}(l);if("function"==typeof p){if(!$o(o,s,f))return f&xt.Host?Ms(d,0,f):Os(o,l,f,d);try{var m=p(f);if(null!=m||f&xt.Optional)return m;It()}finally{qo()}}else if("number"==typeof p){var C=null,S=gc(s,o),F=-1,W=f&xt.Host?o[16][6]:null;for((-1===S||f&xt.SkipSelf)&&(-1!==(F=-1===S?lu(s,o):o[S+8])&&Sd(f,!1)?(C=o[1],S=Xu(F),o=Ps(F,o)):S=-1);-1!==S;){var q=o[1];if(nl(p,S,q.data)){var ae=Dd(S,o,l,C,f,W);if(ae!==ma)return ae}-1!==(F=o[S+8])&&Sd(f,o[1].data[S+8]===W)&&nl(p,S,o)?(C=q,S=Xu(F),o=Ps(F,o)):S=-1}}return d}function Dd(s,o,l,f,d,p){var m=o[1],C=m.data[s+8],W=Ga(C,m,l,null==f?tu(C)&&Kf:f!=m&&0!=(3&C.type),d&xt.Host&&p===C);return null!==W?za(o,m,W,C):ma}function Ga(s,o,l,f,d){for(var p=s.providerIndexes,m=o.data,C=1048575&p,S=s.directiveStart,W=p>>20,ae=d?C+W:s.directiveEnd,ge=f?C:C+W;ge<ae;ge++){var xe=m[ge];if(ge<S&&l===xe||ge>=S&&xe.type===l)return ge}if(d){var ot=m[S];if(ot&&cr(ot)&&ot.type===l)return S}return null}function za(s,o,l,f){var d=s[l],p=o.data;if(function Cd(s){return s instanceof gr}(d)){var m=d;m.resolving&&function we(s,o){var l=o?". Dependency path: ".concat(o.join(" > ")," > ").concat(s):"";throw new oe(-200,"Circular dependency in DI detected for ".concat(s).concat(l))}(function ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():te(s)}(p[l]));var C=Ra(m.canSeeViewProviders);m.resolving=!0;var S=m.injectImpl?Ot(m.injectImpl):null;$o(s,f,xt.Default);try{d=s[l]=m.factory(void 0,p,s,f),o.firstCreatePass&&l>=f.directiveStart&&function Ed(s,o,l){var f=o.type.prototype,p=f.ngOnInit,m=f.ngDoCheck;if(f.ngOnChanges){var C=ql(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,C),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,C)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,p),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,p[l],o)}finally{null!==S&&Ot(S),Ra(C),m.resolving=!1,qo()}}return d}function nl(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Sd(s,o){return!(s&xt.Self||s&xt.Host&&o)}var Ka=function(){function s(o,l){(0,G.Z)(this,s),this._tNode=o,this._lView=l}return(0,J.Z)(s,[{key:"get",value:function(l,f,d){return $f(this._tNode,this._lView,l,d,f)}}]),s}();function Np(){return new Ka(hr(),ft())}function $a(s,o,l,f,d){for(var p=s,m=o;null!==p&&null!==m&&1024&m[2]&&!(256&m[2]);){var C=to(p,m,l,f|xt.Self,ma);if(C!==ma)return C;var S=p.parent;if(!S){var F=m[21];if(F){var W=F.get(l,ma,f);if(W!==ma)return W}S=Yf(m),m=m[15]}p=S}return d}function Yf(s){var o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function no(s){return function tl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;var l=s.attrs;if(l)for(var f=l.length,d=0;d<f;){var p=l[d];if(vc(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<f&&"string"==typeof l[d];)d++;else{if(p===o)return l[d+1];d+=2}}return null}(hr(),s)}var Zs="__parameters__";function Ls(s,o,l){return pr(function(){var f=function rl(s){return function(){if(s){var l=s.apply(void 0,arguments);for(var f in l)this[f]=l[f]}}}(o);function d(){for(var p=arguments.length,m=new Array(p),C=0;C<p;C++)m[C]=arguments[C];if(this instanceof d)return f.apply(this,m),this;var S=(0,y.Z)(d,m);return F.annotation=S,F;function F(W,q,ae){for(var ge=W.hasOwnProperty(Zs)?W[Zs]:Object.defineProperty(W,Zs,{value:[]})[Zs];ge.length<=ae;)ge.push(null);return(ge[ae]=ge[ae]||[]).push(S),W}}return l&&(d.prototype=Object.create(l.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}var rr=function(){function s(o,l){(0,G.Z)(this,s),this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=un({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}return(0,J.Z)(s,[{key:"multi",get:function(){return this}},{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),s}();function dr(s,o){void 0===o&&(o=s);for(var l=0;l<s.length;l++){var f=s[l];Array.isArray(f)?(o===s&&(o=s.slice(0,l)),dr(f,o)):o!==s&&o.push(f)}return o}function ra(s,o){s.forEach(function(l){return Array.isArray(l)?ra(l,o):o(l)})}function ro(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function fu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}var Qa={},_a="__NG_DI_FLAG__",ia="ngTempTokenPath",bc=/\n/gm,Bn="__source",Pa=void 0;function ki(s){var o=Pa;return Pa=s,o}function ka(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.Default;if(void 0===Pa)throw new oe(-203,!1);return null===Pa?an(s,void 0,o):Pa.get(s,o&xt.Optional?null:void 0,o)}function Dn(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.Default;return(Hn()||ka)(Je(s),o)}function Ic(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.Default;return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Dn(s,o)}function uo(s){for(var o=[],l=0;l<s.length;l++){var f=Je(s[l]);if(Array.isArray(f)){if(0===f.length)throw new oe(900,!1);for(var d=void 0,p=xt.Default,m=0;m<f.length;m++){var C=f[m],S=N(C);"number"==typeof S?-1===S?d=C.token:p|=S:d=C}o.push(Dn(d,p))}else o.push(Dn(f))}return o}function zi(s,o){return s[_a]=o,s.prototype[_a]=o,s}function N(s){return s[_a]}function Z(s,o,l,f){var d=s[ia];throw o[Bn]&&d.unshift(o[Bn]),s.message=function B(s,o,l){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;var d=De(o);if(Array.isArray(o))d=o.map(De).join(" -> ");else if("object"==typeof o){var p=[];for(var m in o)if(o.hasOwnProperty(m)){var C=o[m];p.push(m+":"+("string"==typeof C?JSON.stringify(C):De(C)))}d="{".concat(p.join(", "),"}")}return"".concat(l).concat(f?"("+f+")":"","[").concat(d,"]: ").concat(s.replace(bc,"\n  "))}("\n"+s.message,d,l,f),s.ngTokenPath=d,s[ia]=null,s}var z=zi(Ls("Optional"),8),fe=zi(Ls("SkipSelf"),4);function nh(s){}var Sc=function(){function s(o){(0,G.Z)(this,s),this.changingThisBreaksApplicationSecurity=o}return(0,J.Z)(s,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),s}();var M=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var qr=function(){return(qr=qr||{})[qr.NONE=0]="NONE",qr[qr.HTML=1]="HTML",qr[qr.STYLE=2]="STYLE",qr[qr.SCRIPT=3]="SCRIPT",qr[qr.URL=4]="URL",qr[qr.RESOURCE_URL=5]="RESOURCE_URL",qr}();function co(s){var o=function Ud(){var s=ft();return s&&s[12]}();return o?o.sanitize(qr.URL,s)||"":function ll(s,o){var l=function cy(s){return s instanceof Sc&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error("Required a safe ".concat(o,", got a ").concat(l," (see https://g.co/ng/security#xss)"))}return l===o}(s,"URL")?function vs(s){return s instanceof Sc?s.changingThisBreaksApplicationSecurity:s}(s):function O(s){return(s=String(s)).match(M)?s:"unsafe:"+s}(te(s))}var dy=new rr("ENVIRONMENT_INITIALIZER"),Yk=new rr("INJECTOR",-1),Qk=new rr("INJECTOR_DEF_TYPES"),Xk=function(){function s(){(0,G.Z)(this,s)}return(0,J.Z)(s,[{key:"get",value:function(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa;if(f===Qa){var d=new Error("NullInjectorError: No provider for ".concat(De(l),"!"));throw d.name="NullInjectorError",d}return f}}]),s}();function Jk(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return{"\u0275providers":ew(!0,o)}}function ew(s){for(var f,o=[],l=new Set,d=arguments.length,p=new Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];return ra(p,function(C){var F=C;xd(F,o,[],l)&&(f||(f=[]),f.push(F))}),void 0!==f&&vy(f,o),o}function vy(s,o){for(var f=0;f<s.length;f++)ra(s[f].providers,function(F){o.push(F)})}function xd(s,o,l,f){if(!(s=Je(s)))return!1;var d=null,p=Ai(s),m=!p&&ht(s);if(p||m){if(m&&!m.standalone)return!1;d=s}else{var C=s.ngModule;if(!(p=Ai(C)))return!1;d=C}var W=f.has(d);if(m){if(W)return!1;if(f.add(d),m.dependencies){var ge,q="function"==typeof m.dependencies?m.dependencies():m.dependencies,ae=(0,P.Z)(q);try{for(ae.s();!(ge=ae.n()).done;)xd(ge.value,o,l,f)}catch(ct){ae.e(ct)}finally{ae.f()}}}else{if(!p)return!1;if(null!=p.imports&&!W){var ot;f.add(d);try{ra(p.imports,function(ct){xd(ct,o,l,f)&&(ot||(ot=[]),ot.push(ct))})}finally{}void 0!==ot&&vy(ot,o)}if(!W){var _t=Vi(d)||function(){return new d};o.push({provide:d,useFactory:_t,deps:_e},{provide:Qk,useValue:d,multi:!0},{provide:dy,useValue:function(){return Dn(d)},multi:!0})}var Rt=p.providers;null==Rt||W||ra(Rt,function(ct){o.push(ct)})}return d!==s&&void 0!==s.providers}var fo=Ge({provide:String,useValue:Ge});function hl(s){return null!==s&&"object"==typeof s&&fo in s}function Rc(s){return"function"==typeof s}var jp=new rr("Set Injector scope."),Hp={},Wp={},Gp=void 0;function ah(){return void 0===Gp&&(Gp=new Xk),Gp}var dl=(0,J.Z)(function s(){(0,G.Z)(this,s)}),zp=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d,p,m){var C;(0,G.Z)(this,l),(C=o.call(this)).parent=d,C.source=p,C.scopes=m,C.records=new Map,C._ngOnDestroyHooks=new Set,C._onDestroyHooks=[],C._destroyed=!1,Kp(f,function(F){return C.processProvider(F)}),C.records.set(Yk,sh(void 0,(0,se.Z)(C))),m.has("environment")&&C.records.set(dl,sh(void 0,(0,se.Z)(C)));var S=C.records.get(jp);return null!=S&&"string"==typeof S.value&&C.scopes.add(S.value),C.injectorDefTypes=new Set(C.get(Qk.multi,_e,xt.Self)),C}return(0,J.Z)(l,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{var p,d=(0,P.Z)(this._ngOnDestroyHooks);try{for(d.s();!(p=d.n()).done;)p.value.ngOnDestroy()}catch(W){d.e(W)}finally{d.f()}var S,C=(0,P.Z)(this._onDestroyHooks);try{for(C.s();!(S=C.n()).done;)(0,S.value)()}catch(W){C.e(W)}finally{C.f()}}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}},{key:"onDestroy",value:function(d){this._onDestroyHooks.push(d)}},{key:"runInContext",value:function(d){this.assertNotDestroyed();var p=ki(this),m=Ot(void 0);try{return d()}finally{ki(p),Ot(m)}}},{key:"get",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xt.Default;this.assertNotDestroyed();var C=ki(this),S=Ot(void 0);try{if(!(m&xt.SkipSelf)){var F=this.records.get(d);if(void 0===F){var W=iw(d)&&Si(d);F=W&&this.injectableDefInScope(W)?sh(Bd(d),Hp):null,this.records.set(d,F)}if(null!=F)return this.hydrate(d,F)}var q=m&xt.Self?ah():this.parent;return q.get(d,p=m&xt.Optional&&p===Qa?null:p)}catch(ge){if("NullInjectorError"===ge.name){var ae=ge[ia]=ge[ia]||[];if(ae.unshift(De(d)),C)throw ge;return Z(ge,d,"R3InjectorError",this.source)}throw ge}finally{Ot(S),ki(C)}}},{key:"resolveInjectorInitializers",value:function(){var d=ki(this),p=Ot(void 0);try{var S,m=this.get(dy.multi,_e,xt.Self),C=(0,P.Z)(m);try{for(C.s();!(S=C.n()).done;)(0,S.value)()}catch(W){C.e(W)}finally{C.f()}}finally{ki(d),Ot(p)}}},{key:"toString",value:function(){var C,d=[],m=(0,P.Z)(this.records.keys());try{for(m.s();!(C=m.n()).done;)d.push(De(C.value))}catch(F){m.e(F)}finally{m.f()}return"R3Injector[".concat(d.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new oe(205,!1)}},{key:"processProvider",value:function(d){var p=Rc(d=Je(d))?d:Je(d&&d.provide),m=function Vd(s){return hl(s)?sh(void 0,s.useValue):sh(function nw(s,o,l){var f=void 0;if(Rc(s)){var d=Je(s);return Vi(d)||Bd(d)}if(hl(s))f=function(){return Je(s.useValue)};else if(function gy(s){return!(!s||!s.useFactory)}(s))f=function(){return s.useFactory.apply(s,(0,ye.Z)(uo(s.deps||[])))};else if(function py(s){return!(!s||!s.useExisting)}(s))f=function(){return Dn(Je(s.useExisting))};else{var p=Je(s&&(s.useClass||s.provide));if(!function my(s){return!!s.deps}(s))return Vi(p)||Bd(p);f=function(){return(0,y.Z)(p,(0,ye.Z)(uo(s.deps)))}}return f}(s),Hp)}(d);if(Rc(d)||!0!==d.multi)this.records.get(p);else{var C=this.records.get(p);C||((C=sh(void 0,Hp,!0)).factory=function(){return uo(C.multi)},this.records.set(p,C)),p=d,C.multi.push(d)}this.records.set(p,m)}},{key:"hydrate",value:function(d,p){return p.value===Hp&&(p.value=Wp,p.value=p.factory()),"object"==typeof p.value&&p.value&&function rw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(p.value)&&this._ngOnDestroyHooks.add(p.value),p.value}},{key:"injectableDefInScope",value:function(d){if(!d.providedIn)return!1;var p=Je(d.providedIn);return"string"==typeof p?"any"===p||this.scopes.has(p):this.injectorDefTypes.has(p)}}]),l}(dl);function Bd(s){var o=Si(s),l=null!==o?o.factory:Vi(s);if(null!==l)return l;if(s instanceof rr)throw new oe(204,!1);if(s instanceof Function)return function BC(s){var o=s.length;if(o>0)throw function io(s,o){for(var l=[],f=0;f<s;f++)l.push(o);return l}(o,"?"),new oe(204,!1);var f=function Ca(s){var o=s&&(s[jn]||s[fi]);if(o){var l=function Jn(s){if(s.hasOwnProperty("name"))return s.name;var o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(l,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(l,'" class.')),o}return null}(s);return null!==f?function(){return f.factory(s)}:function(){return new s}}(s);throw new oe(204,!1)}function sh(s,o){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:s,value:o,multi:l?[]:void 0}}function iw(s){return"function"==typeof s||"object"==typeof s&&s instanceof rr}function aw(s){return!!s.\u0275providers}function Kp(s,o){var f,l=(0,P.Z)(s);try{for(l.s();!(f=l.n()).done;){var d=f.value;Array.isArray(d)?Kp(d,o):aw(d)?Kp(d.\u0275providers,o):o(d)}}catch(p){l.e(p)}finally{l.f()}}var VC=(0,J.Z)(function s(){(0,G.Z)(this,s)}),uh=(0,J.Z)(function s(){(0,G.Z)(this,s)}),jC=function(){function s(){(0,G.Z)(this,s)}return(0,J.Z)(s,[{key:"resolveComponentFactory",value:function(l){throw function $p(s){var o=Error("No component factory found for ".concat(De(s),". Did you add it to @NgModule.entryComponents?"));return o.ngComponent=s,o}(l)}}]),s}(),Mc=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.NULL=new jC,s}();function sw(){return jd(hr(),ft())}function jd(s,o){return new Yp(Fr(s,o))}var Yp=function(){var s=(0,J.Z)(function o(l){(0,G.Z)(this,o),this.nativeElement=l});return s.__NG_ELEMENT_ID__=sw,s}();function YR(s){return s instanceof Yp?s.nativeElement:s}var Qp=(0,J.Z)(function s(){(0,G.Z)(this,s)}),HC=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.__NG_ELEMENT_ID__=function(){return function WC(){var s=ft(),l=ii(hr().index,s);return(Lr(l)?l:s)[11]}()},s}(),GC=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.\u0275prov=un({token:s,providedIn:"root",factory:function(){return null}}),s}(),Xp=(0,J.Z)(function s(o){(0,G.Z)(this,s),this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}),Ja=new Xp("14.2.4"),Jp={};function cw(s){return s.ngOriginalError}var zd=function(){function s(){(0,G.Z)(this,s),this._console=console}return(0,J.Z)(s,[{key:"handleError",value:function(l){var f=this._findOriginalError(l);this._console.error("ERROR",l),f&&this._console.error("ORIGINAL ERROR",f)}},{key:"_findOriginalError",value:function(l){for(var f=l&&cw(l);f&&cw(f);)f=cw(f);return f||null}}]),s}(),Iy=new Map,JC=0,Dy="__ngContext__";function aa(s,o){Lr(o)?(s[Dy]=o[20],function tT(s){Iy.set(s[20],s)}(o)):s[Dy]=o}function ps(s){return s instanceof Function?s():s}var mu=function(){return(mu=mu||{})[mu.Important=1]="Important",mu[mu.DashCase=2]="DashCase",mu}();function Ay(s,o){return undefined(s,o)}function hh(s){var o=s[3];return Ji(o)?o[3]:o}function Py(s){return kw(s[13])}function My(s){return kw(s[4])}function kw(s){for(;null!==s&&!Ji(s);)s=s[4];return s}function dh(s,o,l,f,d){if(null!=f){var p,m=!1;Ji(f)?p=f:Lr(f)&&(m=!0,f=f[0]);var C=fr(f);0===s&&null!==l?null==d?Iw(o,l,C):Oc(o,l,C,d||null,!0):1===s&&null!==l?Oc(o,l,C,d||null,!0):2===s?function xy(s,o,l){var f=fg(s,o);f&&function Tw(s,o,l,f){s.removeChild(o,l,f)}(s,f,o,l)}(o,C,m):3===s&&o.destroyNode(C),null!=p&&function By(s,o,l,f,d){var p=l[7];p!==fr(l)&&dh(o,s,f,p,d);for(var C=10;C<l.length;C++){var S=l[C];dg(S[1],S,s,o,f,p)}}(o,s,p,l,d)}}function ag(s,o){return s.createText(o)}function ug(s,o,l){return s.createElement(o,l)}function Oy(s,o){var l=s[9],f=l.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,au(d,-1)),l.splice(f,1)}function Qd(s,o){if(!(s.length<=10)){var l=10+o,f=s[l];if(f){var d=f[17];null!==d&&d!==s&&Oy(d,f),o>0&&(s[l-1][4]=f[4]);var p=fu(s,10+o);!function i1(s,o){dg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(f[1],f);var m=p[19];null!==m&&m.detachView(p[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}}function lg(s,o){if(!(128&o[2])){var l=o[11];l.destroyNode&&dg(s,o,l,3,null,null),function hT(s){var o=s[13];if(!o)return Zy(s[1],s);for(;o;){var l=null;if(Lr(o))l=o[13];else{var f=o[10];f&&(l=f)}if(!l){for(;o&&!o[4]&&o!==s;)Lr(o)&&Zy(o[1],o),o=o[3];null===o&&(o=s),Lr(o)&&Zy(o[1],o),l=o&&o[4]}o=l}}(o)}}function Zy(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function cg(s,o){var l;if(null!=s&&null!=(l=s.destroyHooks))for(var f=0;f<l.length;f+=2){var d=o[l[f]];if(!(d instanceof gr)){var p=l[f+1];if(Array.isArray(p))for(var m=0;m<p.length;m+=2){var C=d[p[m]],S=p[m+1];try{S.call(C)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function vT(s,o){var l=s.cleanup,f=o[7],d=-1;if(null!==l)for(var p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){var m=l[p+1],C="function"==typeof m?m(o):fr(o[m]),S=f[d=l[p+2]],F=l[p+3];"boolean"==typeof F?C.removeEventListener(l[p],S,F):F>=0?f[d=F]():f[d=-F].unsubscribe(),p+=2}else{var W=f[d=l[p+1]];l[p].call(W)}if(null!==f){for(var q=d+1;q<f.length;q++)(0,f[q])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();var l=o[17];if(null!==l&&Ji(o[3])){l!==o[3]&&Oy(l,o);var f=o[19];null!==f&&f.detachView(s)}!function nT(s){Iy.delete(s[20])}(o)}}function bw(s,o,l){return function Ew(s,o,l){for(var f=o;null!==f&&40&f.type;)f=(o=f).parent;if(null===f)return l[0];if(2&f.flags){var d=s.data[f.directiveStart].encapsulation;if(d===sr.None||d===sr.Emulated)return null}return Fr(f,l)}(s,o.parent,l)}function Oc(s,o,l,f,d){s.insertBefore(o,l,f,d)}function Iw(s,o,l){s.appendChild(o,l)}function Cw(s,o,l,f,d){null!==f?Oc(s,o,l,f,d):Iw(s,o,l)}function fg(s,o){return s.parentNode(o)}var Sw=function hg(s,o,l){return 40&s.type?Fr(s,l):null};function Fy(s,o,l,f){var d=bw(s,f,o),p=o[11],C=function vl(s,o,l){return Sw(s,o,l)}(f.parent||o[6],f,o);if(null!=d)if(Array.isArray(l))for(var S=0;S<l.length;S++)Cw(p,d,l[S],C,!1);else Cw(p,d,l,C,!1)}function Uy(s,o){if(null!==o){var l=o.type;if(3&l)return Fr(o,s);if(4&l)return Xd(-1,s[o.index]);if(8&l){var f=o.child;if(null!==f)return Uy(s,f);var d=s[o.index];return Ji(d)?Xd(-1,d):fr(d)}if(32&l)return Ay(o,s)()||fr(s[o.index]);var C=Aw(s,o);return null!==C?Array.isArray(C)?C[0]:Uy(hh(s[16]),C):Uy(s,o.next)}return null}function Aw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Xd(s,o){var l=10+s+1;if(l<o.length){var f=o[l],d=f[1].firstChild;if(null!==d)return Uy(f,d)}return o[7]}function vh(s,o,l,f,d,p,m){for(;null!=l;){var C=f[l.index],S=l.type;if(m&&0===o&&(C&&aa(fr(C),f),l.flags|=4),64!=(64&l.flags))if(8&S)vh(s,o,l.child,f,d,p,!1),dh(o,s,d,C,p);else if(32&S){for(var F=Ay(l,f),W=void 0;W=F();)dh(o,s,d,W,p);dh(o,s,d,C,p)}else 16&S?Zc(s,o,f,l,d,p):dh(o,s,d,C,p);l=m?l.projectionNext:l.next}}function dg(s,o,l,f,d,p){vh(l,f,s.firstChild,o,d,p,!1)}function Zc(s,o,l,f,d,p){var m=l[16],S=m[6].projection[f.projection];if(Array.isArray(S))for(var F=0;F<S.length;F++)dh(o,s,d,S[F],p);else vh(s,o,S,m[3],d,p,!0)}function Vy(s,o,l){s.setAttribute(o,"style",l)}function vg(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function pg(s,o,l){for(var f=s.length;;){var d=s.indexOf(o,l);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){var p=o.length;if(d+p===f||s.charCodeAt(d+p)<=32)return d}l=d+1}}var Pw="ng-template";function pT(s,o,l){for(var f=0;f<s.length;){var d=s[f++];if(l&&"class"===d){if(-1!==pg((d=s[f]).toLowerCase(),o,0))return!0}else if(1===d){for(;f<s.length&&"string"==typeof(d=s[f++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function jy(s){return 4===s.type&&s.value!==Pw}function gT(s,o,l){return o===(4!==s.type||l?s.value:Pw)}function u1(s,o,l){for(var f=4,d=s.attrs||[],p=function yT(s){for(var o=0;o<s.length;o++)if(vc(s[o]))return o;return s.length}(d),m=!1,C=0;C<o.length;C++){var S=o[C];if("number"!=typeof S){if(!m)if(4&f){if(f=2|1&f,""!==S&&!gT(s,S,l)||""===S&&1===o.length){if(Oa(f))return!1;m=!0}}else{var F=8&f?S:o[++C];if(8&f&&null!==s.attrs){if(!pT(s.attrs,F,l)){if(Oa(f))return!1;m=!0}continue}var q=o1(8&f?"class":S,d,jy(s),l);if(-1===q){if(Oa(f))return!1;m=!0;continue}if(""!==F){var ae;ae=q>p?"":d[q+1].toLowerCase();var ge=8&f?ae:null;if(ge&&-1!==pg(ge,F,0)||2&f&&F!==ae){if(Oa(f))return!1;m=!0}}}}else{if(!m&&!Oa(f)&&!Oa(S))return!1;if(m&&Oa(S))continue;m=!1,f=S|1&f}}return Oa(f)||m}function Oa(s){return 0==(1&s)}function o1(s,o,l,f){if(null===o)return-1;var d=0;if(f||!l){for(var p=!1;d<o.length;){var m=o[d];if(m===s)return d;if(3===m||6===m)p=!0;else{if(1===m||2===m){for(var C=o[++d];"string"==typeof C;)C=o[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=p?1:2}return-1}return function Mw(s,o){var l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){var f=s[l];if("number"==typeof f)return-1;if(f===o)return l;l++}return-1}(o,s)}function Hy(s,o){for(var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=0;f<o.length;f++)if(u1(s,o[f],l))return!0;return!1}function Ow(s,o){return s?":not("+o.trim()+")":o}function kT(s){for(var o=s[0],l=1,f=2,d="",p=!1;l<s.length;){var m=s[l];if("string"==typeof m)if(2&f){var C=s[++l];d+="["+m+(C.length>0?'="'+C+'"':"")+"]"}else 8&f?d+="."+m:4&f&&(d+=" "+m);else""!==d&&!Oa(m)&&(o+=Ow(p,d),d=""),f=m,p=p||!Oa(f);l++}return""!==d&&(o+=Ow(p,d)),o}var gn={};function Zw(s){ET(Cn(),ft(),Ur()+s,!1)}function ET(s,o,l,f){if(!f)if(3==(3&o[2])){var p=s.preOrderCheckHooks;null!==p&&As(o,p,l)}else{var m=s.preOrderHooks;null!==m&&lc(o,m,0,l)}ga(l)}function Lw(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3?arguments[3]:void 0,d=si(s,o,l,f);return d.resolveInjectorInitializers(),d}function si(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3?arguments[3]:void 0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Set,p=[l||_e,Jk(s)];return f=f||("object"==typeof s?void 0:De(s)),new zp(p,o||ah(),f||null,d)}var ph=function(){var s=function(){function o(){(0,G.Z)(this,o)}return(0,J.Z)(o,null,[{key:"create",value:function(f,d){var p;if(Array.isArray(f))return Lw({name:""},d,f,"");var m=null!==(p=f.name)&&void 0!==p?p:"";return Lw({name:m},f.parent,f.providers,m)}}]),o}();return s.THROW_IF_NOT_FOUND=Qa,s.NULL=new Xk,s.\u0275prov=un({token:s,providedIn:"any",factory:function(){return Dn(Yk)}}),s.__NG_ELEMENT_ID__=-1,s}();function ho(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.Default,l=ft();if(null===l)return Dn(s,o);var f=hr();return $f(f,l,Je(s),o)}function Vs(){throw new Error("invalid")}function n0(s,o){var l=s.contentQueries;if(null!==l)for(var f=0;f<l.length;f+=2){var p=l[f+1];if(-1!==p){var m=s.data[p];Ko(l[f]),m.contentQueries(2,o[p],p)}}}function mh(s,o,l,f,d,p,m,C,S,F,W){var q=o.blueprint.slice();return q[0]=d,q[2]=76|f,(null!==W||s&&1024&s[2])&&(q[2]|=1024),Vo(q),q[3]=q[15]=s,q[8]=l,q[10]=m||s&&s[10],q[11]=C||s&&s[11],q[12]=S||s&&s[12]||null,q[9]=F||s&&s[9]||null,q[6]=p,q[20]=function eT(){return JC++}(),q[21]=W,q[16]=2==o.type?s[16]:q,q}function Fc(s,o,l,f,d){var p=s.data[o];if(null===p)p=function a0(s,o,l,f,d){var p=Wo(),m=Wa(),S=s.data[o]=function HT(s,o,l,f,d,p){return{type:l,index:f,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?p:p&&p.parent,l,o,f,d);return null===s.firstChild&&(s.firstChild=S),null!==p&&(m?null==p.child&&null!==S.parent&&(p.child=S):null===p.next&&(p.next=S)),S}(s,o,l,f,d),function Bf(){return Qt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=f,p.attrs=d;var m=function Ts(){var s=Qt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===m?-1:m.injectorIndex}return pi(p,!0),p}function vo(s,o,l,f){if(0===l)return-1;for(var d=o.length,p=0;p<l;p++)o.push(f),s.blueprint.push(f),s.data.push(null);return d}function lv(s,o,l){Ds(o);try{var f=s.viewQuery;null!==f&&g0(1,f,l);var d=s.template;null!==d&&s0(s,o,d,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&n0(s,o),s.staticViewQueries&&g0(2,s.viewQuery,l);var p=s.components;null!==p&&function VT(s,o){for(var l=0;l<o.length;l++)ab(s,o[l])}(o,p)}catch(m){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),m}finally{o[2]&=-5,qu()}}function yh(s,o,l,f){var d=o[2];if(128!=(128&d)){Ds(o);try{Vo(o),function rc(s){return Qt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&s0(s,o,l,2,f);var m=3==(3&d);if(m){var C=s.preOrderCheckHooks;null!==C&&As(o,C,null)}else{var S=s.preOrderHooks;null!==S&&lc(o,S,0,null),Hf(o,0)}if(function ib(s){for(var o=Py(s);null!==o;o=My(o))if(o[2])for(var l=o[9],f=0;f<l.length;f++){var d=l[f];0==(512&d[2])&&au(d[3],1),d[2]|=512}}(o),function rb(s){for(var o=Py(s);null!==o;o=My(o))for(var l=10;l<o.length;l++){var f=o[l],d=f[1];Dr(f)&&yh(d,f,d.template,f[8])}}(o),null!==s.contentQueries&&n0(s,o),m){var F=s.contentCheckHooks;null!==F&&As(o,F)}else{var W=s.contentHooks;null!==W&&lc(o,W,1),Hf(o,1)}!function BT(s,o){var l=s.hostBindingOpCodes;if(null!==l)try{for(var f=0;f<l.length;f++){var d=l[f];if(d<0)ga(~d);else{var p=d,m=l[++f],C=l[++f];ic(m,p),C(2,o[p])}}}finally{ga(-1)}}(s,o);var q=s.components;null!==q&&function r0(s,o){for(var l=0;l<o.length;l++)GT(s,o[l])}(o,q);var ae=s.viewQuery;if(null!==ae&&g0(2,ae,f),m){var ge=s.viewCheckHooks;null!==ge&&As(o,ge)}else{var xe=s.viewHooks;null!==xe&&lc(o,xe,2),Hf(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,au(o[3],-1))}finally{qu()}}}function s0(s,o,l,f,d){var p=Ur(),m=2&f;try{ga(-1),m&&o.length>22&&ET(s,o,22,!1),l(f,d)}finally{ga(p)}}function Uc(s,o,l){!Ho()||(function eb(s,o,l,f){var d=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||ou(l,o),aa(f,o);for(var m=l.initialInputs,C=d;C<p;C++){var S=s.data[C],F=cr(S);F&&hv(o,l,S);var W=za(o,s,C,l);aa(W,o),null!==m&&v0(0,C-d,W,S,0,m),F&&(ii(l.index,o)[8]=W)}}(s,o,l,Fr(l,o)),128==(128&l.flags)&&function l0(s,o,l){var f=l.directiveStart,d=l.directiveEnd,p=l.index,m=function Vf(){return Qt.lFrame.currentDirectiveIndex}();try{ga(p);for(var C=f;C<d;C++){var S=s.data[C],F=o[C];zo(C),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&c0(S,F)}}finally{ga(-1),zo(m)}}(s,o,l))}function Sg(s,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fr,f=o.localNames;if(null!==f)for(var d=o.index+1,p=0;p<f.length;p+=2){var m=f[p+1],C=-1===m?l(o,s):s[m];s[d++]=C}}function u0(s){var o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ag(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ag(s,o,l,f,d,p,m,C,S,F){var W=22+f,q=W+d,ae=function Rg(s,o){for(var l=[],f=0;f<o;f++)l.push(f<s?null:gn);return l}(W,q),ge="function"==typeof F?F():F;return ae[1]={type:s,blueprint:ae,template:l,queries:null,viewQuery:C,declTNode:o,data:ae.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:S,consts:ge,incompleteFirstPass:!1}}function xc(s,o,l,f){var d=m0(o);null===l?d.push(f):(d.push(l),s.firstCreatePass&&sb(s).push(f,d.length-1))}function Xw(s,o,l){for(var f in s)if(s.hasOwnProperty(f)){var d=s[f];(l=null===l?{}:l).hasOwnProperty(f)?l[f].push(o,d):l[f]=[o,d]}return l}function ml(s,o){for(var f=o.directiveEnd,d=s.data,p=o.attrs,m=[],C=null,S=null,F=o.directiveStart;F<f;F++){var W=d[F],q=W.inputs,ae=null===p||jy(o)?null:Zg(q,p);m.push(ae),C=Xw(q,F,C),S=Xw(W.outputs,F,S)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=C,o.outputs=S}function ua(s,o,l,f,d,p,m,C){var W,S=Fr(o,l),F=o.inputs;!C&&null!=F&&(W=F[f])?(bh(s,l,W,f,d),tu(o)&&o0(l,o.index)):3&o.type&&(f=function Jw(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(f),d=null!=m?m(d,o.value||"",f):d,p.setProperty(S,f,d))}function o0(s,o){var l=ii(o,s);16&l[2]||(l[2]|=32)}function Pg(s,o,l,f){var d=!1;if(Ho()){var p=function tb(s,o,l){var f=s.directiveRegistry,d=null;if(f)for(var p=0;p<f.length;p++){var m=f[p];Hy(l,m.selectors,!1)&&(d||(d=[]),cu(ou(l,o),s,m.type),cr(m)?(kh(s,l),d.unshift(m)):d.push(m))}return d}(s,o,l),m=null===f?null:{"":-1};if(null!==p){d=!0,Og(l,s.data.length,p.length);for(var C=0;C<p.length;C++){var S=p[C];S.providersResolver&&S.providersResolver(S)}for(var F=!1,W=!1,q=vo(s,o,p.length,null),ae=0;ae<p.length;ae++){var ge=p[ae];l.mergedAttrs=ai(l.mergedAttrs,ge.hostAttrs),fv(s,l,o,q,ge),h0(q,ge,m),null!==ge.contentQueries&&(l.flags|=8),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(l.flags|=128);var xe=ge.type.prototype;!F&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),F=!0),!W&&(xe.ngOnChanges||xe.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),W=!0),q++}ml(s,l)}m&&function f0(s,o,l){if(o)for(var f=s.localNames=[],d=0;d<o.length;d+=2){var p=l[o[d+1]];if(null==p)throw new oe(-301,!1);f.push(o[d],p)}}(l,f,m)}return l.mergedAttrs=ai(l.mergedAttrs,l.attrs),d}function _h(s,o,l,f,d,p){var m=p.hostBindings;if(m){var C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);var S=~o.index;(function Mg(s){for(var o=s.length;o>0;){var l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(C)!=S&&C.push(S),C.push(f,d,m)}}function c0(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function kh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function h0(s,o,l){if(l){if(o.exportAs)for(var f=0;f<o.exportAs.length;f++)l[o.exportAs[f]]=s;cr(o)&&(l[""]=s)}}function Og(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function fv(s,o,l,f,d){s.data[f]=d;var p=d.factory||(d.factory=Vi(d.type)),m=new gr(p,cr(d),ho);s.blueprint[f]=m,l[f]=m,_h(s,o,0,f,vo(s,l,d.hostVars,gn),d)}function hv(s,o,l){var f=Fr(o,s),d=u0(l),p=s[10],m=yl(s,mh(s,d,null,l.onPush?32:16,f,o,p,p.createRenderer(f,l),null,null,null));s[o.index]=m}function Hs(s,o,l,f,d,p){var m=Fr(s,o);!function d0(s,o,l,f,d,p,m){if(null==p)s.removeAttribute(o,d,l);else{var C=null==m?te(p):m(p,f||"",d);s.setAttribute(o,d,C,l)}}(o[11],m,p,s.value,l,f,d)}function v0(s,o,l,f,d,p){var m=p[o];if(null!==m)for(var C=f.setInput,S=0;S<m.length;){var F=m[S++],W=m[S++],q=m[S++];null!==C?f.setInput(l,q,F,W):l[W]=q}}function Zg(s,o){for(var l=null,f=0;f<o.length;){var d=o[f];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===l&&(l=[]),l.push(d,s[d],o[f+1])),f+=2}else f+=2;else f+=4}return l}function p0(s,o,l,f){return new Array(s,!0,!1,o,null,0,f,l,null,null)}function GT(s,o){var l=ii(o,s);if(Dr(l)){var f=l[1];48&l[2]?yh(f,l,f.template,l[8]):l[5]>0&&Bc(l)}}function Bc(s){for(var o=Py(s);null!==o;o=My(o))for(var l=10;l<o.length;l++){var f=o[l];if(Dr(f))if(512&f[2]){var d=f[1];yh(d,f,d.template,f[8])}else f[5]>0&&Bc(f)}var m=s[1].components;if(null!==m)for(var C=0;C<m.length;C++){var S=ii(m[C],s);Dr(S)&&S[5]>0&&Bc(S)}}function ab(s,o){var l=ii(o,s),f=l[1];(function Ng(s,o){for(var l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(f,l),lv(f,l,l[8])}function yl(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function po(s){for(;s;){s[2]|=32;var o=hh(s);if(pd(s)&&!o)return s;s=o}return null}function wh(s,o,l){var f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=o[10],p=!1;!p&&d.begin&&d.begin();try{yh(s,o,s.template,l)}catch(m){throw f&&wu(o,m),m}finally{!p&&d.end&&d.end()}}function g0(s,o,l){Ko(0),o(s,l)}function m0(s){return s[7]||(s[7]=[])}function sb(s){return s.cleanup||(s.cleanup=[])}function wu(s,o){var l=s[9],f=l?l.get(zd,null):null;f&&f.handleError(o)}function bh(s,o,l,f,d){for(var p=0;p<l.length;){var m=l[p++],C=l[p++],S=o[m],F=s.data[m];null!==F.setInput?F.setInput(S,d,f,C):S[C]=d}}function ms(s,o,l){var f=function Cs(s,o){return fr(o[s])}(o,s);!function sg(s,o,l){s.setValue(o,l)}(s[11],f,l)}function dv(s,o,l){var f=l?s.styles:null,d=l?s.classes:null,p=0;if(null!==o)for(var m=0;m<o.length;m++){var C=o[m];"number"==typeof C?p=C:1==p?d=Se(d,C):2==p&&(f=Se(f,C+": "+o[++m]+";"))}l?s.styles=f:s.stylesWithoutHost=f,l?s.classes=d:s.classesWithoutHost=d}function vr(s,o,l,f){for(var d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==l;){var p=o[l.index];if(null!==p&&f.push(fr(p)),Ji(p))for(var m=10;m<p.length;m++){var C=p[m],S=C[1].firstChild;null!==S&&vr(C[1],C,S,f)}var F=l.type;if(8&F)vr(s,o,l.child,f);else if(32&F)for(var W=Ay(l,o),q=void 0;q=W();)f.push(q);else if(16&F){var ae=Aw(o,l);if(Array.isArray(ae))f.push.apply(f,(0,ye.Z)(ae));else{var ge=hh(o[16]);vr(ge[1],ge,ae,f,!0)}}l=d?l.projectionNext:l.next}return f}var kl=function(){function s(o,l){(0,G.Z)(this,s),this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}return(0,J.Z)(s,[{key:"rootNodes",get:function(){var l=this._lView,f=l[1];return vr(f,l,f.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(l){this._lView[8]=l}},{key:"destroyed",get:function(){return 128==(128&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var l=this._lView[3];if(Ji(l)){var f=l[8],d=f?f.indexOf(this):-1;d>-1&&(Qd(l,d),fu(f,d))}this._attachedToViewContainer=!1}lg(this._lView[1],this._lView)}},{key:"onDestroy",value:function(l){xc(this._lView[1],this._lView,null,l)}},{key:"markForCheck",value:function(){po(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-65}},{key:"reattach",value:function(){this._lView[2]|=64}},{key:"detectChanges",value:function(){wh(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function fT(s,o){dg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(l){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=l}}]),s}(),vv=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f){var d;return(0,G.Z)(this,l),(d=o.call(this,f))._view=f,d}return(0,J.Z)(l,[{key:"detectChanges",value:function(){var d=this._view;wh(d[1],d,d[8],!1)}},{key:"checkNoChanges",value:function(){}},{key:"context",get:function(){return null}}]),l}(kl),Vc=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f){var d;return(0,G.Z)(this,l),(d=o.call(this)).ngModule=f,d}return(0,J.Z)(l,[{key:"resolveComponentFactory",value:function(d){var p=ht(d);return new pv(p,this.ngModule)}}]),l}(Mc);function ub(s){var o=[];for(var l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}var KT=function(){function s(o,l){(0,G.Z)(this,s),this.injector=o,this.parentInjector=l}return(0,J.Z)(s,[{key:"get",value:function(l,f,d){var p=this.injector.get(l,Jp,d);return p!==Jp||f===Jp?p:this.parentInjector.get(l,f,d)}}]),s}(),pv=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d){var p;return(0,G.Z)(this,l),(p=o.call(this)).componentDef=f,p.ngModule=d,p.componentType=f.type,p.selector=function wT(s){return s.map(kT).join(",")}(f.selectors),p.ngContentSelectors=f.ngContentSelectors?f.ngContentSelectors:[],p.isBoundToModule=!!d,p}return(0,J.Z)(l,[{key:"inputs",get:function(){return ub(this.componentDef.inputs)}},{key:"outputs",get:function(){return ub(this.componentDef.outputs)}},{key:"create",value:function(d,p,m,C){var S=(C=C||this.ngModule)instanceof dl?C:null==C?void 0:C.injector;S&&null!==this.componentDef.getStandaloneInjector&&(S=this.componentDef.getStandaloneInjector(S)||S);var F=S?new KT(d,S):d,W=F.get(Qp,null);if(null===W)throw new oe(407,!1);var Lt,ct,q=F.get(GC,null),ae=W.createRenderer(null,this.componentDef),ge=this.componentDef.selectors[0][0]||"div",xe=m?function jT(s,o,l){return s.selectRootElement(o,l===sr.ShadowDom)}(ae,m,this.componentDef.encapsulation):ug(W.createRenderer(null,this.componentDef),ge,function ob(s){var o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(ge)),ot=this.componentDef.onPush?288:272,_t=Ag(0,null,null,1,0,null,null,null,null,null),Rt=mh(null,_t,null,ot,null,null,W,ae,q,F,null);Ds(Rt);try{var nn=function lb(s,o,l,f,d,p){var m=l[1];l[22]=s;var S=Fc(m,22,2,"#host",null),F=S.mergedAttrs=o.hostAttrs;null!==F&&(dv(S,F,!0),null!==s&&(Yu(d,s,F),null!==S.classes&&vg(d,s,S.classes),null!==S.styles&&Vy(d,s,S.styles)));var W=f.createRenderer(s,o),q=mh(l,u0(o),null,o.onPush?32:16,l[22],S,f,W,p||null,null,null);return m.firstCreatePass&&(cu(ou(S,l),m,o.type),kh(m,S),Og(S,l.length,1)),yl(l,q),l[22]=q}(xe,this.componentDef,Rt,W,ae);if(xe)if(m)Yu(ae,xe,["ng-version",Ja.full]);else{var Pn=function bT(s){for(var o=[],l=[],f=1,d=2;f<s.length;){var p=s[f];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++f]):8===d&&l.push(p);else{if(!Oa(d))break;d=p}f++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]),Un=Pn.attrs,Di=Pn.classes;Un&&Yu(ae,xe,Un),Di&&Di.length>0&&vg(ae,xe,Di.join(" "))}if(ct=iu(_t,22),void 0!==p)for(var fa=ct.projection=[],Ea=0;Ea<this.ngContentSelectors.length;Ea++){var Ro=p[Ea];fa.push(null!=Ro?Array.from(Ro):null)}Lt=function cb(s,o,l,f){var d=l[1],p=function wa(s,o,l){var f=hr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),fv(s,f,o,vo(s,o,1,null),l),ml(s,f));var p=za(o,s,f.directiveStart,f);aa(p,o);var m=Fr(f,o);return m&&aa(m,o),p}(d,l,o);if(s[8]=l[8]=p,null!==f){var C,m=(0,P.Z)(f);try{for(m.s();!(C=m.n()).done;)(0,C.value)(p,o)}catch(ae){m.e(ae)}finally{m.f()}}if(o.contentQueries){var F=hr();o.contentQueries(1,p,F.directiveStart)}var W=hr();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ga(W.index),_h(l[1],W,0,W.directiveStart,W.directiveEnd,o),c0(o,p)),p}(nn,this.componentDef,Rt,[fb]),lv(_t,Rt,null)}finally{qu()}return new gv(this.componentType,Lt,jd(ct,Rt),Rt,ct)}}]),l}(uh),gv=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d,p,m,C){var S;return(0,G.Z)(this,l),(S=o.call(this)).location=p,S._rootLView=m,S._tNode=C,S.instance=d,S.hostView=S.changeDetectorRef=new vv(m),S.componentType=f,S}return(0,J.Z)(l,[{key:"setInput",value:function(d,p){var C,m=this._tNode.inputs;if(null!==m&&(C=m[d])){var S=this._rootLView;bh(S[1],S,C,d,p),o0(S,this._tNode.index)}}},{key:"injector",get:function(){return new Ka(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(d){this.hostView.onDestroy(d)}}]),l}(VC);function fb(){var s=hr();mi(ft()[1],s)}var mv=null;function go(){if(!mv){var s=Ht.Symbol;if(s&&s.iterator)mv=s.iterator;else for(var o=Object.getOwnPropertyNames(Map.prototype),l=0;l<o.length;++l){var f=o[l];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(mv=f)}}return mv}function yv(s){return!!Wc(s)&&(Array.isArray(s)||!(s instanceof Map)&&go()in s)}function Wc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ui(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Bg(s,o,l,f){var d=ft();return ui(d,Ku(),o)&&(Cn(),Hs(zn(),d,s,o,l,f)),Bg}function Ch(s,o,l,f){return ui(s,Ku(),l)?o+te(l)+f:gn}function Sh(s,o,l,f,d,p,m,C){var S=ft(),F=Cn(),W=s+22,q=F.firstCreatePass?function gb(s,o,l,f,d,p,m,C,S){var F=o.consts,W=Fc(o,s,4,m||null,Wi(F,C));Pg(o,l,W,Wi(F,S)),mi(o,W);var q=W.tViews=Ag(2,W,f,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,F);return null!==o.queries&&(o.queries.template(o,W),q.queries=o.queries.embeddedTView(W)),W}(W,F,S,o,l,f,d,p,m):F.data[W];pi(q,!1);var ae=S[11].createComment("");Fy(F,S,ae,q),aa(ae,S),yl(S,S[W]=p0(ae,S,ae,q)),zl(q)&&Uc(F,S,q),null!=m&&Sg(S,q,C)}function I0(s){return function Sa(s,o){return s[o]}(function Zp(){return Qt.lFrame.contextLView}(),22+s)}function wv(s,o,l){var f=ft();return ui(f,Ku(),o)&&ua(Cn(),zn(),f,s,o,f[11],l,!1),wv}function bv(s,o,l,f,d){var m=d?"class":"style";bh(s,l,o.inputs[m],m,f)}function qc(s,o,l,f){var d=ft(),p=Cn(),m=22+s,C=d[11],S=d[m]=ug(C,o,function bd(){return Qt.lFrame.currentNamespace}()),F=p.firstCreatePass?function yb(s,o,l,f,d,p,m){var C=o.consts,F=Fc(o,s,2,d,Wi(C,p));return Pg(o,l,F,Wi(C,m)),null!==F.attrs&&dv(F,F.attrs,!1),null!==F.mergedAttrs&&dv(F,F.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,F),F}(m,p,d,0,o,l,f):p.data[m];pi(F,!0);var W=F.mergedAttrs;null!==W&&Yu(C,S,W);var q=F.classes;null!==q&&vg(C,S,q);var ae=F.styles;return null!==ae&&Vy(C,S,ae),64!=(64&F.flags)&&Fy(p,d,S,F),0===function xf(){return Qt.lFrame.elementDepthCount}()&&aa(S,d),function Gu(){Qt.lFrame.elementDepthCount++}(),zl(F)&&(Uc(p,d,F),function Qw(s,o,l){if(Gl(o))for(var d=o.directiveEnd,p=o.directiveStart;p<d;p++){var m=s.data[p];m.contentQueries&&m.contentQueries(1,l[p],p)}}(p,F,d)),null!==f&&Sg(d,F),qc}function Ev(){var s=hr();Wa()?function zu(){Qt.lFrame.isParent=!1}():pi(s=s.parent,!1);var o=s;!function md(){Qt.lFrame.elementDepthCount--}();var l=Cn();return l.firstCreatePass&&(mi(l,s),Gl(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Qo(s){return 0!=(16&s.flags)}(o)&&bv(l,o,ft(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Xo(s){return 0!=(32&s.flags)}(o)&&bv(l,o,ft(),o.stylesWithoutHost,!1),Ev}function Hg(s,o,l,f){return qc(s,o,l,f),Ev(),Hg}function T0(){return ft()}function Ah(s){return!!s&&"function"==typeof s.then}function Na(s){return!!s&&"function"==typeof s.subscribe}var D0=Na;function zg(s,o,l,f){var d=ft(),p=Cn(),m=hr();return function _b(s,o,l,f,d,p,m,C){var S=zl(f),W=s.firstCreatePass&&sb(s),q=o[8],ae=m0(o),ge=!0;if(3&f.type||C){var xe=Fr(f,o),ot=C?C(xe):xe,_t=ae.length,Rt=C?function(kf){return C(fr(kf[f.index]))}:f.index,Lt=null;if(!C&&S&&(Lt=function JT(s,o,l,f){var d=s.cleanup;if(null!=d)for(var p=0;p<d.length-1;p+=2){var m=d[p];if(m===l&&d[p+1]===f){var C=o[7],S=d[p+2];return C.length>S?C[S]:null}"string"==typeof m&&(p+=2)}return null}(s,o,d,f.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=p,Lt.__ngLastListenerFn__=p,ge=!1;else{p=kb(f,o,q,p,!1);var nn=l.listen(ot,d,p);ae.push(p,nn),W&&W.push(d,Rt,_t,_t+1)}}else p=kb(f,o,q,p,!1);var Un,Pn=f.outputs;if(ge&&null!==Pn&&(Un=Pn[d])){var Di=Un.length;if(Di)for(var fa=0;fa<Di;fa+=2){var _f=o[Un[fa]][Un[fa+1]].subscribe(p),Jh=ae.length;ae.push(p,_f),W&&W.push(d,f.index,Jh,-(Jh+1))}}}(p,d,d[11],m,s,o,0,f),zg}function Kg(s,o,l,f){try{return!1!==l(f)}catch(d){return wu(s,d),!1}}function kb(s,o,l,f,d){return function p(m){if(m===Function)return f;po(2&s.flags?ii(s.index,o):o);for(var S=Kg(o,0,f,m),F=p.__ngNextListenerFn__;F;)S=Kg(o,0,F,m)&&S,F=F.__ngNextListenerFn__;return d&&!1===S&&(m.preventDefault(),m.returnValue=!1),S}}function S0(s,o,l){return qg(s,"",o,"",l),S0}function qg(s,o,l,f,d){var p=ft(),m=Ch(p,o,l,f);return m!==gn&&ua(Cn(),zn(),p,s,m,p[11],d,!1),qg}function rt(s){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=ft(),f=Cn(),d=s+22,p=f.firstCreatePass?Fc(f,d,1,o,null):f.data[d],m=l[d]=ag(l[11],o);Fy(f,l,m,p),pi(p,!1)}function em(s){return El("",s,""),em}function El(s,o,l){var f=ft(),d=Ch(f,s,o,l);return d!==gn&&ms(f,Ur(),d),El}var la=void 0,Sl=["en",[["a","p"],["AM","PM"],la],[["AM","PM"],la,la],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],la,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],la,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",la,"{1} 'at' {0}",la],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Dv(s){var l=Math.floor(Math.abs(s)),f=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===f?1:5}],af={};function Av(s){var o=function am(s){return s.toLowerCase().replace(/_/g,"-")}(s),l=Uh(o);if(l)return l;var f=o.split("-")[0];if(l=Uh(f))return l;if("en"===f)return Sl;throw new oe(701,!1)}function im(s){return Av(s)[sn.PluralCase]}function Uh(s){return s in af||(af[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),af[s]}var sn=function(){return(sn=sn||{})[sn.LocaleId=0]="LocaleId",sn[sn.DayPeriodsFormat=1]="DayPeriodsFormat",sn[sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",sn[sn.DaysFormat=3]="DaysFormat",sn[sn.DaysStandalone=4]="DaysStandalone",sn[sn.MonthsFormat=5]="MonthsFormat",sn[sn.MonthsStandalone=6]="MonthsStandalone",sn[sn.Eras=7]="Eras",sn[sn.FirstDayOfWeek=8]="FirstDayOfWeek",sn[sn.WeekendRange=9]="WeekendRange",sn[sn.DateFormat=10]="DateFormat",sn[sn.TimeFormat=11]="TimeFormat",sn[sn.DateTimeFormat=12]="DateTimeFormat",sn[sn.NumberSymbols=13]="NumberSymbols",sn[sn.NumberFormats=14]="NumberFormats",sn[sn.CurrencyCode=15]="CurrencyCode",sn[sn.CurrencySymbol=16]="CurrencySymbol",sn[sn.CurrencyName=17]="CurrencyName",sn[sn.Currencies=18]="Currencies",sn[sn.Directionality=19]="Directionality",sn[sn.PluralCase=20]="PluralCase",sn[sn.ExtraData=21]="ExtraData",sn}(),xh="en-US";var bo=(0,J.Z)(function s(){(0,G.Z)(this,s)}),dm=(0,J.Z)(function s(){(0,G.Z)(this,s)});function Y0(s,o){return new X0(s,null!=o?o:null)}var X0=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d){var p;(0,G.Z)(this,l),(p=o.call(this))._parent=d,p._bootstrapComponents=[],p.destroyCbs=[],p.componentFactoryResolver=new Vc((0,se.Z)(p));var m=ln(f);return p._bootstrapComponents=ps(m.bootstrap),p._r3Injector=si(f,d,[{provide:bo,useValue:(0,se.Z)(p)},{provide:Mc,useValue:p.componentFactoryResolver}],De(f),new Set(["environment"])),p._r3Injector.resolveInjectorInitializers(),p.instance=p._r3Injector.get(f),p}return(0,J.Z)(l,[{key:"injector",get:function(){return this._r3Injector}},{key:"destroy",value:function(){var d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(function(p){return p()}),this.destroyCbs=null}},{key:"onDestroy",value:function(d){this.destroyCbs.push(d)}}]),l}(bo),vm=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f){var d;return(0,G.Z)(this,l),(d=o.call(this)).moduleType=f,d}return(0,J.Z)(l,[{key:"create",value:function(d){return new X0(this.moduleType,d)}}]),l}(dm),hE=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d,p){var m;(0,G.Z)(this,l),(m=o.call(this)).componentFactoryResolver=new Vc((0,se.Z)(m)),m.instance=null;var C=new zp([].concat((0,ye.Z)(f),[{provide:bo,useValue:(0,se.Z)(m)},{provide:Mc,useValue:m.componentFactoryResolver}]),d||ah(),p,new Set(["environment"]));return m.injector=C,C.resolveInjectorInitializers(),m}return(0,J.Z)(l,[{key:"destroy",value:function(){this.injector.destroy()}},{key:"onDestroy",value:function(d){this.injector.onDestroy(d)}}]),l}(bo);function J0(s,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=new hE(s,o,l);return f.injector}var dE=function(){var s=function(){function o(l){(0,G.Z)(this,o),this._injector=l,this.cachedInjectors=new Map}return(0,J.Z)(o,[{key:"getOrCreateStandaloneInjector",value:function(f){if(!f.standalone)return null;if(!this.cachedInjectors.has(f.id)){var d=ew(!1,f.type),p=d.length>0?J0([d],this._injector,"Standalone[".concat(f.type.name,"]")):null;this.cachedInjectors.set(f.id,p)}return this.cachedInjectors.get(f.id)}},{key:"ngOnDestroy",value:function(){try{var d,f=(0,P.Z)(this.cachedInjectors.values());try{for(f.s();!(d=f.n()).done;){var p=d.value;null!==p&&p.destroy()}}catch(m){f.e(m)}finally{f.f()}}finally{this.cachedInjectors.clear()}}}]),o}();return s.\u0275prov=un({token:s,providedIn:"environment",factory:function(){return new s(Dn(dl))}}),s}();function e_(s){s.getStandaloneInjector=function(o){return o.get(dE).getOrCreateStandaloneInjector(s)}}var UD=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(){var f,d=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,G.Z)(this,l),(f=o.call(this)).__isAsync=d,f}return(0,J.Z)(l,[{key:"emit",value:function(d){(0,ie.Z)((0,pe.Z)(l.prototype),"next",this).call(this,d)}},{key:"subscribe",value:function(d,p,m){var C,S,F,W=d,q=p||function(){return null},ae=m;if(d&&"object"==typeof d){var ge=d;W=null===(C=ge.next)||void 0===C?void 0:C.bind(ge),q=null===(S=ge.error)||void 0===S?void 0:S.bind(ge),ae=null===(F=ge.complete)||void 0===F?void 0:F.bind(ge)}this.__isAsync&&(q=i_(q),W&&(W=i_(W)),ae&&(ae=i_(ae)));var xe=(0,ie.Z)((0,pe.Z)(l.prototype),"subscribe",this).call(this,{next:W,error:q,complete:ae});return d instanceof Ae.w0&&d.add(xe),xe}}]),l}(Me.x);function i_(s){return function(o){setTimeout(s,void 0,o)}}var Du=UD;function xD(){return this._results[go()]()}var BD=function(){function s(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,G.Z)(this,s),this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var l=go(),f=s.prototype;f[l]||(f[l]=xD)}return(0,J.Z)(s,[{key:"changes",get:function(){return this._changes||(this._changes=new Du)}},{key:"get",value:function(l){return this._results[l]}},{key:"map",value:function(l){return this._results.map(l)}},{key:"filter",value:function(l){return this._results.filter(l)}},{key:"find",value:function(l){return this._results.find(l)}},{key:"reduce",value:function(l,f){return this._results.reduce(l,f)}},{key:"forEach",value:function(l){this._results.forEach(l)}},{key:"some",value:function(l){return this._results.some(l)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(l,f){var d=this;d.dirty=!1;var p=dr(l);(this._changesDetected=!function cs(s,o,l){if(s.length!==o.length)return!1;for(var f=0;f<s.length;f++){var d=s[f],p=o[f];if(l&&(d=l(d),p=l(p)),p!==d)return!1}return!0}(d._results,p,f))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),s}(),Wv=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.__NG_ELEMENT_ID__=HD,s}(),jD=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d,p){var m;return(0,G.Z)(this,l),(m=o.call(this))._declarationLView=f,m._declarationTContainer=d,m.elementRef=p,m}return(0,J.Z)(l,[{key:"createEmbeddedView",value:function(d,p){var m=this._declarationTContainer.tViews,C=mh(this._declarationLView,m,d,16,null,m.declTNode,null,null,null,null,p||null);C[17]=this._declarationLView[this._declarationTContainer.index];var F=this._declarationLView[19];return null!==F&&(C[19]=F.createEmbeddedView(m)),lv(m,C,d),new kl(C)}}]),l}(Wv);function HD(){return gm(hr(),ft())}function gm(s,o){return 4&s.type?new jD(o,s,jd(s,o)):null}var mm=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.__NG_ELEMENT_ID__=WD,s}();function WD(){return u_(hr(),ft())}var SE=function(s){(0,Te.Z)(l,s);var o=(0,Q.Z)(l);function l(f,d,p){var m;return(0,G.Z)(this,l),(m=o.call(this))._lContainer=f,m._hostTNode=d,m._hostLView=p,m}return(0,J.Z)(l,[{key:"element",get:function(){return jd(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Ka(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var d=lu(this._hostTNode,this._hostLView);if(Qu(d)){var p=Ps(d,this._hostLView),m=Xu(d);return new Ka(p[1].data[m+8],p)}return new Ka(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(d){var p=a_(this._lContainer);return null!==p&&p[d]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(d,p,m){var C,S;"number"==typeof m?C=m:null!=m&&(C=m.index,S=m.injector);var F=d.createEmbeddedView(p||{},S);return this.insert(F,C),F}},{key:"createComponent",value:function(d,p,m,C,S){var W,F=d&&!function $r(s){return"function"==typeof s}(d);if(F)W=p;else{var q=p||{};W=q.index,m=q.injector,C=q.projectableNodes,S=q.environmentInjector||q.ngModuleRef}var ae=F?d:new pv(ht(d)),ge=m||this.parentInjector;if(!S&&null==ae.ngModule){var ot=(F?ge:this.parentInjector).get(dl,null);ot&&(S=ot)}var _t=ae.create(ge,C,void 0,S);return this.insert(_t.hostView,W),_t}},{key:"insert",value:function(d,p){var m=d._lView,C=m[1];if(function Uf(s){return Ji(s[3])}(m)){var S=this.indexOf(d);if(-1!==S)this.detach(S);else{var F=m[3],W=new SE(F,F[6],F[3]);W.detach(W.indexOf(d))}}var q=this._adjustIndex(p),ae=this._lContainer;!function dT(s,o,l,f){var d=10+f,p=l.length;f>0&&(l[d-1][4]=o),f<p-10?(o[4]=l[d],ro(l,10+f,o)):(l.push(o),o[4]=null),o[3]=l;var m=o[17];null!==m&&l!==m&&function og(s,o){var l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(m,o);var C=o[19];null!==C&&C.insertView(s),o[2]|=64}(C,m,ae,q);var ge=Xd(q,ae),xe=m[11],ot=fg(xe,ae[7]);return null!==ot&&function cT(s,o,l,f,d,p){f[0]=d,f[6]=o,dg(s,f,l,1,d,p)}(C,ae[6],xe,m,ot,ge),d.attachToViewContainerRef(),ro(s_(ae),q,d),d}},{key:"move",value:function(d,p){return this.insert(d,p)}},{key:"indexOf",value:function(d){var p=a_(this._lContainer);return null!==p?p.indexOf(d):-1}},{key:"remove",value:function(d){var p=this._adjustIndex(d,-1),m=Qd(this._lContainer,p);m&&(fu(s_(this._lContainer),p),lg(m[1],m))}},{key:"detach",value:function(d){var p=this._adjustIndex(d,-1),m=Qd(this._lContainer,p);return m&&null!=fu(s_(this._lContainer),p)?new kl(m):null}},{key:"_adjustIndex",value:function(d){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==d?this.length+p:d}}]),l}(mm);function a_(s){return s[8]}function s_(s){return s[8]||(s[8]=[])}function u_(s,o){var l,f=o[s.index];if(Ji(f))l=f;else{var d;if(8&s.type)d=fr(f);else{var p=o[11];d=p.createComment("");var m=Fr(s,o);Oc(p,fg(p,m),d,function Dw(s,o){return s.nextSibling(o)}(p,m),!1)}o[s.index]=l=p0(f,o,d,s),yl(o,l)}return new SE(l,s,o)}var Ni=function(){function s(o){(0,G.Z)(this,s),this.queryList=o,this.matches=null}return(0,J.Z)(s,[{key:"clone",value:function(){return new s(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),s}(),o_=function(){function s(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,G.Z)(this,s),this.queries=o}return(0,J.Z)(s,[{key:"createEmbeddedView",value:function(l){var f=l.queries;if(null!==f){for(var d=null!==l.contentQueries?l.contentQueries[0]:f.length,p=[],m=0;m<d;m++){var C=f.getByIndex(m);p.push(this.queries[C.indexInDeclarationView].clone())}return new s(p)}return null}},{key:"insertView",value:function(l){this.dirtyQueriesWithMatches(l)}},{key:"detachView",value:function(l){this.dirtyQueriesWithMatches(l)}},{key:"dirtyQueriesWithMatches",value:function(l){for(var f=0;f<this.queries.length;f++)null!==v_(l,f).matches&&this.queries[f].setDirty()}}]),s}(),PE=(0,J.Z)(function s(o,l){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,G.Z)(this,s),this.predicate=o,this.flags=l,this.read=f}),l_=function(){function s(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,G.Z)(this,s),this.queries=o}return(0,J.Z)(s,[{key:"elementStart",value:function(l,f){for(var d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,f)}},{key:"elementEnd",value:function(l){for(var f=0;f<this.queries.length;f++)this.queries[f].elementEnd(l)}},{key:"embeddedTView",value:function(l){for(var f=null,d=0;d<this.length;d++){var p=null!==f?f.length:0,m=this.getByIndex(d).embeddedTView(l,p);m&&(m.indexInDeclarationView=d,null!==f?f.push(m):f=[m])}return null!==f?new s(f):null}},{key:"template",value:function(l,f){for(var d=0;d<this.queries.length;d++)this.queries[d].template(l,f)}},{key:"getByIndex",value:function(l){return this.queries[l]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(l){this.queries.push(l)}}]),s}(),ym=function(){function s(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,G.Z)(this,s),this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}return(0,J.Z)(s,[{key:"elementStart",value:function(l,f){this.isApplyingToNode(f)&&this.matchTNode(l,f)}},{key:"elementEnd",value:function(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(l,f){this.elementStart(l,f)}},{key:"embeddedTView",value:function(l,f){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,f),new s(this.metadata)):null}},{key:"isApplyingToNode",value:function(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var f=this._declarationNodeIndex,d=l.parent;null!==d&&8&d.type&&d.index!==f;)d=d.parent;return f===(null!==d?d.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(l,f){var d=this.metadata.predicate;if(Array.isArray(d))for(var p=0;p<d.length;p++){var m=d[p];this.matchTNodeWithReadOption(l,f,ME(f,m)),this.matchTNodeWithReadOption(l,f,Ga(f,l,m,!1,!1))}else d===Wv?4&f.type&&this.matchTNodeWithReadOption(l,f,-1):this.matchTNodeWithReadOption(l,f,Ga(f,l,d,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(l,f,d){if(null!==d){var p=this.metadata.read;if(null!==p)if(p===Yp||p===mm||p===Wv&&4&f.type)this.addMatch(f.index,-2);else{var m=Ga(f,l,p,!1,!1);null!==m&&this.addMatch(f.index,m)}else this.addMatch(f.index,d)}}},{key:"addMatch",value:function(l,f){null===this.matches?this.matches=[l,f]:this.matches.push(l,f)}}]),s}();function ME(s,o){var l=s.localNames;if(null!==l)for(var f=0;f<l.length;f+=2)if(l[f]===o)return l[f+1];return null}function OE(s,o,l,f){return-1===l?function KD(s,o){return 11&s.type?jd(s,o):4&s.type?gm(s,o):null}(o,s):-2===l?function _m(s,o,l){return l===Yp?jd(o,s):l===Wv?gm(o,s):l===mm?u_(o,s):void 0}(s,o,f):za(s,s[1],l,o)}function Pl(s,o,l,f){var d=o[19].queries[f];if(null===d.matches){for(var p=s.data,m=l.matches,C=[],S=0;S<m.length;S+=2){var F=m[S];C.push(F<0?null:OE(o,p[F],m[S+1],l.metadata.read))}d.matches=C}return d.matches}function Io(s,o,l,f){var d=s.queries.getByIndex(l),p=d.matches;if(null!==p)for(var m=Pl(s,o,d,l),C=0;C<p.length;C+=2){var S=p[C];if(S>0)f.push(m[C/2]);else{for(var F=p[C+1],W=o[-S],q=10;q<W.length;q++){var ae=W[q];ae[17]===ae[3]&&Io(ae[1],ae,F,f)}if(null!==W[9])for(var ge=W[9],xe=0;xe<ge.length;xe++){var ot=ge[xe];Io(ot[1],ot,F,f)}}}return f}function Ml(s){var o=ft(),l=Cn(),f=ac();Ko(f+1);var d=v_(l,f);if(s.dirty&&function Ff(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{var p=d.crossesNgTemplate?Io(l,o,f,[]):Pl(l,o,d,f);s.reset(p,YR),s.notifyOnChanges()}return!0}return!1}function c_(s,o,l,f){var d=Cn();if(d.firstCreatePass){var p=hr();(function d_(s,o,l){null===s.queries&&(s.queries=new l_),s.queries.track(new ym(o,l))})(d,new PE(o,l,f),p.index),function $D(s,o){var l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(d,s),2==(2&l)&&(d.staticContentQueries=!0)}!function h_(s,o,l){var f=new BD(4==(4&l));xc(s,o,f,f.destroy),null===o[19]&&(o[19]=new o_),o[19].queries.push(new Ni(f))}(d,ft(),l)}function km(){return function f_(s,o){return s[19].queries[o].queryList}(ft(),ac())}function v_(s,o){return s.queries.getByIndex(o)}function Em(){}var $E=new rr("Application Initializer"),qv=function(){var s=function(){function o(l){var f=this;(0,G.Z)(this,o),this.appInits=l,this.resolve=Em,this.reject=Em,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(d,p){f.resolve=d,f.reject=p})}return(0,J.Z)(o,[{key:"runInitializers",value:function(){var f=this;if(!this.initialized){var d=[],p=function(){f.done=!0,f.resolve()};if(this.appInits)for(var m=function(F){var W=f.appInits[F]();if(Ah(W))d.push(W);else if(D0(W)){var q=new Promise(function(ae,ge){W.subscribe({complete:ae,error:ge})});d.push(q)}},C=0;C<this.appInits.length;C++)m(C);Promise.all(d).then(function(){p()}).catch(function(S){f.reject(S)}),0===d.length&&p(),this.initialized=!0}}}]),o}();return s.\u0275fac=function(l){return new(l||s)(Dn($E,8))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s}(),qE=new rr("AppId",{providedIn:"root",factory:function T_(){return"".concat(D_()).concat(D_()).concat(D_())}});function D_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var qh=new rr("Platform Initializer"),Im=new rr("Platform ID",{providedIn:"platform",factory:function(){return"unknown"}}),Cm=new rr("appBootstrapListener"),uS=function(){var s=function(){function o(){(0,G.Z)(this,o)}return(0,J.Z)(o,[{key:"log",value:function(f){console.log(f)}},{key:"warn",value:function(f){console.warn(f)}}]),o}();return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s}(),Yv=new rr("LocaleId",{providedIn:"root",factory:function(){return Ic(Yv,xt.Optional|xt.SkipSelf)||function QE(){return"undefined"!=typeof $localize&&$localize.locale||xh}()}}),S_=new rr("DefaultCurrencyCode",{providedIn:"root",factory:function(){return"USD"}}),XE=(0,J.Z)(function s(o,l){(0,G.Z)(this,s),this.ngModuleFactory=o,this.componentFactories=l}),lS=function(){var s=function(){function o(){(0,G.Z)(this,o)}return(0,J.Z)(o,[{key:"compileModuleSync",value:function(f){return new vm(f)}},{key:"compileModuleAsync",value:function(f){return Promise.resolve(this.compileModuleSync(f))}},{key:"compileModuleAndAllComponentsSync",value:function(f){var d=this.compileModuleSync(f),m=ps(ln(f).declarations).reduce(function(C,S){var F=ht(S);return F&&C.push(new pv(F)),C},[]);return new XE(d,m)}},{key:"compileModuleAndAllComponentsAsync",value:function(f){return Promise.resolve(this.compileModuleAndAllComponentsSync(f))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(f){}},{key:"getModuleId",value:function(f){}}]),o}();return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s}(),fS=function(){return Promise.resolve(0)}();function Jv(s){"undefined"==typeof Zone?fS.then(function(){s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}var $s=function(){function s(o){var l=o.enableLongStackTrace,f=void 0!==l&&l,d=o.shouldCoalesceEventChangeDetection,p=void 0!==d&&d,m=o.shouldCoalesceRunChangeDetection,C=void 0!==m&&m;if((0,G.Z)(this,s),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Du(!1),this.onMicrotaskEmpty=new Du(!1),this.onStable=new Du(!1),this.onError=new Du(!1),"undefined"==typeof Zone)throw new oe(908,!1);Zone.assertZonePatched();var S=this;if(S._nesting=0,S._outer=S._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){var F=Zone.AsyncStackTaggingZoneSpec;S._inner=S._inner.fork(new F("Angular"))}Zone.TaskTrackingZoneSpec&&(S._inner=S._inner.fork(new Zone.TaskTrackingZoneSpec)),f&&Zone.longStackTraceZoneSpec&&(S._inner=S._inner.fork(Zone.longStackTraceZoneSpec)),S.shouldCoalesceEventChangeDetection=!C&&p,S.shouldCoalesceRunChangeDetection=C,S.lastRequestAnimationFrameId=-1,S.nativeRequestAnimationFrame=function hS(){var s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){var l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);var f=o[Zone.__symbol__("OriginalDelegate")];f&&(o=f)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eI(s){var o=function(){!function P_(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,function(){s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){s.lastRequestAnimationFrameId=-1,ep(s),s.isCheckStableRunning=!0,Tm(s),s.isCheckStableRunning=!1},void 0,function(){},function(){})),s.fakeTopEventTask.invoke()}),ep(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(f,d,p,m,C,S){try{return M_(s),f.invokeTask(p,m,C,S)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),tI(s)}},onInvoke:function(f,d,p,m,C,S,F){try{return M_(s),f.invoke(p,m,C,S,F)}finally{s.shouldCoalesceRunChangeDetection&&o(),tI(s)}},onHasTask:function(f,d,p,m){f.hasTask(p,m),d===p&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,ep(s),Tm(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:function(f,d,p,m){return f.handleError(p,m),s.runOutsideAngular(function(){return s.onError.emit(m)}),!1}})}(S)}return(0,J.Z)(s,[{key:"run",value:function(l,f,d){return this._inner.run(l,f,d)}},{key:"runTask",value:function(l,f,d,p){var m=this._inner,C=m.scheduleEventTask("NgZoneEvent: "+p,l,JE,Em,Em);try{return m.runTask(C,f,d)}finally{m.cancelTask(C)}}},{key:"runGuarded",value:function(l,f,d){return this._inner.runGuarded(l,f,d)}},{key:"runOutsideAngular",value:function(l){return this._outer.run(l)}}],[{key:"isInAngularZone",value:function(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!s.isInAngularZone())throw new oe(909,!1)}},{key:"assertNotInAngularZone",value:function(){if(s.isInAngularZone())throw new oe(909,!1)}}]),s}(),JE={};function Tm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(function(){return s.onStable.emit(null)})}finally{s.isStable=!0}}}function ep(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function M_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function tI(s){s._nesting--,Tm(s)}var tp,O_=function(){function s(){(0,G.Z)(this,s),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Du,this.onMicrotaskEmpty=new Du,this.onStable=new Du,this.onError=new Du}return(0,J.Z)(s,[{key:"run",value:function(l,f,d){return l.apply(f,d)}},{key:"runGuarded",value:function(l,f,d){return l.apply(f,d)}},{key:"runOutsideAngular",value:function(l){return l()}},{key:"runTask",value:function(l,f,d,p){return l.apply(f,d)}}]),s}(),Dm=new rr(""),Z_=new rr(""),dS=function(){var s=function(){function o(l,f,d){var p=this;(0,G.Z)(this,o),this._ngZone=l,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tp||(function vS(s){tp=s}(d),d.addToWindow(f)),this._watchAngularEvents(),l.run(function(){p.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return(0,J.Z)(o,[{key:"_watchAngularEvents",value:function(){var f=this;this._ngZone.onUnstable.subscribe({next:function(){f._didWork=!0,f._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){f._ngZone.onStable.subscribe({next:function(){$s.assertNotInAngularZone(),Jv(function(){f._isZoneStable=!0,f._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var f=this;if(this.isStable())Jv(function(){for(;0!==f._callbacks.length;){var p=f._callbacks.pop();clearTimeout(p.timeoutId),p.doneCb(f._didWork)}f._didWork=!1});else{var d=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(p){return!p.updateCb||!p.updateCb(d)||(clearTimeout(p.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(f){return{source:f.source,creationLocation:f.creationLocation,data:f.data}}):[]}},{key:"addCallback",value:function(f,d,p){var m=this,C=-1;d&&d>0&&(C=setTimeout(function(){m._callbacks=m._callbacks.filter(function(S){return S.timeoutId!==C}),f(m._didWork,m.getPendingTasks())},d)),this._callbacks.push({doneCb:f,timeoutId:C,updateCb:p})}},{key:"whenStable",value:function(f,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(f,d,p),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"registerApplication",value:function(f){this.registry.registerApplication(f,this)}},{key:"unregisterApplication",value:function(f){this.registry.unregisterApplication(f)}},{key:"findProviders",value:function(f,d,p){return[]}}]),o}();return s.\u0275fac=function(l){return new(l||s)(Dn($s),Dn(N_),Dn(Z_))},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s}(),N_=function(){var s=function(){function o(){(0,G.Z)(this,o),this._applications=new Map}return(0,J.Z)(o,[{key:"registerApplication",value:function(f,d){this._applications.set(f,d)}},{key:"unregisterApplication",value:function(f){this._applications.delete(f)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(f){return this._applications.get(f)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(f){var p,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!==(p=null==tp?void 0:tp.findTestabilityInTree(this,f,d))&&void 0!==p?p:null}}]),o}();return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s}(),Pu=null,L_=new rr("AllowMultipleToken"),Qh=new rr("PlatformDestroyListeners");function F_(s,o,l){var f=new vm(l);return Promise.resolve(f)}var mS=(0,J.Z)(function s(o,l){(0,G.Z)(this,s),this.name=o,this.token=l});function yS(s){if(Pu&&!Pu.get(L_,!1))throw new oe(400,!1);Pu=s;var o=s.get(Pm);return function nI(s){var o=s.get(qh,null);o&&o.forEach(function(l){return l()})}(s),o}function Am(s,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f="Platform: ".concat(o),d=new rr(f);return function(){var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],m=gf();if(!m||m.injector.get(L_,!1)){var C=[].concat((0,ye.Z)(l),(0,ye.Z)(p),[{provide:d,useValue:!0}]);s?s(C):yS(Rm(C,f))}return Xh()}}function Xh(s){var o=gf();if(!o)throw new oe(401,!1);return o}function Rm(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;return ph.create({name:o,providers:[{provide:jp,useValue:"platform"},{provide:Qh,useValue:new Set([function(){return Pu=null}])}].concat((0,ye.Z)(s))})}function gf(){var s;return null!==(s=null==Pu?void 0:Pu.get(Pm))&&void 0!==s?s:null}var Pm=function(){var s=function(){function o(l){(0,G.Z)(this,o),this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,J.Z)(o,[{key:"bootstrapModuleFactory",value:function(f,d){var p=this,m=function Mm(s,o){return"noop"===s?new O_:("zone.js"===s?void 0:s)||new $s(o)}(null==d?void 0:d.ngZone,function x_(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),C=[{provide:$s,useValue:m}];return m.run(function(){var S=ph.create({providers:C,parent:p.injector,name:f.moduleType.name}),F=f.create(S),W=F.injector.get(zd,null);if(!W)throw new oe(402,!1);return m.runOutsideAngular(function(){var q=m.onError.subscribe({next:function(ge){W.handleError(ge)}});F.onDestroy(function(){Zm(p._modules,F),q.unsubscribe()})}),function Om(s,o,l){try{var f=l();return Ah(f)?f.catch(function(d){throw o.runOutsideAngular(function(){return s.handleError(d)}),d}):f}catch(d){throw o.runOutsideAngular(function(){return s.handleError(d)}),d}}(W,m,function(){var q=F.injector.get(qv);return q.runInitializers(),q.donePromise.then(function(){return function xb(s){An(s,"Expected localeId to be defined"),"string"==typeof s&&s.toLowerCase().replace(/_/g,"-")}(F.injector.get(Yv,xh)||xh),p._moduleDoBootstrap(F),F})})})}},{key:"bootstrapModule",value:function(f){var d=this,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],m=Ao({},p);return F_(0,0,f).then(function(C){return d.bootstrapModuleFactory(C,m)})}},{key:"_moduleDoBootstrap",value:function(f){var d=f.injector.get(np);if(f._bootstrapComponents.length>0)f._bootstrapComponents.forEach(function(p){return d.bootstrap(p)});else{if(!f.instance.ngDoBootstrap)throw new oe(403,!1);f.instance.ngDoBootstrap(d)}this._modules.push(f)}},{key:"onDestroy",value:function(f){this._destroyListeners.push(f)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(function(d){return d.destroy()}),this._destroyListeners.forEach(function(d){return d()});var f=this._injector.get(Qh,null);f&&(f.forEach(function(d){return d()}),f.clear()),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),o}();return s.\u0275fac=function(l){return new(l||s)(Dn(ph))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"platform"}),s}();function Ao(s,o){return Array.isArray(o)?o.reduce(Ao,s):Object.assign(Object.assign({},s),o)}var np=function(){var s=function(){function o(l,f,d){var p=this;(0,G.Z)(this,o),this._zone=l,this._injector=f,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){p._zone.run(function(){p.tick()})}});var m=new be.y(function(S){p._stable=p._zone.isStable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks,p._zone.runOutsideAngular(function(){S.next(p._stable),S.complete()})}),C=new be.y(function(S){var F;p._zone.runOutsideAngular(function(){F=p._zone.onStable.subscribe(function(){$s.assertNotInAngularZone(),Jv(function(){!p._stable&&!p._zone.hasPendingMacrotasks&&!p._zone.hasPendingMicrotasks&&(p._stable=!0,S.next(!0))})})});var W=p._zone.onUnstable.subscribe(function(){$s.assertInAngularZone(),p._stable&&(p._stable=!1,p._zone.runOutsideAngular(function(){S.next(!1)}))});return function(){F.unsubscribe(),W.unsubscribe()}});this.isStable=(0,Fe.T)(m,C.pipe((0,Ue.B)()))}return(0,J.Z)(o,[{key:"destroyed",get:function(){return this._destroyed}},{key:"injector",get:function(){return this._injector}},{key:"bootstrap",value:function(f,d){var W,p=this,m=f instanceof uh;if(!this._injector.get(qv).done)throw!m&&er(f),new oe(405,false);W=m?f:this._injector.get(Mc).resolveComponentFactory(f),this.componentTypes.push(W.componentType);var ae=function gS(s){return s.isBoundToModule}(W)?void 0:this._injector.get(bo),xe=W.create(ph.NULL,[],d||W.selector,ae),ot=xe.location.nativeElement,_t=xe.injector.get(Dm,null);return null==_t||_t.registerApplication(ot),xe.onDestroy(function(){p.detachView(xe.hostView),Zm(p.components,xe),null==_t||_t.unregisterApplication(ot)}),this._loadComponent(xe),xe}},{key:"tick",value:function(){var f=this;if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;var p,d=(0,P.Z)(this._views);try{for(d.s();!(p=d.n()).done;)p.value.detectChanges()}catch(W){d.e(W)}finally{d.f()}}catch(W){this._zone.runOutsideAngular(function(){return f._exceptionHandler.handleError(W)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(f){var d=f;this._views.push(d),d.attachToAppRef(this)}},{key:"detachView",value:function(f){var d=f;Zm(this._views,d),d.detachFromAppRef()}},{key:"_loadComponent",value:function(f){this.attachView(f.hostView),this.tick(),this.components.push(f),this._injector.get(Cm,[]).concat(this._bootstrapListeners).forEach(function(p){return p(f)})}},{key:"ngOnDestroy",value:function(){if(!this._destroyed)try{this._destroyListeners.forEach(function(f){return f()}),this._views.slice().forEach(function(f){return f.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}},{key:"onDestroy",value:function(f){var d=this;return this._destroyListeners.push(f),function(){return Zm(d._destroyListeners,f)}}},{key:"destroy",value:function(){if(this._destroyed)throw new oe(406,!1);var f=this._injector;f.destroy&&!f.destroyed&&f.destroy()}},{key:"viewCount",get:function(){return this._views.length}},{key:"warnIfDestroyed",value:function(){}}]),o}();return s.\u0275fac=function(l){return new(l||s)(Dn($s),Dn(dl),Dn(zd))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s}();function Zm(s,o){var l=s.indexOf(o);l>-1&&s.splice(l,1)}var Lm=!0,rI=!1;function B_(){return rI=!0,Lm}function Fm(){if(rI)throw new Error("Cannot enable prod mode after platform setup.");Lm=!1}var V_=function(){var s=(0,J.Z)(function o(){(0,G.Z)(this,o)});return s.__NG_ELEMENT_ID__=bS,s}();function bS(s){return function ES(s,o,l){if(tu(s)&&!l){var f=ii(s.index,o);return new kl(f,f)}return 47&s.type?new kl(o[16],o):null}(hr(),ft(),16==(16&s))}var oI=function(){function s(){(0,G.Z)(this,s)}return(0,J.Z)(s,[{key:"supports",value:function(l){return yv(l)}},{key:"create",value:function(l){return new K_(l)}}]),s}(),z_=function(o,l){return l},K_=function(){function s(o){(0,G.Z)(this,s),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||z_}return(0,J.Z)(s,[{key:"forEachItem",value:function(l){var f;for(f=this._itHead;null!==f;f=f._next)l(f)}},{key:"forEachOperation",value:function(l){for(var f=this._itHead,d=this._removalsHead,p=0,m=null;f||d;){var C=!d||f&&f.currentIndex<cI(d,p,m)?f:d,S=cI(C,p,m),F=C.currentIndex;if(C===d)p--,d=d._nextRemoved;else if(f=f._next,null==C.previousIndex)p++;else{m||(m=[]);var W=S-p,q=F-p;if(W!=q){for(var ae=0;ae<W;ae++){var ge=ae<m.length?m[ae]:m[ae]=0,xe=ge+ae;q<=xe&&xe<W&&(m[ae]=ge+1)}m[C.previousIndex]=q-W}}S!==F&&l(C,S,F)}}},{key:"forEachPreviousItem",value:function(l){var f;for(f=this._previousItHead;null!==f;f=f._nextPrevious)l(f)}},{key:"forEachAddedItem",value:function(l){var f;for(f=this._additionsHead;null!==f;f=f._nextAdded)l(f)}},{key:"forEachMovedItem",value:function(l){var f;for(f=this._movesHead;null!==f;f=f._nextMoved)l(f)}},{key:"forEachRemovedItem",value:function(l){var f;for(f=this._removalsHead;null!==f;f=f._nextRemoved)l(f)}},{key:"forEachIdentityChange",value:function(l){var f;for(f=this._identityChangesHead;null!==f;f=f._nextIdentityChange)l(f)}},{key:"diff",value:function(l){if(null==l&&(l=[]),!yv(l))throw new oe(900,!1);return this.check(l)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(l){var f=this;this._reset();var m,C,S,d=this._itHead,p=!1;if(Array.isArray(l)){this.length=l.length;for(var F=0;F<this.length;F++)S=this._trackByFn(F,C=l[F]),null!==d&&Object.is(d.trackById,S)?(p&&(d=this._verifyReinsertion(d,C,S,F)),Object.is(d.item,C)||this._addIdentityChange(d,C)):(d=this._mismatch(d,C,S,F),p=!0),d=d._next}else m=0,function Fg(s,o){if(Array.isArray(s))for(var l=0;l<s.length;l++)o(s[l]);else for(var d,f=s[go()]();!(d=f.next()).done;)o(d.value)}(l,function(W){S=f._trackByFn(m,W),null!==d&&Object.is(d.trackById,S)?(p&&(d=f._verifyReinsertion(d,W,S,m)),Object.is(d.item,W)||f._addIdentityChange(d,W)):(d=f._mismatch(d,W,S,m),p=!0),d=d._next,m++}),this.length=m;return this._truncate(d),this.collection=l,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(l,f,d,p){var m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,f)||this._addIdentityChange(l,f),this._reinsertAfter(l,m,p)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(l.item,f)||this._addIdentityChange(l,f),this._moveAfter(l,m,p)):l=this._addAfter(new $_(f,d),m,p),l}},{key:"_verifyReinsertion",value:function(l,f,d,p){var m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,p):l.currentIndex!=p&&(l.currentIndex=p,this._addToMoves(l,p)),l}},{key:"_truncate",value:function(l){for(;null!==l;){var f=l._next;this._addToRemovals(this._unlink(l)),l=f}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(l,f,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);var p=l._prevRemoved,m=l._nextRemoved;return null===p?this._removalsHead=m:p._nextRemoved=m,null===m?this._removalsTail=p:m._prevRemoved=p,this._insertAfter(l,f,d),this._addToMoves(l,d),l}},{key:"_moveAfter",value:function(l,f,d){return this._unlink(l),this._insertAfter(l,f,d),this._addToMoves(l,d),l}},{key:"_addAfter",value:function(l,f,d){return this._insertAfter(l,f,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}},{key:"_insertAfter",value:function(l,f,d){var p=null===f?this._itHead:f._next;return l._next=p,l._prev=f,null===p?this._itTail=l:p._prev=l,null===f?this._itHead=l:f._next=l,null===this._linkedRecords&&(this._linkedRecords=new lI),this._linkedRecords.put(l),l.currentIndex=d,l}},{key:"_remove",value:function(l){return this._addToRemovals(this._unlink(l))}},{key:"_unlink",value:function(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);var f=l._prev,d=l._next;return null===f?this._itHead=d:f._next=d,null===d?this._itTail=f:d._prev=f,l}},{key:"_addToMoves",value:function(l,f){return l.previousIndex===f||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}},{key:"_addToRemovals",value:function(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lI),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}},{key:"_addIdentityChange",value:function(l,f){return l.item=f,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}]),s}(),$_=(0,J.Z)(function s(o,l){(0,G.Z)(this,s),this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),q_=function(){function s(){(0,G.Z)(this,s),this._head=null,this._tail=null}return(0,J.Z)(s,[{key:"add",value:function(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}},{key:"get",value:function(l,f){var d;for(d=this._head;null!==d;d=d._nextDup)if((null===f||f<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}},{key:"remove",value:function(l){var f=l._prevDup,d=l._nextDup;return null===f?this._head=d:f._nextDup=d,null===d?this._tail=f:d._prevDup=f,null===this._head}}]),s}(),lI=function(){function s(){(0,G.Z)(this,s),this.map=new Map}return(0,J.Z)(s,[{key:"put",value:function(l){var f=l.trackById,d=this.map.get(f);d||(d=new q_,this.map.set(f,d)),d.add(l)}},{key:"get",value:function(l,f){var p=this.map.get(l);return p?p.get(l,f):null}},{key:"remove",value:function(l){var f=l.trackById;return this.map.get(f).remove(l)&&this.map.delete(f),l}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),s}();function cI(s,o,l){var f=s.previousIndex;if(null===f)return f;var d=0;return l&&f<l.length&&(d=l[f]),f+o+d}var xm=function(){function s(){(0,G.Z)(this,s)}return(0,J.Z)(s,[{key:"supports",value:function(l){return l instanceof Map||Wc(l)}},{key:"create",value:function(){return new Y_}}]),s}(),Y_=function(){function s(){(0,G.Z)(this,s),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,J.Z)(s,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(l){var f;for(f=this._mapHead;null!==f;f=f._next)l(f)}},{key:"forEachPreviousItem",value:function(l){var f;for(f=this._previousMapHead;null!==f;f=f._nextPrevious)l(f)}},{key:"forEachChangedItem",value:function(l){var f;for(f=this._changesHead;null!==f;f=f._nextChanged)l(f)}},{key:"forEachAddedItem",value:function(l){var f;for(f=this._additionsHead;null!==f;f=f._nextAdded)l(f)}},{key:"forEachRemovedItem",value:function(l){var f;for(f=this._removalsHead;null!==f;f=f._nextRemoved)l(f)}},{key:"diff",value:function(l){if(l){if(!(l instanceof Map||Wc(l)))throw new oe(900,!1)}else l=new Map;return this.check(l)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(l){var f=this;this._reset();var d=this._mapHead;if(this._appendAfter=null,this._forEach(l,function(m,C){if(d&&d.key===C)f._maybeAddToChanges(d,m),f._appendAfter=d,d=d._next;else{var S=f._getOrCreateRecordForKey(C,m);d=f._insertBeforeOrAppend(d,S)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(var p=d;null!==p;p=p._nextRemoved)p===this._mapHead&&(this._mapHead=null),this._records.delete(p.key),p._nextRemoved=p._next,p.previousValue=p.currentValue,p.currentValue=null,p._prev=null,p._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(l,f){if(l){var d=l._prev;return f._next=l,f._prev=d,l._prev=f,d&&(d._next=f),l===this._mapHead&&(this._mapHead=f),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=f,f._prev=this._appendAfter):this._mapHead=f,this._appendAfter=f,null}},{key:"_getOrCreateRecordForKey",value:function(l,f){if(this._records.has(l)){var d=this._records.get(l);this._maybeAddToChanges(d,f);var p=d._prev,m=d._next;return p&&(p._next=m),m&&(m._prev=p),d._next=null,d._prev=null,d}var C=new AS(l);return this._records.set(l,C),C.currentValue=f,this._addToAdditions(C),C}},{key:"_reset",value:function(){if(this.isDirty){var l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(l,f){Object.is(f,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=f,this._addToChanges(l))}},{key:"_addToAdditions",value:function(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}},{key:"_addToChanges",value:function(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}},{key:"_forEach",value:function(l,f){l instanceof Map?l.forEach(f):Object.keys(l).forEach(function(d){return f(l[d],d)})}}]),s}(),AS=(0,J.Z)(function s(o){(0,G.Z)(this,s),this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function Q_(){return new X_([new oI])}var X_=function(){var s=function(){function o(l){(0,G.Z)(this,o),this.factories=l}return(0,J.Z)(o,[{key:"find",value:function(f){var d=this.factories.find(function(p){return p.supports(f)});if(null!=d)return d;throw new oe(901,!1)}}],[{key:"create",value:function(f,d){if(null!=d){var p=d.factories.slice();f=f.concat(p)}return new o(f)}},{key:"extend",value:function(f){return{provide:o,useFactory:function(p){return o.create(f,p||Q_())},deps:[[o,new fe,new z]]}}}]),o}();return s.\u0275prov=un({token:s,providedIn:"root",factory:Q_}),s}();function J_(){return new Bm([new xm])}var Bm=function(){var s=function(){function o(l){(0,G.Z)(this,o),this.factories=l}return(0,J.Z)(o,[{key:"find",value:function(f){var d=this.factories.find(function(p){return p.supports(f)});if(d)return d;throw new oe(901,!1)}}],[{key:"create",value:function(f,d){if(d){var p=d.factories.slice();f=f.concat(p)}return new o(f)}},{key:"extend",value:function(f){return{provide:o,useFactory:function(p){return o.create(f,p||J_())},deps:[[o,new fe,new z]]}}}]),o}();return s.\u0275prov=un({token:s,providedIn:"root",factory:J_}),s}(),MS=Am(null,"core",[]),ek=function(){var s=(0,J.Z)(function o(l){(0,G.Z)(this,o)});return s.\u0275fac=function(l){return new(l||s)(Dn(np))},s.\u0275mod=he({type:s}),s.\u0275inj=Ui({}),s}();function tk(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:function(St,He,U){U.d(He,{Z:function(){return Ge}});var ye,ie=U(4942),pe=U(5671),A=U(3144),R=U(2090),j=U(4859),se=U(9681),P=U(1877),y=function(){function je(De,Se){var Qe=this;(0,pe.Z)(this,je),this._delegate=De,this.firebase=Se,(0,se._addComponent)(De,new j.wA("app-compat",function(){return Qe},"PUBLIC")),this.container=De.container}return(0,A.Z)(je,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(Se){this._delegate.automaticDataCollectionEnabled=Se}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var Se=this;return new Promise(function(Qe){Se._delegate.checkDestroyed(),Qe()}).then(function(){return Se.firebase.INTERNAL.removeApp(Se.name),(0,se.deleteApp)(Se._delegate)})}},{key:"_getService",value:function(Se){var tt,Qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var Je=this._delegate.container.getProvider(Se);return!Je.isInitialized()&&"EXPLICIT"===(null===(tt=Je.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:Qe})}},{key:"_removeServiceInstance",value:function(Se){var Qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(Se).clearInstance(Qe)}},{key:"_addComponent",value:function(Se){(0,se._addComponent)(this._delegate,Se)}},{key:"_addOrOverwriteComponent",value:function(Se){(0,se._addOrOverwriteComponent)(this._delegate,Se)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),je}(),J=((0,ie.Z)(ye={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,ie.Z)(ye,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ye),G=new R.LL("app-compat","Firebase",J),Ee=function Q(){var je=function Te(je){var De={},Se={__esModule:!0,initializeApp:function Je($){var ue=se.initializeApp($,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if((0,R.r3)(De,ue.name))return De[ue.name];var we=new je(ue,Se);return De[ue.name]=we,we},app:tt,registerVersion:se.registerVersion,setLogLevel:se.setLogLevel,onLog:se.onLog,apps:null,SDK_VERSION:se.SDK_VERSION,INTERNAL:{registerComponent:function Ze($){var te=$.name,ue=te.replace("-compat","");if(se._registerComponent($)&&"PUBLIC"===$.type){var we=function(){var pt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();if("function"!=typeof pt[ue])throw G.create("invalid-app-argument",{appName:te});return pt[ue]()};void 0!==$.serviceProps&&(0,R.ZB)(we,$.serviceProps),Se[ue]=we,je.prototype[ue]=function(){for(var $e=this._getService.bind(this,te),pt=arguments.length,It=new Array(pt),at=0;at<pt;at++)It[at]=arguments[at];return $e.apply(this,$.multipleInstances?It:[])}}return"PUBLIC"===$.type?Se[ue]:null},removeApp:function Qe($){delete De[$]},useAsService:function oe($,te){return"serverAuth"===te?null:te},modularAPIs:se}};function tt($){if(!(0,R.r3)(De,$=$||se._DEFAULT_ENTRY_NAME))throw G.create("no-app",{appName:$});return De[$]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function At(){return Object.keys(De).map(function($){return De[$]})}}),tt.App=je,Se}(y);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function De(Se){(0,R.ZB)(je,Se)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),je}(),Ae=new P.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){Ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&Ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ge=Ee;!function Fe(je){(0,se.registerVersion)("@firebase/app-compat","0.1.34",je)}()},9681:function(St,He,U){U.r(He),U.d(He,{FirebaseError:function(){return J.ZR},SDK_VERSION:function(){return Ui},_DEFAULT_ENTRY_NAME:function(){return or},_addComponent:function(){return ei},_addOrOverwriteComponent:function(){return Ia},_apps:function(){return ci},_clearComponents:function(){return xu},_components:function(){return kr},_getProvider:function(){return tn},_registerComponent:function(){return An},_removeServiceInstance:function(){return pa},deleteApp:function(){return Ca},getApp:function(){return Wr},getApps:function(){return Pr},initializeApp:function(){return Si},onLog:function(){return jn},registerVersion:function(){return Ai},setLogLevel:function(){return Gr}});var Te,Q,ie=U(4902),pe=U(4165),A=U(5861),R=U(7762),j=U(4942),se=U(5671),P=U(3144),ye=U(4859),y=U(1877),J=U(2090),G=U(6256),Ee=function(){function le(ve){(0,se.Z)(this,le),this.container=ve}return(0,P.Z)(le,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(Oe){if(function Ae(le){var ve=le.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Oe)){var et=Oe.getImmediate();return"".concat(et.library,"/").concat(et.version)}return null}).filter(function(Oe){return Oe}).join(" ")}}]),le}(),Me="@firebase/app",Fe=new y.Yd("@firebase/app"),or="[DEFAULT]",Hr=((0,j.Z)(Te={},Me,"fire-core"),(0,j.Z)(Te,"@firebase/app-compat","fire-core-compat"),(0,j.Z)(Te,"@firebase/analytics","fire-analytics"),(0,j.Z)(Te,"@firebase/analytics-compat","fire-analytics-compat"),(0,j.Z)(Te,"@firebase/app-check","fire-app-check"),(0,j.Z)(Te,"@firebase/app-check-compat","fire-app-check-compat"),(0,j.Z)(Te,"@firebase/auth","fire-auth"),(0,j.Z)(Te,"@firebase/auth-compat","fire-auth-compat"),(0,j.Z)(Te,"@firebase/database","fire-rtdb"),(0,j.Z)(Te,"@firebase/database-compat","fire-rtdb-compat"),(0,j.Z)(Te,"@firebase/functions","fire-fn"),(0,j.Z)(Te,"@firebase/functions-compat","fire-fn-compat"),(0,j.Z)(Te,"@firebase/installations","fire-iid"),(0,j.Z)(Te,"@firebase/installations-compat","fire-iid-compat"),(0,j.Z)(Te,"@firebase/messaging","fire-fcm"),(0,j.Z)(Te,"@firebase/messaging-compat","fire-fcm-compat"),(0,j.Z)(Te,"@firebase/performance","fire-perf"),(0,j.Z)(Te,"@firebase/performance-compat","fire-perf-compat"),(0,j.Z)(Te,"@firebase/remote-config","fire-rc"),(0,j.Z)(Te,"@firebase/remote-config-compat","fire-rc-compat"),(0,j.Z)(Te,"@firebase/storage","fire-gcs"),(0,j.Z)(Te,"@firebase/storage-compat","fire-gcs-compat"),(0,j.Z)(Te,"@firebase/firestore","fire-fst"),(0,j.Z)(Te,"@firebase/firestore-compat","fire-fst-compat"),(0,j.Z)(Te,"fire-js","fire-js"),(0,j.Z)(Te,"firebase","fire-js-all"),Te),ci=new Map,kr=new Map;function ei(le,ve){try{le.container.addComponent(ve)}catch(Re){Fe.debug("Component ".concat(ve.name," failed to register with FirebaseApp ").concat(le.name),Re)}}function Ia(le,ve){le.container.addOrOverwriteComponent(ve)}function An(le){var ve=le.name;if(kr.has(ve))return Fe.debug("There were multiple attempts to register component ".concat(ve,".")),!1;kr.set(ve,le);var Oe,Re=(0,R.Z)(ci.values());try{for(Re.s();!(Oe=Re.n()).done;)ei(Oe.value,le)}catch(dt){Re.e(dt)}finally{Re.f()}return!0}function tn(le,ve){var Re=le.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),le.container.getProvider(ve)}function pa(le,ve){var Re=arguments.length>2&&void 0!==arguments[2]?arguments[2]:or;tn(le,ve).clearInstance(Re)}function xu(){kr.clear()}var Yi=((0,j.Z)(Q={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,j.Z)(Q,"bad-app-name","Illegal App name: '{$appName}"),(0,j.Z)(Q,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,j.Z)(Q,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,j.Z)(Q,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,j.Z)(Q,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,j.Z)(Q,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,j.Z)(Q,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,j.Z)(Q,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,j.Z)(Q,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Q),un=new J.LL("app","Firebase",Yi),lr=function(){function le(ve,Re,Oe){var et=this;(0,se.Z)(this,le),this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=Oe,this.container.addComponent(new ye.wA("app",function(){return et},"PUBLIC"))}return(0,P.Z)(le,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(Re){this._isDeleted=Re}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}]),le}(),Ui="9.10.0";function Si(le){var ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof ve){var Re=ve;ve={name:Re}}var Oe=Object.assign({name:or,automaticDataCollectionEnabled:!1},ve),et=Oe.name;if("string"!=typeof et||!et)throw un.create("bad-app-name",{appName:String(et)});var dt=ci.get(et);if(dt){if((0,J.vZ)(le,dt.options)&&(0,J.vZ)(Oe,dt.config))return dt;throw un.create("duplicate-app",{appName:et})}var Gt,Zt=new ye.H0(et),Vt=(0,R.Z)(kr.values());try{for(Vt.s();!(Gt=Vt.n()).done;){var me=Gt.value;Zt.addComponent(me)}}catch(he){Vt.e(he)}finally{Vt.f()}var Ie=new lr(le,Oe,Zt);return ci.set(et,Ie),Ie}function Wr(){var le=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,ve=ci.get(le);if(!ve)throw un.create("no-app",{appName:le});return ve}function Pr(){return Array.from(ci.values())}function Ca(le){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,A.Z)((0,pe.Z)().mark(function le(ve){var Re;return(0,pe.Z)().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:if(!ci.has(Re=ve.name)){et.next=6;break}return ci.delete(Re),et.next=5,Promise.all(ve.container.getProviders().map(function(dt){return dt.delete()}));case 5:ve.isDeleted=!0;case 6:case"end":return et.stop()}},le)}))).apply(this,arguments)}function Ai(le,ve,Re){var Oe,et=null!==(Oe=Hr[le])&&void 0!==Oe?Oe:le;Re&&(et+="-".concat(Re));var dt=et.match(/\s|\//),Zt=ve.match(/\s|\//);if(dt||Zt){var Vt=['Unable to register library "'.concat(et,'" with version "').concat(ve,'":')];return dt&&Vt.push('library name "'.concat(et,'" contains illegal characters (whitespace or "/")')),dt&&Zt&&Vt.push("and"),Zt&&Vt.push('version name "'.concat(ve,'" contains illegal characters (whitespace or "/")')),void Fe.warn(Vt.join(" "))}An(new ye.wA("".concat(et,"-version"),function(){return{library:et,version:ve}},"VERSION"))}function jn(le,ve){if(null!==le&&"function"!=typeof le)throw un.create("invalid-log-argument");(0,y.Am)(le,ve)}function Gr(le){(0,y.Ub)(le)}var xt="firebase-heartbeat-store",hi=null;function Hn(){return hi||(hi=(0,G.X3)("firebase-heartbeat-database",1,{upgrade:function(ve,Re){0===Re&&ve.createObjectStore(xt)}}).catch(function(le){throw un.create("idb-open",{originalErrorMessage:le.message})})),hi}function Ot(le){return an.apply(this,arguments)}function an(){return(an=(0,A.Z)((0,pe.Z)().mark(function le(ve){var Re,et;return(0,pe.Z)().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return Zt.prev=0,Zt.next=3,Hn();case 3:return Zt.abrupt("return",Zt.sent.transaction(xt).objectStore(xt).get(Fn(ve)));case 7:Zt.prev=7,Zt.t0=Zt.catch(0),Zt.t0 instanceof J.ZR?Fe.warn(Zt.t0.message):(et=un.create("idb-get",{originalErrorMessage:null===(Re=Zt.t0)||void 0===Re?void 0:Re.message}),Fe.warn(et.message));case 10:case"end":return Zt.stop()}},le,null,[[0,7]])}))).apply(this,arguments)}function ti(le,ve){return pr.apply(this,arguments)}function pr(){return(pr=(0,A.Z)((0,pe.Z)().mark(function le(ve,Re){var Oe,dt,Zt,Vt;return(0,pe.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.prev=0,me.next=3,Hn();case 3:return dt=me.sent.transaction(xt,"readwrite"),Zt=dt.objectStore(xt),me.next=8,Zt.put(Re,Fn(ve));case 8:return me.abrupt("return",dt.done);case 11:me.prev=11,me.t0=me.catch(0),me.t0 instanceof J.ZR?Fe.warn(me.t0.message):(Vt=un.create("idb-set",{originalErrorMessage:null===(Oe=me.t0)||void 0===Oe?void 0:Oe.message}),Fe.warn(Vt.message));case 14:case"end":return me.stop()}},le,null,[[0,11]])}))).apply(this,arguments)}function Fn(le){return"".concat(le.name,"!").concat(le.options.appId)}var sr=function(){function le(ve){var Re=this;(0,se.Z)(this,le),this.container=ve,this._heartbeatsCache=null;var Oe=this.container.getProvider("app").getImmediate();this._storage=new Rn(Oe),this._heartbeatsCachePromise=this._storage.read().then(function(et){return Re._heartbeatsCache=et,et})}return(0,P.Z)(le,[{key:"triggerHeartbeat",value:(ve=(0,A.Z)((0,pe.Z)().mark(function Oe(){var et,dt,Zt;return(0,pe.Z)().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:if(et=this.container.getProvider("platform-logger").getImmediate(),dt=et.getPlatformInfoString(),Zt=Ht(),null!==this._heartbeatsCache){Gt.next=7;break}return Gt.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=Gt.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==Zt&&!this._heartbeatsCache.heartbeats.some(function(me){return me.date===Zt})){Gt.next=11;break}return Gt.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:Zt,agent:dt});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(me){var Ie=new Date(me.date).valueOf();return Date.now()-Ie<=2592e6}),Gt.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return Gt.stop()}},Oe,this)})),function Re(){return ve.apply(this,arguments)})},{key:"getHeartbeatsHeader",value:function(){var ve=(0,A.Z)((0,pe.Z)().mark(function Oe(){var et,dt,Vt,Gt;return(0,pe.Z)().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(null!==this._heartbeatsCache){Ie.next=3;break}return Ie.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){Ie.next=5;break}return Ie.abrupt("return","");case 5:if(et=Ht(),dt=Ta(this._heartbeatsCache.heartbeats),Vt=dt.unsentEntries,Gt=(0,J.L)(JSON.stringify({version:2,heartbeats:dt.heartbeatsToSend})),this._heartbeatsCache.lastSentHeartbeatDate=et,!(Vt.length>0)){Ie.next=15;break}return this._heartbeatsCache.heartbeats=Vt,Ie.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:Ie.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return Ie.abrupt("return",Gt);case 18:case"end":return Ie.stop()}},Oe,this)}));return function Re(){return ve.apply(this,arguments)}}()}]),le;var ve}();function Ht(){return(new Date).toISOString().substring(0,10)}function Ta(le){var dt,ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,Re=[],Oe=le.slice(),et=(0,R.Z)(le);try{var Zt=function(){var me=dt.value,Ie=Re.find(function(he){return he.agent===me.agent});if(Ie){if(Ie.dates.push(me.date),Ke(Re)>ve)return Ie.dates.pop(),"break"}else if(Re.push({agent:me.agent,dates:[me.date]}),Ke(Re)>ve)return Re.pop(),"break";Oe=Oe.slice(1)};for(et.s();!(dt=et.n()).done;){var Vt=Zt();if("break"===Vt)break}}catch(Gt){et.e(Gt)}finally{et.f()}return{heartbeatsToSend:Re,unsentEntries:Oe}}var Rn=function(){function le(ve){(0,se.Z)(this,le),this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,P.Z)(le,[{key:"runIndexedDBEnvironmentCheck",value:(ve=(0,A.Z)((0,pe.Z)().mark(function Oe(){return(0,pe.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if((0,J.hl)()){dt.next=4;break}return dt.abrupt("return",!1);case 4:return dt.abrupt("return",(0,J.eu)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return dt.stop()}},Oe)})),function Re(){return ve.apply(this,arguments)})},{key:"read",value:function(){var ve=(0,A.Z)((0,pe.Z)().mark(function Oe(){return(0,pe.Z)().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return Vt.next=2,this._canUseIndexedDBPromise;case 2:if(Vt.sent){Vt.next=7;break}return Vt.abrupt("return",{heartbeats:[]});case 7:return Vt.next=9,Ot(this.app);case 9:return Vt.abrupt("return",Vt.sent||{heartbeats:[]});case 11:case"end":return Vt.stop()}},Oe,this)}));return function Re(){return ve.apply(this,arguments)}}()},{key:"overwrite",value:function(){var ve=(0,A.Z)((0,pe.Z)().mark(function Oe(et){var dt,Vt;return(0,pe.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,this._canUseIndexedDBPromise;case 2:if(me.sent){me.next=7;break}return me.abrupt("return");case 7:return me.next=9,this.read();case 9:return Vt=me.sent,me.abrupt("return",ti(this.app,{lastSentHeartbeatDate:null!==(dt=et.lastSentHeartbeatDate)&&void 0!==dt?dt:Vt.lastSentHeartbeatDate,heartbeats:et.heartbeats}));case 11:case"end":return me.stop()}},Oe,this)}));return function Re(Oe){return ve.apply(this,arguments)}}()},{key:"add",value:function(){var ve=(0,A.Z)((0,pe.Z)().mark(function Oe(et){var dt,Vt;return(0,pe.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,this._canUseIndexedDBPromise;case 2:if(me.sent){me.next=7;break}return me.abrupt("return");case 7:return me.next=9,this.read();case 9:return Vt=me.sent,me.abrupt("return",ti(this.app,{lastSentHeartbeatDate:null!==(dt=et.lastSentHeartbeatDate)&&void 0!==dt?dt:Vt.lastSentHeartbeatDate,heartbeats:[].concat((0,ie.Z)(Vt.heartbeats),(0,ie.Z)(et.heartbeats))}));case 11:case"end":return me.stop()}},Oe,this)}));return function Re(Oe){return ve.apply(this,arguments)}}()}]),le;var ve}();function Ke(le){return(0,J.L)(JSON.stringify({version:2,heartbeats:le})).length}!function _e(le){An(new ye.wA("platform-logger",function(ve){return new Ee(ve)},"PRIVATE")),An(new ye.wA("heartbeat",function(ve){return new sr(ve)},"PRIVATE")),Ai(Me,"0.7.33",le),Ai(Me,"0.7.33","esm2017"),Ai("fire-js","")}("")},4859:function(St,He,U){U.d(He,{H0:function(){return Ee},wA:function(){return y},zt:function(){return G}});var ie=U(4165),pe=U(4902),A=U(5861),R=U(7685),j=U(7762),se=U(5671),P=U(3144),ye=U(2090),y=function(){function Ae(Me,be,Fe){(0,se.Z)(this,Ae),this.name=Me,this.instanceFactory=be,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,P.Z)(Ae,[{key:"setInstantiationMode",value:function(be){return this.instantiationMode=be,this}},{key:"setMultipleInstances",value:function(be){return this.multipleInstances=be,this}},{key:"setServiceProps",value:function(be){return this.serviceProps=be,this}},{key:"setInstanceCreatedCallback",value:function(be){return this.onInstanceCreated=be,this}}]),Ae}(),J="[DEFAULT]",G=function(){function Ae(Me,be){(0,se.Z)(this,Ae),this.name=Me,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,P.Z)(Ae,[{key:"get",value:function(be){var Fe=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(Fe)){var Ue=new ye.BH;if(this.instancesDeferred.set(Fe,Ue),this.isInitialized(Fe)||this.shouldAutoInitialize())try{var Ge=this.getOrInitializeService({instanceIdentifier:Fe});Ge&&Ue.resolve(Ge)}catch(je){}}return this.instancesDeferred.get(Fe).promise}},{key:"getImmediate",value:function(be){var Fe,Ue=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),Ge=null!==(Fe=null==be?void 0:be.optional)&&void 0!==Fe&&Fe;if(!this.isInitialized(Ue)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:Ue})}catch(je){if(Ge)return null;throw je}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(be){if(be.name!==this.name)throw Error("Mismatching Component ".concat(be.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=be,this.shouldAutoInitialize()){if(function Q(Ae){return"EAGER"===Ae.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:J})}catch(tt){}var Ue,Fe=(0,j.Z)(this.instancesDeferred.entries());try{for(Fe.s();!(Ue=Fe.n()).done;){var Ge=(0,R.Z)(Ue.value,2),De=Ge[1],Se=this.normalizeInstanceIdentifier(Ge[0]);try{var Qe=this.getOrInitializeService({instanceIdentifier:Se});De.resolve(Qe)}catch(tt){}}}catch(tt){Fe.e(tt)}finally{Fe.f()}}}},{key:"clearInstance",value:function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)}},{key:"delete",value:(Me=(0,A.Z)((0,ie.Z)().mark(function Fe(){var Ue;return(0,ie.Z)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return Ue=Array.from(this.instances.values()),je.next=3,Promise.all([].concat((0,pe.Z)(Ue.filter(function(De){return"INTERNAL"in De}).map(function(De){return De.INTERNAL.delete()})),(0,pe.Z)(Ue.filter(function(De){return"_delete"in De}).map(function(De){return De._delete()}))));case 3:case"end":return je.stop()}},Fe,this)})),function be(){return Me.apply(this,arguments)})},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.instances.has(be)}},{key:"getOptions",value:function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.instancesOptions.get(be)||{}}},{key:"initialize",value:function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Fe=be.options,Ue=void 0===Fe?{}:Fe,Ge=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(Ge))throw Error("".concat(this.name,"(").concat(Ge,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var Se,je=this.getOrInitializeService({instanceIdentifier:Ge,options:Ue}),De=(0,j.Z)(this.instancesDeferred.entries());try{for(De.s();!(Se=De.n()).done;){var Qe=(0,R.Z)(Se.value,2),tt=Qe[0],Je=Qe[1],At=this.normalizeInstanceIdentifier(tt);Ge===At&&Je.resolve(je)}}catch(Ze){De.e(Ze)}finally{De.f()}return je}},{key:"onInit",value:function(be,Fe){var Ue,Ge=this.normalizeInstanceIdentifier(Fe),je=null!==(Ue=this.onInitCallbacks.get(Ge))&&void 0!==Ue?Ue:new Set;je.add(be),this.onInitCallbacks.set(Ge,je);var De=this.instances.get(Ge);return De&&be(De,Ge),function(){je.delete(be)}}},{key:"invokeOnInitCallbacks",value:function(be,Fe){var Ue=this.onInitCallbacks.get(Fe);if(Ue){var je,Ge=(0,j.Z)(Ue);try{for(Ge.s();!(je=Ge.n()).done;){var De=je.value;try{De(be,Fe)}catch(Se){}}}catch(Se){Ge.e(Se)}finally{Ge.f()}}}},{key:"getOrInitializeService",value:function(be){var Fe=be.instanceIdentifier,Ue=be.options,Ge=void 0===Ue?{}:Ue,je=this.instances.get(Fe);if(!je&&this.component&&(je=this.component.instanceFactory(this.container,{instanceIdentifier:Te(Fe),options:Ge}),this.instances.set(Fe,je),this.instancesOptions.set(Fe,Ge),this.invokeOnInitCallbacks(je,Fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Fe,je)}catch(De){}return je||null}},{key:"normalizeInstanceIdentifier",value:function(){var be=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.component?this.component.multipleInstances?be:J:be}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),Ae;var Me}();function Te(Ae){return Ae===J?void 0:Ae}var Ee=function(){function Ae(Me){(0,se.Z)(this,Ae),this.name=Me,this.providers=new Map}return(0,P.Z)(Ae,[{key:"addComponent",value:function(be){var Fe=this.getProvider(be.name);if(Fe.isComponentSet())throw new Error("Component ".concat(be.name," has already been registered with ").concat(this.name));Fe.setComponent(be)}},{key:"addOrOverwriteComponent",value:function(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)}},{key:"getProvider",value:function(be){if(this.providers.has(be))return this.providers.get(be);var Fe=new G(be,this);return this.providers.set(be,Fe),Fe}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),Ae}()},1877:function(St,He,U){U.d(He,{Am:function(){return Ee},Ub:function(){return Q},Yd:function(){return Te},in:function(){return P}});var j,ie=U(7762),pe=U(5671),A=U(3144),R=U(4942),se=[],P=function(){return(Ae=P||(P={}))[Ae.DEBUG=0]="DEBUG",Ae[Ae.VERBOSE=1]="VERBOSE",Ae[Ae.INFO=2]="INFO",Ae[Ae.WARN=3]="WARN",Ae[Ae.ERROR=4]="ERROR",Ae[Ae.SILENT=5]="SILENT",P;var Ae}(),ye={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},y=P.INFO,J=((0,R.Z)(j={},P.DEBUG,"log"),(0,R.Z)(j,P.VERBOSE,"log"),(0,R.Z)(j,P.INFO,"info"),(0,R.Z)(j,P.WARN,"warn"),(0,R.Z)(j,P.ERROR,"error"),j),G=function(Me,be){if(!(be<Me.logLevel)){var Fe=(new Date).toISOString(),Ue=J[be];if(!Ue)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(be,")"));for(var Ge,je=arguments.length,De=new Array(je>2?je-2:0),Se=2;Se<je;Se++)De[Se-2]=arguments[Se];(Ge=console)[Ue].apply(Ge,["[".concat(Fe,"]  ").concat(Me.name,":")].concat(De))}},Te=function(){function Ae(Me){(0,pe.Z)(this,Ae),this.name=Me,this._logLevel=y,this._logHandler=G,this._userLogHandler=null,se.push(this)}return(0,A.Z)(Ae,[{key:"logLevel",get:function(){return this._logLevel},set:function(be){if(!(be in P))throw new TypeError('Invalid value "'.concat(be,'" assigned to `logLevel`'));this._logLevel=be}},{key:"setLogLevel",value:function(be){this._logLevel="string"==typeof be?ye[be]:be}},{key:"logHandler",get:function(){return this._logHandler},set:function(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(be){this._userLogHandler=be}},{key:"debug",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];this._userLogHandler&&this._userLogHandler.apply(this,[this,P.DEBUG].concat(Fe)),this._logHandler.apply(this,[this,P.DEBUG].concat(Fe))}},{key:"log",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];this._userLogHandler&&this._userLogHandler.apply(this,[this,P.VERBOSE].concat(Fe)),this._logHandler.apply(this,[this,P.VERBOSE].concat(Fe))}},{key:"info",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];this._userLogHandler&&this._userLogHandler.apply(this,[this,P.INFO].concat(Fe)),this._logHandler.apply(this,[this,P.INFO].concat(Fe))}},{key:"warn",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];this._userLogHandler&&this._userLogHandler.apply(this,[this,P.WARN].concat(Fe)),this._logHandler.apply(this,[this,P.WARN].concat(Fe))}},{key:"error",value:function(){for(var be=arguments.length,Fe=new Array(be),Ue=0;Ue<be;Ue++)Fe[Ue]=arguments[Ue];this._userLogHandler&&this._userLogHandler.apply(this,[this,P.ERROR].concat(Fe)),this._logHandler.apply(this,[this,P.ERROR].concat(Fe))}}]),Ae}();function Q(Ae){se.forEach(function(Me){Me.setLogLevel(Ae)})}function Ee(Ae,Me){var Fe,be=(0,ie.Z)(se);try{var Ue=function(){var De=null;Me&&Me.level&&(De=ye[Me.level]),Fe.value.userLogHandler=null===Ae?null:function(Se,Qe){for(var tt=arguments.length,Je=new Array(tt>2?tt-2:0),At=2;At<tt;At++)Je[At-2]=arguments[At];var Ze=Je.map(function(oe){if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch($){return null}}).filter(function(oe){return oe}).join(" ");Qe>=(null!=De?De:Se.logLevel)&&Ae({level:P[Qe].toLowerCase(),message:Ze,args:Je,type:Se.name})}};for(be.s();!(Fe=be.n()).done;)Ue()}catch(Ge){be.e(Ge)}finally{be.f()}}},6256:function(St,He,U){U.d(He,{Lj:function(){return tt},X3:function(){return Qe}});var ie=U(4942);function pe($,te){var ue=Object.keys($);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols($);te&&(we=we.filter(function($e){return Object.getOwnPropertyDescriptor($,$e).enumerable})),ue.push.apply(ue,we)}return ue}function A($){for(var te=1;te<arguments.length;te++){var ue=null!=arguments[te]?arguments[te]:{};te%2?pe(Object(ue),!0).forEach(function(we){(0,ie.Z)($,we,ue[we])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(ue)):pe(Object(ue)).forEach(function(we){Object.defineProperty($,we,Object.getOwnPropertyDescriptor(ue,we))})}return $}var P,ye,R=U(4165),j=U(5861),G=new WeakMap,Te=new WeakMap,Q=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,Fe={get:function(te,ue,we){if(te instanceof IDBTransaction){if("done"===ue)return Te.get(te);if("objectStoreNames"===ue)return te.objectStoreNames||Q.get(te);if("store"===ue)return we.objectStoreNames[1]?void 0:we.objectStore(we.objectStoreNames[0])}return De(te[ue])},set:function(te,ue,we){return te[ue]=we,!0},has:function(te,ue){return te instanceof IDBTransaction&&("done"===ue||"store"===ue)||ue in te}};function je($){return"function"==typeof $?function Ge($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(){for(var te=arguments.length,ue=new Array(te),we=0;we<te;we++)ue[we]=arguments[we];return $.apply(Se(this),ue),De(G.get(this))}:function(){for(var te=arguments.length,ue=new Array(te),we=0;we<te;we++)ue[we]=arguments[we];return De($.apply(Se(this),ue))}:function(te){for(var ue=arguments.length,we=new Array(ue>1?ue-1:0),$e=1;$e<ue;$e++)we[$e-1]=arguments[$e];var pt=$.call.apply($,[Se(this),te].concat(we));return Q.set(pt,te.sort?te.sort():[te]),De(pt)}}($):($ instanceof IDBTransaction&&function be($){if(!Te.has($)){var te=new Promise(function(ue,we){var $e=function(){$.removeEventListener("complete",pt),$.removeEventListener("error",It),$.removeEventListener("abort",It)},pt=function(){ue(),$e()},It=function(){we($.error||new DOMException("AbortError","AbortError")),$e()};$.addEventListener("complete",pt),$.addEventListener("error",It),$.addEventListener("abort",It)});Te.set($,te)}}($),te=$,function y(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}().some(function(we){return te instanceof we})?new Proxy($,Fe):$);var te}function De($){if($ instanceof IDBRequest)return function Me($){var te=new Promise(function(ue,we){var $e=function(){$.removeEventListener("success",pt),$.removeEventListener("error",It)},pt=function(){ue(De($.result)),$e()},It=function(){we($.error),$e()};$.addEventListener("success",pt),$.addEventListener("error",It)});return te.then(function(ue){ue instanceof IDBCursor&&G.set(ue,$)}).catch(function(){}),Ae.set(te,$),te}($);if(Ee.has($))return Ee.get($);var te=je($);return te!==$&&(Ee.set($,te),Ae.set(te,$)),te}var Se=function(te){return Ae.get(te)};function Qe($,te){var ue=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},we=ue.blocked,$e=ue.upgrade,pt=ue.blocking,It=ue.terminated,at=indexedDB.open($,te),Be=De(at);return $e&&at.addEventListener("upgradeneeded",function(mt){$e(De(at.result),mt.oldVersion,mt.newVersion,De(at.transaction))}),we&&at.addEventListener("blocked",function(){return we()}),Be.then(function(mt){It&&mt.addEventListener("close",function(){return It()}),pt&&mt.addEventListener("versionchange",function(){return pt()})}).catch(function(){}),Be}function tt($){var te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ue=te.blocked,we=indexedDB.deleteDatabase($);return ue&&we.addEventListener("blocked",function(){return ue()}),De(we).then(function(){})}var Je=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Ze=new Map;function oe($,te){if($ instanceof IDBDatabase&&!(te in $)&&"string"==typeof te){if(Ze.get(te))return Ze.get(te);var ue=te.replace(/FromIndex$/,""),we=te!==ue,$e=At.includes(ue);if(ue in(we?IDBIndex:IDBObjectStore).prototype&&($e||Je.includes(ue))){var pt=function(){var It=(0,j.Z)((0,R.Z)().mark(function at(Be){var mt,rn,Tn,Wn,Rr,or,Hr=arguments;return(0,R.Z)().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:for(rn=this.transaction(Be,$e?"readwrite":"readonly"),Tn=rn.store,Wn=Hr.length,Rr=new Array(Wn>1?Wn-1:0),or=1;or<Wn;or++)Rr[or-1]=Hr[or];return we&&(Tn=Tn.index(Rr.shift())),kr.next=6,Promise.all([(mt=Tn)[ue].apply(mt,Rr),$e&&rn.done]);case 6:return kr.abrupt("return",kr.sent[0]);case 7:case"end":return kr.stop()}},at,this)}));return function(Be){return It.apply(this,arguments)}}();return Ze.set(te,pt),pt}}}!function Ue($){Fe=$(Fe)}(function($){return A(A({},$),{},{get:function(ue,we,$e){return oe(ue,we)||$.get(ue,we,$e)},has:function(ue,we){return!!oe(ue,we)||$.has(ue,we)}})})},907:function(St,He,U){function ie(pe,A){(null==A||A>pe.length)&&(A=pe.length);for(var R=0,j=new Array(A);R<A;R++)j[R]=pe[R];return j}U.d(He,{Z:function(){return ie}})},3878:function(St,He,U){function ie(pe){if(Array.isArray(pe))return pe}U.d(He,{Z:function(){return ie}})},7326:function(St,He,U){function ie(pe){if(void 0===pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}U.d(He,{Z:function(){return ie}})},5861:function(St,He,U){function ie(A,R,j,se,P,ye,y){try{var J=A[ye](y),G=J.value}catch(Te){return void j(Te)}J.done?R(G):Promise.resolve(G).then(se,P)}function pe(A){return function(){var R=this,j=arguments;return new Promise(function(se,P){var ye=A.apply(R,j);function y(G){ie(ye,se,P,y,J,"next",G)}function J(G){ie(ye,se,P,y,J,"throw",G)}y(void 0)})}}U.d(He,{Z:function(){return pe}})},5671:function(St,He,U){function ie(pe,A){if(!(pe instanceof A))throw new TypeError("Cannot call a class as a function")}U.d(He,{Z:function(){return ie}})},5647:function(St,He,U){U.d(He,{Z:function(){return A}});var ie=U(9611),pe=U(8814);function A(R,j,se){return(A=(0,pe.Z)()?Reflect.construct.bind():function(ye,y,J){var G=[null];G.push.apply(G,y);var Q=new(Function.bind.apply(ye,G));return J&&(0,ie.Z)(Q,J.prototype),Q}).apply(null,arguments)}},3144:function(St,He,U){function ie(A,R){for(var j=0;j<R.length;j++){var se=R[j];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(A,se.key,se)}}function pe(A,R,j){return R&&ie(A.prototype,R),j&&ie(A,j),Object.defineProperty(A,"prototype",{writable:!1}),A}U.d(He,{Z:function(){return pe}})},7762:function(St,He,U){U.d(He,{Z:function(){return pe}});var ie=U(181);function pe(A,R){var j="undefined"!=typeof Symbol&&A[Symbol.iterator]||A["@@iterator"];if(!j){if(Array.isArray(A)||(j=(0,ie.Z)(A))||R&&A&&"number"==typeof A.length){j&&(A=j);var se=0,P=function(){};return{s:P,n:function(){return se>=A.length?{done:!0}:{done:!1,value:A[se++]}},e:function(Te){throw Te},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,ye=!0,y=!1;return{s:function(){j=j.call(A)},n:function(){var Te=j.next();return ye=Te.done,Te},e:function(Te){y=!0,J=Te},f:function(){try{!ye&&null!=j.return&&j.return()}finally{if(y)throw J}}}}},8486:function(St,He,U){U.d(He,{Z:function(){return se}});var ie=U(1120),pe=U(8814),A=U(1002),R=U(7326);function j(P,ye){if(ye&&("object"===(0,A.Z)(ye)||"function"==typeof ye))return ye;if(void 0!==ye)throw new TypeError("Derived constructors may only return object or undefined");return(0,R.Z)(P)}function se(P){var ye=(0,pe.Z)();return function(){var G,J=(0,ie.Z)(P);if(ye){var Te=(0,ie.Z)(this).constructor;G=Reflect.construct(J,arguments,Te)}else G=J.apply(this,arguments);return j(this,G)}}},4942:function(St,He,U){function ie(pe,A,R){return A in pe?Object.defineProperty(pe,A,{value:R,enumerable:!0,configurable:!0,writable:!0}):pe[A]=R,pe}U.d(He,{Z:function(){return ie}})},3237:function(St,He,U){U.d(He,{Z:function(){return A}});var ie=U(1120);function pe(R,j){for(;!Object.prototype.hasOwnProperty.call(R,j)&&null!==(R=(0,ie.Z)(R)););return R}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(j,se,P){var ye=pe(j,se);if(ye){var y=Object.getOwnPropertyDescriptor(ye,se);return y.get?y.get.call(arguments.length<3?j:P):y.value}},A.apply(this,arguments)}},1120:function(St,He,U){function ie(pe){return(ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)})(pe)}U.d(He,{Z:function(){return ie}})},136:function(St,He,U){U.d(He,{Z:function(){return pe}});var ie=U(9611);function pe(A,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),Object.defineProperty(A,"prototype",{writable:!1}),R&&(0,ie.Z)(A,R)}},8814:function(St,He,U){function ie(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}U.d(He,{Z:function(){return ie}})},9199:function(St,He,U){function ie(pe){if("undefined"!=typeof Symbol&&null!=pe[Symbol.iterator]||null!=pe["@@iterator"])return Array.from(pe)}U.d(He,{Z:function(){return ie}})},5267:function(St,He,U){function ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}U.d(He,{Z:function(){return ie}})},4165:function(St,He,U){U.d(He,{Z:function(){return pe}});var ie=U(1002);function pe(){pe=function(){return A};var A={},R=Object.prototype,j=R.hasOwnProperty,se="function"==typeof Symbol?Symbol:{},P=se.iterator||"@@iterator",ye=se.asyncIterator||"@@asyncIterator",y=se.toStringTag||"@@toStringTag";function J(oe,$,te){return Object.defineProperty(oe,$,{value:te,enumerable:!0,configurable:!0,writable:!0}),oe[$]}try{J({},"")}catch(oe){J=function(te,ue,we){return te[ue]=we}}function G(oe,$,te,ue){var It,at,Be,mt,$e=Object.create(($&&$.prototype instanceof Ee?$:Ee).prototype),pt=new Je(ue||[]);return $e._invoke=(It=oe,at=te,Be=pt,mt="suspendedStart",function(rn,Tn){if("executing"===mt)throw new Error("Generator is already running");if("completed"===mt){if("throw"===rn)throw Tn;return{value:void 0,done:!0}}for(Be.method=rn,Be.arg=Tn;;){var Wn=Be.delegate;if(Wn){var Rr=Se(Wn,Be);if(Rr){if(Rr===Q)continue;return Rr}}if("next"===Be.method)Be.sent=Be._sent=Be.arg;else if("throw"===Be.method){if("suspendedStart"===mt)throw mt="completed",Be.arg;Be.dispatchException(Be.arg)}else"return"===Be.method&&Be.abrupt("return",Be.arg);mt="executing";var or=Te(It,at,Be);if("normal"===or.type){if(mt=Be.done?"completed":"suspendedYield",or.arg===Q)continue;return{value:or.arg,done:Be.done}}"throw"===or.type&&(mt="completed",Be.method="throw",Be.arg=or.arg)}}),$e}function Te(oe,$,te){try{return{type:"normal",arg:oe.call($,te)}}catch(ue){return{type:"throw",arg:ue}}}A.wrap=G;var Q={};function Ee(){}function Ae(){}function Me(){}var be={};J(be,P,function(){return this});var Fe=Object.getPrototypeOf,Ue=Fe&&Fe(Fe(At([])));Ue&&Ue!==R&&j.call(Ue,P)&&(be=Ue);var Ge=Me.prototype=Ee.prototype=Object.create(be);function je(oe){["next","throw","return"].forEach(function($){J(oe,$,function(te){return this._invoke($,te)})})}function De(oe,$){function te(we,$e,pt,It){var at=Te(oe[we],oe,$e);if("throw"!==at.type){var Be=at.arg,mt=Be.value;return mt&&"object"==(0,ie.Z)(mt)&&j.call(mt,"__await")?$.resolve(mt.__await).then(function(rn){te("next",rn,pt,It)},function(rn){te("throw",rn,pt,It)}):$.resolve(mt).then(function(rn){Be.value=rn,pt(Be)},function(rn){return te("throw",rn,pt,It)})}It(at.arg)}var ue;this._invoke=function(we,$e){function pt(){return new $(function(It,at){te(we,$e,It,at)})}return ue=ue?ue.then(pt,pt):pt()}}function Se(oe,$){var te=oe.iterator[$.method];if(void 0===te){if($.delegate=null,"throw"===$.method){if(oe.iterator.return&&($.method="return",$.arg=void 0,Se(oe,$),"throw"===$.method))return Q;$.method="throw",$.arg=new TypeError("The iterator does not provide a 'throw' method")}return Q}var ue=Te(te,oe.iterator,$.arg);if("throw"===ue.type)return $.method="throw",$.arg=ue.arg,$.delegate=null,Q;var we=ue.arg;return we?we.done?($[oe.resultName]=we.value,$.next=oe.nextLoc,"return"!==$.method&&($.method="next",$.arg=void 0),$.delegate=null,Q):we:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,Q)}function Qe(oe){var $={tryLoc:oe[0]};1 in oe&&($.catchLoc=oe[1]),2 in oe&&($.finallyLoc=oe[2],$.afterLoc=oe[3]),this.tryEntries.push($)}function tt(oe){var $=oe.completion||{};$.type="normal",delete $.arg,oe.completion=$}function Je(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(Qe,this),this.reset(!0)}function At(oe){if(oe){var $=oe[P];if($)return $.call(oe);if("function"==typeof oe.next)return oe;if(!isNaN(oe.length)){var te=-1,ue=function we(){for(;++te<oe.length;)if(j.call(oe,te))return we.value=oe[te],we.done=!1,we;return we.value=void 0,we.done=!0,we};return ue.next=ue}}return{next:Ze}}function Ze(){return{value:void 0,done:!0}}return Ae.prototype=Me,J(Ge,"constructor",Me),J(Me,"constructor",Ae),Ae.displayName=J(Me,y,"GeneratorFunction"),A.isGeneratorFunction=function(oe){var $="function"==typeof oe&&oe.constructor;return!!$&&($===Ae||"GeneratorFunction"===($.displayName||$.name))},A.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,Me):(oe.__proto__=Me,J(oe,y,"GeneratorFunction")),oe.prototype=Object.create(Ge),oe},A.awrap=function(oe){return{__await:oe}},je(De.prototype),J(De.prototype,ye,function(){return this}),A.AsyncIterator=De,A.async=function(oe,$,te,ue,we){void 0===we&&(we=Promise);var $e=new De(G(oe,$,te,ue),we);return A.isGeneratorFunction($)?$e:$e.next().then(function(pt){return pt.done?pt.value:$e.next()})},je(Ge),J(Ge,y,"Generator"),J(Ge,P,function(){return this}),J(Ge,"toString",function(){return"[object Generator]"}),A.keys=function(oe){var $=[];for(var te in oe)$.push(te);return $.reverse(),function ue(){for(;$.length;){var we=$.pop();if(we in oe)return ue.value=we,ue.done=!1,ue}return ue.done=!0,ue}},A.values=At,Je.prototype={constructor:Je,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(tt),!$)for(var te in this)"t"===te.charAt(0)&&j.call(this,te)&&!isNaN(+te.slice(1))&&(this[te]=void 0)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if("throw"===$.type)throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var te=this;function ue(Be,mt){return pt.type="throw",pt.arg=$,te.next=Be,mt&&(te.method="next",te.arg=void 0),!!mt}for(var we=this.tryEntries.length-1;we>=0;--we){var $e=this.tryEntries[we],pt=$e.completion;if("root"===$e.tryLoc)return ue("end");if($e.tryLoc<=this.prev){var It=j.call($e,"catchLoc"),at=j.call($e,"finallyLoc");if(It&&at){if(this.prev<$e.catchLoc)return ue($e.catchLoc,!0);if(this.prev<$e.finallyLoc)return ue($e.finallyLoc)}else if(It){if(this.prev<$e.catchLoc)return ue($e.catchLoc,!0)}else{if(!at)throw new Error("try statement without catch or finally");if(this.prev<$e.finallyLoc)return ue($e.finallyLoc)}}}},abrupt:function($,te){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var we=this.tryEntries[ue];if(we.tryLoc<=this.prev&&j.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var $e=we;break}}$e&&("break"===$||"continue"===$)&&$e.tryLoc<=te&&te<=$e.finallyLoc&&($e=null);var pt=$e?$e.completion:{};return pt.type=$,pt.arg=te,$e?(this.method="next",this.next=$e.finallyLoc,Q):this.complete(pt)},complete:function($,te){if("throw"===$.type)throw $.arg;return"break"===$.type||"continue"===$.type?this.next=$.arg:"return"===$.type?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):"normal"===$.type&&te&&(this.next=te),Q},finish:function($){for(var te=this.tryEntries.length-1;te>=0;--te){var ue=this.tryEntries[te];if(ue.finallyLoc===$)return this.complete(ue.completion,ue.afterLoc),tt(ue),Q}},catch:function($){for(var te=this.tryEntries.length-1;te>=0;--te){var ue=this.tryEntries[te];if(ue.tryLoc===$){var we=ue.completion;if("throw"===we.type){var $e=we.arg;tt(ue)}return $e}}throw new Error("illegal catch attempt")},delegateYield:function($,te,ue){return this.delegate={iterator:At($),resultName:te,nextLoc:ue},"next"===this.method&&(this.arg=void 0),Q}},A}},9611:function(St,He,U){function ie(pe,A){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,se){return j.__proto__=se,j})(pe,A)}U.d(He,{Z:function(){return ie}})},7685:function(St,He,U){U.d(He,{Z:function(){return j}});var ie=U(3878),A=U(181),R=U(5267);function j(se,P){return(0,ie.Z)(se)||function pe(se,P){var ye=null==se?null:"undefined"!=typeof Symbol&&se[Symbol.iterator]||se["@@iterator"];if(null!=ye){var Te,Q,y=[],J=!0,G=!1;try{for(ye=ye.call(se);!(J=(Te=ye.next()).done)&&(y.push(Te.value),!P||y.length!==P);J=!0);}catch(Ee){G=!0,Q=Ee}finally{try{!J&&null!=ye.return&&ye.return()}finally{if(G)throw Q}}return y}}(se,P)||(0,A.Z)(se,P)||(0,R.Z)()}},4506:function(St,He,U){U.d(He,{Z:function(){return j}});var ie=U(3878),pe=U(9199),A=U(181),R=U(5267);function j(se){return(0,ie.Z)(se)||(0,pe.Z)(se)||(0,A.Z)(se)||(0,R.Z)()}},4902:function(St,He,U){U.d(He,{Z:function(){return se}});var ie=U(907),A=U(9199),R=U(181);function se(P){return function pe(P){if(Array.isArray(P))return(0,ie.Z)(P)}(P)||(0,A.Z)(P)||(0,R.Z)(P)||function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(St,He,U){function ie(pe){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(pe)}U.d(He,{Z:function(){return ie}})},181:function(St,He,U){U.d(He,{Z:function(){return pe}});var ie=U(907);function pe(A,R){if(A){if("string"==typeof A)return(0,ie.Z)(A,R);var j=Object.prototype.toString.call(A).slice(8,-1);if("Object"===j&&A.constructor&&(j=A.constructor.name),"Map"===j||"Set"===j)return Array.from(A);if("Arguments"===j||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j))return(0,ie.Z)(A,R)}}},5724:function(St,He,U){U.d(He,{Z:function(){return j}});var ie=U(1120),pe=U(9611),R=U(5647);function j(se){var P="function"==typeof Map?new Map:void 0;return j=function(y){if(null===y||!function A(se){return-1!==Function.toString.call(se).indexOf("[native code]")}(y))return y;if("function"!=typeof y)throw new TypeError("Super expression must either be null or a function");if(void 0!==P){if(P.has(y))return P.get(y);P.set(y,J)}function J(){return(0,R.Z)(y,arguments,(0,ie.Z)(this).constructor)}return J.prototype=Object.create(y.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),(0,pe.Z)(J,y)},j(se)}}},function(St){St(St.s=546)}]);